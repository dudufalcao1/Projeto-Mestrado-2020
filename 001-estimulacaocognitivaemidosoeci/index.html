<!DOCTYPE html><html><head><meta charset="utf-8">
<script>
function decbin(L, a){var d=new Array(128),b=0,X=[10,13,39,92],c,e=0;for(;128>b;)d[b]=b++;for(;e<4;++e){c=X[e];b=a.charCodeAt(e);d[b]=c;d[c]=b};a=a.substr(4).replace(/\uFFFD/g,'\0');for(var f=new Uint8ClampedArray(L),c=0,g=d[a.charCodeAt(7)],h=0,e=0,k=a.length;e<k;++h,++c)bm=d[a.charCodeAt(e++)],f[h]=bm|(g>>c&1)<<7,6==c&&(e++,g=d[a.charCodeAt(e+7)],c=-1);return f;}
var FS={FILE:{"plugins/loading.json":{"assets":["img/loading.gif","img/logos/freire.png","img/loadingGirl.png"],"scripts":["screens/loading/loading.js"],"priority":1},"plugins/IronBucket.json":{"assets":["screens/ironbucket/login.html","img/SmallLogo.png","img/Who.png","img/askUserGirl.png","img/ironbucket_class.png","img/EscriboSide_Logo.png"],"scripts":["js/IronBucket.js"],"priority":0},"SOL/screens.json":{"screens":[{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_241249.png","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":228},"name":"Tela 21","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string","propertyName":"externalSceneURL","__uid":229},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean","propertyName":"editorSnapEnabled","__uid":231},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"./resources/1280x720/4a72c17317495db36bfe31f89c86251c.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","sprite2357":"./resources/600x600/fbca09feaba4cb49797533f893966ed6.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":237},"bgSound":"bgSound","__uid":238},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"bgSound","__uid":236},"bgSound":"openingSound","__uid":239},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":234},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21,"propertyName":"visible","__uid":235},"__uid":240},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":233},"__uid":241},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"},"__uid":242},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8,"__$uid":243},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["screen.nextScreen()"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite2357","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":603.22088913493,"y":329.83352402221,"priority":7,"GUID":"2saqqqd504-f0v0v1fjaz-257alnsyzhc","sprite.scale.y":1.8873282101538,"sprite.scale.x":1.8873282101538,"__$uid":244},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"__$uid":245},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7,"__$uid":246},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"__$uid":247},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]},"__$uid":248},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]},"__$uid":249},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":232},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":250},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[],"__$uid":251}],"imageTitles":[],"USID":"132d4f2c-f1a8-40a2-9bf6-223921ab316c","imgTitles":{"./resources/1280x720/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","./resources/600x600/baf243696044b9e2d7c7d5c14f8a4df7.png":"leão","./resources/600x600/0498c684e40e2107d181d88a3a6a1a20.png":"soldado","./resources/600x600/aa9f140831d4ab5509edaa23f30c4033.png":"elefante","./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png":"bg5","./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png":"ECI","./resources/1280x720/f2d94904fc28f9c776dd6d6850e76a6c.png":"bg2","./resources/600x600/ce8dd9925f2c0d748058ab90a09c04d6.png":"bt_entendi","./resources/1280x720/4a72c17317495db36bfe31f89c86251c.png":"bg1","./resources/600x600/fbca09feaba4cb49797533f893966ed6.png":"Capa"}},{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_241169.png","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":98},"name":"Tela 21","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string","propertyName":"externalSceneURL","__uid":99},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean","propertyName":"editorSnapEnabled","__uid":101},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"./resources/1280x720/f2d94904fc28f9c776dd6d6850e76a6c.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","sprite36":"./resources/600x600/ce8dd9925f2c0d748058ab90a09c04d6.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":107},"bgSound":"bgSound","__uid":108},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"bgSound","__uid":106},"bgSound":"openingSound","__uid":109},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":104},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21,"propertyName":"visible","__uid":105},"__uid":110},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":103},"__uid":111},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"},"__uid":112},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8,"__$uid":113},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["screen.nextScreen()"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite36","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":604.93221581991,"y":653.65426878756,"priority":7,"GUID":"o1rv2dy2ts-1f68tmbr0nn-20bcqr5h687","__$uid":114,"sprite.scale.y":0.66540433114115,"sprite.scale.x":0.66540433114115},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"__$uid":115},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7,"__$uid":116},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":751,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Atenção!\n\nEsta atividade faz parte de Pesquisa do Mestrado Profissional em Psicologia da Saúde. \n\nVocê está realizando-a por ter lido e concordado com o Termo de Consentimento Livre e Esclarecido. ","x":244.64951935061,"y":40,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":40,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#ffffff","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"beginningNClick","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":3,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"azwxq2hxbo-1zcqt50wh9m-fubo3vo8fy","$word":"__$word","onClick":[],"__$uid":117},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"__$uid":118},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]},"__$uid":119},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]},"__$uid":120},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":102},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":121},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[],"__$uid":122}],"imageTitles":[],"USID":"1fd6830f-d178-4f32-9949-ddb7ba07e607","imgTitles":{"./resources/1280x720/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","./resources/600x600/baf243696044b9e2d7c7d5c14f8a4df7.png":"leão","./resources/600x600/0498c684e40e2107d181d88a3a6a1a20.png":"soldado","./resources/600x600/aa9f140831d4ab5509edaa23f30c4033.png":"elefante","./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png":"bg5","./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png":"ECI","./resources/1280x720/f2d94904fc28f9c776dd6d6850e76a6c.png":"bg2","./resources/600x600/ce8dd9925f2c0d748058ab90a09c04d6.png":"bt_entendi"}},{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_241176.png","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":365},"name":"Tela 22","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string","propertyName":"externalSceneURL","__uid":366},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean","propertyName":"editorSnapEnabled","__uid":368},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","sprite1751":"./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png","sprite299":"./resources/600x600/3789f04b95423e56816c906a8e6cffc8.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":374},"bgSound":"bgSound","__uid":375},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"bgSound","__uid":373},"bgSound":"openingSound","__uid":376},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":371},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21,"propertyName":"visible","__uid":372},"__uid":377},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":370},"__uid":378},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"},"__uid":379},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8,"__$uid":380},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite1751","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":270.59809688486,"y":436.84051679046,"priority":7,"GUID":"23g07j9y3cr-1mp2kl3ad5t-2707ra0pehd","sprite.scale.y":1.0027840272544,"sprite.scale.x":1.0027840272544,"__$uid":381},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["screen.nextScreen()"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite299","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":844.88729476011,"y":637.04702736189,"priority":7,"GUID":"koygf0bphn-ammt2r90uc-lsvtksppiz","__$uid":382,"sprite.scale.y":0.45332376710945,"sprite.scale.x":0.45332376710945},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"__$uid":383},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7,"__$uid":384},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":751,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Olá!\n\nMeu nome é ECÍ, vamos começar agora uma viagem pelo Brasil! \n\nVamos relembrar alguns pontos turísticos, comidas e algumas tradições que já vimos ou vivenciamos.\n\n Vamos lá?","x":493.64951935061,"y":121,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":30,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#ffffff","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"beginningNClick","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":2,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"azwxq2hxbo-1zcqt50wh9m-fubo3vo8fy","$word":"__$word","onClick":[],"__$uid":385},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"__$uid":386},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]},"__$uid":387},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]},"__$uid":388},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":369},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":389},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[],"__$uid":390}],"imageTitles":[],"USID":"219996ab-d251-4b76-a057-02befa299d2c","imgTitles":{"./resources/1280x720/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","./resources/600x600/baf243696044b9e2d7c7d5c14f8a4df7.png":"leão","./resources/600x600/0498c684e40e2107d181d88a3a6a1a20.png":"soldado","./resources/600x600/aa9f140831d4ab5509edaa23f30c4033.png":"elefante","./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png":"bg5","./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png":"ECI","./resources/600x600/3789f04b95423e56816c906a8e6cffc8.png":"bt_comecar"}},{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_292753.png","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":3454},"name":"Tela 22","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string","propertyName":"externalSceneURL","__uid":3455},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean","propertyName":"editorSnapEnabled","__uid":3457},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"./resources/4a72c17317495db36bfe31f89c86251c.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","sprite1828":"./resources/e41d4d66db3403e72e90dc29fafac6bd.png","sprite2471":"./resources/1150839e24ebeff29e355676bf015ee4.png","sprite3259":"./resources/1150839e24ebeff29e355676bf015ee4.png","sprite3273":"./resources/1150839e24ebeff29e355676bf015ee4.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":3463},"bgSound":"bgSound","__uid":3464},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"bgSound","__uid":3462},"bgSound":"openingSound","__uid":3465},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":3460},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21,"propertyName":"visible","__uid":3461},"__uid":3466},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":3459},"__uid":3467},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"},"__uid":3468},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8,"__$uid":3469},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite1828","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":1116.312041791281,"y":521.8761441200986,"priority":7,"GUID":"1a4rt1l7adi-874p4yvalp-27o0g6lizqn","__$uid":3470,"sprite.scale.y":0.7419951365241509,"sprite.scale.x":0.7419951365241509},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite2471","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":180.8329073380794,"y":642.2445014812872,"priority":7,"GUID":"1yewahhostb-1jw515vs30f-z04q6qp0wd","__$uid":3471},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite3259","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":783.3124278974116,"y":639.8397178210216,"priority":7,"GUID":"lmoyrx49qp-17nqa89igdr-1apuuabfvqz","__$uid":3472},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite3273","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":485.858786207443,"y":642.5943501231428,"priority":7,"GUID":"2iakbeywrc-15ec3lbgraa-nl43rqlknk","__$uid":3473},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"__$uid":3474},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7,"__$uid":3475},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":1156,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Nossa primeira tradição é uma das mais antigas do Brasil e Pernambuco é o Estado com a maior festa do País nessa época. \n\nNesta época do ano, as pessoas se fantasiam, troças e blocos saem nas ruas ao som de orquestra de instrumentos de sopro.\nTambém é comum bailes em clubes com orquestras de por e corda.\n\nDe qual tradição estou falando?","x":55.64951935060998,"y":26,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":40,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"beginningNClick","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"azwxq2hxbo-1zcqt50wh9m-fubo3vo8fy","$word":"__$word","onClick":[],"__$uid":3476},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Carnaval","x":76.20436486595281,"y":604.0858417593895,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"click","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":1,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"5gkjglg2qt-10jendp9ows-10o14sjlahg","__$uid":3477,"$word":"__$word","onClick":["checkRight()"]},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"São João","x":678.4951804989687,"y":602.280454495973,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"click","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"ykoas3ptob-1en2k3wtkdq-3wxaax2h6k","__$uid":3478,"$word":"__$word","onClick":["checkWrong()"]},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Natal","x":422.4708812644893,"y":606.2798245888744,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"click","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"dsxepqpbe2-24m00rugn2z-2gd76the8ue","__$uid":3479,"$word":"__$word","onClick":["checkWrong()"]},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"__$uid":3480},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]},"__$uid":3481},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]},"__$uid":3482},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":3458},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":3483},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[],"__$uid":3484}],"imageTitles":[],"USID":"4c52e25a-f828-436f-9dbc-ecab844b4aa0","imgTitles":{"./resources/1280x720/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","./resources/600x600/baf243696044b9e2d7c7d5c14f8a4df7.png":"leão","./resources/600x600/0498c684e40e2107d181d88a3a6a1a20.png":"soldado","./resources/600x600/aa9f140831d4ab5509edaa23f30c4033.png":"elefante","./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png":"bg5","./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png":"ECI","./resources/600x600/3789f04b95423e56816c906a8e6cffc8.png":"bt_comecar","./resources/4a72c17317495db36bfe31f89c86251c.png":"bg1","./resources/e41d4d66db3403e72e90dc29fafac6bd.png":"ECI doubt","./resources/1150839e24ebeff29e355676bf015ee4.png":"bt_rosa"}},{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_292787.png","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":4131},"name":"Tela 20","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string","propertyName":"externalSceneURL","__uid":4132},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean","propertyName":"editorSnapEnabled","__uid":4134},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"./resources/1280x720/4a72c17317495db36bfe31f89c86251c.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","sprite1907":"./resources/600x600/8051ec2db24750fb05d923409dee7134.png","sprite3737":"./resources/fb88cc52c97eaa99a89771b2507ecf5d.png","sprite4012":"./resources/d064615893946b4e42a76d3da762e8a9.png","sprite4105":"./resources/df95c1d85159ba5846b436b6bf172626.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":4140},"bgSound":"bgSound","__uid":4141},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"bgSound","__uid":4139},"bgSound":"openingSound","__uid":4142},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":4137},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21,"propertyName":"visible","__uid":4138},"__uid":4143},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":4136},"__uid":4144},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"},"__uid":4145},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8,"__$uid":4146},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Galo","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["checkRight()"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite1907","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":178.19201968935,"y":605.64276308463,"priority":7,"GUID":"waegz4idwc-ahyl9err7z-b7l2wt9icj","sprite.scale.y":0.37102182123013,"sprite.scale.x":0.37102182123013,"__$uid":4147},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["checkWrong()"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite4012","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":647.73155078278,"y":598.13703237468,"priority":7,"GUID":"3qwvcqn51t-1plvx7sk6rs-jh63s119ww","__$uid":4148,"sprite.scale.y":0.3046303544223229,"sprite.scale.x":0.3046303544223229},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["checkWrong()"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite4105","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":1095.3542291907,"y":602.70066988954,"priority":7,"GUID":"2fu1x9e7i94-1kjlshn1b0a-ky4j0xh7fc","__$uid":4149,"sprite.scale.y":0.14749760045239188,"sprite.scale.x":0.14749760045239188},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite3737","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":638.9272274494126,"y":96.76817518238039,"priority":7,"GUID":"ko9yrfyu8e-2aya6m5vddy-14uve0p4mka","__$uid":4150,"sprite.scale.y":1.3986188255694518,"sprite.scale.x":1.3986188255694518,"rotation":-0.1354774474631283},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"__$uid":4151},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7,"__$uid":4152},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":983,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Tradicional bloco carnavalesco.\n\nConsiderado o maior do mundo.\n\nDesfila durante o carnaval do Recife. ","x":242.64951935060998,"y":170,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"beginningNClick","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"azwxq2hxbo-1zcqt50wh9m-fubo3vo8fy","$word":"__$word","onClick":[],"__$uid":4153},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"__$uid":4154},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]},"__$uid":4155},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]},"__$uid":4156},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":4135},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":4157},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[],"__$uid":4158}],"imageTitles":[],"USID":"ac6ef0d1-2ce7-440d-897e-a4b7c0196d0f","imgTitles":{"./resources/1280x720/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","./resources/600x600/baf243696044b9e2d7c7d5c14f8a4df7.png":"leão","./resources/600x600/0498c684e40e2107d181d88a3a6a1a20.png":"soldado","./resources/600x600/aa9f140831d4ab5509edaa23f30c4033.png":"elefante","./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png":"bg5","./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png":"ECI","./resources/1280x720/f2d94904fc28f9c776dd6d6850e76a6c.png":"bg2","./resources/600x600/ce8dd9925f2c0d748058ab90a09c04d6.png":"bt_entendi","./resources/1280x720/4a72c17317495db36bfe31f89c86251c.png":"bg1","./resources/600x600/8051ec2db24750fb05d923409dee7134.png":"Galo","./resources/600x600/43a490fbfe078a975436769b99d66ded.png":"sem nome","./resources/600x600/d872a13521dd1ad77b73e24993a13d47.png":"peixe","./resources/fb88cc52c97eaa99a89771b2507ecf5d.png":"oqueé","./resources/d064615893946b4e42a76d3da762e8a9.png":"fogueira","./resources/df95c1d85159ba5846b436b6bf172626.png":"terra"}},{"CLAZZ":"framework.Phaser","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":1107},"name":"Quiz","GUID":"20cea0d2-f95c-419f-b1bd-7b75aad64c7e","assets":{"bg":"./resources/4a72c17317495db36bfe31f89c86251c.png","btn_option":"common-imgs-etapa/btn_option.png","btn_option_in":"common-imgs-etapa/btn_option_in.png","btn_confirm":"common-imgs-etapa/btn_confirm.png","question_bg":"common-imgs-etapa/quiz_main.png","clickSound":"common-audio/SFX/1Peca.mp3","rightSound":"common-audio/SFX/4Acerto.mp3","wrongSound":"common-audio/SFX/4Erro.mp3","timeEnded":"common-audio/SFX/1Atencao.mp3","bgSound":"","introSpeech":"","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png"},"logo":"true","editorPauseTime":100,"events":{"create":["*killAllSounds()","*playAudio(\"bgSound\", true)","*playAudio(\"introSpeech\")"],"onTimeEnded":["this.timeEnded = 1","*playAudio(\"timeEnded\")","*endGame()"],"onEndGame":["if:this.timeEnded","return: *onWrong(this.questionTitle)"],"setScreenQuestion":["this.questionTitle = arguments[0]"],"countDown":["*playAudio(\"hurryUp\",true)"]},"values":{"screen.makeTTSSpeech":true,"@screen.makeTTSSpeech":{"label":" ","type":"boolean","priority":10,"menu":"Pergunta","text":"Ler Pergunta Automaticamente","propertyName":"screen\\_makeTTSSpeech","__uid":1139}},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":24,"propertyName":"bgSound","__uid":1138},"bgSound":"bgSound","__uid":1140},{"introSpeech":"introSpeech","@introSpeech":{"label":"Áudio de Narrativa","type":"audio","tags":"@audio, @mp3","priority":9,"menu":"Pergunta","propertyName":"introSpeech","__uid":1137},"__uid":1141},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":22,"tags":"@sprite, fullscreen, bg","maxWidth":1024,"maxHeight":768,"propertyName":"sprite","__uid":1136},"__uid":1142},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"question_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":23,"tags":"@sprite, fullscreen, bg, transparente","maxWidth":1024,"maxHeight":768,"propertyName":"sprite","__uid":1135},"__uid":1143},{"CLAZZ":"framework.Phaser.Button","sprite":"btn_confirm","sprite.visible":false,"sprite.anchor.setTo":0.5,"x":900,"y":740,"events":{"onSelectOption":"sprite.visible = true"},"onClick":"*endGame()","__uid":1144},{"CLAZZ":"framework.Phaser.Label","text":"Em qual mês acontece o carnaval?","@text":{"label":"Pergunta","type":"string","multiline":true,"priority":1,"menu":"Pergunta","propertyName":"text","__uid":1130},"align":"left","x":500,"y":90,"wordWrapWidth":850,"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":2,"min":6,"max":100,"menu":"Pergunta","propertyName":"size","__uid":1132},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":3,"menu":"Pergunta","propertyName":"color","__uid":1133},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4,"menu":"Pergunta","propertyName":"strokeThickness","__uid":1134},"sprite.anchor.setTo":[0.5,0],"events":{"create":["*setScreenQuestion(this.text._text)","if: this.screen.makeTTSSpeech","this.screen.say(this.text._text)"]},"__uid":1145},{"CLAZZ":"framework.Phaser.Label","text":"PERGUNTA","align":"left","x":130,"y":35,"size":40,"color":"white","stroke":"#3C96A0","strokeThickness":0,"sprite.anchor.setTo":0.5,"__uid":1146},{"class":"Alternative","text":"Setembro","@text":{"label":"Alternativa 1","type":"string","multiline":true,"priority":1,"menu":"Alternativas","propertyName":"text","__uid":1125},"x":130,"y":300,"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":100,"menu":"Alternativas","propertyName":"size","__uid":1126},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":4,"menu":"Alternativas","propertyName":"color","__uid":1127},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":5,"menu":"Alternativas","propertyName":"strokeThickness","__uid":1128},"isCorrect":false,"@isCorrect":{"label":" ","type":"boolean","priority":2,"text":"A resposta acima está correta","menu":"Alternativas","propertyName":"isCorrect","__uid":1129},"__uid":1147},{"class":"Alternative","text":"Dezembro","@text":{"label":"Alternativa 2","type":"string","multiline":true,"priority":6,"menu":"Alternativas","propertyName":"text","__uid":1120},"x":130,"y":400,"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":8,"min":7,"max":100,"menu":"Alternativas","propertyName":"size","__uid":1121},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":9,"menu":"Alternativas","propertyName":"color","__uid":1122},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":10,"menu":"Alternativas","propertyName":"strokeThickness","__uid":1123},"isCorrect":false,"@isCorrect":{"label":" ","type":"boolean","priority":7,"text":"A resposta acima está correta","menu":"Alternativas","propertyName":"isCorrect","__uid":1124},"__uid":1148},{"class":"Alternative","text":"Fevereiro","@text":{"label":"Alternativa 3","type":"string","multiline":true,"priority":11,"menu":"Alternativas","propertyName":"text","__uid":1115},"x":130,"y":500,"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":13,"min":6,"max":100,"menu":"Alternativas","propertyName":"size","__uid":1116},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":14,"menu":"Alternativas","propertyName":"color","__uid":1117},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":15,"menu":"Alternativas","propertyName":"strokeThickness","__uid":1118},"isCorrect":true,"@isCorrect":{"label":" ","type":"boolean","priority":12,"text":"A resposta acima está correta","menu":"Alternativas","propertyName":"isCorrect","__uid":1119},"__uid":1149},{"class":"Alternative","text":"Junho","@text":{"label":"Alternativa 4","type":"string","multiline":true,"priority":16,"menu":"Alternativas","propertyName":"text","__uid":1109},"x":130,"y":600,"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":18,"min":6,"max":100,"menu":"Alternativas","propertyName":"size","__uid":1111},"priority":10,"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":19,"menu":"Alternativas","propertyName":"color","__uid":1112},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":20,"menu":"Alternativas","propertyName":"strokeThickness","__uid":1113},"isCorrect":false,"@isCorrect":{"label":" ","type":"boolean","priority":17,"text":"A resposta acima está correta","menu":"Alternativas","propertyName":"isCorrect","__uid":1114},"__uid":1150},{"CLAZZ":"entities.Timer","x":950,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":21,"propertyName":"time","__uid":1108},"time":60000,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":1151}],"classes":{"Alternative":{"CLAZZ":"framework.Phaser.Label","color":"#727272","stroke":"white","align":"left","sprite.anchor.setTo":[0,0],"wordWrapWidth":850,"components":[{"CLAZZ":"components.MouseInput"}],"events":{"create":["screen.addEntity({\"class\":\"Button\", \"parent\":this, \"isCorrect\":this.isCorrect})"],"onClick":["*playAudio(\"clickSound\")","*onSelectOption( this )"]}},"Button":{"CLAZZ":"framework.Phaser.Bitmap","parent":null,"btn":"btn_option_in","sprite":"btn_option","isCorrect":false,"isSelected":false,"components":[{"CLAZZ":"components.MouseInput"}],"events":{"create":["this.sprite.x = 60","this.sprite.y = this.parent.text.y","btn = this.loadSprite(this.btn)","btn.x = this.sprite.x","btn.y = this.sprite.y"],"onSelectOption":["isSelected = arguments[0] == this.parent","btn.tint = this.isSelected ? 10922239 : 16777215"],"onEndGame":["if: !this.isSelected","return:","if: this.isCorrect","return: this.showRightFeedback()","showWrongFeedback()"],"onClick":["*playAudio(\"clickSound\")","*onSelectOption( this.parent )"],"showRightFeedback":["CALL(\"onRight\",this.screen.questionTitle)","debugger","btn.tint = 1113872","*playAudio(\"rightSound\")","SOL.vars.rightAnswers = (SOL.vars.rightAnswers||0) + 1"],"showWrongFeedback":["CALL(\"onWrong\",this.screen.questionTitle)","btn.tint = 16711680","*playAudio(\"wrongSound\")","SOL.vars.wrongAnswers = (SOL.vars.wrongAnswers||0) + 1"]}}},"imageTitles":[],"thumbnail":".././resources/thumb_292667.png","USID":"5cd31f9b5bb93","imgTitles":{"./resources/1024x768/61e43516ec81049bae627e6bb6802010.png":"Fundo 2","./resources/4a72c17317495db36bfe31f89c86251c.png":"bg1"}},{"CLAZZ":"screens.generic.LevelClear","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":4320},"name":"Tela 14","thumbnail":".././resources/thumb_292792.png","GUID":"64bc0865-bc6a-4498-bd2d-1b3cd8ffec9e","assets":{"bg":"./resources/1024x768/4a72c17317495db36bfe31f89c86251c.png","alpha_bg":"escalada-imgs-etapa/normal-bg-intro.png","bgStarWin":"levelClear-imgs-etapa/normal-painel-telaFinal.png","bgStarLose":"levelClear-imgs-etapa/normal-painel-telaFinal-lose.png","btNextLevel":"levelClear-imgs-etapa/normal-btn_next.png","btNextLevelDeactivated":"levelClear-imgs-etapa/normal-btn_next_grey.png","btPlayAgain":"levelClear-imgs-etapa/normal-btn_replay.png","star":"levelClear-imgs-etapa/normalEstrela-telaFinal.png","star1":"common-audio/star1.mp3","star2":"common-audio/star1.mp3","star3":"common-audio/star1.mp3","levelFailed":"common-audio/levelFailed.mp3","levelClear":"common-audio/levelClear.mp3"},"logo":"true","values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"classes":{"Star":{"sprite":"star","sprite.visible":false,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":10,"sprite.rotation":10,"audio":"star1","components":[{"CLAZZ":"components.AutoScale","enabled":false,"speed":0.1,"target":1.2},{"CLAZZ":"components.Tween","enabled":false,"target":0,"speed":0.04,"property":"rotation"}],"events":{"activateStar":["sprite.visible = true","setAutoScaleEnabled(true)","setTweenEnabled(true)","*playAudio(this.audio)"]}}},"entities":[{"@levelFailed":{"label":"Áudio de Tente Novamente","type":"audio","tags":"@audio, @mp3, levelClear","priority":22,"propertyName":"levelFailed","__uid":4323},"levelFailed":"levelFailed","__uid":4324,"__audio_name_levelFailedlength":7.105306122449},{"@levelClear":{"label":"Áudio de Parabéns","type":"audio","tags":"@audio, @mp3, levelClear","priority":21,"propertyName":"levelClear","__uid":4322},"levelClear":"levelClear","__uid":4325,"__audio_name_levelClearlength":2.899591836734694},{"CLAZZ":"framework.Phaser.FullScreenBitmap","@sprite":{"label":"Imagem de fundo","type":"image","priority":30,"tags":"@sprite,fullscreen,bg","maxWidth":1024,"maxHeight":768,"propertyName":"sprite","__uid":4321},"sprite":"bg","__uid":4326},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","alpha":0.8,"__uid":4327},{"id":"bgStarId","sprite":"bgStarWin","x":-667,"y":125,"sprite.scale.setTo":1.15,"sprite.anchor.setTo":0.5,"components":[{"CLAZZ":"components.AutoPos","speed":0.15,"targetX":640,"targetY":384,"minDelta":0.8,"enabled":false},{"CLAZZ":"components.Bounce","speed":0.01,"intensity":10,"decay":0.98,"iterator":3.141592653589}],"events":{"passed":["setAutoPosEnabled(true)","*playAudio(\"levelClear\")"],"doneMoving":"*activateStars()"},"__uid":4328},{"sprite":"bgStarLose","sprite.scale.setTo":1.15,"sprite.anchor.setTo":0.5,"x":640,"y":-600,"components":[{"CLAZZ":"components.AutoPos","speed":0.15,"targetX":640,"targetY":384,"minDelta":0.8,"enabled":false}],"events":{"failed":["setAutoPosEnabled(true)","*playAudio(\"levelFailed\")"],"doneMoving":["*activateStars()"]},"__uid":4329},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"DORITOS!","id":"scoreText","x":832,"y":505,"size":30,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"sprite.visible=true","updateGrade":"this.setText('Pontos: ' + Math.floor(arguments[0]*10))"},"__uid":4330},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"","id":"scoreText","x":468,"y":505,"size":30,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"sprite.visible=true","updateGrade":["if: this.screen.timeSpend","return: this.setText('Tempo: ' + this.screen.timeSpend)"]},"__uid":4331},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"PARABÉNS!","id":"winText","x":640,"y":180,"size":60,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"SOL.screen.setTimeout(\"*showPassedUINoDelay()\", this.UIDelay, this)","activateStar1":"UIDelay += 1000","activateStar2":"UIDelay += 1000","activateStar3":"UIDelay += 1000"},"__uid":4332},{"CLAZZ":"framework.Phaser.Label","text":"TENTE NOVAMENTE!","id":"loseText","x":640,"y":180,"size":60,"color":"#fff","stroke":"#800","strokeThickness":10,"sprite.visible":false,"events":{"showFailedUI":"sprite.visible=true"},"__uid":4333},{"class":"Star","x":408,"y":360,"audio":"star1","events":{"activateStar1":"activateStar(1)"},"__uid":4334},{"class":"Star","audio":"star2","x":640,"y":335,"events":{"activateStar2":"SOL.screen.setTimeout(\"activateStar(2)\", 1000, this)"},"__uid":4335},{"class":"Star","audio":"star3","x":870,"y":358,"events":{"activateStar3":"SOL.screen.setTimeout(\"activateStar(3)\", 2000, this)"},"__uid":4336},{"CLAZZ":"framework.Phaser.Button","sprite":"btNextLevel","sprite.visible":false,"id":"btnNextLevel","onClick":"SOL.nextScreen()","x":690,"y":549,"events":{"showPassedUINoDelay":"sprite.visible=true"},"__uid":4337},{"CLAZZ":"framework.Phaser.Button","sprite":"btNextLevelDeactivated","sprite.visible":false,"id":"btnNextDeactivated","onClick":"","x":690,"y":549,"events":{"showFailedUI":"sprite.visible=true"},"__uid":4338},{"CLAZZ":"framework.Phaser.Button","sprite":"btPlayAgain","sprite.visible":false,"id":"btnPlayAgain","onClick":"SOL.loadScreen(SOL.screen.levelName)","x":486,"y":549,"canGoBack":true,"events":{"activateStar1":"canGoBack=false","showFailedUI":"sprite.visible=true","showPassedUINoDelay":"sprite.visible=canGoBack"},"__uid":4339}],"imageTitles":[],"USID":"20c3deff-a2c0-41fa-8af8-4719c67c9ebf","imgTitles":{"./resources/1024x768/61e43516ec81049bae627e6bb6802010.png":"Fundo 2","./resources/1024x768/4a72c17317495db36bfe31f89c86251c.png":"bg1"}},{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_292898.png","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":369},"name":"Tela 23","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string","propertyName":"externalSceneURL","__uid":370},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean","propertyName":"editorSnapEnabled","__uid":372},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"./resources/f2d94904fc28f9c776dd6d6850e76a6c.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","sprite1751":"./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png","sprite4933":"./resources/1150839e24ebeff29e355676bf015ee4.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":378},"bgSound":"bgSound","__uid":379},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"bgSound","__uid":377},"bgSound":"openingSound","__uid":380},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":375},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21,"propertyName":"visible","__uid":376},"__uid":381},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":374},"__uid":382},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"},"__uid":383},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8,"__$uid":384},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite1751","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":1297.59809688486,"y":374.84051679046,"priority":7,"GUID":"23g07j9y3cr-1mp2kl3ad5t-2707ra0pehd","sprite.scale.y":1.0027840272544,"sprite.scale.x":1.0027840272544,"__$uid":385,"rotation":-0.2508780246899883},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["screen.nextScreen()"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite4933","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":675.88729476011,"y":620.04702736189,"priority":7,"GUID":"koygf0bphn-ammt2r90uc-lsvtksppiz","sprite.scale.y":0.9479862778263417,"sprite.scale.x":0.9479862778263417,"__$uid":386},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"__$uid":387},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7,"__$uid":388},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":978,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Parabéns!\n\nJá vi que você é um folião, coloquei uma fantasia para brincar o carnaval!\n\nSerá que você consegue descobrir todos os meus enfeites?","x":66.64951935060998,"y":66,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#f6ec00","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"beginningNClick","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":2,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"azwxq2hxbo-1zcqt50wh9m-fubo3vo8fy","$word":"__$word","onClick":[],"__$uid":389},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Vamos lá!","x":589.4701233153681,"y":588.9711347727707,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":40,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"click","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"13adeflcm63-5tu7peymoc-214bdxm24cb","$word":"__$word","onClick":["screen.nextScreen()"],"__$uid":390},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"__$uid":391},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]},"__$uid":392},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]},"__$uid":393},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":373},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":394},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[],"__$uid":395}],"imageTitles":[],"USID":"679535e2-9ba5-41dd-9b39-254704545662","imgTitles":{"./resources/1280x720/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","./resources/600x600/baf243696044b9e2d7c7d5c14f8a4df7.png":"leão","./resources/600x600/0498c684e40e2107d181d88a3a6a1a20.png":"soldado","./resources/600x600/aa9f140831d4ab5509edaa23f30c4033.png":"elefante","./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png":"bg5","./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png":"ECI","./resources/600x600/3789f04b95423e56816c906a8e6cffc8.png":"bt_comecar","./resources/f2d94904fc28f9c776dd6d6850e76a6c.png":"bg2","./resources/1150839e24ebeff29e355676bf015ee4.png":"bt_rosa"}},{"CLAZZ":"framework.Phaser","@name":{"label":"Nome da Tela","type":"string","priority":-1,"propertyName":"name","__uid":1373},"name":"Tela 16","GUID":"41DB30FB-BD68-464B-BCA5-CC222F2F9261","thumbnail":".././resources/thumb_293099.png","assets":{"timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","tela":"","level":"./resources/ae88c081beed5d5155181379eb99f578.png","textBG":"","wrongAnswers":"common-audio/SFX/3Erro.mp3","rightAnswers":"common-audio/SFX/3Acerto.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timeEnded":"common-audio/SFX/1Atencao.mp3","bg":"./resources/1280x720/628cb6dcbde0372959ccf8a7b62fc0ca.png","cellBGScreen":"common-imgs/greydot.png","countBg":"erros-imgs-ipdh/erros_contagem.png","bgSound":"","introSpeech":"","sprite923":"./resources/72c4ea14711de40a140b5294044a50fa.png","sprite1254":"./resources/24741b82c7495f21658031b420a80b80.png","sprite1332":"./resources/a4d9c537d3d7773007a83ecdab229b4f.png"},"logo":"true","events":{"onEndGame":["SOL.vars.rightAnswers = (SOL.vars.rightAnswers||0) + (this.totalPoints-this.pointsLeft)","SOL.vars.wrongAnswers = (SOL.vars.wrongAnswers||0) + (this.pointsLeft)"],"onTimeEnded":"endGame()","on0Points":"endGame()","create":["totalPoints=pointsLeft","*killAllSounds()","*playAudio(\"bgSound\", true)","*playAudio(\"introSpeech\")"]},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":50,"propertyName":"bgSound","__uid":1388},"bgSound":"bgSound","__uid":1391},{"introSpeech":"introSpeech","@introSpeech":{"label":"Áudio de Narrativa","type":"audio","tags":"@audio, @mp3","priority":9,"menu":"Pergunta","propertyName":"introSpeech","__uid":1387},"__uid":1392},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":1386},"__uid":1393},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"cellBGScreen","x":83,"y":5,"width":1114,"height":720,"__uid":1394},{"class":"ErrosBackground","CLAZZ":"framework.Phaser.Bitmap","sprite":"level","@sprite":{"label":"Imagem base","type":"image","priority":10,"tags":"@sprite,erros,bg","maxWidth":547,"maxHeight":710,"propertyName":"sprite","__uid":1385},"id":"level","x":645,"y":5,"__uid":1395},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"tela","@sprite":{"label":"Tablet","type":"image","priority":35,"tags":"@sprite,erros,gui,tablet","menu":"Elementos de Cenário","propertyName":"sprite","__uid":1384},"components":[{"CLAZZ":"components.MouseInput","enabled":false}],"x":83,"y":0,"__uid":1396},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"tela","@sprite":{"label":"Tablet","type":"image","priority":35,"tags":"@sprite,erros,gui,tablet","menu":"Elementos de Cenário","propertyName":"sprite","__uid":1383},"components":[{"CLAZZ":"components.MouseInput","enabled":false}],"x":640,"y":0,"__uid":1397},{"CLAZZ":"framework.Phaser.Bitmap","pointsLeft":1,"$word":"title","title":"erro","components":[{"CLAZZ":"components.MouseInput"},{"CLAZZ":"components.Tween","speed":0.15,"enabled":false,"target":1},{"CLAZZ":"components.ZSort","z":1},{"CLAZZ":"components.Bounce","speed":0.1,"decay":0.985,"property":"rotation","minIntensity":0.2}],"events":{"onMouseClick":["this.screen.pointsLeft -= pointsLeft","pointsLeft = 0","*onPoint()","CALL(\"on\" + this.screen.pointsLeft + \"Points\")","*onRight(this)","this.state = \"found\"","setMouseInputEnabled(false)","if : !this.screen.hideErros","this.callAnimation()"],"callAnimation":["Tween.enabled=1","bounce(0.5)"],"onEndGame":["if: this.state != \"found\"","return: *onWrong(this)"],"create":["if: this.screen.editor","ZSort.enabled = false","this.sprite.alpha = this.screen.editor?1:this.sprite.alpha","this.screen.pointsLeft += 1","this.screen.addEntity( {\"class\":\"ErroMirror\", \"sprite\":this.sprite.key,\"mirrorX\":this.x,\"mirrorY\":this.y, \"parentRot\":this.rotation, \"parentScale\":this.sprite.scale.x, \"parent\":this} )"]},"sprite.alpha":0.001,"sprite.anchor.setTo":0.5,"$marker":"ERRO","$label":"Erros","priority":15,"$moveable":true,"$transform":true,"x":915.0842843685,"y":154.54464034322996,"type":"Entity","sprite":"sprite923","sprite.inputHandler.priorityID":1,"@sprite":{"type":"image","unique":true,"label":"Imagem do Erro","maxWidth":300,"maxHeight":300},"__class":"Erro","sprite.scale.y":0.5802550074842675,"sprite.scale.x":0.5802550074842675,"__$uid":1398},{"CLAZZ":"framework.Phaser.Bitmap","pointsLeft":1,"$word":"title","title":"erro","components":[{"CLAZZ":"components.MouseInput"},{"CLAZZ":"components.Tween","speed":0.15,"enabled":false,"target":1},{"CLAZZ":"components.ZSort","z":1},{"CLAZZ":"components.Bounce","speed":0.1,"decay":0.985,"property":"rotation","minIntensity":0.2}],"events":{"onMouseClick":["this.screen.pointsLeft -= pointsLeft","pointsLeft = 0","*onPoint()","CALL(\"on\" + this.screen.pointsLeft + \"Points\")","*onRight(this)","this.state = \"found\"","setMouseInputEnabled(false)","if : !this.screen.hideErros","this.callAnimation()"],"callAnimation":["Tween.enabled=1","bounce(0.5)"],"onEndGame":["if: this.state != \"found\"","return: *onWrong(this)"],"create":["if: this.screen.editor","ZSort.enabled = false","this.sprite.alpha = this.screen.editor?1:this.sprite.alpha","this.screen.pointsLeft += 1","this.screen.addEntity( {\"class\":\"ErroMirror\", \"sprite\":this.sprite.key,\"mirrorX\":this.x,\"mirrorY\":this.y, \"parentRot\":this.rotation, \"parentScale\":this.sprite.scale.x, \"parent\":this} )"]},"sprite.alpha":0.001,"sprite.anchor.setTo":0.5,"$marker":"ERRO","$label":"Erros","priority":15,"$moveable":true,"$transform":true,"x":914.6050965320832,"y":442.2637103619015,"type":"Entity","sprite":"sprite1254","sprite.inputHandler.priorityID":1,"@sprite":{"type":"image","unique":true,"label":"Imagem do Erro","maxWidth":300,"maxHeight":300},"__$uid":1399,"__class":"Erro"},{"CLAZZ":"framework.Phaser.Bitmap","pointsLeft":1,"$word":"title","title":"erro","components":[{"CLAZZ":"components.MouseInput"},{"CLAZZ":"components.Tween","speed":0.15,"enabled":false,"target":1},{"CLAZZ":"components.ZSort","z":1},{"CLAZZ":"components.Bounce","speed":0.1,"decay":0.985,"property":"rotation","minIntensity":0.2}],"events":{"onMouseClick":["this.screen.pointsLeft -= pointsLeft","pointsLeft = 0","*onPoint()","CALL(\"on\" + this.screen.pointsLeft + \"Points\")","*onRight(this)","this.state = \"found\"","setMouseInputEnabled(false)","if : !this.screen.hideErros","this.callAnimation()"],"callAnimation":["Tween.enabled=1","bounce(0.5)"],"onEndGame":["if: this.state != \"found\"","return: *onWrong(this)"],"create":["if: this.screen.editor","ZSort.enabled = false","this.sprite.alpha = this.screen.editor?1:this.sprite.alpha","this.screen.pointsLeft += 1","this.screen.addEntity( {\"class\":\"ErroMirror\", \"sprite\":this.sprite.key,\"mirrorX\":this.x,\"mirrorY\":this.y, \"parentRot\":this.rotation, \"parentScale\":this.sprite.scale.x, \"parent\":this} )"]},"sprite.alpha":0.001,"sprite.anchor.setTo":0.5,"$marker":"ERRO","$label":"Erros","priority":15,"$moveable":true,"$transform":true,"x":1107.7267087727107,"y":392.1689163390789,"type":"Entity","sprite":"sprite1332","sprite.inputHandler.priorityID":1,"@sprite":{"type":"image","unique":true,"label":"Imagem do Erro","maxWidth":300,"maxHeight":300},"__$uid":1400,"__class":"Erro","sprite.scale.y":1.351953987289178,"sprite.scale.x":1.351953987289178,"rotation":0.039607112908187525},{"$isMarker":true,"$marker":"ERRO","$label":"Erros","priority":15,"$moveable":true,"$transform":true,"x":800,"y":400,"class":"Erro","type":"Entity","sprite":"imgDefault","sprite.inputHandler.priorityID":1,"@sprite":{"type":"image","unique":true,"label":"Imagem do Erro","maxWidth":300,"maxHeight":300},"__$uid":1401},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"textBG","sprite.anchor.setTo":[0.5,0],"@sprite":{"label":"Caixa de texto","type":"image","priority":32,"tags":"@sprite,gui,pergunta","menu":"Elementos de Cenário","propertyName":"sprite","__uid":1381},"id":"texto","x":640,"y":-160,"__uid":1402},{"sprite":"feedback","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.2,"events":{"onPoint":["*playAudio(\"rightAnswers\")","sprite.animations.play(\"right\")","sprite.alpha = 1","this.sprite.x = this.screen.game.input.x","this.sprite.y = this.screen.game.input.y"],"onMiss":["sprite.animations.play(\"wrongFast\")","*playAudio(\"wrongAnswers\")","sprite.alpha = 1","this.sprite.x = this.screen.game.input.x","this.sprite.y = this.screen.game.input.y"],"onrightFrame31":"sprite.alpha = 0","onwrongfastFrame31":"sprite.alpha = 0"},"__uid":1403},{"CLAZZ":"framework.Phaser.Label","@text":{"label":"Pergunta","type":"string","multiline":true,"priority":5,"menu":"Pergunta","propertyName":"text","__uid":1375},"text":"Encontre os 3 ornamentos carnavalescos!","wordWrapWidth":807,"@wordWrapWidth":{"type":"GUID","propertyName":"wordWrapWidth","__uid":1377},"id":"winText","x":659,"y":49,"type":"Entity","$moveable":true,"$transform":true,"priority":6,"size":40,"@size":{"label":"Tamanho da Fonte","type":"int","priority":6,"min":6,"max":100,"menu":"Pergunta","propertyName":"size","__uid":1378},"align":"left","color":"#FFFFFF","@color":{"label":"Cor da Fonte","type":"color","priority":7,"menu":"Pergunta","propertyName":"color","__uid":1379},"stroke":"#000","strokeThickness":2,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":8,"menu":"Pergunta","propertyName":"strokeThickness","__uid":1380},"events":{"create":["if: this.screen.makeTTSSpeech","this.screen.say(this.text._text)"]},"__uid":1404},{"CLAZZ":"framework.Phaser.Button","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"text":"","wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"size":24,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":100},"align":"left","color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"makeSpeech":false,"@makeSpeech":{"label":"Ler Texto Automaticamente","type":"boolean","priority":30},"onClick":"playTextSound()","playTextSound":"*playAudio(this.audioEffect)","audioEffect":null,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"events":{"create":["if: this.makeSpeech","return: this.screen.say(this.text._text,this.playTextSound)"]},"__$uid":1405},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"countBg","x":1170,"y":617,"__uid":1406},{"CLAZZ":"framework.Phaser.Label","text":"","x":1230,"y":680,"size":30,"color":"#000","stroke":"#000","strokeThickness":2,"events":{"create":"setText(\"0/\" + this.screen.pointsLeft)","onPoint":"setText( (this.screen.totalPoints - this.screen.pointsLeft) + \"/\" + this.screen.totalPoints )"},"__uid":1407},{"CLAZZ":"entities.Timer","x":1210,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":25,"propertyName":"time","__uid":1374},"time":180000,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":1408}],"classes":{"ErrosBackground":{"maxWidth":547,"maxHeight":710,"scaleFactor":1,"components":[{"CLAZZ":"components.MouseInput","pixelPerfectClick":true}],"events":{"create":["this.scaleFactor = this.maxWidth/this.sprite.width","this.sprite.width = this.maxWidth","this.sprite.height = this.sprite.height * this.scaleFactor","this.sprite.y = this.y + (this.maxHeight/2 - this.sprite.height/2)","if : this.sprite.height > this.maxHeight","this.scaleHeight()","this.screen.addEntity({\"class\":\"ErrosBGMirror\", \"sprite\":\"level\", \"id\":\"mirrorBG\"})"],"onMouseClick":["*onMiss()"],"scaleHeight":["this.scaleFactor = this.maxHeight/this.sprite.height","this.sprite.height = this.maxHeight","this.sprite.width = this.sprite.width * this.scaleFactor","this.sprite.x = this.x + (this.maxWidth/2 - this.sprite.width/2)","this.sprite.y = 5"]}},"ErrosBGMirror":{"CLAZZ":"framework.Phaser.Bitmap","x":88,"y":5,"maxWidth":547,"maxHeight":710,"scaleFactor":1,"events":{"create":["this.scaleFactor = this.maxWidth/this.sprite.width","this.sprite.width = this.maxWidth","this.sprite.height = this.sprite.height * this.scaleFactor","this.sprite.y = this.y + (this.maxHeight/2 - this.sprite.height/2)","if : this.sprite.height > this.maxHeight","this.scaleHeight()"],"scaleHeight":["this.scaleFactor = this.maxHeight/this.sprite.height","this.sprite.height = this.maxHeight","this.sprite.width = this.sprite.width * this.scaleFactor","this.sprite.x = this.x + (this.maxWidth/2 - this.sprite.width/2)","this.sprite.y = 5"]}},"Erro":{"CLAZZ":"framework.Phaser.Bitmap","pointsLeft":1,"$word":"title","title":"erro","components":[{"CLAZZ":"components.MouseInput"},{"CLAZZ":"components.Tween","speed":0.15,"enabled":false,"target":1},{"CLAZZ":"components.ZSort","z":1},{"CLAZZ":"components.Bounce","speed":0.1,"decay":0.985,"property":"rotation","minIntensity":0.2}],"events":{"onMouseClick":["this.screen.pointsLeft -= pointsLeft","pointsLeft = 0","*onPoint()","CALL(\"on\" + this.screen.pointsLeft + \"Points\")","*onRight(this)","this.state = \"found\"","setMouseInputEnabled(false)","if : !this.screen.hideErros","this.callAnimation()"],"callAnimation":["Tween.enabled=1","bounce(0.5)"],"onEndGame":["if: this.state != \"found\"","return: *onWrong(this)"],"create":["if: this.screen.editor","ZSort.enabled = false","this.sprite.alpha = this.screen.editor?1:this.sprite.alpha","this.screen.pointsLeft += 1","this.screen.addEntity( {\"class\":\"ErroMirror\", \"sprite\":this.sprite.key,\"mirrorX\":this.x,\"mirrorY\":this.y, \"parentRot\":this.rotation, \"parentScale\":this.sprite.scale.x, \"parent\":this} )"]},"sprite.alpha":0.001,"sprite.anchor.setTo":0.5},"ErroMirror":{"CLAZZ":"framework.Phaser.Bitmap","mirrorX":0,"mirrorY":0,"erroXRel":0,"erroYRel":0,"parentRot":0,"screenRotation":0,"parent":0,"id":"MIRROR","sprite.anchor.setTo":0.5,"components":[{"CLAZZ":"components.MouseInput"},{"CLAZZ":"components.Tween","speed":0.15,"enabled":false,"target":0},{"CLAZZ":"components.Bounce","speed":0.1,"decay":0.985,"property":"rotation","minIntensity":0.2}],"events":{"onMouseClick":["this.parent.onMouseClick()","setMouseInputEnabled(false)","if : this.screen.hideErros","this.callAnimation()"],"callAnimation":["Tween.enabled=1","bounce(0.5)"],"create":["this.screenRotation = this.screen.entities.mirrorBG.sprite.rotation","this.sprite.rotation = this.parentRot + this.screenRotation","this.sprite.scale.setTo((this.screen.entities.mirrorBG.sprite.width/this.screen.entities.level.sprite.width) * this.parentScale)","this.erroXRel = this.screen.entities.mirrorBG.sprite.width * (this.mirrorX - this.screen.entities.level.sprite.x)/this.screen.entities.level.sprite.width","this.erroYRel = this.screen.entities.mirrorBG.sprite.height * (this.mirrorY - this.screen.entities.level.sprite.y)/this.screen.entities.level.sprite.height","this.sprite.x = this.screen.entities.mirrorBG.sprite.x + this.erroXRel*Math.cos(this.screenRotation) - this.erroYRel*Math.sin(this.screenRotation)","this.sprite.y = this.screen.entities.mirrorBG.sprite.y + this.erroXRel*Math.sin(this.screenRotation) + this.erroYRel*Math.cos(this.screenRotation)"]}}},"values":{"screen.makeTTSSpeech":true,"@screen.makeTTSSpeech":{"label":" ","type":"boolean","priority":10,"menu":"Pergunta","text":"Ler Pergunta Automaticamente","propertyName":"screen\\_makeTTSSpeech","__uid":1389},"screen.pointsLeft":0,"screen.totalPoints":0,"screen.gameWidth":1280,"screen.gameHeight":720,"screen.hideErros":false,"@screen.hideErros":{"label":"Esconder diferenças","type":"boolean","text":"Esconder diferenças","priority":20,"propertyName":"screen\\_hideErros","__uid":1390}},"USID":"5e5ed4382e5ff","imgTitles":{"./resources/547x710/79550386b9ffa8020914968bc42157e3.png":"egito","./resources/300x300/d3d81b6a6bb0978a4cc66141e2591c0c.png":"flamingo","./resources/300x300/6491d188888246211599170a981e8483.png":"vaso","./resources/300x300/2813bf67e79f86f8ab7070fc1e6790f3.png":"sapo","./resources/300x300/077803c9988260c143de98ee3c92ff91.png":"arara","./resources/6efc4523bace0f9af6611afee86e126c.png":"letreiro","./resources/31aaf112cbb913f77b4bdcb2157badab.png":"letreiro","./resources/1280x720/628cb6dcbde0372959ccf8a7b62fc0ca.png":"Fundo 1","":"","./resources/ae88c081beed5d5155181379eb99f578.png":"ecierros","./resources/72c4ea14711de40a140b5294044a50fa.png":"mascara","./resources/fc8c76cb06f679753767bf093e7f14c4.png":"cachorro","./resources/614bc5fa999fe27d91e6ebacfc69914f.png":"girafa","./resources/7fd0f82c69b0da7980ae79c39ec8bf0c.png":"porquinho","./resources/1fd8f6dd44cb2015f1982f5106d900f8.png":"tartaruga e folhas","./resources/49624ecaa33768bcd4a4276f7eea510a.png":"pato","./resources/24741b82c7495f21658031b420a80b80.png":"erro1","./resources/a4d9c537d3d7773007a83ecdab229b4f.png":"ERRO2capa"}},{"CLAZZ":"framework.Phaser","name":"Tela 18","@name":{"type":"string","label":"Nome da tela","propertyName":"name","__uid":2715},"GUID":"fe126c19-02d3-499e-a5bb-6cac1a271b6c","thumbnail":".././resources/thumb_293113.png","editorPauseTime":1,"assets":{"gid8":"./resources/4a72c17317495db36bfe31f89c86251c.png","gid9":"tangram-imgs-etapa/grid.png","triangle":"tangram-imgs/Piece06.png","spinSprite":"tangram-imgs/rotate.png","flipSprite":"tangram-imgs/mirror.png","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","nextScreenBtn":"common-imgs/btnNext.png","bgSound":"","introSpeech":"","textBG":"","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","takeSound":"common-audio/SFX/6PegandoPedra.mp3","leaveSound":"common-audio/SFX/GeralClick.mp3","spinShape":"common-audio/SFX/6girangopecas.mp3","FeedbackSFX":"common-audio/SFX/6Acerto.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timeEnded":"common-audio/SFX/1Atencao.mp3","sprite769":"./resources/400x400/b5ecc7184ca41a0c56b0e21a3a4ff088.png","sprite770":"./resources/400x400/dcdc8df153dc8e630fd93062ca46521b.png","sprite1247":"./resources/400x400/14dc871a1471f77957b0e178dc157f9b.png","sprite1188":"./resources/400x400/1921243f2d862f4ed0dfe5ea51cd159d.png","sprite1129":"./resources/400x400/ca03d3bcd228c5b1a141893f08bbae9f.png","sprite1070":"./resources/400x400/b8eb231ebea9568e928b4c3d3b32f5f4.png","sprite1011":"./resources/400x400/42dcb4a25bce24c4fd23abd43449c082.png"},"logo":"true","events":{"create":["this.entities.btnNext.sprite.visible = (this.entities.timer == undefined)","*killAllSounds()","*playAudio(\"bgSound\", true)","*playAudio(\"introSpeech\")"],"onTimeEnded":["this.timeEnded = 1","*killAllSounds","*playAudio(\"timeEnded\")"],"onEndGame":["if: this.timeEnded","return: *onWrong(\"Tangram\")","*onRight(\"Tangram\")"]},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":2729},"bgSound":"bgSound","__uid":2732},{"introSpeech":"introSpeech","@introSpeech":{"label":"Áudio de Narrativa","type":"audio","tags":"@audio, @mp3","priority":9,"menu":"Pergunta","propertyName":"introSpeech","__uid":2728},"__uid":2733},{"class":"FullScreenBitmap","sprite":"gid8","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","menu":"Elementos de Cenário","maxWidth":1024,"maxHeight":768,"propertyName":"sprite","__uid":2727},"__uid":2734},{"class":"Grid","id":"grid","TangramGrid.outline":false,"@TangramGrid.outline":{"label":" ","text":"Borda","type":"boolean","menu":"Elementos de Cenário","propertyName":"TangramGrid\\_outline","__uid":2725},"sprite":"gid9","@sprite":{"label":"Grid","removable":false,"type":"image","priority":22,"tags":"@sprite, gui,grid","menu":"Elementos de Cenário","maxWidth":598,"maxHeight":598,"propertyName":"sprite","__uid":2726},"width":598,"height":597,"x":348,"y":737,"components":[{"CLAZZ":"components.TiledAdjust"}],"__uid":2735},{"components":[{"CLAZZ":"components.MouseInput","dragEnabled":true,"useHandCursor":true,"pixelPerfectClick":true,"pixelPerfectAlpha":0.12},{"CLAZZ":"components.UserRotate","spinSprite":"spinSprite","flipSprite":"flipSprite","spinSnap":15},{"CLAZZ":"components.SpriteMap","bounds":"target","autoBounds":false},{"CLAZZ":"components.Tween","speed":0.08}],"rotation":-2.356194490192345,"startX":0,"startY":0,"startRotation":0,"events":{"create":["startX = this.screen.editor ? this.x : Math.random() * 0.6 * this.screen.entities.grid.x + 0.2 * this.screen.entities.grid.x","startY = this.screen.editor ? this.y : Math.random() * 0.6 * this.screen.gameHeight + 0.2 * this.screen.gameHeight","startRotation = this.screen.editor || !this.screen.rotateShapes ? this.rotation : Math.floor(Math.random() * 8) * Math.PI * 0.5","if: !this.screen.rotateShapes && !this.screen.editor","this.UserRotate.enabled = false"],"resetShapes":["this.x = this.sprite.x = this.startX","this.y = this.sprite.y = this.startY","this.rotation = this.sprite.rotation = this.startRotation"],"onMouseDown":["sprite.parent.bringToTop( this.sprite )","*playAudio(\"takeSound\")"],"onMouseUp":["*playAudio(\"leaveSound\")","SpriteMap.onSpriteDirty()","*onVerify()"],"onClickFlip":["SpriteMap.onSpriteDirty()","*onVerify()"],"stopSpinDrag":["SpriteMap.onSpriteDirty()","*onVerify()"],"startSpinDrag":["*playAudio(\"spinShape\")"],"onRight":["screen.setTimeout(\"popPieces()\", 500, this)"],"popPieces":["*playAudio(\"FeedbackSFX\")","setTweenTarget(0)","repeat: 4","screen.addEntity({\"class\":\"Particle\", x:this.sprite.x, y:this.sprite.y, \"sprite\":this.__data.sprite})"]},"sprite.anchor.setTo":0.5,"$marker":"Peça","label":"Peças","$priority":6,"$moveable":true,"type":"Entity","sprite":"sprite769","@sprite":{"type":"image","label":"Imagem da peça","removable":false,"unique":true,"tags":"@sprite,forma, conteúdo","maxWidth":400,"maxHeight":400},"x":704,"y":490,"__$uid":2736,"__class":"Shape","$word":"__$word"},{"components":[{"CLAZZ":"components.MouseInput","dragEnabled":true,"useHandCursor":true,"pixelPerfectClick":true,"pixelPerfectAlpha":0.12},{"CLAZZ":"components.UserRotate","spinSprite":"spinSprite","flipSprite":"flipSprite","spinSnap":15},{"CLAZZ":"components.SpriteMap","bounds":"target","autoBounds":false},{"CLAZZ":"components.Tween","speed":0.08}],"rotation":-2.356194490192345,"startX":0,"startY":0,"startRotation":0,"events":{"create":["startX = this.screen.editor ? this.x : Math.random() * 0.6 * this.screen.entities.grid.x + 0.2 * this.screen.entities.grid.x","startY = this.screen.editor ? this.y : Math.random() * 0.6 * this.screen.gameHeight + 0.2 * this.screen.gameHeight","startRotation = this.screen.editor || !this.screen.rotateShapes ? this.rotation : Math.floor(Math.random() * 8) * Math.PI * 0.5","if: !this.screen.rotateShapes && !this.screen.editor","this.UserRotate.enabled = false"],"resetShapes":["this.x = this.sprite.x = this.startX","this.y = this.sprite.y = this.startY","this.rotation = this.sprite.rotation = this.startRotation"],"onMouseDown":["sprite.parent.bringToTop( this.sprite )","*playAudio(\"takeSound\")"],"onMouseUp":["*playAudio(\"leaveSound\")","SpriteMap.onSpriteDirty()","*onVerify()"],"onClickFlip":["SpriteMap.onSpriteDirty()","*onVerify()"],"stopSpinDrag":["SpriteMap.onSpriteDirty()","*onVerify()"],"startSpinDrag":["*playAudio(\"spinShape\")"],"onRight":["screen.setTimeout(\"popPieces()\", 500, this)"],"popPieces":["*playAudio(\"FeedbackSFX\")","setTweenTarget(0)","repeat: 4","screen.addEntity({\"class\":\"Particle\", x:this.sprite.x, y:this.sprite.y, \"sprite\":this.__data.sprite})"]},"sprite.anchor.setTo":0.5,"$marker":"Peça","label":"Peças","$priority":6,"$moveable":true,"type":"Entity","sprite":"sprite770","@sprite":{"type":"image","label":"Imagem da peça","removable":false,"unique":true,"tags":"@sprite,forma, conteúdo","maxWidth":400,"maxHeight":400},"x":602,"y":489,"sprite.scale.x":1,"__$uid":2737,"__class":"Shape","$word":"__$word"},{"components":[{"CLAZZ":"components.MouseInput","dragEnabled":true,"useHandCursor":true,"pixelPerfectClick":true,"pixelPerfectAlpha":0.12},{"CLAZZ":"components.UserRotate","spinSprite":"spinSprite","flipSprite":"flipSprite","spinSnap":15},{"CLAZZ":"components.SpriteMap","bounds":"target","autoBounds":false},{"CLAZZ":"components.Tween","speed":0.08}],"rotation":-0.7853981633974483,"startX":0,"startY":0,"startRotation":0,"events":{"create":["startX = this.screen.editor ? this.x : Math.random() * 0.6 * this.screen.entities.grid.x + 0.2 * this.screen.entities.grid.x","startY = this.screen.editor ? this.y : Math.random() * 0.6 * this.screen.gameHeight + 0.2 * this.screen.gameHeight","startRotation = this.screen.editor || !this.screen.rotateShapes ? this.rotation : Math.floor(Math.random() * 8) * Math.PI * 0.5","if: !this.screen.rotateShapes && !this.screen.editor","this.UserRotate.enabled = false"],"resetShapes":["this.x = this.sprite.x = this.startX","this.y = this.sprite.y = this.startY","this.rotation = this.sprite.rotation = this.startRotation"],"onMouseDown":["sprite.parent.bringToTop( this.sprite )","*playAudio(\"takeSound\")"],"onMouseUp":["*playAudio(\"leaveSound\")","SpriteMap.onSpriteDirty()","*onVerify()"],"onClickFlip":["SpriteMap.onSpriteDirty()","*onVerify()"],"stopSpinDrag":["SpriteMap.onSpriteDirty()","*onVerify()"],"startSpinDrag":["*playAudio(\"spinShape\")"],"onRight":["screen.setTimeout(\"popPieces()\", 500, this)"],"popPieces":["*playAudio(\"FeedbackSFX\")","setTweenTarget(0)","repeat: 4","screen.addEntity({\"class\":\"Particle\", x:this.sprite.x, y:this.sprite.y, \"sprite\":this.__data.sprite})"]},"sprite.anchor.setTo":0.5,"$marker":"Peça","label":"Peças","$priority":6,"$moveable":true,"type":"Entity","sprite":"sprite1247","@sprite":{"type":"image","label":"Imagem da peça","removable":false,"unique":true,"tags":"@sprite,forma, conteúdo","maxWidth":400,"maxHeight":400},"x":776,"y":388,"__$uid":2738,"__class":"Shape","$word":"__$word"},{"components":[{"CLAZZ":"components.MouseInput","dragEnabled":true,"useHandCursor":true,"pixelPerfectClick":true,"pixelPerfectAlpha":0.12},{"CLAZZ":"components.UserRotate","spinSprite":"spinSprite","flipSprite":"flipSprite","spinSnap":15},{"CLAZZ":"components.SpriteMap","bounds":"target","autoBounds":false},{"CLAZZ":"components.Tween","speed":0.08}],"rotation":0.7853981633974483,"startX":0,"startY":0,"startRotation":0,"events":{"create":["startX = this.screen.editor ? this.x : Math.random() * 0.6 * this.screen.entities.grid.x + 0.2 * this.screen.entities.grid.x","startY = this.screen.editor ? this.y : Math.random() * 0.6 * this.screen.gameHeight + 0.2 * this.screen.gameHeight","startRotation = this.screen.editor || !this.screen.rotateShapes ? this.rotation : Math.floor(Math.random() * 8) * Math.PI * 0.5","if: !this.screen.rotateShapes && !this.screen.editor","this.UserRotate.enabled = false"],"resetShapes":["this.x = this.sprite.x = this.startX","this.y = this.sprite.y = this.startY","this.rotation = this.sprite.rotation = this.startRotation"],"onMouseDown":["sprite.parent.bringToTop( this.sprite )","*playAudio(\"takeSound\")"],"onMouseUp":["*playAudio(\"leaveSound\")","SpriteMap.onSpriteDirty()","*onVerify()"],"onClickFlip":["SpriteMap.onSpriteDirty()","*onVerify()"],"stopSpinDrag":["SpriteMap.onSpriteDirty()","*onVerify()"],"startSpinDrag":["*playAudio(\"spinShape\")"],"onRight":["screen.setTimeout(\"popPieces()\", 500, this)"],"popPieces":["*playAudio(\"FeedbackSFX\")","setTweenTarget(0)","repeat: 4","screen.addEntity({\"class\":\"Particle\", x:this.sprite.x, y:this.sprite.y, \"sprite\":this.__data.sprite})"]},"sprite.anchor.setTo":0.5,"$marker":"Peça","label":"Peças","$priority":6,"$moveable":true,"type":"Entity","sprite":"sprite1188","@sprite":{"type":"image","label":"Imagem da peça","removable":false,"unique":true,"tags":"@sprite,forma, conteúdo","maxWidth":400,"maxHeight":400},"x":485,"y":389,"sprite.scale.x":1,"__$uid":2739,"__class":"Shape","$word":"__$word"},{"components":[{"CLAZZ":"components.MouseInput","dragEnabled":true,"useHandCursor":true,"pixelPerfectClick":true,"pixelPerfectAlpha":0.12},{"CLAZZ":"components.UserRotate","spinSprite":"spinSprite","flipSprite":"flipSprite","spinSnap":15},{"CLAZZ":"components.SpriteMap","bounds":"target","autoBounds":false},{"CLAZZ":"components.Tween","speed":0.08}],"rotation":-2.356194490192345,"startX":0,"startY":0,"startRotation":0,"events":{"create":["startX = this.screen.editor ? this.x : Math.random() * 0.6 * this.screen.entities.grid.x + 0.2 * this.screen.entities.grid.x","startY = this.screen.editor ? this.y : Math.random() * 0.6 * this.screen.gameHeight + 0.2 * this.screen.gameHeight","startRotation = this.screen.editor || !this.screen.rotateShapes ? this.rotation : Math.floor(Math.random() * 8) * Math.PI * 0.5","if: !this.screen.rotateShapes && !this.screen.editor","this.UserRotate.enabled = false"],"resetShapes":["this.x = this.sprite.x = this.startX","this.y = this.sprite.y = this.startY","this.rotation = this.sprite.rotation = this.startRotation"],"onMouseDown":["sprite.parent.bringToTop( this.sprite )","*playAudio(\"takeSound\")"],"onMouseUp":["*playAudio(\"leaveSound\")","SpriteMap.onSpriteDirty()","*onVerify()"],"onClickFlip":["SpriteMap.onSpriteDirty()","*onVerify()"],"stopSpinDrag":["SpriteMap.onSpriteDirty()","*onVerify()"],"startSpinDrag":["*playAudio(\"spinShape\")"],"onRight":["screen.setTimeout(\"popPieces()\", 500, this)"],"popPieces":["*playAudio(\"FeedbackSFX\")","setTweenTarget(0)","repeat: 4","screen.addEntity({\"class\":\"Particle\", x:this.sprite.x, y:this.sprite.y, \"sprite\":this.__data.sprite})"]},"sprite.anchor.setTo":0.5,"$marker":"Peça","label":"Peças","$priority":6,"$moveable":true,"type":"Entity","sprite":"sprite1129","@sprite":{"type":"image","label":"Imagem da peça","removable":false,"unique":true,"tags":"@sprite,forma, conteúdo","maxWidth":400,"maxHeight":400},"x":823,"y":335,"__$uid":2740,"__class":"Shape","$word":"__$word"},{"components":[{"CLAZZ":"components.MouseInput","dragEnabled":true,"useHandCursor":true,"pixelPerfectClick":true,"pixelPerfectAlpha":0.12},{"CLAZZ":"components.UserRotate","spinSprite":"spinSprite","flipSprite":"flipSprite","spinSnap":15},{"CLAZZ":"components.SpriteMap","bounds":"target","autoBounds":false},{"CLAZZ":"components.Tween","speed":0.08}],"rotation":-0.7853981633974483,"startX":0,"startY":0,"startRotation":0,"events":{"create":["startX = this.screen.editor ? this.x : Math.random() * 0.6 * this.screen.entities.grid.x + 0.2 * this.screen.entities.grid.x","startY = this.screen.editor ? this.y : Math.random() * 0.6 * this.screen.gameHeight + 0.2 * this.screen.gameHeight","startRotation = this.screen.editor || !this.screen.rotateShapes ? this.rotation : Math.floor(Math.random() * 8) * Math.PI * 0.5","if: !this.screen.rotateShapes && !this.screen.editor","this.UserRotate.enabled = false"],"resetShapes":["this.x = this.sprite.x = this.startX","this.y = this.sprite.y = this.startY","this.rotation = this.sprite.rotation = this.startRotation"],"onMouseDown":["sprite.parent.bringToTop( this.sprite )","*playAudio(\"takeSound\")"],"onMouseUp":["*playAudio(\"leaveSound\")","SpriteMap.onSpriteDirty()","*onVerify()"],"onClickFlip":["SpriteMap.onSpriteDirty()","*onVerify()"],"stopSpinDrag":["SpriteMap.onSpriteDirty()","*onVerify()"],"startSpinDrag":["*playAudio(\"spinShape\")"],"onRight":["screen.setTimeout(\"popPieces()\", 500, this)"],"popPieces":["*playAudio(\"FeedbackSFX\")","setTweenTarget(0)","repeat: 4","screen.addEntity({\"class\":\"Particle\", x:this.sprite.x, y:this.sprite.y, \"sprite\":this.__data.sprite})"]},"sprite.anchor.setTo":0.5,"$marker":"Peça","label":"Peças","$priority":6,"$moveable":true,"type":"Entity","sprite":"sprite1070","@sprite":{"type":"image","label":"Imagem da peça","removable":false,"unique":true,"tags":"@sprite,forma, conteúdo","maxWidth":400,"maxHeight":400},"x":412,"y":312,"__$uid":2741,"__class":"Shape","$word":"__$word"},{"components":[{"CLAZZ":"components.MouseInput","dragEnabled":true,"useHandCursor":true,"pixelPerfectClick":true,"pixelPerfectAlpha":0.12},{"CLAZZ":"components.UserRotate","spinSprite":"spinSprite","flipSprite":"flipSprite","spinSnap":15},{"CLAZZ":"components.SpriteMap","bounds":"target","autoBounds":false},{"CLAZZ":"components.Tween","speed":0.08}],"rotation":-3.141592653589793,"startX":0,"startY":0,"startRotation":0,"events":{"create":["startX = this.screen.editor ? this.x : Math.random() * 0.6 * this.screen.entities.grid.x + 0.2 * this.screen.entities.grid.x","startY = this.screen.editor ? this.y : Math.random() * 0.6 * this.screen.gameHeight + 0.2 * this.screen.gameHeight","startRotation = this.screen.editor || !this.screen.rotateShapes ? this.rotation : Math.floor(Math.random() * 8) * Math.PI * 0.5","if: !this.screen.rotateShapes && !this.screen.editor","this.UserRotate.enabled = false"],"resetShapes":["this.x = this.sprite.x = this.startX","this.y = this.sprite.y = this.startY","this.rotation = this.sprite.rotation = this.startRotation"],"onMouseDown":["sprite.parent.bringToTop( this.sprite )","*playAudio(\"takeSound\")"],"onMouseUp":["*playAudio(\"leaveSound\")","SpriteMap.onSpriteDirty()","*onVerify()"],"onClickFlip":["SpriteMap.onSpriteDirty()","*onVerify()"],"stopSpinDrag":["SpriteMap.onSpriteDirty()","*onVerify()"],"startSpinDrag":["*playAudio(\"spinShape\")"],"onRight":["screen.setTimeout(\"popPieces()\", 500, this)"],"popPieces":["*playAudio(\"FeedbackSFX\")","setTweenTarget(0)","repeat: 4","screen.addEntity({\"class\":\"Particle\", x:this.sprite.x, y:this.sprite.y, \"sprite\":this.__data.sprite})"]},"sprite.anchor.setTo":0.5,"$marker":"Peça","label":"Peças","$priority":6,"$moveable":true,"type":"Entity","sprite":"sprite1011","@sprite":{"type":"image","label":"Imagem da peça","removable":false,"unique":true,"tags":"@sprite,forma, conteúdo","maxWidth":400,"maxHeight":400},"x":649,"y":674,"__$uid":2742,"__class":"Shape","$word":"__$word"},{"class":"Shape","$isMarker":true,"$marker":"Peça","label":"Peças","$priority":6,"$moveable":true,"type":"Entity","sprite":"triangle","@sprite":{"type":"image","label":"Imagem da peça","removable":false,"unique":true,"tags":"@sprite,forma, conteúdo","maxWidth":400,"maxHeight":400},"x":200,"y":300,"__$uid":2743},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"textBG","sprite.anchor.setTo":[0.5,0],"@sprite":{"label":"Caixa de texto","type":"image","priority":21,"tags":"@sprite,gui,pergunta","menu":"Elementos de Cenário","propertyName":"sprite","__uid":2723},"id":"imgTopTV","x":512,"y":-150,"__uid":2744},{"CLAZZ":"framework.Phaser.Label","@text":{"label":"Pergunta","type":"string","multiline":true,"priority":5,"menu":"Pergunta","propertyName":"text","__uid":2717},"text":"Vamos montar o Galo da Madrugada com essas peças ?","wordWrapWidth":972.25,"@wordWrapWidth":{"type":"GUID","propertyName":"wordWrapWidth","__uid":2719},"id":"winText","x":463.25,"y":81.25,"type":"Entity","$moveable":true,"$transform":true,"priority":6,"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":6,"min":6,"max":100,"menu":"Pergunta","propertyName":"size","__uid":2720},"align":"left","color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":7,"menu":"Pergunta","propertyName":"color","__uid":2721},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":8,"menu":"Pergunta","propertyName":"strokeThickness","__uid":2722},"events":{"create":["if: this.screen.makeTTSSpeech","this.screen.say(this.text._text)"]},"__uid":2745},{"CLAZZ":"framework.Phaser.Button","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"text":"","wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"size":24,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":100},"align":"left","color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"makeSpeech":false,"@makeSpeech":{"label":"Ler Texto Automaticamente","type":"boolean","priority":30},"onClick":"playTextSound()","playTextSound":"*playAudio(this.audioEffect)","audioEffect":null,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"events":{"create":["if: this.makeSpeech","return: this.screen.say(this.text._text,this.playTextSound)"]},"__$uid":2746},{"CLAZZ":"framework.Phaser.Label","text":"","id":"winText","x":200,"y":720,"size":22,"color":"#fff","stroke":"#000","strokeThickness":5,"__uid":2747},{"CLAZZ":"entities.Timer","id":"timer","x":950,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":2716},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":2748},{"CLAZZ":"framework.Phaser.Button","sprite":"nextScreenBtn","sprite.anchor.setTo":0.5,"x":980,"y":720,"id":"btnNext","onClick":"*nextScreen()","__uid":2749}],"values":{"screen.delayAfterEndGame":3000,"screen.makeTTSSpeech":true,"@screen.makeTTSSpeech":{"label":" ","type":"boolean","priority":10,"menu":"Pergunta","text":"Ler Pergunta Automaticamente","propertyName":"screen\\_makeTTSSpeech","__uid":2730},"screen.rotateShapes":false,"@screen.rotateShapes":{"label":"Rotacionar Peças","type":"boolean","priority":4,"text":"Rotacionar Peças","propertyName":"screen\\_rotateShapes","__uid":2731}},"classes":{"Grid":{"components":[{"CLAZZ":"components.TangramGrid","snap":5,"shadowSize":1.2}],"name":"grid","events":{"onRight":["TangramGrid.sprite.tint = 8311933","TangramGrid.sprite.alpha = 1"]}},"Dust":{"sprite":"dust","events":{"ondefaultFrame13":"destroy()"},"sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.75},"Particle":{"components":[{"CLAZZ":"components.BallisticPhysics"},{"CLAZZ":"components.AutoRotate"},{"CLAZZ":"components.Spin","state":"spin","speed":0.5},{"CLAZZ":"components.Tween","speed":1}],"events":{"create":["setVelocity( Math.random()*40-25, -Math.random()*30-30)","screen.setTimeout(\"popFirework()\", 400*Math.random()+300, this)"],"popFirework":["setTweenTarget(0)","screen.addEntity({\"class\":\"Dust\",\"sprite\":\"fireworks\", \"x\":this.sprite.x, \"y\":this.sprite.y})"]},"state":"fly","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.5},"Shape":{"components":[{"CLAZZ":"components.MouseInput","dragEnabled":true,"useHandCursor":true,"pixelPerfectClick":true,"pixelPerfectAlpha":0.12},{"CLAZZ":"components.UserRotate","spinSprite":"spinSprite","flipSprite":"flipSprite","spinSnap":15},{"CLAZZ":"components.SpriteMap","bounds":"target","autoBounds":false},{"CLAZZ":"components.Tween","speed":0.08}],"rotation":0,"startX":0,"startY":0,"startRotation":0,"events":{"create":["startX = this.screen.editor ? this.x : Math.random() * 0.6 * this.screen.entities.grid.x + 0.2 * this.screen.entities.grid.x","startY = this.screen.editor ? this.y : Math.random() * 0.6 * this.screen.gameHeight + 0.2 * this.screen.gameHeight","startRotation = this.screen.editor || !this.screen.rotateShapes ? this.rotation : Math.floor(Math.random() * 8) * Math.PI * 0.5","if: !this.screen.rotateShapes && !this.screen.editor","this.UserRotate.enabled = false"],"resetShapes":["this.x = this.sprite.x = this.startX","this.y = this.sprite.y = this.startY","this.rotation = this.sprite.rotation = this.startRotation"],"onMouseDown":["sprite.parent.bringToTop( this.sprite )","*playAudio(\"takeSound\")"],"onMouseUp":["*playAudio(\"leaveSound\")","SpriteMap.onSpriteDirty()","*onVerify()"],"onClickFlip":["SpriteMap.onSpriteDirty()","*onVerify()"],"stopSpinDrag":["SpriteMap.onSpriteDirty()","*onVerify()"],"startSpinDrag":["*playAudio(\"spinShape\")"],"onRight":["screen.setTimeout(\"popPieces()\", 500, this)"],"popPieces":["*playAudio(\"FeedbackSFX\")","setTweenTarget(0)","repeat: 4","screen.addEntity({\"class\":\"Particle\", x:this.sprite.x, y:this.sprite.y, \"sprite\":this.__data.sprite})"]},"sprite.anchor.setTo":0.5}},"imageTitles":[],"USID":"5e5ed4ef6cda4","imgTitles":{"./resources/1024x768/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","":"","./resources/4a72c17317495db36bfe31f89c86251c.png":"bg1"}},{"CLAZZ":"screens.generic.LevelClear","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":2066},"name":"LevelClear","thumbnail":".././resources/thumb_198701.png","GUID":"64bc0865-bc6a-4498-bd2d-1b3cd8ffec9e","assets":{"bg":"./resources/1024x768/61e43516ec81049bae627e6bb6802010.png","alpha_bg":"escalada-imgs-etapa/normal-bg-intro.png","bgStarWin":"levelClear-imgs-etapa/normal-painel-telaFinal.png","bgStarLose":"levelClear-imgs-etapa/normal-painel-telaFinal-lose.png","btNextLevel":"levelClear-imgs-etapa/normal-btn_next.png","btNextLevelDeactivated":"levelClear-imgs-etapa/normal-btn_next_grey.png","btPlayAgain":"levelClear-imgs-etapa/normal-btn_replay.png","star":"levelClear-imgs-etapa/normalEstrela-telaFinal.png","star1":"common-audio/star1.mp3","star2":"common-audio/star1.mp3","star3":"common-audio/star1.mp3","levelFailed":"common-audio/levelFailed.mp3","levelClear":"common-audio/levelClear.mp3"},"logo":"true","values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"classes":{"Star":{"sprite":"star","sprite.visible":false,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":10,"sprite.rotation":10,"audio":"star1","components":[{"CLAZZ":"components.AutoScale","enabled":false,"speed":0.1,"target":1.2},{"CLAZZ":"components.Tween","enabled":false,"target":0,"speed":0.04,"property":"rotation"}],"events":{"activateStar":["sprite.visible = true","setAutoScaleEnabled(true)","setTweenEnabled(true)","*playAudio(this.audio)"]}}},"entities":[{"@levelFailed":{"label":"Áudio de Tente Novamente","type":"audio","tags":"@audio, @mp3, levelClear","priority":22,"propertyName":"levelFailed","__uid":2069},"levelFailed":"levelFailed","__uid":2070},{"@levelClear":{"label":"Áudio de Parabéns","type":"audio","tags":"@audio, @mp3, levelClear","priority":21,"propertyName":"levelClear","__uid":2068},"levelClear":"levelClear","__uid":2071},{"CLAZZ":"framework.Phaser.FullScreenBitmap","@sprite":{"label":"Imagem de fundo","type":"image","priority":30,"tags":"@sprite,fullscreen,bg","maxWidth":1024,"maxHeight":768,"propertyName":"sprite","__uid":2067},"sprite":"bg","__uid":2072},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","alpha":0.8,"__uid":2073},{"id":"bgStarId","sprite":"bgStarWin","x":-667,"y":125,"sprite.scale.setTo":1.15,"sprite.anchor.setTo":0.5,"components":[{"CLAZZ":"components.AutoPos","speed":0.15,"targetX":640,"targetY":384,"minDelta":0.8,"enabled":false},{"CLAZZ":"components.Bounce","speed":0.01,"intensity":10,"decay":0.98,"iterator":3.141592653589}],"events":{"passed":["setAutoPosEnabled(true)","*playAudio(\"levelClear\")"],"doneMoving":"*activateStars()"},"__uid":2074},{"sprite":"bgStarLose","sprite.scale.setTo":1.15,"sprite.anchor.setTo":0.5,"x":640,"y":-600,"components":[{"CLAZZ":"components.AutoPos","speed":0.15,"targetX":640,"targetY":384,"minDelta":0.8,"enabled":false}],"events":{"failed":["setAutoPosEnabled(true)","*playAudio(\"levelFailed\")"],"doneMoving":["*activateStars()"]},"__uid":2075},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"DORITOS!","id":"scoreText","x":832,"y":505,"size":30,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"sprite.visible=true","updateGrade":"this.setText('Pontos: ' + Math.floor(arguments[0]*10))"},"__uid":2076},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"","id":"scoreText","x":468,"y":505,"size":30,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"sprite.visible=true","updateGrade":["if: this.screen.timeSpend","return: this.setText('Tempo: ' + this.screen.timeSpend)"]},"__uid":2077},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"PARABÉNS!","id":"winText","x":640,"y":180,"size":60,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"SOL.screen.setTimeout(\"*showPassedUINoDelay()\", this.UIDelay, this)","activateStar1":"UIDelay += 1000","activateStar2":"UIDelay += 1000","activateStar3":"UIDelay += 1000"},"__uid":2078},{"CLAZZ":"framework.Phaser.Label","text":"TENTE NOVAMENTE!","id":"loseText","x":640,"y":180,"size":60,"color":"#fff","stroke":"#800","strokeThickness":10,"sprite.visible":false,"events":{"showFailedUI":"sprite.visible=true"},"__uid":2079},{"class":"Star","x":408,"y":360,"audio":"star1","events":{"activateStar1":"activateStar(1)"},"__uid":2080},{"class":"Star","audio":"star2","x":640,"y":335,"events":{"activateStar2":"SOL.screen.setTimeout(\"activateStar(2)\", 1000, this)"},"__uid":2081},{"class":"Star","audio":"star3","x":870,"y":358,"events":{"activateStar3":"SOL.screen.setTimeout(\"activateStar(3)\", 2000, this)"},"__uid":2082},{"CLAZZ":"framework.Phaser.Button","sprite":"btNextLevel","sprite.visible":false,"id":"btnNextLevel","onClick":"SOL.nextScreen()","x":690,"y":549,"events":{"showPassedUINoDelay":"sprite.visible=true"},"__uid":2083},{"CLAZZ":"framework.Phaser.Button","sprite":"btNextLevelDeactivated","sprite.visible":false,"id":"btnNextDeactivated","onClick":"","x":690,"y":549,"events":{"showFailedUI":"sprite.visible=true"},"__uid":2084},{"CLAZZ":"framework.Phaser.Button","sprite":"btPlayAgain","sprite.visible":false,"id":"btnPlayAgain","onClick":"SOL.loadScreen(SOL.screen.levelName)","x":486,"y":549,"canGoBack":true,"events":{"activateStar1":"canGoBack=false","showFailedUI":"sprite.visible=true","showPassedUINoDelay":"sprite.visible=canGoBack"},"__uid":2085}],"imageTitles":[],"USID":"5cd32033e66c6","imgTitles":{"./resources/1024x768/61e43516ec81049bae627e6bb6802010.png":"Fundo 2"}},{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_293143.png","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":3792},"name":"Tela 17","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string","propertyName":"externalSceneURL","__uid":3793},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean","propertyName":"editorSnapEnabled","__uid":3795},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"./resources/f2d94904fc28f9c776dd6d6850e76a6c.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","sprite4933":"./resources/1150839e24ebeff29e355676bf015ee4.png","sprite3638":"./resources/3652f5378b0f1087860462ae32cf611d.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":3801},"bgSound":"bgSound","__uid":3802},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"bgSound","__uid":3800},"bgSound":"openingSound","__uid":3803},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":3798},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21,"propertyName":"visible","__uid":3799},"__uid":3804},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":3797},"__uid":3805},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"},"__uid":3806},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8,"__$uid":3807},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite3638","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":1068.59809688486,"y":393.84051679046,"priority":7,"GUID":"23g07j9y3cr-1mp2kl3ad5t-2707ra0pehd","sprite.scale.y":1.121804145574185,"sprite.scale.x":1.121804145574185,"__$uid":3808,"rotation":-0.020075011104916052},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["screen.nextScreen()"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite4933","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":674.88729476011,"y":657.04702736189,"priority":7,"GUID":"koygf0bphn-ammt2r90uc-lsvtksppiz","sprite.scale.y":0.9479862778263417,"sprite.scale.x":0.9479862778263417,"__$uid":3809},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"__$uid":3810},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7,"__$uid":3811},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":898,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Durante o carnaval, as pessoas se fantasiam de diversas maneiras.\n\nMas pela quantidade de gente na rua, não tem como não encontrar fantasias iguais!\n\nVamos procurar as fantasias repetidas?","x":29.649519350609978,"y":70,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#f6ec00","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"beginningNClick","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":2,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"azwxq2hxbo-1zcqt50wh9m-fubo3vo8fy","$word":"__$word","onClick":[],"__$uid":3812},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Vamos lá!","x":586.4701233153681,"y":626.9711347727707,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":40,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"click","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"13adeflcm63-5tu7peymoc-214bdxm24cb","$word":"__$word","onClick":["screen.nextScreen()"],"__$uid":3813},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"__$uid":3814},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]},"__$uid":3815},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]},"__$uid":3816},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":3796},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":3817},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[],"__$uid":3818}],"imageTitles":[],"USID":"c41ec387-8b04-4c77-bb96-4f41d147dbfd","imgTitles":{"./resources/1280x720/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","./resources/600x600/baf243696044b9e2d7c7d5c14f8a4df7.png":"leão","./resources/600x600/0498c684e40e2107d181d88a3a6a1a20.png":"soldado","./resources/600x600/aa9f140831d4ab5509edaa23f30c4033.png":"elefante","./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png":"bg5","./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png":"ECI","./resources/600x600/3789f04b95423e56816c906a8e6cffc8.png":"bt_comecar","./resources/f2d94904fc28f9c776dd6d6850e76a6c.png":"bg2","./resources/1150839e24ebeff29e355676bf015ee4.png":"bt_rosa","./resources/3652f5378b0f1087860462ae32cf611d.png":"ecifantasia"}},{"CLAZZ":"screens.memoria.Memoria","@name":{"label":"Nome da Tela","type":"string","priority":-1,"propertyName":"name","__uid":548},"name":"Tela 16","thumbnail":".././resources/thumb_293155.png","editorPauseTime":1,"GUID":"eeabe535-070e-4651-bc0c-6825da85323e","assets":{"timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","splash":"tiro-imgs-etapa/imgSplashWater.png","waterBalloon":"tiro-imgs-etapa/spriteBalloonWater.png","monsterATLAS":"spritesheet/monster-etapa.json","monster":"spritesheet/monster-etapa.png","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","target":"tiro-imgs-ipdh/target_small.png","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","slingshotBase":"./resources/0bcd5beab33185a3e67150183e4dce81.png","question":"","basket":"tiro-imgs-etapa/cesta.png","bg":"./resources/4a72c17317495db36bfe31f89c86251c.png","hud":"tiro-imgs-etapa/hud.png","cardBack":"./resources/ed3206f12f1d0a21e20bb3e09a471d69.png","card":"./resources/0e0082c30a4b3b461ff423712d244eeb.png","rectangle":"tiro-imgs-etapa/retangulo-carta.png","square":"tiro-imgs-etapa/quadrado-carta.png","circle":"tiro-imgs-etapa/circulo-carta.png","triangle":"tiro-imgs-etapa/triangulo-carta.png","hand":"common-imgs/hand.png","bgSound":"","introSpeech":"","rightCard":"common-audio/SFX/2Acerto.mp3","wrongCard":"common-audio/SFX/2Erro2.mp3","dragSlingShot":"common-audio/SFX/2Elastico.mp3","hitSound":"common-audio/SFX/2Errando.mp3","tipSound":"tiro-audio/tip.mp3","shotStart":"common-audio/SFX/2Jogando.mp3","hitFloor":"tiro-audio/hitFloor.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timeEnded":"common-audio/SFX/1Atencao.mp3","img122":"./resources/1c465573aecd9bbea9c61baa9436a2e2.png","img222":"./resources/1c465573aecd9bbea9c61baa9436a2e2.png","img273":"./resources/d846107063b6835e3d77960aaed1b4b5.png","img323":"./resources/d846107063b6835e3d77960aaed1b4b5.png","img325":"./resources/66ca7876f757abe07163639c840112ff.jpg","img324":"./resources/66ca7876f757abe07163639c840112ff.jpg"},"logo":"true","correctAnswers":0,"wrongAnswers":0,"events":{"create":["*killAllSounds()","*playAudio(\"bgSound\", true)","*playAudio(\"introSpeech\")"],"Hint":["*playAudio(\"tipSound\")","*playAudio(\"hitFloor\")"],"onTimeEnded":["*killAllSounds","*playAudio(\"timeEnded\")"],"countDown":"*playAudio(\"hurryUp\",true)"},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":30,"propertyName":"bgSound","__uid":561},"bgSound":"bgSound","__uid":570},{"introSpeech":"introSpeech","@introSpeech":{"label":"Áudio de Narrativa","type":"audio","tags":"@audio, @mp3","priority":9,"menu":"Pergunta","propertyName":"introSpeech","__uid":560},"__uid":571},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"bg","@sprite":{"label":"Imagem de fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","menu":"Elementos de Cenário","maxWidth":1024,"maxHeight":768,"propertyName":"sprite","__uid":559},"events":{"create":["this.sprite.inputEnabled = true","if: this.screen.easyMode","this.sprite.events.onInputUp.add(CALL.bind(null, 'onShot', undefined, undefined))"]},"__uid":572},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"question","sprite.anchor.setTo":[0.5,0],"@sprite":{"label":"Caixa de texto","type":"image","priority":19,"tags":"@sprite,gui,pergunta","menu":"Elementos de Cenário","propertyName":"sprite","__uid":558},"id":"imgTopTV","x":512,"y":-150,"__uid":573},{"CLAZZ":"framework.Phaser.Button","@text":{"label":"Pergunta","type":"string","multiline":true,"priority":5,"menu":"Pergunta","propertyName":"text","__uid":552},"text":"ENCONTRE AS CARTAS CORRESPONDENTES!","wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID","propertyName":"wordWrapWidth","__uid":554},"id":"winText","x":261.25,"y":37.3125,"type":"Entity","$moveable":true,"$transform":true,"priority":6,"size":25,"@size":{"label":"Tamanho da Fonte","type":"int","priority":6,"min":6,"max":100,"menu":"Pergunta","propertyName":"size","__uid":555},"align":"left","color":"#FFFFFF","@color":{"label":"Cor da Fonte","type":"color","priority":7,"menu":"Pergunta","propertyName":"color","__uid":556},"stroke":"#000","strokeThickness":5,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":8,"menu":"Pergunta","propertyName":"strokeThickness","__uid":557},"events":{"onClick":["if: this.screen.readQuestionOnClick","screen.say(this.sprite._text)"],"create":["if: this.screen.makeTTSSpeech","this.screen.say(this.text._text)"]},"__uid":574},{"CLAZZ":"framework.Phaser.Button","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"text":"","wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"size":24,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":100},"align":"left","color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"makeSpeech":false,"@makeSpeech":{"label":"Ler Texto Automaticamente","type":"boolean","priority":30},"onClick":"playTextSound()","playTextSound":"*playAudio(this.audioEffect)","audioEffect":null,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"events":{"create":["if: this.makeSpeech","return: this.screen.say(this.text._text,this.playTextSound)"]},"__$uid":575},{"CLAZZ":"framework.Phaser.CollidableEntity","components":[{"CLAZZ":"components.ZSort","z":0},{"CLAZZ":"components.Spin"},{"CLAZZ":"components.Bounce","property":"rotation","minIntensity":0.005,"decay":0.98},{"CLAZZ":"components.Sync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"GroupSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"LabelSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"ImgSync","properties":{"scale.x":0,"scale.y":0},"factors":{"scale.x":0,"scale.y":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"BackSync","properties":{"x":0,"y":0},"useResolve":false},{"CLAZZ":"components.Tween","name":"AlphaTween","enabled":false,"speed":0.05},{"CLAZZ":"components.BallisticPhysics","friction":0.98}],"sprite":"card","@sprite":{"label":"Frente da Carta","removable":false,"type":"image","priority":21,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"sprite","__uid":3442},"sprite.anchor.setTo":0.5,"rearBG":"cardBack","@rearBG":{"label":"Verso da Carta","removable":false,"type":"image","priority":22,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"rearBG","__uid":3443},"x":170.75661375661002,"y":202.25925925926,"img":"img122","group":"1","textAnchor":"bottom","textSize":25,"textColor":"#FFFFFF","strokeThickness":5,"readText":false,"cardAudio":"","flipTime":1000,"events":{"create":["rearBG = this.loadSprite( this.rearBG, { \"anchor.setTo\":0.5 })","BackSync.write = []","BackSync.write.push( this.rearBG )","frontBG = sprite","this.rearBG.inputEnabled = true","this.rearBG.events.onInputUp.add( this.onClick.bind(this) )","setSpinSprites( this.frontBG, this.rearBG )","Sync.read = frontBG","GroupSync.read = frontBG","LabelSync.read = frontBG","ImgSync.read = frontBG","Sync.write = []","GroupSync.write =[]","ImgSync.write = []","LabelSync.write = []","setupImage()","setupLabel()","setupGroup()","setSpinState(!!this.screen.editor)","*addGroups(this.group)"],"setupGroup":["if: !this.group || !this.screen.editor","return:","grp = this.screen.game.add.text( 0, 0, this.group )","grp.setStyle({fill:\"#00ff00\",stroke:\"#004c00\",strokeThickness:6,fontSize:16})","grp.anchor.setTo(0,0)","GroupSync.write.push(this.grp)","GroupSync.properties.x = -this.frontBG.width*this.frontBG.anchor.x","GroupSync.properties.y = -this.frontBG.height*this.frontBG.anchor.y"],"setupImage":["if: !this.img","return:","img = this.loadSprite( this.img, {doNotInstrument:true} )","img.anchor.setTo(0.5, 0.5)","imgScale = this.ImgSync.factors[\"scale.x\"] = this.ImgSync.factors[\"scale.y\"] = Math.min(1, this.frontBG.width / this.img.width, this.frontBG.height / this.img.height) * 0.8","console.log('img scale', this.imgScale)","Sync.write.push( this.img )","ImgSync.write.push( this.img )"],"setupLabel":["if: !this.lbl","return:","lbl = this.screen.game.add.text( 0, 0, this.lbl )","lbl.setStyle({ fill:this.textColor, fontSize:this.textSize, strokeThickness:this.strokeThickness })","lbl.anchor.setTo(0.5)","if: this.textAnchor == \"bottom\" ","bottomLabel()","if: this.textAnchor == \"top\" ","topLabel()","Sync.write.push( this.lbl )","LabelSync.write.push( this.lbl )"],"bottomLabel":["this.lbl.anchor.setTo(0.5,1)","LabelSync.properties.y = this.sprite.height/2"],"topLabel":["this.lbl.anchor.setTo(0.5,0)","LabelSync.properties.y = -this.sprite.height/2"],"showHint":"bounce(0.5)","onHit":["if: this.state != \"\"","return:","collisionEnabled = false","startSpin( 1, this.spinSpeed )","if: this.readText && this.lbl._text","this.screen.say(this.lbl._text,this.playSound)","if: !this.readText && this.cardAudio","playSound()","state = \"wasHit\"","*onHitCard(this)"],"onClick":["if: this.screen.easyMode","*onShot(this.screen.game.input.x,this.screen.game.input.y)"],"playSound":["*playAudio(this.cardAudio)"],"wasHitEnd":["frontBG.tint = 16777215","collisionEnabled = true"],"hitRightSequence":["*playAudio(\"rightCard\")","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"right\", \"Sync.read\":this.sprite })","frontBG.tint = 5614165","this.AlphaTween.setTweenTarget(0)","screen.setTimeout( \"callFireworks()\", 1000, this)","*onRight(this.group)"],"hitWrongSequence":["*playAudio(\"wrongCard\")","frontBG.tint = 11162965","*onWrong(this.group)"],"hideCard":["startSpin( -1, this.spinSpeed )","this.state = \"\"","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"wrong\", \"Sync.read\":this.sprite })"],"callFireworks":["screen.addEntity({\"class\":\"Fireworks\", \"x\":this.x, \"y\":this.y })"]},"$marker":"CARTA","$label":"Cartas","priority":6,"$moveable":true,"type":"Entity","lbl":"","isCorrect":false,"@img":{"type":"image","unique":true,"label":"Imagem da carta","tags":"@sprite, conteúdo","maxWidth":500,"maxHeight":500},"@lbl":{"type":"string","label":"Texto da carta","priority":2},"@group":{"type":"string","label":"Grupo","priority":1},"@textAnchor":{"label":"Posição do texto da carta","type":"string","enum":{"top":"Topo da carta","center":"Centro da carta","bottom":"Abaixo da carta"},"priority":5},"@textSize":{"label":"Tamanho do Texto","type":"int","min":6,"max":100,"priority":7},"@strokeThickness":{"label":"Espessura da Borda do Texto","type":"int","min":0,"max":6,"priority":8},"@textColor":{"label":"Cor do Texto","type":"color","priority":6},"@readText":{"label":"Ler texto ao acertar","type":"boolean","priority":2},"@cardAudio":{"unique":true,"label":"Áudio ao Acertar","type":"audio","tags":"@audio, @mp3","priority":3},"__class":"Card","$word":"__$word","__$uid":576},{"CLAZZ":"framework.Phaser.CollidableEntity","components":[{"CLAZZ":"components.ZSort","z":0},{"CLAZZ":"components.Spin"},{"CLAZZ":"components.Bounce","property":"rotation","minIntensity":0.005,"decay":0.98},{"CLAZZ":"components.Sync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"GroupSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"LabelSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"ImgSync","properties":{"scale.x":0,"scale.y":0},"factors":{"scale.x":0,"scale.y":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"BackSync","properties":{"x":0,"y":0},"useResolve":false},{"CLAZZ":"components.Tween","name":"AlphaTween","enabled":false,"speed":0.05},{"CLAZZ":"components.BallisticPhysics","friction":0.98}],"sprite":"card","@sprite":{"label":"Frente da Carta","removable":false,"type":"image","priority":21,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"sprite","__uid":3442},"sprite.anchor.setTo":0.5,"rearBG":"cardBack","@rearBG":{"label":"Verso da Carta","removable":false,"type":"image","priority":22,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"rearBG","__uid":3443},"x":487.75132275132,"y":453.61375661375996,"img":"img222","group":"1","textAnchor":"center","textSize":25,"textColor":"#FFFFFF","strokeThickness":5,"readText":false,"cardAudio":"","flipTime":1000,"events":{"create":["rearBG = this.loadSprite( this.rearBG, { \"anchor.setTo\":0.5 })","BackSync.write = []","BackSync.write.push( this.rearBG )","frontBG = sprite","this.rearBG.inputEnabled = true","this.rearBG.events.onInputUp.add( this.onClick.bind(this) )","setSpinSprites( this.frontBG, this.rearBG )","Sync.read = frontBG","GroupSync.read = frontBG","LabelSync.read = frontBG","ImgSync.read = frontBG","Sync.write = []","GroupSync.write =[]","ImgSync.write = []","LabelSync.write = []","setupImage()","setupLabel()","setupGroup()","setSpinState(!!this.screen.editor)","*addGroups(this.group)"],"setupGroup":["if: !this.group || !this.screen.editor","return:","grp = this.screen.game.add.text( 0, 0, this.group )","grp.setStyle({fill:\"#00ff00\",stroke:\"#004c00\",strokeThickness:6,fontSize:16})","grp.anchor.setTo(0,0)","GroupSync.write.push(this.grp)","GroupSync.properties.x = -this.frontBG.width*this.frontBG.anchor.x","GroupSync.properties.y = -this.frontBG.height*this.frontBG.anchor.y"],"setupImage":["if: !this.img","return:","img = this.loadSprite( this.img, {doNotInstrument:true} )","img.anchor.setTo(0.5, 0.5)","imgScale = this.ImgSync.factors[\"scale.x\"] = this.ImgSync.factors[\"scale.y\"] = Math.min(1, this.frontBG.width / this.img.width, this.frontBG.height / this.img.height) * 0.8","console.log('img scale', this.imgScale)","Sync.write.push( this.img )","ImgSync.write.push( this.img )"],"setupLabel":["if: !this.lbl","return:","lbl = this.screen.game.add.text( 0, 0, this.lbl )","lbl.setStyle({ fill:this.textColor, fontSize:this.textSize, strokeThickness:this.strokeThickness })","lbl.anchor.setTo(0.5)","if: this.textAnchor == \"bottom\" ","bottomLabel()","if: this.textAnchor == \"top\" ","topLabel()","Sync.write.push( this.lbl )","LabelSync.write.push( this.lbl )"],"bottomLabel":["this.lbl.anchor.setTo(0.5,1)","LabelSync.properties.y = this.sprite.height/2"],"topLabel":["this.lbl.anchor.setTo(0.5,0)","LabelSync.properties.y = -this.sprite.height/2"],"showHint":"bounce(0.5)","onHit":["if: this.state != \"\"","return:","collisionEnabled = false","startSpin( 1, this.spinSpeed )","if: this.readText && this.lbl._text","this.screen.say(this.lbl._text,this.playSound)","if: !this.readText && this.cardAudio","playSound()","state = \"wasHit\"","*onHitCard(this)"],"onClick":["if: this.screen.easyMode","*onShot(this.screen.game.input.x,this.screen.game.input.y)"],"playSound":["*playAudio(this.cardAudio)"],"wasHitEnd":["frontBG.tint = 16777215","collisionEnabled = true"],"hitRightSequence":["*playAudio(\"rightCard\")","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"right\", \"Sync.read\":this.sprite })","frontBG.tint = 5614165","this.AlphaTween.setTweenTarget(0)","screen.setTimeout( \"callFireworks()\", 1000, this)","*onRight(this.group)"],"hitWrongSequence":["*playAudio(\"wrongCard\")","frontBG.tint = 11162965","*onWrong(this.group)"],"hideCard":["startSpin( -1, this.spinSpeed )","this.state = \"\"","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"wrong\", \"Sync.read\":this.sprite })"],"callFireworks":["screen.addEntity({\"class\":\"Fireworks\", \"x\":this.x, \"y\":this.y })"]},"$marker":"CARTA","$label":"Cartas","priority":6,"$moveable":true,"type":"Entity","lbl":"","isCorrect":false,"@img":{"type":"image","unique":true,"label":"Imagem da carta","tags":"@sprite, conteúdo","maxWidth":500,"maxHeight":500},"@lbl":{"type":"string","label":"Texto da carta","priority":2},"@group":{"type":"string","label":"Grupo","priority":1},"@textAnchor":{"label":"Posição do texto da carta","type":"string","enum":{"top":"Topo da carta","center":"Centro da carta","bottom":"Abaixo da carta"},"priority":5},"@textSize":{"label":"Tamanho do Texto","type":"int","min":6,"max":100,"priority":7},"@strokeThickness":{"label":"Espessura da Borda do Texto","type":"int","min":0,"max":6,"priority":8},"@textColor":{"label":"Cor do Texto","type":"color","priority":6},"@readText":{"label":"Ler texto ao acertar","type":"boolean","priority":2},"@cardAudio":{"unique":true,"label":"Áudio ao Acertar","type":"audio","tags":"@audio, @mp3","priority":3},"__class":"Card","$word":"__$word","__$uid":577},{"CLAZZ":"framework.Phaser.CollidableEntity","components":[{"CLAZZ":"components.ZSort","z":0},{"CLAZZ":"components.Spin"},{"CLAZZ":"components.Bounce","property":"rotation","minIntensity":0.005,"decay":0.98},{"CLAZZ":"components.Sync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"GroupSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"LabelSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"ImgSync","properties":{"scale.x":0,"scale.y":0},"factors":{"scale.x":0,"scale.y":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"BackSync","properties":{"x":0,"y":0},"useResolve":false},{"CLAZZ":"components.Tween","name":"AlphaTween","enabled":false,"speed":0.05},{"CLAZZ":"components.BallisticPhysics","friction":0.98}],"sprite":"card","@sprite":{"label":"Frente da Carta","removable":false,"type":"image","priority":21,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"sprite","__uid":3442},"sprite.anchor.setTo":0.5,"rearBG":"cardBack","@rearBG":{"label":"Verso da Carta","removable":false,"type":"image","priority":22,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"rearBG","__uid":3443},"x":792.03475313127,"y":456.83927627389,"img":"img273","group":"2","textAnchor":"center","textSize":25,"textColor":"#FFFFFF","strokeThickness":5,"readText":false,"cardAudio":"","flipTime":1000,"events":{"create":["rearBG = this.loadSprite( this.rearBG, { \"anchor.setTo\":0.5 })","BackSync.write = []","BackSync.write.push( this.rearBG )","frontBG = sprite","this.rearBG.inputEnabled = true","this.rearBG.events.onInputUp.add( this.onClick.bind(this) )","setSpinSprites( this.frontBG, this.rearBG )","Sync.read = frontBG","GroupSync.read = frontBG","LabelSync.read = frontBG","ImgSync.read = frontBG","Sync.write = []","GroupSync.write =[]","ImgSync.write = []","LabelSync.write = []","setupImage()","setupLabel()","setupGroup()","setSpinState(!!this.screen.editor)","*addGroups(this.group)"],"setupGroup":["if: !this.group || !this.screen.editor","return:","grp = this.screen.game.add.text( 0, 0, this.group )","grp.setStyle({fill:\"#00ff00\",stroke:\"#004c00\",strokeThickness:6,fontSize:16})","grp.anchor.setTo(0,0)","GroupSync.write.push(this.grp)","GroupSync.properties.x = -this.frontBG.width*this.frontBG.anchor.x","GroupSync.properties.y = -this.frontBG.height*this.frontBG.anchor.y"],"setupImage":["if: !this.img","return:","img = this.loadSprite( this.img, {doNotInstrument:true} )","img.anchor.setTo(0.5, 0.5)","imgScale = this.ImgSync.factors[\"scale.x\"] = this.ImgSync.factors[\"scale.y\"] = Math.min(1, this.frontBG.width / this.img.width, this.frontBG.height / this.img.height) * 0.8","console.log('img scale', this.imgScale)","Sync.write.push( this.img )","ImgSync.write.push( this.img )"],"setupLabel":["if: !this.lbl","return:","lbl = this.screen.game.add.text( 0, 0, this.lbl )","lbl.setStyle({ fill:this.textColor, fontSize:this.textSize, strokeThickness:this.strokeThickness })","lbl.anchor.setTo(0.5)","if: this.textAnchor == \"bottom\" ","bottomLabel()","if: this.textAnchor == \"top\" ","topLabel()","Sync.write.push( this.lbl )","LabelSync.write.push( this.lbl )"],"bottomLabel":["this.lbl.anchor.setTo(0.5,1)","LabelSync.properties.y = this.sprite.height/2"],"topLabel":["this.lbl.anchor.setTo(0.5,0)","LabelSync.properties.y = -this.sprite.height/2"],"showHint":"bounce(0.5)","onHit":["if: this.state != \"\"","return:","collisionEnabled = false","startSpin( 1, this.spinSpeed )","if: this.readText && this.lbl._text","this.screen.say(this.lbl._text,this.playSound)","if: !this.readText && this.cardAudio","playSound()","state = \"wasHit\"","*onHitCard(this)"],"onClick":["if: this.screen.easyMode","*onShot(this.screen.game.input.x,this.screen.game.input.y)"],"playSound":["*playAudio(this.cardAudio)"],"wasHitEnd":["frontBG.tint = 16777215","collisionEnabled = true"],"hitRightSequence":["*playAudio(\"rightCard\")","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"right\", \"Sync.read\":this.sprite })","frontBG.tint = 5614165","this.AlphaTween.setTweenTarget(0)","screen.setTimeout( \"callFireworks()\", 1000, this)","*onRight(this.group)"],"hitWrongSequence":["*playAudio(\"wrongCard\")","frontBG.tint = 11162965","*onWrong(this.group)"],"hideCard":["startSpin( -1, this.spinSpeed )","this.state = \"\"","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"wrong\", \"Sync.read\":this.sprite })"],"callFireworks":["screen.addEntity({\"class\":\"Fireworks\", \"x\":this.x, \"y\":this.y })"]},"$marker":"CARTA","$label":"Cartas","priority":6,"$moveable":true,"$maxInstances":30,"type":"Entity","lbl":"","@img":{"type":"image","unique":true,"label":"Imagem da carta","tags":"@sprite, conteúdo","maxWidth":500,"maxHeight":500},"@lbl":{"type":"string","label":"Texto da carta","priority":2},"@group":{"type":"string","label":"Grupo","priority":1},"@textAnchor":{"label":"Posição do texto da carta","type":"string","enum":{"top":"Topo da carta","center":"Centro da carta","bottom":"Abaixo da carta"},"priority":5},"@textSize":{"label":"Tamanho do Texto","type":"int","min":6,"max":100,"priority":7},"@strokeThickness":{"label":"Espessura da Borda do Texto","type":"int","min":0,"max":6,"priority":8},"@textColor":{"label":"Cor do Texto","type":"color","priority":6},"@readText":{"label":"Ler texto ao acertar","type":"boolean","priority":2},"@cardAudio":{"unique":true,"label":"Áudio ao Acertar","type":"audio","tags":"@audio, @mp3","priority":3},"__class":"Card","$word":"__$word","__$uid":578},{"CLAZZ":"framework.Phaser.CollidableEntity","components":[{"CLAZZ":"components.ZSort","z":0},{"CLAZZ":"components.Spin"},{"CLAZZ":"components.Bounce","property":"rotation","minIntensity":0.005,"decay":0.98},{"CLAZZ":"components.Sync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"GroupSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"LabelSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"ImgSync","properties":{"scale.x":0,"scale.y":0},"factors":{"scale.x":0,"scale.y":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"BackSync","properties":{"x":0,"y":0},"useResolve":false},{"CLAZZ":"components.Tween","name":"AlphaTween","enabled":false,"speed":0.05},{"CLAZZ":"components.BallisticPhysics","friction":0.98}],"sprite":"card","@sprite":{"label":"Frente da Carta","removable":false,"type":"image","priority":21,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"sprite","__uid":3442},"sprite.anchor.setTo":0.5,"rearBG":"cardBack","@rearBG":{"label":"Verso da Carta","removable":false,"type":"image","priority":22,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"rearBG","__uid":3443},"x":485.69594142609003,"y":203.96173726991,"img":"img323","group":"2","textAnchor":"center","textSize":25,"textColor":"#FFFFFF","strokeThickness":5,"readText":false,"cardAudio":"","flipTime":1000,"events":{"create":["rearBG = this.loadSprite( this.rearBG, { \"anchor.setTo\":0.5 })","BackSync.write = []","BackSync.write.push( this.rearBG )","frontBG = sprite","this.rearBG.inputEnabled = true","this.rearBG.events.onInputUp.add( this.onClick.bind(this) )","setSpinSprites( this.frontBG, this.rearBG )","Sync.read = frontBG","GroupSync.read = frontBG","LabelSync.read = frontBG","ImgSync.read = frontBG","Sync.write = []","GroupSync.write =[]","ImgSync.write = []","LabelSync.write = []","setupImage()","setupLabel()","setupGroup()","setSpinState(!!this.screen.editor)","*addGroups(this.group)"],"setupGroup":["if: !this.group || !this.screen.editor","return:","grp = this.screen.game.add.text( 0, 0, this.group )","grp.setStyle({fill:\"#00ff00\",stroke:\"#004c00\",strokeThickness:6,fontSize:16})","grp.anchor.setTo(0,0)","GroupSync.write.push(this.grp)","GroupSync.properties.x = -this.frontBG.width*this.frontBG.anchor.x","GroupSync.properties.y = -this.frontBG.height*this.frontBG.anchor.y"],"setupImage":["if: !this.img","return:","img = this.loadSprite( this.img, {doNotInstrument:true} )","img.anchor.setTo(0.5, 0.5)","imgScale = this.ImgSync.factors[\"scale.x\"] = this.ImgSync.factors[\"scale.y\"] = Math.min(1, this.frontBG.width / this.img.width, this.frontBG.height / this.img.height) * 0.8","console.log('img scale', this.imgScale)","Sync.write.push( this.img )","ImgSync.write.push( this.img )"],"setupLabel":["if: !this.lbl","return:","lbl = this.screen.game.add.text( 0, 0, this.lbl )","lbl.setStyle({ fill:this.textColor, fontSize:this.textSize, strokeThickness:this.strokeThickness })","lbl.anchor.setTo(0.5)","if: this.textAnchor == \"bottom\" ","bottomLabel()","if: this.textAnchor == \"top\" ","topLabel()","Sync.write.push( this.lbl )","LabelSync.write.push( this.lbl )"],"bottomLabel":["this.lbl.anchor.setTo(0.5,1)","LabelSync.properties.y = this.sprite.height/2"],"topLabel":["this.lbl.anchor.setTo(0.5,0)","LabelSync.properties.y = -this.sprite.height/2"],"showHint":"bounce(0.5)","onHit":["if: this.state != \"\"","return:","collisionEnabled = false","startSpin( 1, this.spinSpeed )","if: this.readText && this.lbl._text","this.screen.say(this.lbl._text,this.playSound)","if: !this.readText && this.cardAudio","playSound()","state = \"wasHit\"","*onHitCard(this)"],"onClick":["if: this.screen.easyMode","*onShot(this.screen.game.input.x,this.screen.game.input.y)"],"playSound":["*playAudio(this.cardAudio)"],"wasHitEnd":["frontBG.tint = 16777215","collisionEnabled = true"],"hitRightSequence":["*playAudio(\"rightCard\")","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"right\", \"Sync.read\":this.sprite })","frontBG.tint = 5614165","this.AlphaTween.setTweenTarget(0)","screen.setTimeout( \"callFireworks()\", 1000, this)","*onRight(this.group)"],"hitWrongSequence":["*playAudio(\"wrongCard\")","frontBG.tint = 11162965","*onWrong(this.group)"],"hideCard":["startSpin( -1, this.spinSpeed )","this.state = \"\"","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"wrong\", \"Sync.read\":this.sprite })"],"callFireworks":["screen.addEntity({\"class\":\"Fireworks\", \"x\":this.x, \"y\":this.y })"]},"$marker":"CARTA","$label":"Cartas","priority":6,"$moveable":true,"$maxInstances":30,"type":"Entity","lbl":"","@img":{"type":"image","unique":true,"label":"Imagem da carta","tags":"@sprite, conteúdo","maxWidth":500,"maxHeight":500},"@lbl":{"type":"string","label":"Texto da carta","priority":2},"@group":{"type":"string","label":"Grupo","priority":1},"@textAnchor":{"label":"Posição do texto da carta","type":"string","enum":{"top":"Topo da carta","center":"Centro da carta","bottom":"Abaixo da carta"},"priority":5},"@textSize":{"label":"Tamanho do Texto","type":"int","min":6,"max":100,"priority":7},"@strokeThickness":{"label":"Espessura da Borda do Texto","type":"int","min":0,"max":6,"priority":8},"@textColor":{"label":"Cor do Texto","type":"color","priority":6},"@readText":{"label":"Ler texto ao acertar","type":"boolean","priority":2},"@cardAudio":{"unique":true,"label":"Áudio ao Acertar","type":"audio","tags":"@audio, @mp3","priority":3},"__class":"Card","$word":"__$word","__$uid":579},{"CLAZZ":"framework.Phaser.CollidableEntity","components":[{"CLAZZ":"components.ZSort","z":0},{"CLAZZ":"components.Spin"},{"CLAZZ":"components.Bounce","property":"rotation","minIntensity":0.005,"decay":0.98},{"CLAZZ":"components.Sync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"GroupSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"LabelSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"ImgSync","properties":{"scale.x":0,"scale.y":0},"factors":{"scale.x":0,"scale.y":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"BackSync","properties":{"x":0,"y":0},"useResolve":false},{"CLAZZ":"components.Tween","name":"AlphaTween","enabled":false,"speed":0.05},{"CLAZZ":"components.BallisticPhysics","friction":0.98}],"sprite":"card","@sprite":{"label":"Frente da Carta","removable":false,"type":"image","priority":21,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"sprite","__uid":3442},"sprite.anchor.setTo":0.5,"rearBG":"cardBack","@rearBG":{"label":"Verso da Carta","removable":false,"type":"image","priority":22,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"rearBG","__uid":3443},"x":172.10343803583999,"y":452.66458128162,"img":"img324","group":"3","textAnchor":"center","textSize":25,"textColor":"#FFFFFF","strokeThickness":5,"readText":false,"cardAudio":"","flipTime":1000,"events":{"create":["rearBG = this.loadSprite( this.rearBG, { \"anchor.setTo\":0.5 })","BackSync.write = []","BackSync.write.push( this.rearBG )","frontBG = sprite","this.rearBG.inputEnabled = true","this.rearBG.events.onInputUp.add( this.onClick.bind(this) )","setSpinSprites( this.frontBG, this.rearBG )","Sync.read = frontBG","GroupSync.read = frontBG","LabelSync.read = frontBG","ImgSync.read = frontBG","Sync.write = []","GroupSync.write =[]","ImgSync.write = []","LabelSync.write = []","setupImage()","setupLabel()","setupGroup()","setSpinState(!!this.screen.editor)","*addGroups(this.group)"],"setupGroup":["if: !this.group || !this.screen.editor","return:","grp = this.screen.game.add.text( 0, 0, this.group )","grp.setStyle({fill:\"#00ff00\",stroke:\"#004c00\",strokeThickness:6,fontSize:16})","grp.anchor.setTo(0,0)","GroupSync.write.push(this.grp)","GroupSync.properties.x = -this.frontBG.width*this.frontBG.anchor.x","GroupSync.properties.y = -this.frontBG.height*this.frontBG.anchor.y"],"setupImage":["if: !this.img","return:","img = this.loadSprite( this.img, {doNotInstrument:true} )","img.anchor.setTo(0.5, 0.5)","imgScale = this.ImgSync.factors[\"scale.x\"] = this.ImgSync.factors[\"scale.y\"] = Math.min(1, this.frontBG.width / this.img.width, this.frontBG.height / this.img.height) * 0.8","console.log('img scale', this.imgScale)","Sync.write.push( this.img )","ImgSync.write.push( this.img )"],"setupLabel":["if: !this.lbl","return:","lbl = this.screen.game.add.text( 0, 0, this.lbl )","lbl.setStyle({ fill:this.textColor, fontSize:this.textSize, strokeThickness:this.strokeThickness })","lbl.anchor.setTo(0.5)","if: this.textAnchor == \"bottom\" ","bottomLabel()","if: this.textAnchor == \"top\" ","topLabel()","Sync.write.push( this.lbl )","LabelSync.write.push( this.lbl )"],"bottomLabel":["this.lbl.anchor.setTo(0.5,1)","LabelSync.properties.y = this.sprite.height/2"],"topLabel":["this.lbl.anchor.setTo(0.5,0)","LabelSync.properties.y = -this.sprite.height/2"],"showHint":"bounce(0.5)","onHit":["if: this.state != \"\"","return:","collisionEnabled = false","startSpin( 1, this.spinSpeed )","if: this.readText && this.lbl._text","this.screen.say(this.lbl._text,this.playSound)","if: !this.readText && this.cardAudio","playSound()","state = \"wasHit\"","*onHitCard(this)"],"onClick":["if: this.screen.easyMode","*onShot(this.screen.game.input.x,this.screen.game.input.y)"],"playSound":["*playAudio(this.cardAudio)"],"wasHitEnd":["frontBG.tint = 16777215","collisionEnabled = true"],"hitRightSequence":["*playAudio(\"rightCard\")","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"right\", \"Sync.read\":this.sprite })","frontBG.tint = 5614165","this.AlphaTween.setTweenTarget(0)","screen.setTimeout( \"callFireworks()\", 1000, this)","*onRight(this.group)"],"hitWrongSequence":["*playAudio(\"wrongCard\")","frontBG.tint = 11162965","*onWrong(this.group)"],"hideCard":["startSpin( -1, this.spinSpeed )","this.state = \"\"","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"wrong\", \"Sync.read\":this.sprite })"],"callFireworks":["screen.addEntity({\"class\":\"Fireworks\", \"x\":this.x, \"y\":this.y })"]},"$marker":"CARTA","$label":"Cartas","priority":6,"$moveable":true,"$maxInstances":30,"type":"Entity","lbl":"","@img":{"type":"image","unique":true,"label":"Imagem da carta","tags":"@sprite, conteúdo","maxWidth":500,"maxHeight":500},"@lbl":{"type":"string","label":"Texto da carta","priority":2},"@group":{"type":"string","label":"Grupo","priority":1},"@textAnchor":{"label":"Posição do texto da carta","type":"string","enum":{"top":"Topo da carta","center":"Centro da carta","bottom":"Abaixo da carta"},"priority":5},"@textSize":{"label":"Tamanho do Texto","type":"int","min":6,"max":100,"priority":7},"@strokeThickness":{"label":"Espessura da Borda do Texto","type":"int","min":0,"max":6,"priority":8},"@textColor":{"label":"Cor do Texto","type":"color","priority":6},"@readText":{"label":"Ler texto ao acertar","type":"boolean","priority":2},"@cardAudio":{"unique":true,"label":"Áudio ao Acertar","type":"audio","tags":"@audio, @mp3","priority":3},"__class":"Card","$word":"__$word","__$uid":580},{"CLAZZ":"framework.Phaser.CollidableEntity","components":[{"CLAZZ":"components.ZSort","z":0},{"CLAZZ":"components.Spin"},{"CLAZZ":"components.Bounce","property":"rotation","minIntensity":0.005,"decay":0.98},{"CLAZZ":"components.Sync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"GroupSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"LabelSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"ImgSync","properties":{"scale.x":0,"scale.y":0},"factors":{"scale.x":0,"scale.y":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"BackSync","properties":{"x":0,"y":0},"useResolve":false},{"CLAZZ":"components.Tween","name":"AlphaTween","enabled":false,"speed":0.05},{"CLAZZ":"components.BallisticPhysics","friction":0.98}],"sprite":"card","@sprite":{"label":"Frente da Carta","removable":false,"type":"image","priority":21,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"sprite","__uid":3442},"sprite.anchor.setTo":0.5,"rearBG":"cardBack","@rearBG":{"label":"Verso da Carta","removable":false,"type":"image","priority":22,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"rearBG","__uid":3443},"x":790.1511476747,"y":204.73375411091,"img":"img325","group":"3","textAnchor":"center","textSize":25,"textColor":"#FFFFFF","strokeThickness":5,"readText":false,"cardAudio":"","flipTime":1000,"events":{"create":["rearBG = this.loadSprite( this.rearBG, { \"anchor.setTo\":0.5 })","BackSync.write = []","BackSync.write.push( this.rearBG )","frontBG = sprite","this.rearBG.inputEnabled = true","this.rearBG.events.onInputUp.add( this.onClick.bind(this) )","setSpinSprites( this.frontBG, this.rearBG )","Sync.read = frontBG","GroupSync.read = frontBG","LabelSync.read = frontBG","ImgSync.read = frontBG","Sync.write = []","GroupSync.write =[]","ImgSync.write = []","LabelSync.write = []","setupImage()","setupLabel()","setupGroup()","setSpinState(!!this.screen.editor)","*addGroups(this.group)"],"setupGroup":["if: !this.group || !this.screen.editor","return:","grp = this.screen.game.add.text( 0, 0, this.group )","grp.setStyle({fill:\"#00ff00\",stroke:\"#004c00\",strokeThickness:6,fontSize:16})","grp.anchor.setTo(0,0)","GroupSync.write.push(this.grp)","GroupSync.properties.x = -this.frontBG.width*this.frontBG.anchor.x","GroupSync.properties.y = -this.frontBG.height*this.frontBG.anchor.y"],"setupImage":["if: !this.img","return:","img = this.loadSprite( this.img, {doNotInstrument:true} )","img.anchor.setTo(0.5, 0.5)","imgScale = this.ImgSync.factors[\"scale.x\"] = this.ImgSync.factors[\"scale.y\"] = Math.min(1, this.frontBG.width / this.img.width, this.frontBG.height / this.img.height) * 0.8","console.log('img scale', this.imgScale)","Sync.write.push( this.img )","ImgSync.write.push( this.img )"],"setupLabel":["if: !this.lbl","return:","lbl = this.screen.game.add.text( 0, 0, this.lbl )","lbl.setStyle({ fill:this.textColor, fontSize:this.textSize, strokeThickness:this.strokeThickness })","lbl.anchor.setTo(0.5)","if: this.textAnchor == \"bottom\" ","bottomLabel()","if: this.textAnchor == \"top\" ","topLabel()","Sync.write.push( this.lbl )","LabelSync.write.push( this.lbl )"],"bottomLabel":["this.lbl.anchor.setTo(0.5,1)","LabelSync.properties.y = this.sprite.height/2"],"topLabel":["this.lbl.anchor.setTo(0.5,0)","LabelSync.properties.y = -this.sprite.height/2"],"showHint":"bounce(0.5)","onHit":["if: this.state != \"\"","return:","collisionEnabled = false","startSpin( 1, this.spinSpeed )","if: this.readText && this.lbl._text","this.screen.say(this.lbl._text,this.playSound)","if: !this.readText && this.cardAudio","playSound()","state = \"wasHit\"","*onHitCard(this)"],"onClick":["if: this.screen.easyMode","*onShot(this.screen.game.input.x,this.screen.game.input.y)"],"playSound":["*playAudio(this.cardAudio)"],"wasHitEnd":["frontBG.tint = 16777215","collisionEnabled = true"],"hitRightSequence":["*playAudio(\"rightCard\")","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"right\", \"Sync.read\":this.sprite })","frontBG.tint = 5614165","this.AlphaTween.setTweenTarget(0)","screen.setTimeout( \"callFireworks()\", 1000, this)","*onRight(this.group)"],"hitWrongSequence":["*playAudio(\"wrongCard\")","frontBG.tint = 11162965","*onWrong(this.group)"],"hideCard":["startSpin( -1, this.spinSpeed )","this.state = \"\"","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"wrong\", \"Sync.read\":this.sprite })"],"callFireworks":["screen.addEntity({\"class\":\"Fireworks\", \"x\":this.x, \"y\":this.y })"]},"$marker":"CARTA","$label":"Cartas","priority":6,"$moveable":true,"$maxInstances":30,"type":"Entity","lbl":"","@img":{"type":"image","unique":true,"label":"Imagem da carta","tags":"@sprite, conteúdo","maxWidth":500,"maxHeight":500},"@lbl":{"type":"string","label":"Texto da carta","priority":2},"@group":{"type":"string","label":"Grupo","priority":1},"@textAnchor":{"label":"Posição do texto da carta","type":"string","enum":{"top":"Topo da carta","center":"Centro da carta","bottom":"Abaixo da carta"},"priority":5},"@textSize":{"label":"Tamanho do Texto","type":"int","min":6,"max":100,"priority":7},"@strokeThickness":{"label":"Espessura da Borda do Texto","type":"int","min":0,"max":6,"priority":8},"@textColor":{"label":"Cor do Texto","type":"color","priority":6},"@readText":{"label":"Ler texto ao acertar","type":"boolean","priority":2},"@cardAudio":{"unique":true,"label":"Áudio ao Acertar","type":"audio","tags":"@audio, @mp3","priority":3},"__class":"Card","$word":"__$word","__$uid":581},{"$isMarker":true,"$marker":"CARTA","$label":"Cartas","priority":6,"$moveable":true,"$maxInstances":30,"class":"Card","type":"Entity","lbl":"","@img":{"type":"image","unique":true,"label":"Imagem da carta","tags":"@sprite, conteúdo","maxWidth":500,"maxHeight":500},"@lbl":{"type":"string","label":"Texto da carta","priority":2},"@group":{"type":"string","label":"Grupo","priority":1},"@textAnchor":{"label":"Posição do texto da carta","type":"string","enum":{"top":"Topo da carta","center":"Centro da carta","bottom":"Abaixo da carta"},"priority":5},"@textSize":{"label":"Tamanho do Texto","type":"int","min":6,"max":100,"priority":7},"@strokeThickness":{"label":"Espessura da Borda do Texto","type":"int","min":0,"max":6,"priority":8},"@textColor":{"label":"Cor do Texto","type":"color","priority":6},"@readText":{"label":"Ler texto ao acertar","type":"boolean","priority":2},"@cardAudio":{"unique":true,"label":"Áudio ao Acertar","type":"audio","tags":"@audio, @mp3","priority":3},"__$uid":582},{"CLAZZ":"screens.tiroV2.Monster","@sprite":{"label":"Personagem","type":"image","removable":false,"priority":30,"tags":"@anim:getup,@anim:fly,@anim:fall"},"sprite":"monster","components":[{"CLAZZ":"components.AutoFlip","defaultRight":false}],"x":512,"y":350,"sprite.anchor.x":0.5,"sprite.anchor.y":0.5,"$isMarker":true,"$label":"Monstros","$marker":"MONSTRO","$moveable":true,"type":"Entity","priority":7,"__$uid":583},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"hud","sprite.anchor.x":0,"sprite.anchor.y":1,"@link":"BalloonCount","x":0,"y":768,"__uid":584},{"CLAZZ":"entities.Timer","x":950,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":551},"time":60000,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":585},{"CLAZZ":"framework.Phaser.Label","text":"","x":133,"y":740,"size":50,"color":"#fff","stroke":"#000","strokeThickness":5,"events":{"setBalloonCount":"this.text.setText(this.screen.waterBalloonCount)","create":"this.text.setText(this.screen.waterBalloonCount)"},"__uid":586},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"slingshotBase","components":[{"CLAZZ":"components.ZSort","z":1}],"@sprite":{"label":"Estilingue","removable":false,"type":"image","priority":23,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"sprite","__uid":549},"x":512,"y":768,"sprite.anchor.x":0.5,"sprite.anchor.y":1,"__uid":587},{"CLAZZ":"screens.tiroEasyMode.Slingshot","sprite":"basket","x":512,"y":630,"power":1.25,"lineWidth":20,"lineColor":"#814448","lineLeftOffsetX":-24,"lineRightOffsetX":24,"sprite.anchor.x":0.5,"sprite.anchor.y":0.5,"events":{"onDragStop":"*playAudio(\"shotStart\")","onDragStart":"*playAudio(\"dragSlingShot\")"},"__uid":588},{"class":"HelpingHand","__uid":589},{"CLAZZ":"framework.Phaser.Bitmap","sprite":"target","x":512,"y":364,"sprite.anchor.setTo":0.5,"events":{"create":"sprite.alpha = 0","targetPos":["sprite.alpha = 1","sprite.x = arguments[0]","sprite.y = arguments[1]"],"onDragStop":"sprite.alpha = 0"},"__uid":590}],"values":{"@screen.waterBalloonCount":{"label":"Quantidade de Balões","type":"int","min":1,"max":30,"priority":9,"link":"BalloonCount","propertyName":"screen\\_waterBalloonCount","__uid":562},"screen.waterBalloonCount":14,"screen.makeTTSSpeech":false,"@screen.makeTTSSpeech":{"label":" ","type":"boolean","priority":10,"menu":"Pergunta","text":"Ler Pergunta Automaticamente","propertyName":"screen\\_makeTTSSpeech","__uid":563},"screen.showHint":false,"@screen.showHint":{"label":"Exibir Dicas","priority":35,"type":"boolean","text":"Exibir Dicas","propertyName":"screen\\_showHint","__uid":564},"screen.readQuestionOnClick":false,"@screen.readQuestionOnClick":{"label":" ","type":"boolean","priority":11,"menu":"Pergunta","text":"Ler Pergunta Ao Clicar","propertyName":"screen\\_readQuestionOnClick","__uid":565},"screen.easyMode":true,"@screen.easyMode":{"label":"Modo fácil","type":"boolean","priority":10,"text":"Ativar modo fácil","propertyName":"screen\\_easyMode","__uid":566},"screen.randomizeCards":true,"@screen.randomizeCards":{"label":"Embaralhar cartas","type":"boolean","text":"Embaralhar cartas","propertyName":"screen\\_randomizeCards","__uid":567}},"classes":{"HelpingHand":{"components":[{"CLAZZ":"components.ZSort","z":-5},{"CLAZZ":"components.AutoPos","enabled":false,"callback":"hideHand","accelerate":true,"speed":0.05,"minDelta":2},{"CLAZZ":"components.Tween","name":"AlphaTween"},{"CLAZZ":"components.Bounce","sign":-1,"speed":0.01,"decay":0.985,"minIntensity":5},{"CLAZZ":"components.Tween","name":"RotationTween","property":"rotation","speed":0.05}],"events":{"hideHand":"AlphaTween.setTweenTarget(0, \"sprite.visible=false\")","showHowToPlayHelp":["sprite.visible=true","AlphaTween.apply({\"target\":1, \"enabled\":true, \"callback\":\"onDoneHowToPlayFadeIn\"})","sprite.rotation=Math.PI/2","x=530","sprite.x=550","y=590","sprite.y=610"],"onDoneHowToPlayFadeIn":["RotationTween.setTweenTarget(Math.PI/4)","AutoPos.apply({\"targetX\":540, \"targetY\":700, \"velX\":0, \"velY\":0, \"enabled\":true, \"accelerate\":true, \"updateEntity\":true})"]},"sprite":"hand","sprite.alpha":0,"sprite.visible":false,"sprite.anchor.setTo":[1,0.2],"sprite.scale.setTo":[-1,1]},"Feedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","components":[{"CLAZZ":"components.ZSort","z":-10},{"CLAZZ":"components.Sync"},{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()","onEndWrong":"destroy()"},"sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6},"Fireworks":{"CLAZZ":"framework.Phaser.Bitmap","components":[{"CLAZZ":"components.ZSort","z":10}],"sprite":"fireworks","sprite.anchor.setTo":[0.5,0.75]},"Balloon":{"components":[{"CLAZZ":"components.Sync","read":"slingshot.sprite"},{"CLAZZ":"components.AutoScale","enabled":false},{"CLAZZ":"components.Tween","speed":0.1,"enabled":false},{"CLAZZ":"components.BallisticPhysics"},{"CLAZZ":"components.ZSort","z":-2}],"sprite":"waterBalloon","sprite.anchor.setTo":0.5,"events":{"create":"Sync.onPostTick()","onDragStop":["if: !this.Sync.enabled","return:","Sync.enabled = false","sprite.parent.bringToTop(this.sprite)","BallisticPhysics.setVelocity(arguments[1], arguments[2])","setAutoScaleTarget(0.5, \"onHit()\")","state = \"fly\""],"onHit":["state = \"dead\"","hit = this.getCollision()","splash = this.screen.game.add.image(this.sprite.x, this.sprite.y, \"splash\" )","sprite.destroy()","*playAudio(\"hitSound\")","sprite = splash","sprite.rotation = Math.random() * 180","sprite.anchor.setTo(0.5, 0.5)","setTweenTarget(0, \"onDoneFadeOut()\")","raiseHitOrMiss()","*onSplash()"],"raiseHitOrMiss":["if: this.hit","return: this.raiseHit()","return: this.raiseMiss()"],"onDoneFadeOut":["destroy()"],"raiseHit":["if: this.hit.onHit","hit.onHit(this)","*playAudio(\"hitSound\")","CALL(\"onBalloonHit\" + this.hit.constructor.NAME, this, this.hit )","*onBalloonHit(this, this.hit)"],"raiseMiss":["*onBalloonMiss()"]}},"Card":{"CLAZZ":"framework.Phaser.CollidableEntity","components":[{"CLAZZ":"components.ZSort","z":0},{"CLAZZ":"components.Spin"},{"CLAZZ":"components.Bounce","property":"rotation","minIntensity":0.005,"decay":0.98},{"CLAZZ":"components.Sync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"GroupSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"LabelSync","properties":{"x":0,"y":0,"scale.x":0,"scale.y":0,"visible":0,"alpha":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"ImgSync","properties":{"scale.x":0,"scale.y":0},"factors":{"scale.x":0,"scale.y":0},"useResolve":true},{"CLAZZ":"components.Sync","name":"BackSync","properties":{"x":0,"y":0},"useResolve":false},{"CLAZZ":"components.Tween","name":"AlphaTween","enabled":false,"speed":0.05},{"CLAZZ":"components.BallisticPhysics","friction":0.98}],"sprite":"card","@sprite":{"label":"Frente da Carta","removable":false,"type":"image","priority":21,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"sprite","__uid":568},"sprite.anchor.setTo":0.5,"rearBG":"cardBack","@rearBG":{"label":"Verso da Carta","removable":false,"type":"image","priority":22,"tags":"@sprite,cena,tiro","menu":"Elementos de Cenário","propertyName":"rearBG","__uid":569},"x":512,"y":384,"img":"","group":"","textAnchor":"center","textSize":25,"textColor":"#FFFFFF","strokeThickness":5,"readText":false,"cardAudio":"","flipTime":1000,"events":{"create":["rearBG = this.loadSprite( this.rearBG, { \"anchor.setTo\":0.5 })","BackSync.write = []","BackSync.write.push( this.rearBG )","frontBG = sprite","this.rearBG.inputEnabled = true","this.rearBG.events.onInputUp.add( this.onClick.bind(this) )","setSpinSprites( this.frontBG, this.rearBG )","Sync.read = frontBG","GroupSync.read = frontBG","LabelSync.read = frontBG","ImgSync.read = frontBG","Sync.write = []","GroupSync.write =[]","ImgSync.write = []","LabelSync.write = []","setupImage()","setupLabel()","setupGroup()","setSpinState(!!this.screen.editor)","*addGroups(this.group)"],"setupGroup":["if: !this.group || !this.screen.editor","return:","grp = this.screen.game.add.text( 0, 0, this.group )","grp.setStyle({fill:\"#00ff00\",stroke:\"#004c00\",strokeThickness:6,fontSize:16})","grp.anchor.setTo(0,0)","GroupSync.write.push(this.grp)","GroupSync.properties.x = -this.frontBG.width*this.frontBG.anchor.x","GroupSync.properties.y = -this.frontBG.height*this.frontBG.anchor.y"],"setupImage":["if: !this.img","return:","img = this.loadSprite( this.img, {doNotInstrument:true} )","img.anchor.setTo(0.5, 0.5)","imgScale = this.ImgSync.factors[\"scale.x\"] = this.ImgSync.factors[\"scale.y\"] = Math.min(1, this.frontBG.width / this.img.width, this.frontBG.height / this.img.height) * 0.8","console.log('img scale', this.imgScale)","Sync.write.push( this.img )","ImgSync.write.push( this.img )"],"setupLabel":["if: !this.lbl","return:","lbl = this.screen.game.add.text( 0, 0, this.lbl )","lbl.setStyle({ fill:this.textColor, fontSize:this.textSize, strokeThickness:this.strokeThickness })","lbl.anchor.setTo(0.5)","if: this.textAnchor == \"bottom\" ","bottomLabel()","if: this.textAnchor == \"top\" ","topLabel()","Sync.write.push( this.lbl )","LabelSync.write.push( this.lbl )"],"bottomLabel":["this.lbl.anchor.setTo(0.5,1)","LabelSync.properties.y = this.sprite.height/2"],"topLabel":["this.lbl.anchor.setTo(0.5,0)","LabelSync.properties.y = -this.sprite.height/2"],"showHint":"bounce(0.5)","onHit":["if: this.state != \"\"","return:","collisionEnabled = false","startSpin( 1, this.spinSpeed )","if: this.readText && this.lbl._text","this.screen.say(this.lbl._text,this.playSound)","if: !this.readText && this.cardAudio","playSound()","state = \"wasHit\"","*onHitCard(this)"],"onClick":["if: this.screen.easyMode","*onShot(this.screen.game.input.x,this.screen.game.input.y)"],"playSound":["*playAudio(this.cardAudio)"],"wasHitEnd":["frontBG.tint = 16777215","collisionEnabled = true"],"hitRightSequence":["*playAudio(\"rightCard\")","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"right\", \"Sync.read\":this.sprite })","frontBG.tint = 5614165","this.AlphaTween.setTweenTarget(0)","screen.setTimeout( \"callFireworks()\", 1000, this)","*onRight(this.group)"],"hitWrongSequence":["*playAudio(\"wrongCard\")","frontBG.tint = 11162965","*onWrong(this.group)"],"hideCard":["startSpin( -1, this.spinSpeed )","this.state = \"\"","screen.addEntity({\"class\":\"Feedback\", \"animation\":\"wrong\", \"Sync.read\":this.sprite })"],"callFireworks":["screen.addEntity({\"class\":\"Fireworks\", \"x\":this.x, \"y\":this.y })"]}}},"imageTitles":[],"USID":"5ef293131a25c","imgTitles":{"":"","./resources/4a72c17317495db36bfe31f89c86251c.png":"bg1","./resources/20eeae43934523f0f14b762d3b5f40c5.png":"carta verso","./resources/ed3206f12f1d0a21e20bb3e09a471d69.png":"carta verso","./resources/1c465573aecd9bbea9c61baa9436a2e2.png":"ecifantasia","./resources/d846107063b6835e3d77960aaed1b4b5.png":"peter-pan-","./resources/66ca7876f757abe07163639c840112ff.jpg":"mulhermaravilha","./resources/0e0082c30a4b3b461ff423712d244eeb.png":"carta frente","./resources/e25739c08e22348c73a76ba9aa9c36bf.png":"carta frente","./resources/9317f5a683c2e7e44afb4097c623e76e.png":"carta"}},{"CLAZZ":"screens.queda.Queda","@name":{"label":"Nome da Tela","type":"string","priority":-1,"propertyName":"name","__uid":2619},"name":"Tela 18","GUID":"1cb3775c-9d39-4ce9-8a20-5b9cb4e5192c","assets":{"img_mascara":"./resources/72c4ea14711de40a140b5294044a50fa.png","img_ERRO2capa":"./resources/a4d9c537d3d7773007a83ecdab229b4f.png","img_erro1":"./resources/24741b82c7495f21658031b420a80b80.png","img_noel":"./resources/6801b96f698edbea2eb3191c2ab9544e.png","img_natal":"./resources/9437b61b3372afd933a38aa965de25b5.png","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","bg":"./resources/f2d94904fc28f9c776dd6d6850e76a6c.png","imgTop":"","monster":"spritesheet/robot.png","monsterATLAS":"spritesheet/robot.json","correct":"spritesheet/fireworks.png","correctATLAS":"spritesheet/fireworks.json","basket":"./resources/afb67a2e05434d1d4ca82bb75f86f012.png","basketFront":"./resources/999a7a31a8a40a1939cbeeb72afcebf4.png","wrong":"spritesheet/feedback.png","wrongATLAS":"spritesheet/feedback.json","bgSound":"","introSpeech":"","hitSound":"common-audio/SFX/4Quicando.mp3","correctSound":"common-audio/SFX/4Acerto.mp3","dropSound":"common-audio/SFX/4Jogando.mp3","wrongSound":"common-audio/SFX/4Erro.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timeEnded":"common-audio/SFX/1Atencao.mp3"},"logo":"true","editorPauseTime":2000,"events":{"create":["*killAllSounds()","*playAudio(\"bgSound\", true)","*playAudio(\"introSpeech\")"],"onTimeEnded":["*killAllSounds","*playAudio(\"timeEnded\")"],"countDown":"*playAudio(\"hurryUp\",true)"},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":2631},"bgSound":"bgSound","__uid":2642},{"introSpeech":"introSpeech","@introSpeech":{"label":"Áudio de Narrativa","type":"audio","tags":"@audio, @mp3","priority":9,"menu":"Pergunta","propertyName":"introSpeech","__uid":2630},"__uid":2643},{"CLAZZ":"framework.Phaser.Bitmap","@sprite":{"label":"Imagem de fundo","type":"image","priority":10,"tags":"@sprite,fullscreen,bg","menu":"Elementos de Cenário","maxWidth":1024,"maxHeight":768,"propertyName":"sprite","__uid":2629},"sprite":"bg","components":[{"CLAZZ":"components.MouseInput"}],"__uid":2644},{"CLAZZ":"framework.Phaser.Bitmap","@sprite":{"label":"Caixa de Texto","type":"image","priority":11,"tags":"@sprite,gui,pergunta","menu":"Elementos de Cenário","propertyName":"sprite","__uid":2627},"sprite":"imgTop","sprite.anchor.setTo":[0.5,0],"id":"imgTopTV","x":512,"y":-150,"__uid":2645},{"class":"Monster","__uid":2646},{"CLAZZ":"framework.Phaser.Label","@text":{"label":"Pergunta","type":"string","multiline":true,"priority":2,"menu":"Pergunta","propertyName":"text","__uid":2621},"text":"Chegou a hora de guardarmos os ornamentos para o próximo ano. Coloque cada objeto em sua respectiva caixa!","wordWrapWidth":914.25,"@wordWrapWidth":{"type":"GUID","propertyName":"wordWrapWidth","__uid":2623},"id":"winText","x":494.5,"y":120.9375,"type":"Entity","$moveable":true,"$transform":true,"priority":3,"size":40,"@size":{"label":"Tamanho da Fonte","type":"int","priority":4,"min":6,"max":100,"menu":"Pergunta","propertyName":"size","__uid":2624},"align":"left","color":"#f6ec00","@color":{"label":"Cor da Fonte","type":"color","priority":5,"menu":"Pergunta","propertyName":"color","__uid":2625},"stroke":"#000","strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":6,"menu":"Pergunta","propertyName":"strokeThickness","__uid":2626},"events":{"create":["if: this.screen.makeTTSSpeech","this.screen.say(this.text._text)"]},"__uid":2647},{"CLAZZ":"entities.Timer","x":950,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":20,"propertyName":"time","__uid":2620},"time":180000,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":2648},{"class":"Feedback","__uid":2649},{"class":"Fireworks","__uid":2650},{"CLAZZ":"framework.Phaser.Entity","size":25,"color":"#000","stroke":"#000","img":null,"strokeThickness":0,"$label":"Cestos","$marker":"CESTO","$word":"text","$wordDefault":"CESTO","priority":5,"text":"NATAL","hideText":false,"@hideText":{"type":"boolean","priority":5,"label":"Ocultar Texto"},"@img":{"type":"image","label":"Imagem","tags":"@sprite","unique":true,"priority":9},"@size":{"label":"Tamanho da Fonte","type":"int","priority":6,"min":6,"max":100},"@color":{"label":"Cor da Fonte","type":"color","priority":7},"tint":"#ffffff","@tint":{"label":"Cor da Cesta","type":"color","priority":1},"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":8},"__$uid":2651,"__class":"BasketSettings"},{"CLAZZ":"framework.Phaser.Entity","size":25,"color":"#000","stroke":"#000","img":null,"strokeThickness":0,"$label":"Cestos","$marker":"CESTO","$word":"text","$wordDefault":"CESTO","priority":5,"text":"CARNAVAL","hideText":false,"@hideText":{"type":"boolean","priority":5,"label":"Ocultar Texto"},"@img":{"type":"image","label":"Imagem","tags":"@sprite","unique":true,"priority":9},"@size":{"label":"Tamanho da Fonte","type":"int","priority":6,"min":6,"max":100},"@color":{"label":"Cor da Fonte","type":"color","priority":7},"tint":"#ffffff","@tint":{"label":"Cor da Cesta","type":"color","priority":1},"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":8},"__$uid":2652,"__class":"BasketSettings"},{"class":"BasketSettings","$label":"Cestos","$marker":"CESTO","$word":"text","$wordDefault":"CESTO","priority":5,"img":null,"text":"OBJETO","hideText":false,"@hideText":{"type":"boolean","priority":5,"label":"Ocultar Texto"},"@img":{"type":"image","label":"Imagem","tags":"@sprite","unique":true,"priority":9},"@size":{"label":"Tamanho da Fonte","type":"int","priority":6,"min":6,"max":100},"@color":{"label":"Cor da Fonte","type":"color","priority":7},"tint":"#ffffff","@tint":{"label":"Cor da Cesta","type":"color","priority":1},"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":8},"__$uid":2653},{"class":"BasketSettings","$label":"Cestos","$isMarker":true,"$marker":"CESTO","$word":"text","$wordDefault":"CESTO","priority":5,"img":null,"text":"OBJETO","hideText":false,"@hideText":{"type":"boolean","priority":5,"label":"Ocultar Texto"},"@img":{"type":"image","label":"Imagem","tags":"@sprite","unique":true,"priority":9},"@size":{"label":"Tamanho da Fonte","type":"int","priority":6,"min":6,"max":100},"@color":{"label":"Cor da Fonte","type":"color","priority":7},"tint":"#ffffff","@tint":{"label":"Cor da Cesta","type":"color","priority":1},"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":8},"__$uid":2654}],"values":{"@screen.basketCount":{"label":"Quantidade de Cestos","type":"int","min":1,"max":5,"priority":2,"menu":"Configurações","propertyName":"screen\\_basketCount","__uid":2632},"screen.basketCount":2,"screen.makeTTSSpeech":true,"@screen.makeTTSSpeech":{"label":" ","type":"boolean","priority":10,"menu":"Pergunta","text":"Ler Pergunta Automaticamente","propertyName":"screen\\_makeTTSSpeech","__uid":2634},"--@screen.obstacles.Pipe":{"label":"Obstáculos","type":"quedaObstacles"},"screen.obstacles":{"pipe":false},"@screen.items":{"label":"Objetos","type":"QuedaItems","priority":7,"maxWidth":240,"maxHeight":240,"propertyName":"screen\\_items","__uid":2635},"screen.items":{"mascara":{"correct":"CARNAVAL"},"ERRO2capa":{"correct":"CARNAVAL"},"erro1":{"correct":"CARNAVAL"},"noel":{"correct":"NATAL"},"natal":{"correct":"NATAL"}},"@screen.sortBoxes":{"label":" ","type":"boolean","priority":3,"menu":"Configurações","text":"Embaralhar Cestos","propertyName":"screen\\_sortBoxes","__uid":2636},"screen.sortBoxes":false,"screen.basketPlaces":{"1":[{"x":512,"y":700}],"2":[{"x":312,"y":700},{"x":712,"y":700}],"3":[{"x":112,"y":700},{"x":512,"y":700},{"x":912,"y":700}],"4":[{"x":92,"y":700},{"x":372,"y":700},{"x":652,"y":700},{"x":932,"y":700}],"5":[{"x":112,"y":700},{"x":312,"y":700},{"x":512,"y":700},{"x":712,"y":700},{"x":912,"y":700}]}},"classes":{"BasketSettings":{"CLAZZ":"framework.Phaser.Entity","size":25,"color":"#000","stroke":"#000","img":null,"strokeThickness":0},"Monster":{"@sprite":{"label":"Personagem","type":"image","priority":9,"tags":"@anim:flycarry","menu":"Personagem","propertyName":"sprite","__uid":2637},"sprite":"monster","sprite.anchor.setTo":[0.5,0.5],"x":975,"y":180,"target":null,"targetSet":false,"id":"Monster","state":"fly","@moveSpeed":{"label":"Velocidade do Personagem","type":"int","min":1,"max":12,"priority":8,"menu":"Personagem","propertyName":"moveSpeed","__uid":2639},"moveSpeed":1,"xLeft":50,"xRight":975,"components":[{"CLAZZ":"components.FlyAI","minX":50,"maxX":975,"minY":100,"maxY":500},{"CLAZZ":"components.MoveTo","targetX":50,"targetY":180,"callback":"touchLeft","enabled":false},{"CLAZZ":"components.AutoFlip","defaultRight":true}],"events":{"create":["sprite.animations.play(\"flycarry\")","MoveTo.speed = this.moveSpeed"],"setDropTarget":["if: this.targetSet","return: ","target = arguments[0]","FlyAI.tx = this.target.sprite.x","FlyAI.ty = this.target.sprite.y * 0.5","state = 'aim'","this.targetSet = true"],"aimBegin":"FlyAI.speed = 0.2","flyBegin":"FlyAI.speed = this.moveSpeed * 0.01","aim":["if: this.sprite.x < this.target.x - 50 || this.sprite.x > this.target.x + 50","return:","state = 'fly'","*dropItem()"],"dropItem":"this.targetSet = false","onEndGame":["MoveTo.speed = 5","MoveTo.targetX = 512","MoveTo.targetY = 400","MoveTo.enabled = true","MoveTo.callback = \"\""],"onRight":"sprite.animations.play(\"right\")","onWrong":"sprite.animations.play(\"wrong\")"}},"Basket":{"CLAZZ":"screens.queda.Basket","@sprite":{"label":"Frente dos Cestos","type":"image","priority":12,"tags":"@sprite, cena,caixa","menu":"Elementos de Cenário","propertyName":"sprite","__uid":2640},"sprite":"basketFront","sprite.anchor.setTo":[0.5,0.5],"@spriteBack":{"label":"Fundo dos Cestos","type":"image","priority":13,"tags":"@sprite, cena,caixa","menu":"Elementos de Cenário","propertyName":"spriteBack","__uid":2641},"spriteBack":"basket","components":[{"CLAZZ":"components.MouseInput"}],"events":{"onClick":"*setDropTarget( this )"}},"Item":{"CLAZZ":"screens.queda.Item","sprite.anchor.setTo":[0.5,-0.2],"bounceFactor":0.8,"components":[{"CLAZZ":"components.FollowTo","follow":"Monster"},{"CLAZZ":"components.BallisticPhysics","gravity":0.4,"friction":0.995}],"events":{"create":"*onItemCreated()"}},"Feedback":{"CLAZZ":"framework.Phaser.Bitmap","events":{"create":["sprite.animations.stop()","sprite.alpha = 0"],"onWrong":["sprite.parent.bringToTop(this.sprite)","*playAudio(\"wrongSound\", false)","sprite.animations.play(\"wrong\")","sprite.alpha = 1"],"onRight":["sprite.parent.bringToTop(this.sprite)","*playAudio(\"correctSound\", false)","sprite.animations.play(\"right\")","sprite.alpha = 1"],"onrightFrame31":["sprite.alpha = 0","screen.setTimeout('*nextItem()',0)"],"onwrongFrame31":["sprite.alpha = 0","screen.setTimeout('*nextItem()',0)"]},"sprite":"wrong","sprite.anchor.setTo":0.5,"sprite.alpha":0,"sprite.scale.setTo":0.6,"id":"feedback"},"Fireworks":{"CLAZZ":"framework.Phaser.Bitmap","events":{"onRight":"sprite.animations.play(\"default\")"},"sprite":"correct","sprite.anchor.setTo":0.5,"sprite.x":-500,"id":"fireworks"}},"imageTitles":[],"thumbnail":".././resources/thumb_293202.png","USID":"5ef29a1d73bd9","imgTitles":{"":"","./resources/f2d94904fc28f9c776dd6d6850e76a6c.png":"bg2"}},{"CLAZZ":"screens.generic.LevelClear","@name":{"label":"Nome da Tela","type":"string"},"name":"LevelClear","thumbnail":".././resources/thumb_5064.png","GUID":"64bc0865-bc6a-4498-bd2d-1b3cd8ffec9e","assets":{"bg":"./resources/1024x768/b0c926e3981f98666fa465fc02cf1d22.png","alpha_bg":"escalada-imgs-etapa/normal-bg-intro.png","bgStarWin":"levelClear-imgs-etapa/normal-painel-telaFinal.png","bgStarLose":"levelClear-imgs-etapa/normal-painel-telaFinal-lose.png","btNextLevel":"levelClear-imgs-etapa/normal-btn_next.png","btNextLevelDeactivated":"levelClear-imgs-etapa/normal-btn_next_grey.png","btPlayAgain":"levelClear-imgs-etapa/normal-btn_replay.png","star":"levelClear-imgs-etapa/normalEstrela-telaFinal.png","star1":"common-audio/star1.mp3","star2":"common-audio/star1.mp3","star3":"common-audio/star1.mp3","levelFailed":"common-audio/levelFailed.mp3","levelClear":"common-audio/levelClear.mp3"},"logo":"true","values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"classes":{"Star":{"sprite":"star","sprite.visible":false,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":10,"sprite.rotation":10,"audio":"star1","components":[{"CLAZZ":"components.AutoScale","enabled":false,"speed":0.1,"target":1.2},{"CLAZZ":"components.Tween","enabled":false,"target":0,"speed":0.04,"property":"rotation"}],"events":{"activateStar":["sprite.visible = true","setAutoScaleEnabled(true)","setTweenEnabled(true)","*playAudio(this.audio)"]}}},"entities":[{"@levelFailed":{"label":"Áudio de Tente Novamente","type":"audio","tags":"@audio, @mp3, levelClear","priority":22},"levelFailed":"levelFailed"},{"@levelClear":{"label":"Áudio de Parabéns","type":"audio","tags":"@audio, @mp3, levelClear","priority":21},"levelClear":"levelClear"},{"CLAZZ":"framework.Phaser.FullScreenBitmap","@sprite":{"label":"Imagem de fundo","type":"image","priority":30,"tags":"@sprite,fullscreen,bg","maxWidth":1024,"maxHeight":768},"sprite":"bg"},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","alpha":0.8},{"id":"bgStarId","sprite":"bgStarWin","x":-667,"y":125,"sprite.scale.setTo":1.15,"sprite.anchor.setTo":0.5,"components":[{"CLAZZ":"components.AutoPos","speed":0.15,"targetX":640,"targetY":384,"minDelta":0.8,"enabled":false},{"CLAZZ":"components.Bounce","speed":0.01,"intensity":10,"decay":0.98,"iterator":3.141592653589}],"events":{"passed":["setAutoPosEnabled(true)","*playAudio(\"levelClear\")"],"doneMoving":"*activateStars()"}},{"sprite":"bgStarLose","sprite.scale.setTo":1.15,"sprite.anchor.setTo":0.5,"x":640,"y":-600,"components":[{"CLAZZ":"components.AutoPos","speed":0.15,"targetX":640,"targetY":384,"minDelta":0.8,"enabled":false}],"events":{"failed":["setAutoPosEnabled(true)","*playAudio(\"levelFailed\")"],"doneMoving":["*activateStars()"]}},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"DORITOS!","id":"scoreText","x":832,"y":505,"size":30,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"sprite.visible=true","updateGrade":"this.setText('Pontos: ' + Math.floor(arguments[0]*10))"}},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"","id":"scoreText","x":468,"y":505,"size":30,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"sprite.visible=true","updateGrade":["if: this.screen.timeSpend","return: this.setText('Tempo: ' + this.screen.timeSpend)"]}},{"CLAZZ":"framework.Phaser.Label","UIDelay":0,"text":"PARABÉNS!","id":"winText","x":640,"y":180,"size":60,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"SOL.screen.setTimeout(\"*showPassedUINoDelay()\", this.UIDelay, this)","activateStar1":"UIDelay += 1000","activateStar2":"UIDelay += 1000","activateStar3":"UIDelay += 1000"}},{"CLAZZ":"framework.Phaser.Label","text":"TENTE NOVAMENTE!","id":"loseText","x":640,"y":180,"size":60,"color":"#fff","stroke":"#800","strokeThickness":10,"sprite.visible":false,"events":{"showFailedUI":"sprite.visible=true"}},{"class":"Star","x":408,"y":360,"audio":"star1","events":{"activateStar1":"activateStar(1)"}},{"class":"Star","audio":"star2","x":640,"y":335,"events":{"activateStar2":"SOL.screen.setTimeout(\"activateStar(2)\", 1000, this)"}},{"class":"Star","audio":"star3","x":870,"y":358,"events":{"activateStar3":"SOL.screen.setTimeout(\"activateStar(3)\", 2000, this)"}},{"CLAZZ":"framework.Phaser.Button","sprite":"btNextLevel","sprite.visible":false,"id":"btnNextLevel","onClick":"SOL.nextScreen()","x":690,"y":549,"events":{"showPassedUINoDelay":"sprite.visible=true"}},{"CLAZZ":"framework.Phaser.Button","sprite":"btNextLevelDeactivated","sprite.visible":false,"id":"btnNextDeactivated","onClick":"","x":690,"y":549,"events":{"showFailedUI":"sprite.visible=true"}},{"CLAZZ":"framework.Phaser.Button","sprite":"btPlayAgain","sprite.visible":false,"id":"btnPlayAgain","onClick":"SOL.loadScreen(SOL.screen.levelName)","x":486,"y":549,"canGoBack":true,"events":{"activateStar1":"canGoBack=false","showFailedUI":"sprite.visible=true","showPassedUINoDelay":"sprite.visible=canGoBack"}}],"imageTitles":[],"USID":"5ef292b3a5912"},{"CLAZZ":"screens.generic.GameClear","@name":{"label":"Nome da Tela","type":"string"},"name":"Tela 5","thumbnail":".././resources/thumb_38441.png","GUID":"91A06CE2-1520-4EFB-A001-EF8C2BAF46A8","assets":{"bg":"escalada-imgs-etapa/bg.png","alpha_bg":"gameClear-imgs/normal-bg-intro.png","bgStarWin":"gameClear-imgs/normal-painel-telaFinal.png","bgStarLose":"gameClear-imgs/normal-painel-telaFinal-lose.png","btNextLevel":"gameClear-imgs/normal-btn_next.png","btNextLevelDeactivated":"gameClear-imgs/normal-btn_next_grey.png","btPlayAgain":"gameClear-imgs/normal-btn_replay.png","star":"gameClear-imgs/normalEstrela-telaFinal.png","levelFailed":"common-audio/levelFailed.mp3","levelClear":"common-audio/levelClear.mp3","sprite56":"./resources/600x600/5b1f1bcb7652611417011e8d61a3dd81.png","sprite196":"./resources/600x600/a882d6319093d8dc9325b6b61999561e.png","sprite210":"./resources/600x600/eddd3590c45a6feee5a417a559897279.png"},"logo":"true","editorPauseTime":3000,"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@levelClear":{"label":"Áudio de Parabéns","type":"audio","tags":"@audio, @mp3, levelClear","priority":21},"levelClear":"levelClear"},{"CLAZZ":"framework.Phaser.FullScreenBitmap","@sprite":{"label":"Imagem de fundo","type":"image","priority":30,"tags":"@sprite,fullscreen,bg","maxWidth":1024,"maxHeight":768},"sprite":"bg"},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","alpha":0.8},{"id":"bgStarId","sprite":"bgStarWin","x":-667,"y":125,"sprite.scale.setTo":1.5,"sprite.anchor.setTo":0.5,"components":[{"CLAZZ":"components.AutoPos","speed":0.05,"targetX":640,"targetY":384,"minDelta":0.8,"enabled":false},{"CLAZZ":"components.Bounce","speed":0.01,"intensity":10,"decay":0.98,"iterator":3.141592653589}],"events":{"passed":["setAutoPosEnabled(true)","*playAudio(\"levelClear\")"]}},{"CLAZZ":"framework.Phaser.Button","UIDelay":2000,"sprite":"star","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.5,"id":"scoreStar","x":470,"y":305,"sprite.visible":false,"sprite.rotation":800,"size":40,"color":"#fff","stroke":"#1C6DD5","strokeThickness":10,"events":{"onTick":"this.sprite.rotation -= this.sprite.rotation * 0.025","showPassedUINoDelay":"sprite.visible=true","showPassedUI":"this.screen.setTimeout(this.showPassedUINoDelay, this.UIDelay, this)"}},{"CLAZZ":"framework.Phaser.Label","id":"starCount","x":720,"y":305,"sprite.visible":false,"size":50,"UIDelay":2000,"text":"","align":"left","font":"Arial","stopTime":3000,"state":"random","color":"#fff","strokeThickness":0,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":["this.screen.setTimeout(this.showPassedUINoDelay, this.UIDelay, this)"],"randomBegin":["this.randomHandle = this.screen.setInterval(this.updateRandom,50,this)","SOL.screen.setTimeout(\"state = \\\"fixed\\\"\",this.stopTime,this)"],"updateRandom":"this.setText('x    ' + Math.floor(Math.random()*500) ) ","randomEnd":"this.screen.clearInterval(this.randomHandle)","fixedBegin":["this.setText('x    ' + this.screen.stars ) "]}},{"CLAZZ":"framework.Phaser.Label","UIDelay":2000,"text":"","id":"scoreText","font":"Arial","stopTime":3000,"state":"random","x":640,"y":475,"sprite.visible":false,"size":40,"color":"#fff","strokeThickness":0,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"this.screen.setTimeout(this.showPassedUINoDelay, this.UIDelay, this)","randomBegin":["this.randomHandle = this.screen.setInterval(this.updateRandom,50,this)","this.screen.setTimeout(\"state = \\\"fixed\\\"\",this.stopTime + 1000,this)"],"updateRandom":"this.setText('PONTOS:    ' + Math.floor(Math.random()*500) ) ","randomEnd":"this.screen.clearInterval(this.randomHandle)","fixedBegin":["this.setText('PONTOS:    ' + this.screen.points ) "]}},{"CLAZZ":"framework.Phaser.Label","UIDelay":2000,"text":"","id":"totalTime","x":603,"y":390,"size":40,"color":"#fff","font":"Arial","stopTime":3000,"state":"random","strokeThickness":0,"sprite.visible":false,"events":{"showPassedUINoDelay":["if: this.screen.totalTime != \"00:00\"","sprite.visible=true"],"showPassedUI":"this.screen.setTimeout(this.showPassedUINoDelay, this.UIDelay, this)","randomBegin":["this.randomHandle = this.screen.setInterval(this.updateRandom,50,this)","SOL.screen.setTimeout(\"state = \\\"fixed\\\"\",this.stopTime + 500,this)"],"updateRandom":"this.setText('TEMPO TOTAL:    ' + Math.floor(Math.random()*24) + \":\" + Math.floor(Math.random()*60) ) ","randomEnd":"this.screen.clearInterval(this.randomHandle)","fixedBegin":["this.setText('TEMPO TOTAL:    ' + this.screen.totalTime ) "]}},{"CLAZZ":"framework.Phaser.Label","UIDelay":2000,"text":"RESULTADO FINAL","id":"winText","x":640,"y":180,"size":60,"color":"#fff","font":"Arial","strokeThickness":0,"sprite.visible":false,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"this.screen.setTimeout(this.showPassedUINoDelay, this.UIDelay, this)"}},{"CLAZZ":"framework.Phaser.Button","UIDelay":3000,"sprite":"btNextLevel","sprite.visible":false,"id":"btnNextLevel","onClick":["SOL.nextScreen()"],"x":640,"y":549,"events":{"showPassedUINoDelay":"sprite.visible=true","showPassedUI":"this.screen.setTimeout(this.showPassedUINoDelay, this.UIDelay, this)"}},{"CLAZZ":"framework.Phaser.Button","UIDelay":3000,"sprite":"btPlayAgain","sprite.visible":false,"id":"btnPlayAgain","onClick":"SOL.loadScreen(this.screen.firstLevel)","x":640,"y":549,"events":{"showFailedUI":"sprite.visible=true","showPassedUINoDelay":"this.screen.setTimeout(this.showPassedUINoDelay, this.UIDelay, this)"}},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7}],"imageTitles":[],"USID":"5ef292b9749a3"},{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_293214.png","@name":{"label":"Nome da Tela","type":"string","propertyName":"name","__uid":3048},"name":"Tela 18","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string","propertyName":"externalSceneURL","__uid":3049},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean","propertyName":"editorSnapEnabled","__uid":3051},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","sprite1751":"./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png","sprite2958":"./resources/1150839e24ebeff29e355676bf015ee4.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21,"propertyName":"bgSound","__uid":3057},"bgSound":"bgSound","__uid":3058},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"bgSound","__uid":3056},"bgSound":"openingSound","__uid":3059},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":3054},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21,"propertyName":"visible","__uid":3055},"__uid":3060},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720,"__uid":3053},"__uid":3061},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"},"__uid":3062},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8,"__$uid":3063},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite1751","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":219.59809688486,"y":432.84051679046,"priority":7,"GUID":"23g07j9y3cr-1mp2kl3ad5t-2707ra0pehd","sprite.scale.y":1.0027840272544,"sprite.scale.x":1.0027840272544,"__$uid":3064},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite2958","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":821.7350969184956,"y":653.2767657230361,"priority":7,"GUID":"u0z1gry2jg-uuy0p4filg-ecrwqf4xkn","__$uid":3065},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"__$uid":3066},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7,"__$uid":3067},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":789,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Parabéns! \n\nVocê concluiu o passeio pelo carnaval!\n\nEm breve nos encontraremos em outro passeio!","x":454.64951935061,"y":111,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":50,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#ffffff","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"beginningNClick","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":1,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"azwxq2hxbo-1zcqt50wh9m-fubo3vo8fy","$word":"__$word","onClick":[],"__$uid":3068},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"Finalizar!","x":756.8340846127513,"y":625.3242862338313,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#371a95","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"click","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"1uphyz65lm6-1jm0cxppeit-1bhhbceju3q","__$uid":3069,"$word":"__$word"},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"__$uid":3070},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]},"__$uid":3071},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]},"__$uid":3072},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15,"propertyName":"time","__uid":3052},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1,"__uid":3073},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[],"__$uid":3074}],"imageTitles":[],"USID":"2e2b568e-d526-4cd0-9dc4-04bb444e7220","imgTitles":{"./resources/1280x720/8f5b4c14424ed4c384f7a26658b1a355.png":"Fundo 4","./resources/600x600/baf243696044b9e2d7c7d5c14f8a4df7.png":"leão","./resources/600x600/0498c684e40e2107d181d88a3a6a1a20.png":"soldado","./resources/600x600/aa9f140831d4ab5509edaa23f30c4033.png":"elefante","./resources/1280x720/222ed426c5bdec480ba9f0fa98ca2b4c.png":"bg5","./resources/600x600/5858435e0bf4fc05e4b6c4409f95aac0.png":"ECI","./resources/600x600/3789f04b95423e56816c906a8e6cffc8.png":"bt_comecar","./resources/1150839e24ebeff29e355676bf015ee4.png":"bt_rosa"}},{"CLAZZ":"screens.interactive.Interactive","thumbnail":".././resources/thumb_58933.png","@name":{"label":"Nome da Tela","type":"string"},"name":"créditos","@externalSceneURL":{"label":"Scene URL","menu":"Advanced","advanced":true,"type":"string"},"externalSceneURL":"","@editorSnapEnabled":{"menu":"Advanced","label":"Editor Snap Enabled","advanced":true,"type":"boolean"},"editorSnapEnabled":false,"GUID":"0bde1488-cb10-43a9-8d42-7bb09d99bbc0","assets":{"bg":"credits-imgs/creditsbg.png","alpha_bg":"common-imgs/transp.png","nextScreenBtn":"common-imgs/btnNext.png","audioBtn":"common-imgs/audio.png","defaultAudio":"common-audio/levelClear.mp3","bgSound":"","openingSound":"","rightFeedbackSound":"common-audio/SFX/2Acerto.mp3","rightFeedbackSound1":"common-audio/SFX/3Acerto.mp3","rightFeedbackSound2":"common-audio/SFX/4Acerto.mp3","wrongFeedbackSound":"common-audio/error.mp3","wrongFeedbackSound1":"common-audio/SFX/1Erro.mp3","wrongFeedbackSound2":"common-audio/SFX/3Erro.mp3","fireworks":"spritesheet/fireworks.png","fireworksATLAS":"spritesheet/fireworks.json","feedback":"spritesheet/feedback.png","feedbackATLAS":"spritesheet/feedback.json","timeEnded":"common-audio/SFX/1Atencao.mp3","hurryUp":"common-audio/SFX/GeralTempo.mp3","timer_bg":"imgs-widget/hud-time-bg.png","timer_scale":"imgs-widget/hud-time_bar.png","timer_fore":"imgs-widget/hud-time.png","escriboLogo":"credits-imgs/escribo.png","audioEffect1708":"./resources/ccff25776a2c272946a93fc00142ba93.mp3","sprite1305":"./resources/600x600/c4206734ea8e4a528b280facf36093d4.png"},"logo":"true","editorPauseTime":100,"state":"playing","classes":{"wrongFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"wrong","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndWrong":"destroy()"}},"rightFeedback":{"CLAZZ":"framework.Phaser.Bitmap","animation":"right","sprite":"feedback","sprite.anchor.setTo":0.5,"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndRight":"destroy()"}},"popFireworks":{"CLAZZ":"framework.Phaser.Bitmap","animation":"default","sprite":"fireworks","sprite.anchor.setTo":[0.5,0.8],"sprite.scale.setTo":0.6,"components":[{"CLAZZ":"components.Tween","speed":0.1,"enabled":false}],"events":{"create":"sprite.animations.play(this.animation)","onEndDefault":"destroy()"}}},"values":{"screen.shakeTime":500,"screen.gameWidth":1280,"screen.gameHeight":720},"entities":[{"@bgSound":{"label":"Áudio de Ambiência","type":"audio","tags":"@audio, @mp3, loop, bg","priority":21},"bgSound":"bgSound"},{"@bgSound":{"label":"Áudio de Apresentação","type":"audio","tags":"@audio, @mp3","priority":22,"propertyName":"openingSound","__uid":58},"bgSound":"openingSound"},{"CLAZZ":"framework.Phaser.FullScreenBitmap","components":[{"CLAZZ":"components.FlyOverBG","enabled":true}],"sprite":"bg","@sprite":{"label":"Imagem de Fundo","type":"image","priority":20,"tags":"@sprite, fullscreen, bg","propertyName":"sprite","maxWidth":1280,"maxHeight":720},"visible":true,"@visible":{"type":"boolean","text":"Estático","label":"Modo de BG","menu":"Advanced","priority":21}},{"CLAZZ":"framework.Phaser.FullScreenBitmap","sprite":"alpha_bg","@sprite":{"label":"Imagem de Transparência","type":"image","priority":17,"tags":"@sprite, fullscreen, bg, transparente","propertyName":"sprite","maxWidth":1280,"maxHeight":720}},{"sprite":"fireworks","sprite.alpha":0,"sprite.anchor.setTo":0.5,"sprite.scale.setTo":3,"sprite.x":500,"sprite.y":400,"events":{"popFireworks":["sprite.animations.play(\"default\")","sprite.alpha = 1"],"onEndDefault":"sprite.alpha = 0"}},{"class":"Interactive","$marker":"LINE","$label":"Linha","$word":"lineName","lineName":"Linha","$moveable":false,"$isMarker":true,"$transform":false,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":105,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"sprite":{"CLAZZ":"framework.Phaser.Curve","args":[null,"editor"]},"points":[30,300,980,300],"@points":{"type":"pointList","label":" "},"scales":[1,1],"@scales":{"type":"GUID"},"color":0,"@color":{"type":"color","label":"Cor"},"lineWidth":5,"@lineWidth":{"type":"int","label":"Largura","min":1,"max":50},"events":{"onCreateScreen":["sprite.redraw( this.points, this.color, this.lineWidth, this.scales )","sprite.alpha = this.screen.editor && !this.visible ? 0.5 : this.sprite.alpha"]},"priority":8},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["*callBrowser(\"www.escribo.com\")"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"escriboLogo","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":1089.5513325986,"y":500.02627140917,"priority":7,"GUID":"vdcovra55-5nzzossp2d-c0ueyygthp"},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"audioEffect1708","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":["screen.loadScreen(\"589dec287187e\")"],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":"sprite1305","@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":69.637778421709,"y":82.288703559942,"priority":7,"sprite.scale.y":0.90196415092074,"sprite.scale.x":0.90196415092074,"GUID":"1f63by2ucgz-1jbhixdm4xn-1n0jqqte2pz"},{"class":"Interactive","$marker":"Imagem","$label":"Imagens","$word":"imageName","imageName":"Imagem","$moveable":true,"$isMarker":true,"$transform":true,"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"lockToGrid":0,"@lockToGrid":{"type":"int","label":"Lock To Grid","priority":107,"popup":true},"pixelArt":false,"@pixelArt":{"type":"boolean","text":"Pixel Art","priority":108,"popup":true},"AutoFlip.enabled":false,"@AutoFlip.enabled":{"type":"boolean","text":"Auto Flip","priority":109,"popup":true},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":110,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":111,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":112,"popup":true},"tileX":false,"@tileX":{"type":"boolean","text":"Tile X","priority":111,"popup":true},"tileY":false,"@tileY":{"type":"boolean","text":"Tile Y","priority":112,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":113,"popup":true,"min":0,"max":100},"audioEffect":"","@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":[],"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"sprite":{"CLAZZ":"framework.Phaser.Hotspot","args":[{"width":50,"height":50}]},"@sprite":{"label":"Imagem","type":"image","removable":false,"priority":20,"unique":true,"tags":"","maxWidth":600,"maxHeight":600},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7},{"class":"InteractiveArea","$marker":"Area","$label":"Área Clicável","$word":"areaName","areaName":"Área","$isMarker":true,"area":{"width":200,"height":200,"color":"#00FF00"},"text":"","@area":{"type":"pointList"},"@GUID":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":102},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":103},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":104,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":105,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":109,"popup":true},"audioEffect":"","$moveable":true,"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":22},"onClick":"","@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":110},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":111,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":112,"popup":true},"x":512,"y":350,"priority":7},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":1,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"scrollBtT","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"CONCEPÇÃO E DESENVOLVIMENTO\nAmérico Amorim\nCamila Wanderley\nFelipe Manga\nFrank Urben\nFulvio Alves\nGiordano Cabral\nJosé Rodrigues Neto\nKelle Lima\nLuciano Guimarães\nPaulo Williams\nRenan Lima\nVanessa Silva\n\nREVISÃO E COLABORAÇÃO\nAna Luiza Lobo\nBetânia Ferreira\nCristiane Santos\nJuliana Lima\nLuciana Hodges\nRossane\n","x":260.48944924632,"y":713.77273378712,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":32,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#ffffff","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":1,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"2dgo8g79p7n-1f9o1fkw6z3-qykeclihit"},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"www.escribo.com","x":993.1323793968,"y":541.49493849327,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":25,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#ffffff","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"29kl843ujhz-1whu2dyzu3v-spwq0q052x","onClick":["*callBrowser(\"www.escribo.com\")"]},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"CRÉDITOS","x":941.94414042152,"y":142.58605923428,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":51,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#ffffff","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":4,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4},"GUID":"1qlwhcuou1r-125k2ottipz-132ub06hp1l"},{"class":"Interactive","@text":{"type":"string","label":"Texto","priority":1,"multiline":true,"align":"left","boundsAlignH":"left","boundsAlignV":"top"},"wordWrapWidth":700,"@wordWrapWidth":{"type":"GUID"},"advanced":false,"@advanced":{"type":"boolean","text":"Avançado","popup":true,"priority":100},"sortMode":"","@sortMode":{"type":"string","label":"Sort Mode","enum":{"-y":"Lower = Closer","":"No Sort"},"popup":true,"priority":101},"@anchorMode":{"type":"string","priority":102,"label":"Anchor","enum":{"0,0":"Top Left","0.5,0":"Top Center","1,0":"Top Right","0,0.5":"Mid Left","0.5,0.5":"Center","1,0.5":"Mid Right","0,1":"Bottom Left","0.5,1":"Bottom Center","1,1":"Bottom Right","":"Default"},"popup":true},"anchorMode":"","spawnPlacement":"source","@spawnPlacement":{"type":"string","label":"Spawn Placement","popup":true,"priority":102,"enum":{"source":"Source Position","ltrttb":"LTR-TTB"}},"visible":true,"@visible":{"type":"boolean","text":"Visível","popup":true,"priority":103},"visibleInEditor":true,"@visibleInEditor":{"type":"boolean","text":"Visível no editor","popup":true,"priority":104},"speed":5,"@speed":{"type":"int","label":"Velocidade","min":1,"max":20,"priority":105,"popup":true},"state":"","@state":{"type":"string","popup":true,"label":"Movimento","priority":106,"enum":{"flyAI":"Aleatório","dragAI":"Arrastável","shuffle":"Embaralhar","scrollTtB":"Loop ↓","scrollBtT":"Loop ↑","scrollLtR":"Loop →","scrollRtL":"Loop ←","moveTtB":"Move ↓","moveBtT":"Move ↑","moveLtR":"Move →","moveRtL":"Move ←","goToStart":"Go To Start","":"Estático"}},"hiddenCollision":true,"@hiddenCollision":{"type":"boolean","text":"Collide when hidden","priority":106,"popup":true},"followOffsetX":0,"@followOffsetX":{"type":"int","label":"Horizontal offset","priority":107,"popup":true},"followOffsetY":0,"@followOffsetY":{"type":"int","label":"Vertical offset","priority":108,"popup":true},"opacity":100,"@opacity":{"type":"int","label":"Opacity","priority":110,"popup":true,"min":0,"max":100},"text":"","x":512,"y":384,"$isMarker":true,"type":"Entity","$marker":"Textos","$label":"Textos","$moveable":true,"$transform":true,"priority":6,"@GUID":{"type":"GUID"},"size":35,"@size":{"label":"Tamanho da Fonte","type":"int","priority":3,"min":6,"max":400},"align":"left","@align":{"type":"string","priority":111,"popup":true,"enum":{"left":"left","center":"center","right":"right"},"label":"Text Alignment"},"color":"#000","@color":{"label":"Cor da Fonte","type":"color","priority":2},"@onClick":{"label":"Ação ao Clicar","type":"action","priority":21},"customEvents":{},"@customEvents":{"label":"Outros eventos","type":"customAction","priority":120},"onCollision":{},"@onCollision":{"label":"Ação ao Colidir","type":"collisionAction","priority":120},"onEndCollision":{},"@onEndCollision":{"label":"Ação ao Terminar Colisão","type":"collisionAction","priority":120},"onEndOfLine":{},"@onEndOfLine":{"label":"Ação ao chegar no fim da linha","type":"collisionAction","filter":{"$marker":"LINE"},"priority":121,"popup":true},"onShow":[],"@onShow":{"label":"Ação ao Aparecer","type":"action","priority":122,"popup":true},"@audioEffect":{"unique":true,"label":"Áudio de Ação","type":"audio","tags":"@audio, @mp3","priority":23},"makeTTSSpeech":"never","@makeTTSSpeech":{"label":"Ler esse texto:","type":"string","enum":{"never":"Nunca","beginning":"Apenas no começo do jogo","click":"Apenas ao clicar","beginningNClick":"No começo e ao clicar"},"priority":24,"text":" automaticamente"},"stroke":"#000","@stroke":{"label":"Cor da Borda","type":"color","priority":112,"popup":true},"strokeThickness":0,"@strokeThickness":{"label":"Espessura da Borda","type":"int","min":0,"max":6,"priority":4}},{"CLAZZ":"framework.Phaser.TextField","$isMarker":true,"$marker":"Texto","$label":"Campos de Texto","$word":"tfName","tfName":"Campo de Texto","$moveable":true,"@GUID":{"type":"GUID"},"text":"","@text":{"type":"string","label":"Texto inicial"},"answer":"","@answer":{"type":"string","label":"Resposta objetiva"},"sprite.anchor.setTo":0.5,"x":512,"y":350,"priority":7,"disabled":false,"answers":null,"events":{"create":["answers = this.answer.split(',').map(function(f){ return f.trim(); })"],"wrong":["*onWrong(this.answer)","this.sprite.tint = parseInt('F7B1AA', 16)"],"right":["*onRight(this.answer)","this.sprite.tint = parseInt('BEF7C5', 16)"],"onChange":["if: this.disabled","return:","if: this.answers.indexOf(this.text.text.trim()) == -1","return: this.wrong(this.answer)","disabled = true","this.right(this.answer)"]}},{"CLAZZ":"screens.interactive.Video","$moveable":true,"$isMarker":true,"$marker":"Video","$word":"videoName","videoName":"Vídeo","$label":"Videos","@GUID":{"type":"GUID"},"x":512,"y":350,"text":"","priority":9,"area":{"width":200,"height":200},"src":"","@src":{"label":"Link do Vídeo","type":"Url"},"events":{"create":["if: !this.screen.editor","sprite.alpha = 0"]}},{"CLAZZ":"entities.Timer","x":1206,"y":620,"@time":{"label":"Tempo do Level","type":"time","min":0,"max":1200000,"priority":15},"time":0,"backgroundSprite":"timer_bg","scaleSprite":"timer_scale","foregroundSprite":"timer_fore","backgroundSprite.anchor.y":1,"backgroundSprite.x":5,"backgroundSprite.y":-5,"scaleSprite.anchor.y":1,"scaleSprite.x":20,"scaleSprite.y":-40,"foregroundSprite.anchor.y":1},{"$label":"Timeline","$isMarker":true,"$marker":"Timeline","$advanced":true,"$maxInstances":1,"$minInstances":1,"CLAZZ":"screens.interactive.Timeline","@GUID":{"type":"GUID"},"@keyframes":{"type":"KeyFrames"},"keyframes":[]}],"imageTitles":[],"USID":"5cd31f72bad97"}],"pluginlist":["loading","IronBucket"],"projectId":2154,"backend":"http://frei.re/ws"}},URL:{},pending:0,__wasInit:false,init:null};
FS.init = function(cb){ 
			if(this.__wasInit) return; 
			this.__wasInit=true;
			for( var i=0; i<1; ++i ){
				this.pending++; 
				var e=document.createElement('script');
				e.src = i + ".js";
				e.setAttribute("async", "");
				e.onload = (function(){ 
					this.pending--; 
					if(!this.pending) cb(); 
				}).bind(this);
				document.head.appendChild(e);
			}
			if( !this.pending ) cb();
		};
/* ../js/widget.js */
this.LED = {
    init: false,
    __args: {},
    __argId: 0,
    onLoad: null,
    NO_CB: function() {}
};
if (!Function.prototype.bind) {
    Function.prototype.bind = function(oThis) {
        if (typeof this !== "function") {
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        }
        var aArgs = Array.prototype.slice.call(arguments, 1),
            fToBind = this,
            fNOP = function() {},
            fBound = function() {
                return fToBind.apply(this instanceof fNOP && oThis ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));
            };
        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();
        return fBound;
    };
}
function __initLED(forceAndroid, forceBrowser) {
    var msg;
    if (forceAndroid == 1)
    {
        var callbacks = {};
        var nextCBid = 0;
        msg = function()
        {
            var args = Array.prototype.splice.call(arguments, 0);
            if (!args.length || !args[args.length - 1] || !(args[args.length - 1] instanceof Function))
                args.push(LED.NO_CB);
            callbacks[++nextCBid] = args.pop();
            args.push(nextCBid);
            __Android.message(JSON.stringify(args));
        };
        LED.__callback = function(id) {
            var args = Array.prototype.splice.call(arguments, 1);
            callbacks[id].apply(null, args);
            delete callbacks[id];
        };
    }
    else if (window.__jfxLED) {
        msg = function()
        {
            LED.__args = Array.prototype.splice.call(arguments, 0);
            try
            {
                window.__jfxLED.msg();
            } catch (e)
            {
                log(e.message);
            }
        };
    } else if (forceBrowser) {
        var callbacks = {};
        var nextCBid = 0;
        var OED_ID;
        window.location.href.split(/[\?&]/g).forEach(function(str) {
            str = str.split("=");
            if (str.length == 2 && str[0] == "OED_ID")
                OED_ID = str[1];
        })
        if (OED_ID !== undefined)
        {
            msg = function() {
                var args = Array.prototype.splice.call(arguments, 0);
                if (OED_ID)
                    args.unshift(OED_ID);
                if (!args.length || !args[args.length - 1] || !(args[args.length - 1] instanceof Function))
                    args.push(LED.NO_CB);
                callbacks[++nextCBid] = args.pop();
                args.push(nextCBid);
                parent.postMessage(args, "*");
            };
            window.addEventListener("message", function(e) {
                if (!(e.data.shift instanceof Function))
                    return;
                cbid = e.data.shift();
                if (!callbacks[cbid])
                    return;
                callbacks[cbid].apply(null, e.data);
                delete callbacks[cbid];
            });
        }
        else
        {
            msg = function() {
                throw "NoLEDException";
            };
        }
    } else {
        msg = function() {
            var args = Array.prototype.splice.call(arguments, 0);
            LED.__argId++;
            LED.__args[LED.__argId] = args;
            window.location.href = 'led://' + args.shift() + "?" + LED.__argId;
        };
        LED.deleteArg = function(id) {
            delete LED.__args[id];
        };
    }
    LED.msg = function() {
        msg.apply(null, arguments);
        if (LED.returnValue && typeof LED.returnValue == "string" && LED.returnValue.substr(0, 5) == "json:")
        {
            return JSON.parse(LED.returnValue.substr(5));
        }
        return LED.returnValue;
    };
    LED.loadAppData = msg.bind(null, 'loadAppData');
    LED.playAudio = msg.bind(null, 'playAudio');
    LED.storeAppData = msg.bind(null, 'storeAppData');
    LED.callBrowser = msg.bind(null, 'callBrowser');
    LED.playVideo = msg.bind(null, 'playVideo');
    LED.disableAllSounds = msg.bind(null, 'disableAllSounds');
    LED.enableAllSounds = msg.bind(null, 'enableAllSounds');
    LED.closeWidget = msg.bind(null, 'closeWidget');
    LED.killAllSounds = msg.bind(null, 'killAllSounds');
    LED.reloadWidget = msg.bind(null, 'reloadWidget');
    LED.importImageToBlob = msg.bind(null, 'importImageToBlob');
    LED.saveBlob = msg.bind(null, 'saveBlob');
    LED.loadBlob = msg.bind(null, 'loadBlob');
    LED.deleteBlob = msg.bind(null, 'deleteBlob');
    LED.shareBlob = msg.bind(null, 'shareBlob');
    LED.printBlob = msg.bind(null, 'printBlob');
    LED.getUserId = msg.bind(null, 'getUserId');
    LED.openPDF = msg.bind(null, 'openPDF');
    if (!LED.init && LED.onLoad)
    {
        LED.init = true;
        LED.onLoad();
    }
}
if (navigator.userAgent.indexOf("Firefox") != -1 || document.location.href.match(/https?:\/\//i))
{
    window.addEventListener("load", __initLED.bind(null, 0, 1));
}
;
/* ../js/phaser.min.js */
(function() {
    var a = this,
        b = b || {};
    return b.game = null, b.WEBGL_RENDERER = 0, b.CANVAS_RENDERER = 1, b.VERSION = "v2.2.9", b._UID = 0, "undefined" != typeof Float32Array ? (b.Float32Array = Float32Array, b.Uint16Array = Uint16Array, b.Uint32Array = Uint32Array, b.ArrayBuffer = ArrayBuffer) : (b.Float32Array = Array, b.Uint16Array = Array), b.PI_2 = 2 * Math.PI, b.RAD_TO_DEG = 180 / Math.PI, b.DEG_TO_RAD = Math.PI / 180, b.RETINA_PREFIX = "@2x", b.DisplayObject = function() {
        this.position = new b.Point(0, 0),
        this.scale = new b.Point(1, 1),
        this.pivot = new b.Point(0, 0),
        this.rotation = 0,
        this.alpha = 1,
        this.visible = !0,
        this.hitArea = null,
        this.renderable = !1,
        this.parent = null,
        this.worldAlpha = 1,
        this.worldTransform = new b.Matrix,
        this.worldPosition = new b.Point(0, 0),
        this.worldScale = new b.Point(1, 1),
        this.worldRotation = 0,
        this.filterArea = null,
        this._sr = 0,
        this._cr = 1,
        this._bounds = new b.Rectangle(0, 0, 0, 0),
        this._currentBounds = null,
        this._mask = null,
        this._cacheAsBitmap = !1,
        this._cacheIsDirty = !1
    }, b.DisplayObject.prototype.constructor = b.DisplayObject, b.DisplayObject.prototype = {
        destroy: function() {
            if (this.children) {
                for (var a = this.children.length; a--;)
                    this.children[a].destroy();
                this.children = []
            }
            this.hitArea = null,
            this.parent = null,
            this.worldTransform = null,
            this.filterArea = null,
            this.renderable = !1,
            this._bounds = null,
            this._currentBounds = null,
            this._mask = null,
            this._destroyCachedSprite()
        },
        updateTransform: function(a) {
            if (!a && !this.parent && !this.game)
                return this;
            var c = this.parent;
            a ? c = a : this.parent || (c = this.game.world);
            var d,
                e,
                f,
                g,
                h,
                i,
                j = c.worldTransform,
                k = this.worldTransform;
            return this.rotation % b.PI_2 ? (this.rotation !== this.rotationCache && (this.rotationCache = this.rotation, this._sr = Math.sin(this.rotation), this._cr = Math.cos(this.rotation)), d = this._cr * this.scale.x, e = this._sr * this.scale.x, f = -this._sr * this.scale.y, g = this._cr * this.scale.y, h = this.position.x, i = this.position.y, (this.pivot.x || this.pivot.y) && (h -= this.pivot.x * d + this.pivot.y * f, i -= this.pivot.x * e + this.pivot.y * g), k.a = d * j.a + e * j.c, k.b = d * j.b + e * j.d, k.c = f * j.a + g * j.c, k.d = f * j.b + g * j.d, k.tx = h * j.a + i * j.c + j.tx, k.ty = h * j.b + i * j.d + j.ty) : (d = this.scale.x, g = this.scale.y, h = this.position.x - this.pivot.x * d, i = this.position.y - this.pivot.y * g, k.a = d * j.a, k.b = d * j.b, k.c = g * j.c, k.d = g * j.d, k.tx = h * j.a + i * j.c + j.tx, k.ty = h * j.b + i * j.d + j.ty), this.worldAlpha = this.alpha * c.worldAlpha, this.worldPosition.set(k.tx, k.ty), this.worldScale.set(this.scale.x * Math.sqrt(k.a * k.a + k.c * k.c), this.scale.y * Math.sqrt(k.b * k.b + k.d * k.d)), this.worldRotation = Math.atan2(-k.c, k.d), this._currentBounds = null, this.transformCallback && this.transformCallback.call(this.transformCallbackContext, k, j), this
        },
        preUpdate: function() {},
        generateTexture: function(a, c, d) {
            var e = this.getLocalBounds(),
                f = new b.RenderTexture(0 | e.width, 0 | e.height, d, c, a);
            return b.DisplayObject._tempMatrix.tx = -e.x, b.DisplayObject._tempMatrix.ty = -e.y, f.render(this, b.DisplayObject._tempMatrix), f
        },
        updateCache: function() {
            return this._generateCachedSprite(), this
        },
        toGlobal: function(a) {
            return this.updateTransform(), this.worldTransform.apply(a)
        },
        toLocal: function(a, b) {
            return b && (a = b.toGlobal(a)), this.updateTransform(), this.worldTransform.applyInverse(a)
        },
        _renderCachedSprite: function(a) {
            this._cachedSprite.worldAlpha = this.worldAlpha,
            a.gl ? b.Sprite.prototype._renderWebGL.call(this._cachedSprite, a) : b.Sprite.prototype._renderCanvas.call(this._cachedSprite, a)
        },
        _generateCachedSprite: function() {
            this._cacheAsBitmap = !1;
            var a = this.getLocalBounds();
            if (a.width = Math.max(1, Math.ceil(a.width)), a.height = Math.max(1, Math.ceil(a.height)), this.updateTransform(), this._cachedSprite)
                this._cachedSprite.texture.resize(a.width, a.height);
            else {
                var c = new b.RenderTexture(a.width, a.height);
                this._cachedSprite = new b.Sprite(c),
                this._cachedSprite.worldTransform = this.worldTransform
            }
            var d = this._filters;
            this._filters = null,
            this._cachedSprite.filters = d,
            b.DisplayObject._tempMatrix.tx = -a.x,
            b.DisplayObject._tempMatrix.ty = -a.y,
            this._cachedSprite.texture.render(this, b.DisplayObject._tempMatrix, !0),
            this._cachedSprite.anchor.x = -(a.x / a.width),
            this._cachedSprite.anchor.y = -(a.y / a.height),
            this._filters = d,
            this._cacheAsBitmap = !0
        },
        _destroyCachedSprite: function() {
            this._cachedSprite && (this._cachedSprite.texture.destroy(!0), this._cachedSprite = null)
        }
    }, b.DisplayObject.prototype.displayObjectUpdateTransform = b.DisplayObject.prototype.updateTransform, Object.defineProperties(b.DisplayObject.prototype, {
        x: {
            get: function() {
                return this.position.x
            },
            set: function(a) {
                this.position.x = a
            }
        },
        y: {
            get: function() {
                return this.position.y
            },
            set: function(a) {
                this.position.y = a
            }
        },
        worldVisible: {
            get: function() {
                if (this.visible) {
                    var a = this.parent;
                    if (!a)
                        return this.visible;
                    do {
                        if (!a.visible)
                            return !1;
                        a = a.parent
                    } while (a);
                    return !0
                }
                return !1
            }
        },
        mask: {
            get: function() {
                return this._mask
            },
            set: function(a) {
                this._mask && (this._mask.isMask = !1),
                this._mask = a,
                a && (this._mask.isMask = !0)
            }
        },
        filters: {
            get: function() {
                return this._filters
            },
            set: function(a) {
                if (Array.isArray(a)) {
                    for (var c = [], d = 0; d < a.length; d++)
                        for (var e = a[d].passes, f = 0; f < e.length; f++)
                            c.push(e[f]);
                    this._filterBlock = {
                        target: this,
                        filterPasses: c
                    }
                }
                this._filters = a,
                this.blendMode && this.blendMode === b.blendModes.MULTIPLY && (this.blendMode = b.blendModes.NORMAL)
            }
        },
        cacheAsBitmap: {
            get: function() {
                return this._cacheAsBitmap
            },
            set: function(a) {
                this._cacheAsBitmap !== a && (a ? this._generateCachedSprite() : this._destroyCachedSprite(), this._cacheAsBitmap = a)
            }
        }
    }), b.DisplayObjectContainer = function() {
        b.DisplayObject.call(this),
        this.children = [],
        this.ignoreChildInput = !1
    }, b.DisplayObjectContainer.prototype = Object.create(b.DisplayObject.prototype), b.DisplayObjectContainer.prototype.constructor = b.DisplayObjectContainer, b.DisplayObjectContainer.prototype.addChild = function(a) {
        return this.addChildAt(a, this.children.length)
    }, b.DisplayObjectContainer.prototype.addChildAt = function(a, b) {
        if (b >= 0 && b <= this.children.length)
            return a.parent && a.parent.removeChild(a), a.parent = this, this.children.splice(b, 0, a), a;
        throw new Error(a + "addChildAt: The index " + b + " supplied is out of bounds " + this.children.length)
    }, b.DisplayObjectContainer.prototype.swapChildren = function(a, b) {
        if (a !== b) {
            var c = this.getChildIndex(a),
                d = this.getChildIndex(b);
            if (c < 0 || d < 0)
                throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
            this.children[c] = b,
            this.children[d] = a
        }
    }, b.DisplayObjectContainer.prototype.getChildIndex = function(a) {
        var b = this.children.indexOf(a);
        if (b === -1)
            throw new Error("The supplied DisplayObject must be a child of the caller");
        return b
    }, b.DisplayObjectContainer.prototype.setChildIndex = function(a, b) {
        if (b < 0 || b >= this.children.length)
            throw new Error("The supplied index is out of bounds");
        var c = this.getChildIndex(a);
        this.children.splice(c, 1),
        this.children.splice(b, 0, a)
    }, b.DisplayObjectContainer.prototype.getChildAt = function(a) {
        if (a < 0 || a >= this.children.length)
            throw new Error("getChildAt: Supplied index " + a + " does not exist in the child list, or the supplied DisplayObject must be a child of the caller");
        return this.children[a]
    }, b.DisplayObjectContainer.prototype.removeChild = function(a) {
        var b = this.children.indexOf(a);
        if (b !== -1)
            return this.removeChildAt(b)
    }, b.DisplayObjectContainer.prototype.removeChildAt = function(a) {
        var b = this.getChildAt(a);
        return b && (b.parent = void 0, this.children.splice(a, 1)), b
    }, b.DisplayObjectContainer.prototype.removeChildren = function(a, b) {
        void 0 === a && (a = 0),
        void 0 === b && (b = this.children.length);
        var c = b - a;
        if (c > 0 && c <= b) {
            for (var d = this.children.splice(begin, c), e = 0; e < d.length; e++) {
                var f = d[e];
                f.parent = void 0
            }
            return d
        }
        if (0 === c && 0 === this.children.length)
            return [];
        throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")
    }, b.DisplayObjectContainer.prototype.updateTransform = function() {
        if (this.visible && (this.displayObjectUpdateTransform(), !this._cacheAsBitmap))
            for (var a = 0; a < this.children.length; a++)
                this.children[a].updateTransform()
    }, b.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform = b.DisplayObjectContainer.prototype.updateTransform, b.DisplayObjectContainer.prototype.getBounds = function(a) {
        var c = a && a instanceof b.DisplayObject,
            d = !0;
        c ? d = a instanceof b.DisplayObjectContainer && a.contains(this) : a = this;
        var e;
        if (c) {
            var f = a.worldTransform;
            for (a.worldTransform = b.identityMatrix, e = 0; e < a.children.length; e++)
                a.children[e].updateTransform()
        }
        var g,
            h,
            i,
            j = 1 / 0,
            k = 1 / 0,
            l = -(1 / 0),
            m = -(1 / 0),
            n = !1;
        for (e = 0; e < this.children.length; e++) {
            var o = this.children[e];
            o.visible && (n = !0, g = this.children[e].getBounds(), j = j < g.x ? j : g.x, k = k < g.y ? k : g.y, h = g.width + g.x, i = g.height + g.y, l = l > h ? l : h, m = m > i ? m : i)
        }
        var p = this._bounds;
        if (!n) {
            p = new b.Rectangle;
            var q = p.x,
                r = p.width + p.x,
                s = p.y,
                t = p.height + p.y,
                u = this.worldTransform,
                v = u.a,
                w = u.b,
                x = u.c,
                y = u.d,
                z = u.tx,
                A = u.ty,
                B = v * r + x * t + z,
                C = y * t + w * r + A,
                D = v * q + x * t + z,
                E = y * t + w * q + A,
                F = v * q + x * s + z,
                G = y * s + w * q + A,
                H = v * r + x * s + z,
                I = y * s + w * r + A;
            l = B,
            m = C,
            j = B,
            k = C,
            j = D < j ? D : j,
            j = F < j ? F : j,
            j = H < j ? H : j,
            k = E < k ? E : k,
            k = G < k ? G : k,
            k = I < k ? I : k,
            l = D > l ? D : l,
            l = F > l ? F : l,
            l = H > l ? H : l,
            m = E > m ? E : m,
            m = G > m ? G : m,
            m = I > m ? I : m
        }
        if (p.x = j, p.y = k, p.width = l - j, p.height = m - k, c)
            for (a.worldTransform = f, e = 0; e < a.children.length; e++)
                a.children[e].updateTransform();
        if (!d) {
            var J = a.getBounds();
            p.x -= J.x,
            p.y -= J.y
        }
        return p
    }, b.DisplayObjectContainer.prototype.getLocalBounds = function() {
        return this.getBounds(this)
    }, b.DisplayObjectContainer.prototype.contains = function(a) {
        return !!a && (a === this || this.contains(a.parent))
    }, b.DisplayObjectContainer.prototype._renderWebGL = function(a) {
        if (this.visible && !(this.alpha <= 0)) {
            if (this._cacheAsBitmap)
                return void this._renderCachedSprite(a);
            var b;
            if (this._mask || this._filters) {
                for (this._filters && (a.spriteBatch.flush(), a.filterManager.pushFilter(this._filterBlock)), this._mask && (a.spriteBatch.stop(), a.maskManager.pushMask(this.mask, a), a.spriteBatch.start()), b = 0; b < this.children.length; b++)
                    this.children[b]._renderWebGL(a);
                a.spriteBatch.stop(),
                this._mask && a.maskManager.popMask(this._mask, a),
                this._filters && a.filterManager.popFilter(),
                a.spriteBatch.start()
            } else
                for (b = 0; b < this.children.length; b++)
                    this.children[b]._renderWebGL(a)
        }
    }, b.DisplayObjectContainer.prototype._renderCanvas = function(a) {
        if (this.visible !== !1 && 0 !== this.alpha) {
            if (this._cacheAsBitmap)
                return void this._renderCachedSprite(a);
            this._mask && a.maskManager.pushMask(this._mask, a);
            for (var b = 0; b < this.children.length; b++)
                this.children[b]._renderCanvas(a);
            this._mask && a.maskManager.popMask(a)
        }
    }, Object.defineProperty(b.DisplayObjectContainer.prototype, "width", {
        get: function() {
            return this.getLocalBounds().width * this.scale.x
        },
        set: function(a) {
            var b = this.getLocalBounds().width;
            0 !== b ? this.scale.x = a / b : this.scale.x = 1,
            this._width = a
        }
    }), Object.defineProperty(b.DisplayObjectContainer.prototype, "height", {
        get: function() {
            return this.getLocalBounds().height * this.scale.y
        },
        set: function(a) {
            var b = this.getLocalBounds().height;
            0 !== b ? this.scale.y = a / b : this.scale.y = 1,
            this._height = a
        }
    }), b.Sprite = function(a) {
        b.DisplayObjectContainer.call(this),
        this.anchor = new b.Point,
        this.texture = a || b.Texture.emptyTexture,
        this._width = 0,
        this._height = 0,
        this.tint = 16777215,
        this.cachedTint = -1,
        this.tintedTexture = null,
        this.blendMode = b.blendModes.NORMAL,
        this.shader = null,
        this.exists = !0,
        this.texture.baseTexture.hasLoaded && this.onTextureUpdate(),
        this.renderable = !0
    }, b.Sprite.prototype = Object.create(b.DisplayObjectContainer.prototype), b.Sprite.prototype.constructor = b.Sprite, Object.defineProperty(b.Sprite.prototype, "width", {
        get: function() {
            return this.scale.x * this.texture.frame.width
        },
        set: function(a) {
            this.scale.x = a / this.texture.frame.width,
            this._width = a
        }
    }), Object.defineProperty(b.Sprite.prototype, "height", {
        get: function() {
            return this.scale.y * this.texture.frame.height
        },
        set: function(a) {
            this.scale.y = a / this.texture.frame.height,
            this._height = a
        }
    }), b.Sprite.prototype.setTexture = function(a, b) {
        void 0 !== b && this.texture.baseTexture.destroy(),
        this.texture.baseTexture.skipRender = !1,
        this.texture = a,
        this.texture.valid = !0,
        this.cachedTint = -1
    }, b.Sprite.prototype.onTextureUpdate = function() {
        this._width && (this.scale.x = this._width / this.texture.frame.width),
        this._height && (this.scale.y = this._height / this.texture.frame.height)
    }, b.Sprite.prototype.getBounds = function(a) {
        var b = this.texture.frame.width,
            c = this.texture.frame.height,
            d = b * (1 - this.anchor.x),
            e = b * -this.anchor.x,
            f = c * (1 - this.anchor.y),
            g = c * -this.anchor.y,
            h = a || this.worldTransform,
            i = h.a,
            j = h.b,
            k = h.c,
            l = h.d,
            m = h.tx,
            n = h.ty,
            o = -(1 / 0),
            p = -(1 / 0),
            q = 1 / 0,
            r = 1 / 0;
        if (0 === j && 0 === k) {
            if (i < 0) {
                i *= -1;
                var s = d;
                d = -e,
                e = -s
            }
            if (l < 0) {
                l *= -1;
                var s = f;
                f = -g,
                g = -s
            }
            q = i * e + m,
            o = i * d + m,
            r = l * g + n,
            p = l * f + n
        } else {
            var t = i * e + k * g + m,
                u = l * g + j * e + n,
                v = i * d + k * g + m,
                w = l * g + j * d + n,
                x = i * d + k * f + m,
                y = l * f + j * d + n,
                z = i * e + k * f + m,
                A = l * f + j * e + n;
            q = t < q ? t : q,
            q = v < q ? v : q,
            q = x < q ? x : q,
            q = z < q ? z : q,
            r = u < r ? u : r,
            r = w < r ? w : r,
            r = y < r ? y : r,
            r = A < r ? A : r,
            o = t > o ? t : o,
            o = v > o ? v : o,
            o = x > o ? x : o,
            o = z > o ? z : o,
            p = u > p ? u : p,
            p = w > p ? w : p,
            p = y > p ? y : p,
            p = A > p ? A : p
        }
        var B = this._bounds;
        return B.x = q, B.width = o - q, B.y = r, B.height = p - r, this._currentBounds = B, B
    }, b.Sprite.prototype.getLocalBounds = function() {
        var a = this.worldTransform;
        this.worldTransform = b.identityMatrix;
        for (var c = 0; c < this.children.length; c++)
            this.children[c].updateTransform();
        var d = this.getBounds();
        for (this.worldTransform = a, c = 0; c < this.children.length; c++)
            this.children[c].updateTransform();
        return d
    }, b.Sprite.prototype._renderWebGL = function(a, b) {
        if (this.visible && !(this.alpha <= 0) && this.renderable) {
            var c = this.worldTransform;
            if (b && (c = b), this._mask || this._filters) {
                var d = a.spriteBatch;
                this._filters && (d.flush(), a.filterManager.pushFilter(this._filterBlock)),
                this._mask && (d.stop(), a.maskManager.pushMask(this.mask, a), d.start()),
                d.render(this);
                for (var e = 0; e < this.children.length; e++)
                    this.children[e]._renderWebGL(a);
                d.stop(),
                this._mask && a.maskManager.popMask(this._mask, a),
                this._filters && a.filterManager.popFilter(),
                d.start()
            } else {
                a.spriteBatch.render(this);
                for (var e = 0; e < this.children.length; e++)
                    this.children[e]._renderWebGL(a, c)
            }
        }
    }, b.Sprite.prototype._renderCanvas = function(a, c) {
        if (!(!this.visible || 0 === this.alpha || !this.renderable || this.texture.crop.width <= 0 || this.texture.crop.height <= 0)) {
            var d = this.worldTransform;
            if (c && (d = c), this.blendMode !== a.currentBlendMode && (a.currentBlendMode = this.blendMode, a.context.globalCompositeOperation = b.blendModesCanvas[a.currentBlendMode]), this._mask && a.maskManager.pushMask(this._mask, a), this.texture.valid) {
                var e = this.texture.baseTexture.resolution / a.resolution;
                a.context.globalAlpha = this.worldAlpha,
                a.smoothProperty && a.scaleMode !== this.texture.baseTexture.scaleMode && (a.scaleMode = this.texture.baseTexture.scaleMode, a.context[a.smoothProperty] = a.scaleMode === b.scaleModes.LINEAR);
                var f = this.texture.trim ? this.texture.trim.x - this.anchor.x * this.texture.trim.width : this.anchor.x * -this.texture.frame.width,
                    g = this.texture.trim ? this.texture.trim.y - this.anchor.y * this.texture.trim.height : this.anchor.y * -this.texture.frame.height,
                    h = d.tx * a.resolution + a.shakeX,
                    i = d.ty * a.resolution + a.shakeY;
                a.roundPixels ? (a.context.setTransform(d.a, d.b, d.c, d.d, 0 | h, 0 | i), f |= 0, g |= 0) : a.context.setTransform(d.a, d.b, d.c, d.d, h, i);
                var j = this.texture.crop.width,
                    k = this.texture.crop.height;
                if (f /= e, g /= e, 16777215 !== this.tint)
                    (this.texture.requiresReTint || this.cachedTint !== this.tint) && (this.tintedTexture = b.CanvasTinter.getTintedTexture(this, this.tint), this.cachedTint = this.tint, this.texture.requiresReTint = !1),
                    a.context.drawImage(this.tintedTexture, 0, 0, j, k, f, g, j / e, k / e);
                else {
                    var l = this.texture.crop.x,
                        m = this.texture.crop.y;
                    a.context.drawImage(this.texture.baseTexture.source, l, m, j, k, f, g, j / e, k / e)
                }
            }
            for (var n = 0; n < this.children.length; n++)
                this.children[n]._renderCanvas(a);
            this._mask && a.maskManager.popMask(a)
        }
    }, b.SpriteBatch = function(a) {
        b.DisplayObjectContainer.call(this),
        this.textureThing = a,
        this.ready = !1
    }, b.SpriteBatch.prototype = Object.create(b.DisplayObjectContainer.prototype), b.SpriteBatch.prototype.constructor = b.SpriteBatch, b.SpriteBatch.prototype.initWebGL = function(a) {
        this.fastSpriteBatch = new b.WebGLFastSpriteBatch(a),
        this.ready = !0
    }, b.SpriteBatch.prototype.updateTransform = function() {
        this.displayObjectUpdateTransform()
    }, b.SpriteBatch.prototype._renderWebGL = function(a) {
        !this.visible || this.alpha <= 0 || !this.children.length || (this.ready || this.initWebGL(a.gl), this.fastSpriteBatch.gl !== a.gl && this.fastSpriteBatch.setContext(a.gl), a.spriteBatch.stop(), a.shaderManager.setShader(a.shaderManager.fastShader), this.fastSpriteBatch.begin(this, a), this.fastSpriteBatch.render(this), a.spriteBatch.start())
    }, b.SpriteBatch.prototype._renderCanvas = function(a) {
        if (this.visible && !(this.alpha <= 0) && this.children.length) {
            var b = a.context;
            b.globalAlpha = this.worldAlpha,
            this.displayObjectUpdateTransform();
            for (var c = this.worldTransform, d = !0, e = 0; e < this.children.length; e++) {
                var f = this.children[e];
                if (f.visible) {
                    var g = f.texture,
                        h = g.frame;
                    if (b.globalAlpha = this.worldAlpha * f.alpha, f.rotation % (2 * Math.PI) === 0)
                        d && (b.setTransform(c.a, c.b, c.c, c.d, c.tx, c.ty), d = !1),
                        b.drawImage(g.baseTexture.source, h.x, h.y, h.width, h.height, f.anchor.x * (-h.width * f.scale.x) + f.position.x + .5 + a.shakeX | 0, f.anchor.y * (-h.height * f.scale.y) + f.position.y + .5 + a.shakeY | 0, h.width * f.scale.x, h.height * f.scale.y);
                    else {
                        d || (d = !0),
                        f.displayObjectUpdateTransform();
                        var i = f.worldTransform,
                            j = i.tx * a.resolution + a.shakeX,
                            k = i.ty * a.resolution + a.shakeY;
                        a.roundPixels ? b.setTransform(i.a, i.b, i.c, i.d, 0 | j, 0 | k) : b.setTransform(i.a, i.b, i.c, i.d, j, k),
                        b.drawImage(g.baseTexture.source, h.x, h.y, h.width, h.height, f.anchor.x * -h.width + .5 | 0, f.anchor.y * -h.height + .5 | 0, h.width, h.height)
                    }
                }
            }
        }
    }, b.hex2rgb = function(a) {
        return [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (255 & a) / 255]
    }, b.rgb2hex = function(a) {
        return (255 * a[0] << 16) + (255 * a[1] << 8) + 255 * a[2]
    }, b.canUseNewCanvasBlendModes = function() {
        if (void 0 === document)
            return !1;
        var a = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",
            c = "AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",
            d = new Image;
        d.src = a + "AP804Oa6" + c;
        var e = new Image;
        e.src = a + "/wCKxvRF" + c;
        var f = b.CanvasPool.create(this, 6, 1),
            g = f.getContext("2d");
        if (g.globalCompositeOperation = "multiply", g.drawImage(d, 0, 0), g.drawImage(e, 2, 0), !g.getImageData(2, 0, 1, 1))
            return !1;
        var h = g.getImageData(2, 0, 1, 1).data;
        return b.CanvasPool.remove(this), 255 === h[0] && 0 === h[1] && 0 === h[2]
    }, b.getNextPowerOfTwo = function(a) {
        if (a > 0 && 0 === (a & a - 1))
            return a;
        for (var b = 1; b < a;)
            b <<= 1;
        return b
    }, b.isPowerOfTwo = function(a, b) {
        return a > 0 && 0 === (a & a - 1) && b > 0 && 0 === (b & b - 1)
    }, b.CanvasPool = {
        create: function(a, c, d) {
            var e,
                f = b.CanvasPool.getFirst();
            if (f === -1) {
                var g = {
                    parent: a,
                    canvas: document.createElement("canvas")
                };
                b.CanvasPool.pool.push(g),
                e = g.canvas
            } else
                b.CanvasPool.pool[f].parent = a,
                e = b.CanvasPool.pool[f].canvas;
            return void 0 !== c && (e.width = c, e.height = d), e
        },
        getFirst: function() {
            for (var a = b.CanvasPool.pool, c = 0; c < a.length; c++)
                if (!a[c].parent)
                    return c;
            return -1
        },
        remove: function(a) {
            for (var c = b.CanvasPool.pool, d = 0; d < c.length; d++)
                c[d].parent === a && (c[d].parent = null, c[d].canvas.width = 1, c[d].canvas.height = 1)
        },
        removeByCanvas: function(a) {
            for (var c = b.CanvasPool.pool, d = 0; d < c.length; d++)
                c[d].canvas === a && (c[d].parent = null, c[d].canvas.width = 1, c[d].canvas.height = 1)
        },
        getTotal: function() {
            for (var a = b.CanvasPool.pool, c = 0, d = 0; d < a.length; d++)
                a[d].parent && c++;
            return c
        },
        getFree: function() {
            for (var a = b.CanvasPool.pool, c = 0, d = 0; d < a.length; d++)
                a[d].parent || c++;
            return c
        }
    }, b.CanvasPool.pool = [], b.initDefaultShaders = function() {}, b.CompileVertexShader = function(a, c) {
        return b._CompileShader(a, c, a.VERTEX_SHADER)
    }, b.CompileFragmentShader = function(a, c) {
        return b._CompileShader(a, c, a.FRAGMENT_SHADER)
    }, b._CompileShader = function(a, b, c) {
        var d = b;
        Array.isArray(b) && (d = b.join("\n"));
        var e = a.createShader(c);
        return a.shaderSource(e, d), a.compileShader(e), a.getShaderParameter(e, a.COMPILE_STATUS) ? e : (window.console.log(a.getShaderInfoLog(e)), null)
    }, b.compileProgram = function(a, c, d) {
        var e = b.CompileFragmentShader(a, d),
            f = b.CompileVertexShader(a, c),
            g = a.createProgram();
        return a.attachShader(g, f), a.attachShader(g, e), a.linkProgram(g), a.getProgramParameter(g, a.LINK_STATUS) || (window.console.log(a.getProgramInfoLog(g)), window.console.log("Could not initialise shaders")), g
    }, b.PixiShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"],
        this.textureCount = 0,
        this.firstRun = !0,
        this.dirty = !0,
        this.attributes = [],
        this.init()
    }, b.PixiShader.prototype.constructor = b.PixiShader, b.PixiShader.prototype.init = function() {
        var a = this.gl,
            c = b.compileProgram(a, this.vertexSrc || b.PixiShader.defaultVertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.uSampler = a.getUniformLocation(c, "uSampler"),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.dimensions = a.getUniformLocation(c, "dimensions"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord"),
        this.colorAttribute = a.getAttribLocation(c, "aColor"),
        this.colorAttribute === -1 && (this.colorAttribute = 2),
        this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute];
        for (var d in this.uniforms)
            this.uniforms[d].uniformLocation = a.getUniformLocation(c, d);
        this.initUniforms(),
        this.program = c
    }, b.PixiShader.prototype.initUniforms = function() {
        this.textureCount = 1;
        var a,
            b = this.gl;
        for (var c in this.uniforms) {
            a = this.uniforms[c];
            var d = a.type;
            "sampler2D" === d ? (a._init = !1, null !== a.value && this.initSampler2D(a)) : "mat2" === d || "mat3" === d || "mat4" === d ? (a.glMatrix = !0, a.glValueLength = 1, "mat2" === d ? a.glFunc = b.uniformMatrix2fv : "mat3" === d ? a.glFunc = b.uniformMatrix3fv : "mat4" === d && (a.glFunc = b.uniformMatrix4fv)) : (a.glFunc = b["uniform" + d], "2f" === d || "2i" === d ? a.glValueLength = 2 : "3f" === d || "3i" === d ? a.glValueLength = 3 : "4f" === d || "4i" === d ? a.glValueLength = 4 : a.glValueLength = 1)
        }
    }, b.PixiShader.prototype.initSampler2D = function(a) {
        if (a.value && a.value.baseTexture && a.value.baseTexture.hasLoaded) {
            var b = this.gl;
            if (b.activeTexture(b["TEXTURE" + this.textureCount]), b.bindTexture(b.TEXTURE_2D, a.value.baseTexture._glTextures[b.id]), a.textureData) {
                var c = a.textureData,
                    d = c.magFilter ? c.magFilter : b.LINEAR,
                    e = c.minFilter ? c.minFilter : b.LINEAR,
                    f = c.wrapS ? c.wrapS : b.CLAMP_TO_EDGE,
                    g = c.wrapT ? c.wrapT : b.CLAMP_TO_EDGE,
                    h = c.luminance ? b.LUMINANCE : b.RGBA;
                if (c.repeat && (f = b.REPEAT, g = b.REPEAT), b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL, !!c.flipY), c.width) {
                    var i = c.width ? c.width : 512,
                        j = c.height ? c.height : 2,
                        k = c.border ? c.border : 0;
                    b.texImage2D(b.TEXTURE_2D, 0, h, i, j, k, h, b.UNSIGNED_BYTE, null)
                } else
                    b.texImage2D(b.TEXTURE_2D, 0, h, b.RGBA, b.UNSIGNED_BYTE, a.value.baseTexture.source);
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, d),
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, e),
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, f),
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, g)
            }
            b.uniform1i(a.uniformLocation, this.textureCount),
            a._init = !0,
            this.textureCount++
        }
    }, b.PixiShader.prototype.syncUniforms = function() {
        this.textureCount = 1;
        var a,
            c = this.gl;
        for (var d in this.uniforms)
            a = this.uniforms[d],
            1 === a.glValueLength ? a.glMatrix === !0 ? a.glFunc.call(c, a.uniformLocation, a.transpose, a.value) : a.glFunc.call(c, a.uniformLocation, a.value) : 2 === a.glValueLength ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y) : 3 === a.glValueLength ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y, a.value.z) : 4 === a.glValueLength ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y, a.value.z, a.value.w) : "sampler2D" === a.type && (a._init ? (c.activeTexture(c["TEXTURE" + this.textureCount]), a.value.baseTexture._dirty[c.id] ? b.instances[c.id].updateTexture(a.value.baseTexture) : c.bindTexture(c.TEXTURE_2D, a.value.baseTexture._glTextures[c.id]), c.uniform1i(a.uniformLocation, this.textureCount), this.textureCount++) : this.initSampler2D(a))
    }, b.PixiShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attributes = null
    }, b.PixiShader.defaultVertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);", "}"], b.PixiFastShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"],
        this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform mat3 uMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   vec2 v;", "   vec2 sv = aVertexPosition * aScale;", "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);", "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);", "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;", "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"],
        this.textureCount = 0,
        this.init()
    }, b.PixiFastShader.prototype.constructor = b.PixiFastShader, b.PixiFastShader.prototype.init = function() {
        var a = this.gl,
            c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.uSampler = a.getUniformLocation(c, "uSampler"),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.dimensions = a.getUniformLocation(c, "dimensions"),
        this.uMatrix = a.getUniformLocation(c, "uMatrix"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.aPositionCoord = a.getAttribLocation(c, "aPositionCoord"),
        this.aScale = a.getAttribLocation(c, "aScale"),
        this.aRotation = a.getAttribLocation(c, "aRotation"),
        this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord"),
        this.colorAttribute = a.getAttribLocation(c, "aColor"),
        this.colorAttribute === -1 && (this.colorAttribute = 2),
        this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute],
        this.program = c
    }, b.PixiFastShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attributes = null
    }, b.StripShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "uniform float alpha;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;", "}"],
        this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "}"],
        this.init()
    }, b.StripShader.prototype.constructor = b.StripShader, b.StripShader.prototype.init = function() {
        var a = this.gl,
            c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.uSampler = a.getUniformLocation(c, "uSampler"),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.colorAttribute = a.getAttribLocation(c, "aColor"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord"),
        this.attributes = [this.aVertexPosition, this.aTextureCoord],
        this.translationMatrix = a.getUniformLocation(c, "translationMatrix"),
        this.alpha = a.getUniformLocation(c, "alpha"),
        this.program = c
    }, b.StripShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attribute = null
    }, b.PrimitiveShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"],
        this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform float alpha;", "uniform float flipY;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"],
        this.init()
    }, b.PrimitiveShader.prototype.constructor = b.PrimitiveShader, b.PrimitiveShader.prototype.init = function() {
        var a = this.gl,
            c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.tintColor = a.getUniformLocation(c, "tint"),
        this.flipY = a.getUniformLocation(c, "flipY"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.colorAttribute = a.getAttribLocation(c, "aColor"),
        this.attributes = [this.aVertexPosition, this.colorAttribute],
        this.translationMatrix = a.getUniformLocation(c, "translationMatrix"),
        this.alpha = a.getUniformLocation(c, "alpha"),
        this.program = c
    }, b.PrimitiveShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attributes = null
    }, b.ComplexPrimitiveShader = function(a) {
        this._UID = b._UID++,
        this.gl = a,
        this.program = null,
        this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"],
        this.vertexSrc = ["attribute vec2 aVertexPosition;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform vec3 tint;", "uniform float alpha;", "uniform vec3 color;", "uniform float flipY;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = vec4(color * alpha * tint, alpha);", "}"],
        this.init()
    }, b.ComplexPrimitiveShader.prototype.constructor = b.ComplexPrimitiveShader, b.ComplexPrimitiveShader.prototype.init = function() {
        var a = this.gl,
            c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
        a.useProgram(c),
        this.projectionVector = a.getUniformLocation(c, "projectionVector"),
        this.offsetVector = a.getUniformLocation(c, "offsetVector"),
        this.tintColor = a.getUniformLocation(c, "tint"),
        this.color = a.getUniformLocation(c, "color"),
        this.flipY = a.getUniformLocation(c, "flipY"),
        this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition"),
        this.attributes = [this.aVertexPosition, this.colorAttribute],
        this.translationMatrix = a.getUniformLocation(c, "translationMatrix"),
        this.alpha = a.getUniformLocation(c, "alpha"),
        this.program = c
    }, b.ComplexPrimitiveShader.prototype.destroy = function() {
        this.gl.deleteProgram(this.program),
        this.uniforms = null,
        this.gl = null,
        this.attribute = null
    }, b.glContexts = [], b.instances = [], b.WebGLRenderer = function(a) {
        this.game = a,
        b.defaultRenderer || (b.defaultRenderer = this),
        this.type = b.WEBGL_RENDERER,
        this.resolution = a.resolution,
        this.transparent = a.transparent,
        this.autoResize = !1,
        this.preserveDrawingBuffer = a.preserveDrawingBuffer,
        this.clearBeforeRender = a.clearBeforeRender,
        this.width = a.width,
        this.height = a.height,
        this.view = a.canvas,
        this._contextOptions = {
            alpha: this.transparent,
            antialias: a.antialias,
            premultipliedAlpha: this.transparent && "notMultiplied" !== this.transparent,
            stencil: !0,
            preserveDrawingBuffer: this.preserveDrawingBuffer
        },
        this.projection = new b.Point,
        this.offset = new b.Point,
        this.shaderManager = new b.WebGLShaderManager,
        this.spriteBatch = new b.WebGLSpriteBatch,
        this.maskManager = new b.WebGLMaskManager,
        this.filterManager = new b.WebGLFilterManager,
        this.stencilManager = new b.WebGLStencilManager,
        this.blendModeManager = new b.WebGLBlendModeManager,
        this.renderSession = {},
        this.renderSession.game = this.game,
        this.renderSession.gl = this.gl,
        this.renderSession.drawCount = 0,
        this.renderSession.shaderManager = this.shaderManager,
        this.renderSession.maskManager = this.maskManager,
        this.renderSession.filterManager = this.filterManager,
        this.renderSession.blendModeManager = this.blendModeManager,
        this.renderSession.spriteBatch = this.spriteBatch,
        this.renderSession.stencilManager = this.stencilManager,
        this.renderSession.renderer = this,
        this.renderSession.resolution = this.resolution,
        this.initContext(),
        this.mapBlendModes()
    }, b.WebGLRenderer.prototype.constructor = b.WebGLRenderer, b.WebGLRenderer.prototype.initContext = function() {
        var a = this.view.getContext("webgl", this._contextOptions) || this.view.getContext("experimental-webgl", this._contextOptions);
        if (this.gl = a, !a)
            throw new Error("This browser does not support webGL. Try using the canvas renderer");
        this.glContextId = a.id = b.WebGLRenderer.glContextId++,
        b.glContexts[this.glContextId] = a,
        b.instances[this.glContextId] = this,
        a.disable(a.DEPTH_TEST),
        a.disable(a.CULL_FACE),
        a.enable(a.BLEND),
        this.shaderManager.setContext(a),
        this.spriteBatch.setContext(a),
        this.maskManager.setContext(a),
        this.filterManager.setContext(a),
        this.blendModeManager.setContext(a),
        this.stencilManager.setContext(a),
        this.renderSession.gl = this.gl,
        this.resize(this.width, this.height)
    }, b.WebGLRenderer.prototype.render = function(a) {
        if (!this.contextLost) {
            var b = this.gl;
            b.viewport(0, 0, this.width, this.height),
            b.bindFramebuffer(b.FRAMEBUFFER, null),
            this.game.clearBeforeRender && (b.clearColor(a._bgColor.r, a._bgColor.g, a._bgColor.b, a._bgColor.a), b.clear(b.COLOR_BUFFER_BIT)),
            this.offset.x = this.game.camera._shake.x,
            this.offset.y = this.game.camera._shake.y,
            this.renderDisplayObject(a, this.projection)
        }
    }, b.WebGLRenderer.prototype.renderDisplayObject = function(a, c, d, e) {
        this.renderSession.blendModeManager.setBlendMode(b.blendModes.NORMAL),
        this.renderSession.drawCount = 0,
        this.renderSession.flipY = d ? -1 : 1,
        this.renderSession.projection = c,
        this.renderSession.offset = this.offset,
        this.spriteBatch.begin(this.renderSession),
        this.filterManager.begin(this.renderSession, d),
        a._renderWebGL(this.renderSession, e),
        this.spriteBatch.end()
    }, b.WebGLRenderer.prototype.resize = function(a, b) {
        this.width = a * this.resolution,
        this.height = b * this.resolution,
        this.view.width = this.width,
        this.view.height = this.height,
        this.autoResize && (this.view.style.width = this.width / this.resolution + "px", this.view.style.height = this.height / this.resolution + "px"),
        this.gl.viewport(0, 0, this.width, this.height),
        this.projection.x = this.width / 2 / this.resolution,
        this.projection.y = -this.height / 2 / this.resolution
    }, b.WebGLRenderer.prototype.updateTexture = function(a) {
        if (!a.hasLoaded)
            return !1;
        var c = this.gl;
        return a._glTextures[c.id] || (a._glTextures[c.id] = c.createTexture()), c.bindTexture(c.TEXTURE_2D, a._glTextures[c.id]), c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.premultipliedAlpha), c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, c.RGBA, c.UNSIGNED_BYTE, a.source), c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MAG_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR : c.NEAREST), a.mipmap && b.isPowerOfTwo(a.width, a.height) ? (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MIN_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR_MIPMAP_LINEAR : c.NEAREST_MIPMAP_NEAREST), c.generateMipmap(c.TEXTURE_2D)) : c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MIN_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR : c.NEAREST), a._powerOf2 ? (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_S, c.REPEAT), c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_T, c.REPEAT)) : (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_S, c.CLAMP_TO_EDGE), c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_T, c.CLAMP_TO_EDGE)), a._dirty[c.id] = !1, !0
    }, b.WebGLRenderer.prototype.destroy = function() {
        b.glContexts[this.glContextId] = null,
        this.projection = null,
        this.offset = null,
        this.shaderManager.destroy(),
        this.spriteBatch.destroy(),
        this.maskManager.destroy(),
        this.filterManager.destroy(),
        this.shaderManager = null,
        this.spriteBatch = null,
        this.maskManager = null,
        this.filterManager = null,
        this.gl = null,
        this.renderSession = null,
        b.CanvasPool.remove(this),
        b.instances[this.glContextId] = null,
        b.WebGLRenderer.glContextId--
    }, b.WebGLRenderer.prototype.mapBlendModes = function() {
        var a = this.gl;
        if (!b.blendModesWebGL) {
            var c = [],
                d = b.blendModes;
            c[d.NORMAL] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.ADD] = [a.SRC_ALPHA, a.DST_ALPHA],
            c[d.MULTIPLY] = [a.DST_COLOR, a.ONE_MINUS_SRC_ALPHA],
            c[d.SCREEN] = [a.SRC_ALPHA, a.ONE],
            c[d.OVERLAY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.DARKEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.LIGHTEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.COLOR_DODGE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.COLOR_BURN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.HARD_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.SOFT_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.DIFFERENCE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.EXCLUSION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.HUE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.SATURATION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.COLOR] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            c[d.LUMINOSITY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA],
            b.blendModesWebGL = c
        }
    }, b.WebGLRenderer.glContextId = 0, b.WebGLBlendModeManager = function() {
        this.currentBlendMode = 99999
    }, b.WebGLBlendModeManager.prototype.constructor = b.WebGLBlendModeManager, b.WebGLBlendModeManager.prototype.setContext = function(a) {
        this.gl = a
    }, b.WebGLBlendModeManager.prototype.setBlendMode = function(a) {
        if (this.currentBlendMode === a)
            return !1;
        this.currentBlendMode = a;
        var c = b.blendModesWebGL[this.currentBlendMode];
        return c && this.gl.blendFunc(c[0], c[1]), !0
    }, b.WebGLBlendModeManager.prototype.destroy = function() {
        this.gl = null
    }, b.WebGLMaskManager = function() {}, b.WebGLMaskManager.prototype.constructor = b.WebGLMaskManager, b.WebGLMaskManager.prototype.setContext = function(a) {
        this.gl = a
    }, b.WebGLMaskManager.prototype.pushMask = function(a, c) {
        var d = c.gl;
        a.dirty && b.WebGLGraphics.updateGraphics(a, d),
        void 0 !== a._webGL[d.id] && void 0 !== a._webGL[d.id].data && 0 !== a._webGL[d.id].data.length && c.stencilManager.pushStencil(a, a._webGL[d.id].data[0], c)
    }, b.WebGLMaskManager.prototype.popMask = function(a, b) {
        var c = this.gl;
        void 0 !== a._webGL[c.id] && void 0 !== a._webGL[c.id].data && 0 !== a._webGL[c.id].data.length && b.stencilManager.popStencil(a, a._webGL[c.id].data[0], b)
    }, b.WebGLMaskManager.prototype.destroy = function() {
        this.gl = null
    }, b.WebGLStencilManager = function() {
        this.stencilStack = [],
        this.reverse = !0,
        this.count = 0
    }, b.WebGLStencilManager.prototype.setContext = function(a) {
        this.gl = a
    }, b.WebGLStencilManager.prototype.pushStencil = function(a, b, c) {
        var d = this.gl;
        this.bindGraphics(a, b, c),
        0 === this.stencilStack.length && (d.enable(d.STENCIL_TEST), d.clear(d.STENCIL_BUFFER_BIT), this.reverse = !0, this.count = 0),
        this.stencilStack.push(b);
        var e = this.count;
        d.colorMask(!1, !1, !1, !1),
        d.stencilFunc(d.ALWAYS, 0, 255),
        d.stencilOp(d.KEEP, d.KEEP, d.INVERT),
        1 === b.mode ? (d.drawElements(d.TRIANGLE_FAN, b.indices.length - 4, d.UNSIGNED_SHORT, 0), this.reverse ? (d.stencilFunc(d.EQUAL, 255 - e, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)) : (d.stencilFunc(d.EQUAL, e, 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)), d.drawElements(d.TRIANGLE_FAN, 4, d.UNSIGNED_SHORT, 2 * (b.indices.length - 4)), this.reverse ? d.stencilFunc(d.EQUAL, 255 - (e + 1), 255) : d.stencilFunc(d.EQUAL, e + 1, 255), this.reverse = !this.reverse) : (this.reverse ? (d.stencilFunc(d.EQUAL, e, 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)) : (d.stencilFunc(d.EQUAL, 255 - e, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)), d.drawElements(d.TRIANGLE_STRIP, b.indices.length, d.UNSIGNED_SHORT, 0), this.reverse ? d.stencilFunc(d.EQUAL, e + 1, 255) : d.stencilFunc(d.EQUAL, 255 - (e + 1), 255)),
        d.colorMask(!0, !0, !0, !0),
        d.stencilOp(d.KEEP, d.KEEP, d.KEEP),
        this.count++
    }, b.WebGLStencilManager.prototype.bindGraphics = function(a, c, d) {
        this._currentGraphics = a;
        var e,
            f = this.gl,
            g = d.projection,
            h = d.offset;
        1 === c.mode ? (e = d.shaderManager.complexPrimitiveShader, d.shaderManager.setShader(e), f.uniform1f(e.flipY, d.flipY), f.uniformMatrix3fv(e.translationMatrix, !1, a.worldTransform.toArray(!0)), f.uniform2f(e.projectionVector, g.x, -g.y), f.uniform2f(e.offsetVector, -h.x, -h.y), f.uniform3fv(e.tintColor, b.hex2rgb(a.tint)), f.uniform3fv(e.color, c.color), f.uniform1f(e.alpha, a.worldAlpha * c.alpha), f.bindBuffer(f.ARRAY_BUFFER, c.buffer), f.vertexAttribPointer(e.aVertexPosition, 2, f.FLOAT, !1, 8, 0), f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, c.indexBuffer)) : (e = d.shaderManager.primitiveShader, d.shaderManager.setShader(e), f.uniformMatrix3fv(e.translationMatrix, !1, a.worldTransform.toArray(!0)), f.uniform1f(e.flipY, d.flipY), f.uniform2f(e.projectionVector, g.x, -g.y), f.uniform2f(e.offsetVector, -h.x, -h.y), f.uniform3fv(e.tintColor, b.hex2rgb(a.tint)), f.uniform1f(e.alpha, a.worldAlpha), f.bindBuffer(f.ARRAY_BUFFER, c.buffer), f.vertexAttribPointer(e.aVertexPosition, 2, f.FLOAT, !1, 24, 0), f.vertexAttribPointer(e.colorAttribute, 4, f.FLOAT, !1, 24, 8), f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, c.indexBuffer))
    }, b.WebGLStencilManager.prototype.popStencil = function(a, b, c) {
        var d = this.gl;
        if (this.stencilStack.pop(), this.count--, 0 === this.stencilStack.length)
            d.disable(d.STENCIL_TEST);
        else {
            var e = this.count;
            this.bindGraphics(a, b, c),
            d.colorMask(!1, !1, !1, !1),
            1 === b.mode ? (this.reverse = !this.reverse, this.reverse ? (d.stencilFunc(d.EQUAL, 255 - (e + 1), 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)) : (d.stencilFunc(d.EQUAL, e + 1, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)), d.drawElements(d.TRIANGLE_FAN, 4, d.UNSIGNED_SHORT, 2 * (b.indices.length - 4)), d.stencilFunc(d.ALWAYS, 0, 255), d.stencilOp(d.KEEP, d.KEEP, d.INVERT), d.drawElements(d.TRIANGLE_FAN, b.indices.length - 4, d.UNSIGNED_SHORT, 0), this.reverse ? d.stencilFunc(d.EQUAL, e, 255) : d.stencilFunc(d.EQUAL, 255 - e, 255)) : (this.reverse ? (d.stencilFunc(d.EQUAL, e + 1, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)) : (d.stencilFunc(d.EQUAL, 255 - (e + 1), 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)), d.drawElements(d.TRIANGLE_STRIP, b.indices.length, d.UNSIGNED_SHORT, 0), this.reverse ? d.stencilFunc(d.EQUAL, e, 255) : d.stencilFunc(d.EQUAL, 255 - e, 255)),
            d.colorMask(!0, !0, !0, !0),
            d.stencilOp(d.KEEP, d.KEEP, d.KEEP)
        }
    }, b.WebGLStencilManager.prototype.destroy = function() {
        this.stencilStack = null,
        this.gl = null
    }, b.WebGLShaderManager = function() {
        this.maxAttibs = 10,
        this.attribState = [],
        this.tempAttribState = [];
        for (var a = 0; a < this.maxAttibs; a++)
            this.attribState[a] = !1;
        this.stack = []
    }, b.WebGLShaderManager.prototype.constructor = b.WebGLShaderManager, b.WebGLShaderManager.prototype.setContext = function(a) {
        this.gl = a,
        this.primitiveShader = new b.PrimitiveShader(a),
        this.complexPrimitiveShader = new b.ComplexPrimitiveShader(a),
        this.defaultShader = new b.PixiShader(a),
        this.fastShader = new b.PixiFastShader(a),
        this.stripShader = new b.StripShader(a),
        this.setShader(this.defaultShader)
    }, b.WebGLShaderManager.prototype.setAttribs = function(a) {
        var b;
        for (b = 0; b < this.tempAttribState.length; b++)
            this.tempAttribState[b] = !1;
        for (b = 0; b < a.length; b++) {
            var c = a[b];
            this.tempAttribState[c] = !0
        }
        var d = this.gl;
        for (b = 0; b < this.attribState.length; b++)
            this.attribState[b] !== this.tempAttribState[b] && (this.attribState[b] = this.tempAttribState[b], this.tempAttribState[b] ? d.enableVertexAttribArray(b) : d.disableVertexAttribArray(b))
    }, b.WebGLShaderManager.prototype.setShader = function(a) {
        return this._currentId !== a._UID && (this._currentId = a._UID, this.currentShader = a, this.gl.useProgram(a.program), this.setAttribs(a.attributes), !0)
    }, b.WebGLShaderManager.prototype.destroy = function() {
        this.attribState = null,
        this.tempAttribState = null,
        this.primitiveShader.destroy(),
        this.complexPrimitiveShader.destroy(),
        this.defaultShader.destroy(),
        this.fastShader.destroy(),
        this.stripShader.destroy(),
        this.gl = null
    }, b.WebGLSpriteBatch = function() {
        this.vertSize = 5,
        this.size = 2e3;
        var a = 4 * this.size * 4 * this.vertSize,
            c = 6 * this.size;
        this.vertices = new b.ArrayBuffer(a),
        this.positions = new b.Float32Array(this.vertices),
        this.colors = new b.Uint32Array(this.vertices),
        this.indices = new b.Uint16Array(c),
        this.lastIndexCount = 0;
        for (var d = 0, e = 0; d < c; d += 6, e += 4)
            this.indices[d + 0] = e + 0,
            this.indices[d + 1] = e + 1,
            this.indices[d + 2] = e + 2,
            this.indices[d + 3] = e + 0,
            this.indices[d + 4] = e + 2,
            this.indices[d + 5] = e + 3;
        this.drawing = !1,
        this.currentBatchSize = 0,
        this.currentBaseTexture = null,
        this.dirty = !0,
        this.textures = [],
        this.blendModes = [],
        this.shaders = [],
        this.sprites = [],
        this.defaultShader = new b.AbstractFilter(["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"])
    }, b.WebGLSpriteBatch.prototype.setContext = function(a) {
        this.gl = a,
        this.vertexBuffer = a.createBuffer(),
        this.indexBuffer = a.createBuffer(),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.indices, a.STATIC_DRAW),
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.vertices, a.DYNAMIC_DRAW),
        this.currentBlendMode = 99999;
        var c = new b.PixiShader(a);
        c.fragmentSrc = this.defaultShader.fragmentSrc,
        c.uniforms = {},
        c.init(),
        this.defaultShader.shaders[a.id] = c
    }, b.WebGLSpriteBatch.prototype.begin = function(a) {
        this.renderSession = a,
        this.shader = this.renderSession.shaderManager.defaultShader,
        this.start()
    }, b.WebGLSpriteBatch.prototype.end = function() {
        this.flush()
    }, b.WebGLSpriteBatch.prototype.render = function(a, b) {
        var c = a.texture,
            d = a.worldTransform;
        b && (d = b),
        this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = c.baseTexture);
        var e = c._uvs;
        if (e) {
            var f,
                g,
                h,
                i,
                j = a.anchor.x,
                k = a.anchor.y;
            if (c.trim) {
                var l = c.trim;
                g = l.x - j * l.width,
                f = g + c.crop.width,
                i = l.y - k * l.height,
                h = i + c.crop.height
            } else
                f = c.frame.width * (1 - j),
                g = c.frame.width * -j,
                h = c.frame.height * (1 - k),
                i = c.frame.height * -k;
            var m = 4 * this.currentBatchSize * this.vertSize,
                n = c.baseTexture.resolution,
                o = d.a / n,
                p = d.b / n,
                q = d.c / n,
                r = d.d / n,
                s = d.tx,
                t = d.ty,
                u = this.colors,
                v = this.positions;
            this.renderSession.roundPixels ? (v[m] = o * g + q * i + s | 0, v[m + 1] = r * i + p * g + t | 0, v[m + 5] = o * f + q * i + s | 0, v[m + 6] = r * i + p * f + t | 0, v[m + 10] = o * f + q * h + s | 0, v[m + 11] = r * h + p * f + t | 0, v[m + 15] = o * g + q * h + s | 0, v[m + 16] = r * h + p * g + t | 0) : (v[m] = o * g + q * i + s, v[m + 1] = r * i + p * g + t, v[m + 5] = o * f + q * i + s, v[m + 6] = r * i + p * f + t, v[m + 10] = o * f + q * h + s, v[m + 11] = r * h + p * f + t, v[m + 15] = o * g + q * h + s, v[m + 16] = r * h + p * g + t),
            v[m + 2] = e.x0,
            v[m + 3] = e.y0,
            v[m + 7] = e.x1,
            v[m + 8] = e.y1,
            v[m + 12] = e.x2,
            v[m + 13] = e.y2,
            v[m + 17] = e.x3,
            v[m + 18] = e.y3;
            var w = a.tint;
            u[m + 4] = u[m + 9] = u[m + 14] = u[m + 19] = (w >> 16) + (65280 & w) + ((255 & w) << 16) + (255 * a.worldAlpha << 24),
            this.sprites[this.currentBatchSize++] = a
        }
    }, b.WebGLSpriteBatch.prototype.renderTilingSprite = function(a) {
        var c = a.tilingTexture;
        this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = c.baseTexture),
        a._uvs || (a._uvs = new b.TextureUvs);
        var d = a._uvs,
            e = c.baseTexture.width,
            f = c.baseTexture.height;
        a.tilePosition.x %= e * a.tileScaleOffset.x,
        a.tilePosition.y %= f * a.tileScaleOffset.y;
        var g = a.tilePosition.x / (e * a.tileScaleOffset.x),
            h = a.tilePosition.y / (f * a.tileScaleOffset.y),
            i = a.width / e / (a.tileScale.x * a.tileScaleOffset.x),
            j = a.height / f / (a.tileScale.y * a.tileScaleOffset.y);
        d.x0 = 0 - g,
        d.y0 = 0 - h,
        d.x1 = 1 * i - g,
        d.y1 = 0 - h,
        d.x2 = 1 * i - g,
        d.y2 = 1 * j - h,
        d.x3 = 0 - g,
        d.y3 = 1 * j - h;
        var k = a.tint,
            l = (k >> 16) + (65280 & k) + ((255 & k) << 16) + (255 * a.worldAlpha << 24),
            m = this.positions,
            n = this.colors,
            o = a.width,
            p = a.height,
            q = a.anchor.x,
            r = a.anchor.y,
            s = o * (1 - q),
            t = o * -q,
            u = p * (1 - r),
            v = p * -r,
            w = 4 * this.currentBatchSize * this.vertSize,
            x = c.baseTexture.resolution,
            y = a.worldTransform,
            z = y.a / x,
            A = y.b / x,
            B = y.c / x,
            C = y.d / x,
            D = y.tx,
            E = y.ty;
        m[w++] = z * t + B * v + D,
        m[w++] = C * v + A * t + E,
        m[w++] = d.x0,
        m[w++] = d.y0,
        n[w++] = l,
        m[w++] = z * s + B * v + D,
        m[w++] = C * v + A * s + E,
        m[w++] = d.x1,
        m[w++] = d.y1,
        n[w++] = l,
        m[w++] = z * s + B * u + D,
        m[w++] = C * u + A * s + E,
        m[w++] = d.x2,
        m[w++] = d.y2,
        n[w++] = l,
        m[w++] = z * t + B * u + D,
        m[w++] = C * u + A * t + E,
        m[w++] = d.x3,
        m[w++] = d.y3,
        n[w++] = l,
        this.sprites[this.currentBatchSize++] = a
    }, b.WebGLSpriteBatch.prototype.flush = function() {
        if (0 !== this.currentBatchSize) {
            var a,
                c = this.gl;
            if (this.dirty) {
                this.dirty = !1,
                c.activeTexture(c.TEXTURE0),
                c.bindBuffer(c.ARRAY_BUFFER, this.vertexBuffer),
                c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                a = this.defaultShader.shaders[c.id];
                var d = 4 * this.vertSize;
                c.vertexAttribPointer(a.aVertexPosition, 2, c.FLOAT, !1, d, 0),
                c.vertexAttribPointer(a.aTextureCoord, 2, c.FLOAT, !1, d, 8),
                c.vertexAttribPointer(a.colorAttribute, 4, c.UNSIGNED_BYTE, !0, d, 16)
            }
            if (this.currentBatchSize > .5 * this.size)
                c.bufferSubData(c.ARRAY_BUFFER, 0, this.vertices);
            else {
                var e = this.positions.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                c.bufferSubData(c.ARRAY_BUFFER, 0, e)
            }
            for (var f, g, h, i, j = 0, k = 0, l = null, m = this.renderSession.blendModeManager.currentBlendMode, n = null, o = !1, p = !1, q = 0, r = this.currentBatchSize; q < r; q++) {
                i = this.sprites[q],
                f = i.tilingTexture ? i.tilingTexture.baseTexture : i.texture.baseTexture,
                g = i.blendMode,
                h = i.shader || this.defaultShader,
                o = m !== g,
                p = n !== h;
                var s = f.skipRender;
                if (s && i.children.length > 0 && (s = !1), (l !== f && !s || o || p) && (this.renderBatch(l, j, k), k = q, j = 0, l = f, o && (m = g, this.renderSession.blendModeManager.setBlendMode(m)), p)) {
                    n = h,
                    a = n.shaders[c.id],
                    a || (a = new b.PixiShader(c), a.fragmentSrc = n.fragmentSrc, a.uniforms = n.uniforms, a.init(), n.shaders[c.id] = a),
                    this.renderSession.shaderManager.setShader(a),
                    a.dirty && a.syncUniforms();
                    var t = this.renderSession.projection;
                    c.uniform2f(a.projectionVector, t.x, t.y);
                    var u = this.renderSession.offset;
                    c.uniform2f(a.offsetVector, u.x, u.y)
                }
                j++
            }
            this.renderBatch(l, j, k),
            this.currentBatchSize = 0
        }
    }, b.WebGLSpriteBatch.prototype.renderBatch = function(a, b, c) {
        if (0 !== b) {
            var d = this.gl;
            if (a._dirty[d.id]) {
                if (!this.renderSession.renderer.updateTexture(a))
                    return
            } else
                d.bindTexture(d.TEXTURE_2D, a._glTextures[d.id]);
            d.drawElements(d.TRIANGLES, 6 * b, d.UNSIGNED_SHORT, 6 * c * 2),
            this.renderSession.drawCount++
        }
    }, b.WebGLSpriteBatch.prototype.stop = function() {
        this.flush(),
        this.dirty = !0
    }, b.WebGLSpriteBatch.prototype.start = function() {
        this.dirty = !0
    }, b.WebGLSpriteBatch.prototype.destroy = function() {
        this.vertices = null,
        this.indices = null,
        this.gl.deleteBuffer(this.vertexBuffer),
        this.gl.deleteBuffer(this.indexBuffer),
        this.currentBaseTexture = null,
        this.gl = null
    }, b.WebGLFastSpriteBatch = function(a) {
        this.vertSize = 10,
        this.maxSize = 6e3,
        this.size = this.maxSize;
        var c = 4 * this.size * this.vertSize,
            d = 6 * this.maxSize;
        this.vertices = new b.Float32Array(c),
        this.indices = new b.Uint16Array(d),
        this.vertexBuffer = null,
        this.indexBuffer = null,
        this.lastIndexCount = 0;
        for (var e = 0, f = 0; e < d; e += 6, f += 4)
            this.indices[e + 0] = f + 0,
            this.indices[e + 1] = f + 1,
            this.indices[e + 2] = f + 2,
            this.indices[e + 3] = f + 0,
            this.indices[e + 4] = f + 2,
            this.indices[e + 5] = f + 3;
        this.drawing = !1,
        this.currentBatchSize = 0,
        this.currentBaseTexture = null,
        this.currentBlendMode = 0,
        this.renderSession = null,
        this.shader = null,
        this.matrix = null,
        this.setContext(a)
    }, b.WebGLFastSpriteBatch.prototype.constructor = b.WebGLFastSpriteBatch, b.WebGLFastSpriteBatch.prototype.setContext = function(a) {
        this.gl = a,
        this.vertexBuffer = a.createBuffer(),
        this.indexBuffer = a.createBuffer(),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.indices, a.STATIC_DRAW),
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.vertices, a.DYNAMIC_DRAW)
    }, b.WebGLFastSpriteBatch.prototype.begin = function(a, b) {
        this.renderSession = b,
        this.shader = this.renderSession.shaderManager.fastShader,
        this.matrix = a.worldTransform.toArray(!0),
        this.start()
    }, b.WebGLFastSpriteBatch.prototype.end = function() {
        this.flush()
    }, b.WebGLFastSpriteBatch.prototype.render = function(a) {
        var b = a.children,
            c = b[0];
        if (c.texture._uvs) {
            this.currentBaseTexture = c.texture.baseTexture,
            c.blendMode !== this.renderSession.blendModeManager.currentBlendMode && (this.flush(), this.renderSession.blendModeManager.setBlendMode(c.blendMode));
            for (var d = 0, e = b.length; d < e; d++)
                this.renderSprite(b[d]);
            this.flush()
        }
    }, b.WebGLFastSpriteBatch.prototype.renderSprite = function(a) {
        if (a.visible && (a.texture.baseTexture === this.currentBaseTexture || a.texture.baseTexture.skipRender || (this.flush(), this.currentBaseTexture = a.texture.baseTexture, a.texture._uvs))) {
            var b,
                c,
                d,
                e,
                f,
                g,
                h,
                i,
                j = this.vertices;
            if (b = a.texture._uvs, c = a.texture.frame.width, d = a.texture.frame.height, a.texture.trim) {
                var k = a.texture.trim;
                f = k.x - a.anchor.x * k.width,
                e = f + a.texture.crop.width,
                h = k.y - a.anchor.y * k.height,
                g = h + a.texture.crop.height
            } else
                e = a.texture.frame.width * (1 - a.anchor.x),
                f = a.texture.frame.width * -a.anchor.x,
                g = a.texture.frame.height * (1 - a.anchor.y),
                h = a.texture.frame.height * -a.anchor.y;
            i = 4 * this.currentBatchSize * this.vertSize,
            j[i++] = f,
            j[i++] = h,
            j[i++] = a.position.x,
            j[i++] = a.position.y,
            j[i++] = a.scale.x,
            j[i++] = a.scale.y,
            j[i++] = a.rotation,
            j[i++] = b.x0,
            j[i++] = b.y1,
            j[i++] = a.alpha,
            j[i++] = e,
            j[i++] = h,
            j[i++] = a.position.x,
            j[i++] = a.position.y,
            j[i++] = a.scale.x,
            j[i++] = a.scale.y,
            j[i++] = a.rotation,
            j[i++] = b.x1,
            j[i++] = b.y1,
            j[i++] = a.alpha,
            j[i++] = e,
            j[i++] = g,
            j[i++] = a.position.x,
            j[i++] = a.position.y,
            j[i++] = a.scale.x,
            j[i++] = a.scale.y,
            j[i++] = a.rotation,
            j[i++] = b.x2,
            j[i++] = b.y2,
            j[i++] = a.alpha,
            j[i++] = f,
            j[i++] = g,
            j[i++] = a.position.x,
            j[i++] = a.position.y,
            j[i++] = a.scale.x,
            j[i++] = a.scale.y,
            j[i++] = a.rotation,
            j[i++] = b.x3,
            j[i++] = b.y3,
            j[i++] = a.alpha,
            this.currentBatchSize++,
            this.currentBatchSize >= this.size && this.flush()
        }
    }, b.WebGLFastSpriteBatch.prototype.flush = function() {
        if (0 !== this.currentBatchSize) {
            var a = this.gl;
            if (this.currentBaseTexture._glTextures[a.id] || this.renderSession.renderer.updateTexture(this.currentBaseTexture, a), a.bindTexture(a.TEXTURE_2D, this.currentBaseTexture._glTextures[a.id]), this.currentBatchSize > .5 * this.size)
                a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertices);
            else {
                var b = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                a.bufferSubData(a.ARRAY_BUFFER, 0, b)
            }
            a.drawElements(a.TRIANGLES, 6 * this.currentBatchSize, a.UNSIGNED_SHORT, 0),
            this.currentBatchSize = 0,
            this.renderSession.drawCount++
        }
    }, b.WebGLFastSpriteBatch.prototype.stop = function() {
        this.flush()
    }, b.WebGLFastSpriteBatch.prototype.start = function() {
        var a = this.gl;
        a.activeTexture(a.TEXTURE0),
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
        var b = this.renderSession.projection;
        a.uniform2f(this.shader.projectionVector, b.x, b.y),
        a.uniformMatrix3fv(this.shader.uMatrix, !1, this.matrix);
        var c = 4 * this.vertSize;
        a.vertexAttribPointer(this.shader.aVertexPosition, 2, a.FLOAT, !1, c, 0),
        a.vertexAttribPointer(this.shader.aPositionCoord, 2, a.FLOAT, !1, c, 8),
        a.vertexAttribPointer(this.shader.aScale, 2, a.FLOAT, !1, c, 16),
        a.vertexAttribPointer(this.shader.aRotation, 1, a.FLOAT, !1, c, 24),
        a.vertexAttribPointer(this.shader.aTextureCoord, 2, a.FLOAT, !1, c, 28),
        a.vertexAttribPointer(this.shader.colorAttribute, 1, a.FLOAT, !1, c, 36)
    }, b.WebGLFilterManager = function() {
        this.filterStack = [],
        this.offsetX = 0,
        this.offsetY = 0
    }, b.WebGLFilterManager.prototype.constructor = b.WebGLFilterManager, b.WebGLFilterManager.prototype.setContext = function(a) {
        this.gl = a,
        this.texturePool = [],
        this.initShaderBuffers()
    }, b.WebGLFilterManager.prototype.begin = function(a, b) {
        this.renderSession = a,
        this.defaultShader = a.shaderManager.defaultShader;
        var c = this.renderSession.projection;
        this.width = 2 * c.x,
        this.height = 2 * -c.y,
        this.buffer = b
    }, b.WebGLFilterManager.prototype.pushFilter = function(a) {
        var c = this.gl,
            d = this.renderSession.projection,
            e = this.renderSession.offset;
        a._filterArea = a.target.filterArea || a.target.getBounds(),
        a._previous_stencil_mgr = this.renderSession.stencilManager,
        this.renderSession.stencilManager = new b.WebGLStencilManager,
        this.renderSession.stencilManager.setContext(c),
        c.disable(c.STENCIL_TEST),
        this.filterStack.push(a);
        var f = a.filterPasses[0];
        this.offsetX += a._filterArea.x,
        this.offsetY += a._filterArea.y;
        var g = this.texturePool.pop();
        g ? g.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution) : g = new b.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution),
        c.bindTexture(c.TEXTURE_2D, g.texture);
        var h = a._filterArea,
            i = f.padding;
        h.x -= i,
        h.y -= i,
        h.width += 2 * i,
        h.height += 2 * i,
        h.x < 0 && (h.x = 0),
        h.width > this.width && (h.width = this.width),
        h.y < 0 && (h.y = 0),
        h.height > this.height && (h.height = this.height),
        c.bindFramebuffer(c.FRAMEBUFFER, g.frameBuffer),
        c.viewport(0, 0, h.width * this.renderSession.resolution, h.height * this.renderSession.resolution),
        d.x = h.width / 2,
        d.y = -h.height / 2,
        e.x = -h.x,
        e.y = -h.y,
        c.colorMask(!0, !0, !0, !0),
        c.clearColor(0, 0, 0, 0),
        c.clear(c.COLOR_BUFFER_BIT),
        a._glFilterTexture = g
    }, b.WebGLFilterManager.prototype.popFilter = function() {
        var a = this.gl,
            c = this.filterStack.pop(),
            d = c._filterArea,
            e = c._glFilterTexture,
            f = this.renderSession.projection,
            g = this.renderSession.offset;
        if (c.filterPasses.length > 1) {
            a.viewport(0, 0, d.width * this.renderSession.resolution, d.height * this.renderSession.resolution),
            a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
            this.vertexArray[0] = 0,
            this.vertexArray[1] = d.height,
            this.vertexArray[2] = d.width,
            this.vertexArray[3] = d.height,
            this.vertexArray[4] = 0,
            this.vertexArray[5] = 0,
            this.vertexArray[6] = d.width,
            this.vertexArray[7] = 0,
            a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertexArray),
            a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
            this.uvArray[2] = d.width / this.width,
            this.uvArray[5] = d.height / this.height,
            this.uvArray[6] = d.width / this.width,
            this.uvArray[7] = d.height / this.height,
            a.bufferSubData(a.ARRAY_BUFFER, 0, this.uvArray);
            var h = e,
                i = this.texturePool.pop();
            i || (i = new b.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution)),
            i.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution),
            a.bindFramebuffer(a.FRAMEBUFFER, i.frameBuffer),
            a.clear(a.COLOR_BUFFER_BIT),
            a.disable(a.BLEND);
            for (var j = 0; j < c.filterPasses.length - 1; j++) {
                var k = c.filterPasses[j];
                a.bindFramebuffer(a.FRAMEBUFFER, i.frameBuffer),
                a.activeTexture(a.TEXTURE0),
                a.bindTexture(a.TEXTURE_2D, h.texture),
                this.applyFilterPass(k, d, d.width, d.height);
                var l = h;
                h = i,
                i = l
            }
            a.enable(a.BLEND),
            e = h,
            this.texturePool.push(i)
        }
        var m = c.filterPasses[c.filterPasses.length - 1];
        this.offsetX -= d.x,
        this.offsetY -= d.y;
        var n = this.width,
            o = this.height,
            p = 0,
            q = 0,
            r = this.buffer;
        if (0 === this.filterStack.length)
            a.colorMask(!0, !0, !0, !0);
        else {
            var s = this.filterStack[this.filterStack.length - 1];
            d = s._filterArea,
            n = d.width,
            o = d.height,
            p = d.x,
            q = d.y,
            r = s._glFilterTexture.frameBuffer
        }
        f.x = n / 2,
        f.y = -o / 2,
        g.x = p,
        g.y = q,
        d = c._filterArea;
        var t = d.x - p,
            u = d.y - q;
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        this.vertexArray[0] = t,
        this.vertexArray[1] = u + d.height,
        this.vertexArray[2] = t + d.width,
        this.vertexArray[3] = u + d.height,
        this.vertexArray[4] = t,
        this.vertexArray[5] = u,
        this.vertexArray[6] = t + d.width,
        this.vertexArray[7] = u,
        a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertexArray),
        a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
        this.uvArray[2] = d.width / this.width,
        this.uvArray[5] = d.height / this.height,
        this.uvArray[6] = d.width / this.width,
        this.uvArray[7] = d.height / this.height,
        a.bufferSubData(a.ARRAY_BUFFER, 0, this.uvArray),
        a.viewport(0, 0, n * this.renderSession.resolution, o * this.renderSession.resolution),
        a.bindFramebuffer(a.FRAMEBUFFER, r),
        a.activeTexture(a.TEXTURE0),
        a.bindTexture(a.TEXTURE_2D, e.texture),
        this.renderSession.stencilManager && this.renderSession.stencilManager.destroy(),
        this.renderSession.stencilManager = c._previous_stencil_mgr,
        c._previous_stencil_mgr = null,
        this.renderSession.stencilManager.count > 0 ? a.enable(a.STENCIL_TEST) : a.disable(a.STENCIL_TEST),
        this.applyFilterPass(m, d, n, o),
        this.texturePool.push(e),
        c._glFilterTexture = null
    }, b.WebGLFilterManager.prototype.applyFilterPass = function(a, c, d, e) {
        var f = this.gl,
            g = a.shaders[f.id];
        g || (g = new b.PixiShader(f), g.fragmentSrc = a.fragmentSrc, g.uniforms = a.uniforms, g.init(), a.shaders[f.id] = g),
        this.renderSession.shaderManager.setShader(g),
        f.uniform2f(g.projectionVector, d / 2, -e / 2),
        f.uniform2f(g.offsetVector, 0, 0),
        a.uniforms.dimensions && (a.uniforms.dimensions.value[0] = this.width, a.uniforms.dimensions.value[1] = this.height, a.uniforms.dimensions.value[2] = this.vertexArray[0], a.uniforms.dimensions.value[3] = this.vertexArray[5]),
        g.syncUniforms(),
        f.bindBuffer(f.ARRAY_BUFFER, this.vertexBuffer),
        f.vertexAttribPointer(g.aVertexPosition, 2, f.FLOAT, !1, 0, 0),
        f.bindBuffer(f.ARRAY_BUFFER, this.uvBuffer),
        f.vertexAttribPointer(g.aTextureCoord, 2, f.FLOAT, !1, 0, 0),
        f.bindBuffer(f.ARRAY_BUFFER, this.colorBuffer),
        f.vertexAttribPointer(g.colorAttribute, 2, f.FLOAT, !1, 0, 0),
        f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        f.drawElements(f.TRIANGLES, 6, f.UNSIGNED_SHORT, 0),
        this.renderSession.drawCount++
    }, b.WebGLFilterManager.prototype.initShaderBuffers = function() {
        var a = this.gl;
        this.vertexBuffer = a.createBuffer(),
        this.uvBuffer = a.createBuffer(),
        this.colorBuffer = a.createBuffer(),
        this.indexBuffer = a.createBuffer(),
        this.vertexArray = new b.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]),
        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.vertexArray, a.STATIC_DRAW),
        this.uvArray = new b.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]),
        a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.uvArray, a.STATIC_DRAW),
        this.colorArray = new b.Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215]),
        a.bindBuffer(a.ARRAY_BUFFER, this.colorBuffer),
        a.bufferData(a.ARRAY_BUFFER, this.colorArray, a.STATIC_DRAW),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), a.STATIC_DRAW)
    }, b.WebGLFilterManager.prototype.destroy = function() {
        var a = this.gl;
        this.filterStack = null,
        this.offsetX = 0,
        this.offsetY = 0;
        for (var b = 0; b < this.texturePool.length; b++)
            this.texturePool[b].destroy();
        this.texturePool = null,
        a.deleteBuffer(this.vertexBuffer),
        a.deleteBuffer(this.uvBuffer),
        a.deleteBuffer(this.colorBuffer),
        a.deleteBuffer(this.indexBuffer)
    }, b.FilterTexture = function(a, c, d, e) {
        this.gl = a,
        this.frameBuffer = a.createFramebuffer(),
        this.texture = a.createTexture(),
        e = e || b.scaleModes.DEFAULT,
        a.bindTexture(a.TEXTURE_2D, this.texture),
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, e === b.scaleModes.LINEAR ? a.LINEAR : a.NEAREST),
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, e === b.scaleModes.LINEAR ? a.LINEAR : a.NEAREST),
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE),
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE),
        a.bindFramebuffer(a.FRAMEBUFFER, this.frameBuffer),
        a.bindFramebuffer(a.FRAMEBUFFER, this.frameBuffer),
        a.framebufferTexture2D(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0, a.TEXTURE_2D, this.texture, 0),
        this.renderBuffer = a.createRenderbuffer(),
        a.bindRenderbuffer(a.RENDERBUFFER, this.renderBuffer),
        a.framebufferRenderbuffer(a.FRAMEBUFFER, a.DEPTH_STENCIL_ATTACHMENT, a.RENDERBUFFER, this.renderBuffer),
        this.resize(c, d)
    }, b.FilterTexture.prototype.constructor = b.FilterTexture, b.FilterTexture.prototype.clear = function() {
        var a = this.gl;
        a.clearColor(0, 0, 0, 0),
        a.clear(a.COLOR_BUFFER_BIT)
    }, b.FilterTexture.prototype.resize = function(a, b) {
        if (this.width !== a || this.height !== b) {
            this.width = a,
            this.height = b;
            var c = this.gl;
            c.bindTexture(c.TEXTURE_2D, this.texture),
            c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, a, b, 0, c.RGBA, c.UNSIGNED_BYTE, null),
            c.bindRenderbuffer(c.RENDERBUFFER, this.renderBuffer),
            c.renderbufferStorage(c.RENDERBUFFER, c.DEPTH_STENCIL, a, b)
        }
    }, b.FilterTexture.prototype.destroy = function() {
        var a = this.gl;
        a.deleteFramebuffer(this.frameBuffer),
        a.deleteTexture(this.texture),
        this.frameBuffer = null,
        this.texture = null
    }, b.CanvasBuffer = function(a, c) {
        this.width = a,
        this.height = c,
        this.canvas = b.CanvasPool.create(this, this.width, this.height),
        this.context = this.canvas.getContext("2d"),
        this.canvas.width = a,
        this.canvas.height = c
    }, b.CanvasBuffer.prototype.constructor = b.CanvasBuffer, b.CanvasBuffer.prototype.clear = function() {
        this.context.setTransform(1, 0, 0, 1, 0, 0),
        this.context.clearRect(0, 0, this.width, this.height)
    }, b.CanvasBuffer.prototype.resize = function(a, b) {
        this.width = this.canvas.width = a,
        this.height = this.canvas.height = b
    }, b.CanvasBuffer.prototype.destroy = function() {
        b.CanvasPool.remove(this)
    }, b.CanvasMaskManager = function() {}, b.CanvasMaskManager.prototype.constructor = b.CanvasMaskManager, b.CanvasMaskManager.prototype.pushMask = function(a, c) {
        var d = c.context;
        d.save();
        var e = a.alpha,
            f = a.worldTransform,
            g = c.resolution;
        d.setTransform(f.a * g, f.b * g, f.c * g, f.d * g, f.tx * g, f.ty * g),
        b.CanvasGraphics.renderGraphicsMask(a, d),
        d.clip(),
        a.worldAlpha = e
    }, b.CanvasMaskManager.prototype.popMask = function(a) {
        a.context.restore()
    }, b.CanvasTinter = function() {}, b.CanvasTinter.getTintedTexture = function(a, c) {
        var d = a.tintedTexture || b.CanvasPool.create(this);
        return b.CanvasTinter.tintMethod(a.texture, c, d), d
    }, b.CanvasTinter.tintWithMultiply = function(a, b, c) {
        var d = c.getContext("2d"),
            e = a.crop;
        c.width === e.width && c.height === e.height || (c.width = e.width, c.height = e.height),
        d.clearRect(0, 0, e.width, e.height),
        d.fillStyle = "#" + ("00000" + (0 | b).toString(16)).substr(-6),
        d.fillRect(0, 0, e.width, e.height),
        d.globalCompositeOperation = "multiply",
        d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height),
        d.globalCompositeOperation = "destination-atop",
        d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height)
    }, b.CanvasTinter.tintWithPerPixel = function(a, c, d) {
        var e = d.getContext("2d"),
            f = a.crop;
        d.width = f.width,
        d.height = f.height,
        e.globalCompositeOperation = "copy",
        e.drawImage(a.baseTexture.source, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);
        for (var g = b.hex2rgb(c), h = g[0], i = g[1], j = g[2], k = e.getImageData(0, 0, f.width, f.height), l = k.data, m = 0; m < l.length; m += 4)
            if (l[m + 0] *= h, l[m + 1] *= i, l[m + 2] *= j, !b.CanvasTinter.canHandleAlpha) {
                var n = l[m + 3];
                l[m + 0] /= 255 / n,
                l[m + 1] /= 255 / n,
                l[m + 2] /= 255 / n
            }
        e.putImageData(k, 0, 0)
    }, b.CanvasTinter.checkInverseAlpha = function() {
        var a = new b.CanvasBuffer(2, 1);
        a.context.fillStyle = "rgba(10, 20, 30, 0.5)",
        a.context.fillRect(0, 0, 1, 1);
        var c = a.context.getImageData(0, 0, 1, 1);
        if (null === c)
            return !1;
        a.context.putImageData(c, 1, 0);
        var d = a.context.getImageData(1, 0, 1, 1);
        return d.data[0] === c.data[0] && d.data[1] === c.data[1] && d.data[2] === c.data[2] && d.data[3] === c.data[3]
    }, b.CanvasTinter.canHandleAlpha = b.CanvasTinter.checkInverseAlpha(), b.CanvasTinter.canUseMultiply = b.canUseNewCanvasBlendModes(), b.CanvasTinter.tintMethod = b.CanvasTinter.canUseMultiply ? b.CanvasTinter.tintWithMultiply : b.CanvasTinter.tintWithPerPixel, b.CanvasRenderer = function(a) {
        this.game = a,
        b.defaultRenderer || (b.defaultRenderer = this),
        this.type = b.CANVAS_RENDERER,
        this.resolution = a.resolution,
        this.clearBeforeRender = a.clearBeforeRender,
        this.transparent = a.transparent,
        this.autoResize = !1,
        this.width = a.width * this.resolution,
        this.height = a.height * this.resolution,
        this.view = a.canvas,
        this.context = this.view.getContext("2d", {
            alpha: this.transparent
        }),
        this.refresh = !0,
        this.count = 0,
        this.maskManager = new b.CanvasMaskManager,
        this.renderSession = {
            context: this.context,
            maskManager: this.maskManager,
            scaleMode: null,
            smoothProperty: Phaser.Canvas.getSmoothingPrefix(this.context),
            roundPixels: !1
        },
        this.mapBlendModes(),
        this.resize(this.width, this.height)
    }, b.CanvasRenderer.prototype.constructor = b.CanvasRenderer, b.CanvasRenderer.prototype.render = function(a) {
        this.context.setTransform(1, 0, 0, 1, 0, 0),
        this.context.globalAlpha = 1,
        this.renderSession.currentBlendMode = 0,
        this.renderSession.shakeX = this.game.camera._shake.x,
        this.renderSession.shakeY = this.game.camera._shake.y,
        this.context.globalCompositeOperation = "source-over",
        navigator.isCocoonJS && this.view.screencanvas && (this.context.fillStyle = "black", this.context.clear()),
        this.clearBeforeRender && (this.transparent ? this.context.clearRect(0, 0, this.width, this.height) : a._bgColor && (this.context.fillStyle = a._bgColor.rgba, this.context.fillRect(0, 0, this.width, this.height))),
        this.renderDisplayObject(a)
    }, b.CanvasRenderer.prototype.destroy = function(a) {
        void 0 === a && (a = !0),
        a && this.view.parent && this.view.parent.removeChild(this.view),
        this.view = null,
        this.context = null,
        this.maskManager = null,
        this.renderSession = null
    }, b.CanvasRenderer.prototype.resize = function(a, c) {
        this.width = a * this.resolution,
        this.height = c * this.resolution,
        this.view.width = this.width,
        this.view.height = this.height,
        this.autoResize && (this.view.style.width = this.width / this.resolution + "px", this.view.style.height = this.height / this.resolution + "px"),
        this.renderSession.smoothProperty && (this.context[this.renderSession.smoothProperty] = this.renderSession.scaleMode === b.scaleModes.LINEAR)
    }, b.CanvasRenderer.prototype.renderDisplayObject = function(a, b, c) {
        this.renderSession.context = b || this.context,
        this.renderSession.resolution = this.resolution,
        a._renderCanvas(this.renderSession, c)
    }, b.CanvasRenderer.prototype.mapBlendModes = function() {
        if (!b.blendModesCanvas) {
            var a = [],
                c = b.blendModes,
                d = b.canUseNewCanvasBlendModes();
            a[c.NORMAL] = "source-over",
            a[c.ADD] = "lighter",
            a[c.MULTIPLY] = d ? "multiply" : "source-over",
            a[c.SCREEN] = d ? "screen" : "source-over",
            a[c.OVERLAY] = d ? "overlay" : "source-over",
            a[c.DARKEN] = d ? "darken" : "source-over",
            a[c.LIGHTEN] = d ? "lighten" : "source-over",
            a[c.COLOR_DODGE] = d ? "color-dodge" : "source-over",
            a[c.COLOR_BURN] = d ? "color-burn" : "source-over",
            a[c.HARD_LIGHT] = d ? "hard-light" : "source-over",
            a[c.SOFT_LIGHT] = d ? "soft-light" : "source-over",
            a[c.DIFFERENCE] = d ? "difference" : "source-over",
            a[c.EXCLUSION] = d ? "exclusion" : "source-over",
            a[c.HUE] = d ? "hue" : "source-over",
            a[c.SATURATION] = d ? "saturation" : "source-over",
            a[c.COLOR] = d ? "color" : "source-over",
            a[c.LUMINOSITY] = d ? "luminosity" : "source-over",
            b.blendModesCanvas = a
        }
    }, b.BaseTexture = function(a, c) {
        this.resolution = 1,
        this.width = 100,
        this.height = 100,
        this.scaleMode = c || b.scaleModes.DEFAULT,
        this.hasLoaded = !1,
        this.source = a,
        this.premultipliedAlpha = !0,
        this._glTextures = [],
        this.mipmap = !1,
        this._dirty = [!0, !0, !0, !0],
        a && ((this.source.complete || this.source.getContext) && this.source.width && this.source.height && (this.hasLoaded = !0, this.width = this.source.naturalWidth || this.source.width, this.height = this.source.naturalHeight || this.source.height, this.dirty()), this.skipRender = !1, this._powerOf2 = !1)
    }, b.BaseTexture.prototype.constructor = b.BaseTexture, b.BaseTexture.prototype.forceLoaded = function(a, b) {
        this.hasLoaded = !0,
        this.width = a,
        this.height = b,
        this.dirty()
    }, b.BaseTexture.prototype.destroy = function() {
        this.source && b.CanvasPool.removeByCanvas(this.source),
        this.source = null,
        this.unloadFromGPU()
    }, b.BaseTexture.prototype.updateSourceImage = function(a) {
        console.warn("PIXI.BaseTexture.updateSourceImage is deprecated. Use Phaser.Sprite.loadTexture instead.")
    }, b.BaseTexture.prototype.dirty = function() {
        for (var a = 0; a < this._glTextures.length; a++)
            this._dirty[a] = !0
    }, b.BaseTexture.prototype.unloadFromGPU = function() {
        this.dirty();
        for (var a = this._glTextures.length - 1; a >= 0; a--) {
            var c = this._glTextures[a],
                d = b.glContexts[a];
            d && c && d.deleteTexture(c)
        }
        this._glTextures.length = 0,
        this.dirty()
    }, b.BaseTexture.fromCanvas = function(a, c) {
        return 0 === a.width && (a.width = 1), 0 === a.height && (a.height = 1), new b.BaseTexture(a, c)
    }, b.TextureSilentFail = !1, b.Texture = function(a, c, d, e) {
        this.noFrame = !1,
        c || (this.noFrame = !0, c = new b.Rectangle(0, 0, 1, 1)),
        a instanceof b.Texture && (a = a.baseTexture),
        this.baseTexture = a,
        this.frame = c,
        this.trim = e,
        this.valid = !1,
        this.isTiling = !1,
        this.requiresUpdate = !1,
        this.requiresReTint = !1,
        this._uvs = null,
        this.width = 0,
        this.height = 0,
        this.crop = d || new b.Rectangle(0, 0, 1, 1),
        a.hasLoaded && (this.noFrame && (c = new b.Rectangle(0, 0, a.width, a.height)), this.setFrame(c))
    }, b.Texture.prototype.constructor = b.Texture, b.Texture.prototype.onBaseTextureLoaded = function() {
        var a = this.baseTexture;
        this.noFrame && (this.frame = new b.Rectangle(0, 0, a.width, a.height)),
        this.setFrame(this.frame)
    }, b.Texture.prototype.destroy = function(a) {
        a && this.baseTexture.destroy(),
        this.valid = !1
    }, b.Texture.prototype.setFrame = function(a) {
        if (this.noFrame = !1, this.frame = a, this.width = a.width, this.height = a.height, this.crop.x = a.x, this.crop.y = a.y, this.crop.width = a.width, this.crop.height = a.height, !this.trim && (a.x + a.width > this.baseTexture.width || a.y + a.height > this.baseTexture.height)) {
            if (!b.TextureSilentFail)
                throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
            return void (this.valid = !1)
        }
        this.valid = a && a.width && a.height && this.baseTexture.source && this.baseTexture.hasLoaded,
        this.trim && (this.width = this.trim.width, this.height = this.trim.height, this.frame.width = this.trim.width, this.frame.height = this.trim.height),
        this.valid && this._updateUvs()
    }, b.Texture.prototype._updateUvs = function() {
        this._uvs || (this._uvs = new b.TextureUvs);
        var a = this.crop,
            c = this.baseTexture.width,
            d = this.baseTexture.height;
        this._uvs.x0 = a.x / c,
        this._uvs.y0 = a.y / d,
        this._uvs.x1 = (a.x + a.width) / c,
        this._uvs.y1 = a.y / d,
        this._uvs.x2 = (a.x + a.width) / c,
        this._uvs.y2 = (a.y + a.height) / d,
        this._uvs.x3 = a.x / c,
        this._uvs.y3 = (a.y + a.height) / d
    }, b.Texture.fromCanvas = function(a, c) {
        var d = b.BaseTexture.fromCanvas(a, c);
        return new b.Texture(d)
    }, b.TextureUvs = function() {
        this.x0 = 0,
        this.y0 = 0,
        this.x1 = 0,
        this.y1 = 0,
        this.x2 = 0,
        this.y2 = 0,
        this.x3 = 0,
        this.y3 = 0
    }, b.RenderTexture = function(a, c, d, e, f) {
        if (this.width = a || 100, this.height = c || 100, this.resolution = f || 1, this.frame = new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.crop = new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.baseTexture = new b.BaseTexture, this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution, this.baseTexture._glTextures = [], this.baseTexture.resolution = this.resolution, this.baseTexture.scaleMode = e || b.scaleModes.DEFAULT, this.baseTexture.hasLoaded = !0, b.Texture.call(this, this.baseTexture, new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution)), this.renderer = d || b.defaultRenderer, this.renderer.type === b.WEBGL_RENDERER) {
            var g = this.renderer.gl;
            this.baseTexture._dirty[g.id] = !1,
            this.textureBuffer = new b.FilterTexture(g, this.width, this.height, this.baseTexture.scaleMode),
            this.baseTexture._glTextures[g.id] = this.textureBuffer.texture,
            this.render = this.renderWebGL,
            this.projection = new b.Point(.5 * this.width, .5 * -this.height)
        } else
            this.render = this.renderCanvas,
            this.textureBuffer = new b.CanvasBuffer(this.width * this.resolution, this.height * this.resolution),
            this.baseTexture.source = this.textureBuffer.canvas;
        this.valid = !0,
        this.tempMatrix = new Phaser.Matrix,
        this._updateUvs()
    }, b.RenderTexture.prototype = Object.create(b.Texture.prototype), b.RenderTexture.prototype.constructor = b.RenderTexture, b.RenderTexture.prototype.resize = function(a, c, d) {
        a === this.width && c === this.height || (this.valid = a > 0 && c > 0, this.width = a, this.height = c, this.frame.width = this.crop.width = a * this.resolution, this.frame.height = this.crop.height = c * this.resolution, d && (this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution), this.renderer.type === b.WEBGL_RENDERER && (this.projection.x = this.width / 2, this.projection.y = -this.height / 2), this.valid && this.textureBuffer.resize(this.width, this.height))
    }, b.RenderTexture.prototype.clear = function() {
        this.valid && (this.renderer.type === b.WEBGL_RENDERER && this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer), this.textureBuffer.clear())
    }, b.RenderTexture.prototype.renderWebGL = function(a, b, c) {
        if (this.valid && 0 !== a.alpha) {
            var d = a.worldTransform;
            d.identity(),
            d.translate(0, 2 * this.projection.y),
            b && d.append(b),
            d.scale(1, -1);
            for (var e = 0; e < a.children.length; e++)
                a.children[e].updateTransform();
            var f = this.renderer.gl;
            f.viewport(0, 0, this.width * this.resolution, this.height * this.resolution),
            f.bindFramebuffer(f.FRAMEBUFFER, this.textureBuffer.frameBuffer),
            c && this.textureBuffer.clear(),
            this.renderer.spriteBatch.dirty = !0,
            this.renderer.renderDisplayObject(a, this.projection, this.textureBuffer.frameBuffer, b),
            this.renderer.spriteBatch.dirty = !0
        }
    }, b.RenderTexture.prototype.renderCanvas = function(a, b, c) {
        if (this.valid && 0 !== a.alpha) {
            var d = a.worldTransform;
            d.identity(),
            b && d.append(b);
            for (var e = 0; e < a.children.length; e++)
                a.children[e].updateTransform();
            c && this.textureBuffer.clear();
            var f = this.renderer.resolution;
            this.renderer.resolution = this.resolution,
            this.renderer.renderDisplayObject(a, this.textureBuffer.context, b),
            this.renderer.resolution = f
        }
    }, b.RenderTexture.prototype.getImage = function() {
        var a = new Image;
        return a.src = this.getBase64(), a
    }, b.RenderTexture.prototype.getBase64 = function() {
        return this.getCanvas().toDataURL()
    }, b.RenderTexture.prototype.getCanvas = function() {
        if (this.renderer.type === b.WEBGL_RENDERER) {
            var a = this.renderer.gl,
                c = this.textureBuffer.width,
                d = this.textureBuffer.height,
                e = new Uint8Array(4 * c * d);
            a.bindFramebuffer(a.FRAMEBUFFER, this.textureBuffer.frameBuffer),
            a.readPixels(0, 0, c, d, a.RGBA, a.UNSIGNED_BYTE, e),
            a.bindFramebuffer(a.FRAMEBUFFER, null);
            var f = new b.CanvasBuffer(c, d),
                g = f.context.getImageData(0, 0, c, d);
            return g.data.set(e), f.context.putImageData(g, 0, 0), f.canvas
        }
        return this.textureBuffer.canvas
    }, b.AbstractFilter = function(a, b) {
        this.passes = [this],
        this.shaders = [],
        this.dirty = !0,
        this.padding = 0,
        this.uniforms = b || {},
        this.fragmentSrc = a || []
    }, b.AbstractFilter.prototype.constructor = b.AbstractFilter, b.AbstractFilter.prototype.syncUniforms = function() {
        for (var a = 0, b = this.shaders.length; a < b; a++)
            this.shaders[a].dirty = !0
    }, b.Strip = function(a) {
        b.DisplayObjectContainer.call(this),
        this.texture = a,
        this.uvs = new b.Float32Array([0, 1, 1, 1, 1, 0, 0, 1]),
        this.vertices = new b.Float32Array([0, 0, 100, 0, 100, 100, 0, 100]),
        this.colors = new b.Float32Array([1, 1, 1, 1]),
        this.indices = new b.Uint16Array([0, 1, 2, 3]),
        this.dirty = !0,
        this.blendMode = b.blendModes.NORMAL,
        this.canvasPadding = 0,
        this.drawMode = b.Strip.DrawModes.TRIANGLE_STRIP
    }, b.Strip.prototype = Object.create(b.DisplayObjectContainer.prototype), b.Strip.prototype.constructor = b.Strip, b.Strip.prototype._renderWebGL = function(a) {
        !this.visible || this.alpha <= 0 || (a.spriteBatch.stop(), this._vertexBuffer || this._initWebGL(a), a.shaderManager.setShader(a.shaderManager.stripShader), this._renderStrip(a), a.spriteBatch.start())
    }, b.Strip.prototype._initWebGL = function(a) {
        var b = a.gl;
        this._vertexBuffer = b.createBuffer(),
        this._indexBuffer = b.createBuffer(),
        this._uvBuffer = b.createBuffer(),
        this._colorBuffer = b.createBuffer(),
        b.bindBuffer(b.ARRAY_BUFFER, this._vertexBuffer),
        b.bufferData(b.ARRAY_BUFFER, this.vertices, b.DYNAMIC_DRAW),
        b.bindBuffer(b.ARRAY_BUFFER, this._uvBuffer),
        b.bufferData(b.ARRAY_BUFFER, this.uvs, b.STATIC_DRAW),
        b.bindBuffer(b.ARRAY_BUFFER, this._colorBuffer),
        b.bufferData(b.ARRAY_BUFFER, this.colors, b.STATIC_DRAW),
        b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, this._indexBuffer),
        b.bufferData(b.ELEMENT_ARRAY_BUFFER, this.indices, b.STATIC_DRAW)
    }, b.Strip.prototype._renderStrip = function(a) {
        var c = a.gl,
            d = a.projection,
            e = a.offset,
            f = a.shaderManager.stripShader,
            g = this.drawMode === b.Strip.DrawModes.TRIANGLE_STRIP ? c.TRIANGLE_STRIP : c.TRIANGLES;
        a.blendModeManager.setBlendMode(this.blendMode),
        c.uniformMatrix3fv(f.translationMatrix, !1, this.worldTransform.toArray(!0)),
        c.uniform2f(f.projectionVector, d.x, -d.y),
        c.uniform2f(f.offsetVector, -e.x, -e.y),
        c.uniform1f(f.alpha, this.worldAlpha),
        this.dirty ? (this.dirty = !1, c.bindBuffer(c.ARRAY_BUFFER, this._vertexBuffer), c.bufferData(c.ARRAY_BUFFER, this.vertices, c.STATIC_DRAW), c.vertexAttribPointer(f.aVertexPosition, 2, c.FLOAT, !1, 0, 0), c.bindBuffer(c.ARRAY_BUFFER, this._uvBuffer), c.bufferData(c.ARRAY_BUFFER, this.uvs, c.STATIC_DRAW), c.vertexAttribPointer(f.aTextureCoord, 2, c.FLOAT, !1, 0, 0), c.activeTexture(c.TEXTURE0), this.texture.baseTexture._dirty[c.id] ? a.renderer.updateTexture(this.texture.baseTexture) : c.bindTexture(c.TEXTURE_2D, this.texture.baseTexture._glTextures[c.id]), c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this._indexBuffer), c.bufferData(c.ELEMENT_ARRAY_BUFFER, this.indices, c.STATIC_DRAW)) : (c.bindBuffer(c.ARRAY_BUFFER, this._vertexBuffer), c.bufferSubData(c.ARRAY_BUFFER, 0, this.vertices), c.vertexAttribPointer(f.aVertexPosition, 2, c.FLOAT, !1, 0, 0), c.bindBuffer(c.ARRAY_BUFFER, this._uvBuffer), c.vertexAttribPointer(f.aTextureCoord, 2, c.FLOAT, !1, 0, 0), c.activeTexture(c.TEXTURE0), this.texture.baseTexture._dirty[c.id] ? a.renderer.updateTexture(this.texture.baseTexture) : c.bindTexture(c.TEXTURE_2D, this.texture.baseTexture._glTextures[c.id]), c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this._indexBuffer)),
        c.drawElements(g, this.indices.length, c.UNSIGNED_SHORT, 0)
    }, b.Strip.prototype._renderCanvas = function(a) {
        var c = a.context,
            d = this.worldTransform,
            e = d.tx * a.resolution + a.shakeX,
            f = d.ty * a.resolution + a.shakeY;
        a.roundPixels ? c.setTransform(d.a, d.b, d.c, d.d, 0 | e, 0 | f) : c.setTransform(d.a, d.b, d.c, d.d, e, f),
        this.drawMode === b.Strip.DrawModes.TRIANGLE_STRIP ? this._renderCanvasTriangleStrip(c) : this._renderCanvasTriangles(c)
    }, b.Strip.prototype._renderCanvasTriangleStrip = function(a) {
        var b = this.vertices,
            c = this.uvs,
            d = b.length / 2;
        this.count++;
        for (var e = 0; e < d - 2; e++) {
            var f = 2 * e;
            this._renderCanvasDrawTriangle(a, b, c, f, f + 2, f + 4)
        }
    }, b.Strip.prototype._renderCanvasTriangles = function(a) {
        var b = this.vertices,
            c = this.uvs,
            d = this.indices,
            e = d.length;
        this.count++;
        for (var f = 0; f < e; f += 3) {
            var g = 2 * d[f],
                h = 2 * d[f + 1],
                i = 2 * d[f + 2];
            this._renderCanvasDrawTriangle(a, b, c, g, h, i)
        }
    }, b.Strip.prototype._renderCanvasDrawTriangle = function(a, b, c, d, e, f) {
        var g = this.texture.baseTexture.source,
            h = this.texture.width,
            i = this.texture.height,
            j = b[d],
            k = b[e],
            l = b[f],
            m = b[d + 1],
            n = b[e + 1],
            o = b[f + 1],
            p = c[d] * h,
            q = c[e] * h,
            r = c[f] * h,
            s = c[d + 1] * i,
            t = c[e + 1] * i,
            u = c[f + 1] * i;
        if (this.canvasPadding > 0) {
            var v = this.canvasPadding / this.worldTransform.a,
                w = this.canvasPadding / this.worldTransform.d,
                x = (j + k + l) / 3,
                y = (m + n + o) / 3,
                z = j - x,
                A = m - y,
                B = Math.sqrt(z * z + A * A);
            j = x + z / B * (B + v),
            m = y + A / B * (B + w),
            z = k - x,
            A = n - y,
            B = Math.sqrt(z * z + A * A),
            k = x + z / B * (B + v),
            n = y + A / B * (B + w),
            z = l - x,
            A = o - y,
            B = Math.sqrt(z * z + A * A),
            l = x + z / B * (B + v),
            o = y + A / B * (B + w)
        }
        a.save(),
        a.beginPath(),
        a.moveTo(j, m),
        a.lineTo(k, n),
        a.lineTo(l, o),
        a.closePath(),
        a.clip();
        var C = p * t + s * r + q * u - t * r - s * q - p * u,
            D = j * t + s * l + k * u - t * l - s * k - j * u,
            E = p * k + j * r + q * l - k * r - j * q - p * l,
            F = p * t * l + s * k * r + j * q * u - j * t * r - s * q * l - p * k * u,
            G = m * t + s * o + n * u - t * o - s * n - m * u,
            H = p * n + m * r + q * o - n * r - m * q - p * o,
            I = p * t * o + s * n * r + m * q * u - m * t * r - s * q * o - p * n * u;
        a.transform(D / C, G / C, E / C, H / C, F / C, I / C),
        a.drawImage(g, 0, 0),
        a.restore()
    }, b.Strip.prototype.renderStripFlat = function(a) {
        var b = this.context,
            c = a.vertices,
            d = c.length / 2;
        this.count++,
        b.beginPath();
        for (var e = 1; e < d - 2; e++) {
            var f = 2 * e,
                g = c[f],
                h = c[f + 2],
                i = c[f + 4],
                j = c[f + 1],
                k = c[f + 3],
                l = c[f + 5];
            b.moveTo(g, j),
            b.lineTo(h, k),
            b.lineTo(i, l)
        }
        b.fillStyle = "#FF0000",
        b.fill(),
        b.closePath()
    }, b.Strip.prototype.onTextureUpdate = function() {
        this.updateFrame = !0
    }, b.Strip.prototype.getBounds = function(a) {
        for (var c = a || this.worldTransform, d = c.a, e = c.b, f = c.c, g = c.d, h = c.tx, i = c.ty, j = -(1 / 0), k = -(1 / 0), l = 1 / 0, m = 1 / 0, n = this.vertices, o = 0, p = n.length; o < p; o += 2) {
            var q = n[o],
                r = n[o + 1],
                s = d * q + f * r + h,
                t = g * r + e * q + i;
            l = s < l ? s : l,
            m = t < m ? t : m,
            j = s > j ? s : j,
            k = t > k ? t : k
        }
        if (l === -(1 / 0) || k === 1 / 0)
            return b.EmptyRectangle;
        var u = this._bounds;
        return u.x = l, u.width = j - l, u.y = m, u.height = k - m, this._currentBounds = u, u
    }, b.Strip.DrawModes = {
        TRIANGLE_STRIP: 0,
        TRIANGLES: 1
    }, b.Rope = function(a, c) {
        b.Strip.call(this, a),
        this.points = c,
        this.vertices = new b.Float32Array(4 * c.length),
        this.uvs = new b.Float32Array(4 * c.length),
        this.colors = new b.Float32Array(2 * c.length),
        this.indices = new b.Uint16Array(2 * c.length),
        this.refresh()
    }, b.Rope.prototype = Object.create(b.Strip.prototype), b.Rope.prototype.constructor = b.Rope, b.Rope.prototype.refresh = function() {
        var a = this.points;
        if (!(a.length < 1)) {
            var b = this.uvs,
                c = a[0],
                d = this.indices,
                e = this.colors;
            this.count -= .2,
            b[0] = 0,
            b[1] = 0,
            b[2] = 0,
            b[3] = 1,
            e[0] = 1,
            e[1] = 1,
            d[0] = 0,
            d[1] = 1;
            for (var f, g, h, i = a.length, j = 1; j < i; j++)
                f = a[j],
                g = 4 * j,
                h = j / (i - 1),
                j % 2 ? (b[g] = h, b[g + 1] = 0, b[g + 2] = h, b[g + 3] = 1) : (b[g] = h, b[g + 1] = 0, b[g + 2] = h, b[g + 3] = 1),
                g = 2 * j,
                e[g] = 1,
                e[g + 1] = 1,
                g = 2 * j,
                d[g] = g,
                d[g + 1] = g + 1,
                c = f
        }
    }, b.Rope.prototype.updateTransform = function() {
        var a = this.points;
        if (!(a.length < 1)) {
            var c,
                d = a[0],
                e = {
                    x: 0,
                    y: 0
                };
            this.count -= .2;
            for (var f, g, h, i, j, k = this.vertices, l = a.length, m = 0; m < l; m++)
                f = a[m],
                g = 4 * m,
                c = m < a.length - 1 ? a[m + 1] : f,
                e.y = -(c.x - d.x),
                e.x = c.y - d.y,
                h = 10 * (1 - m / (l - 1)),
                h > 1 && (h = 1),
                i = Math.sqrt(e.x * e.x + e.y * e.y),
                j = this.texture.height / 2,
                e.x /= i,
                e.y /= i,
                e.x *= j,
                e.y *= j,
                k[g] = f.x + e.x,
                k[g + 1] = f.y + e.y,
                k[g + 2] = f.x - e.x,
                k[g + 3] = f.y - e.y,
                d = f;
            b.DisplayObjectContainer.prototype.updateTransform.call(this)
        }
    }, b.Rope.prototype.setTexture = function(a) {
        this.texture = a
    }, b.TilingSprite = function(a, c, d) {
        b.Sprite.call(this, a),
        this._width = c || 128,
        this._height = d || 128,
        this.tileScale = new b.Point(1, 1),
        this.tileScaleOffset = new b.Point(1, 1),
        this.tilePosition = new b.Point,
        this.renderable = !0,
        this.tint = 16777215,
        this.textureDebug = !1,
        this.blendMode = b.blendModes.NORMAL,
        this.canvasBuffer = null,
        this.tilingTexture = null,
        this.tilePattern = null,
        this.refreshTexture = !0,
        this.frameWidth = 0,
        this.frameHeight = 0
    }, b.TilingSprite.prototype = Object.create(b.Sprite.prototype), b.TilingSprite.prototype.constructor = b.TilingSprite, b.TilingSprite.prototype.setTexture = function(a) {
        this.texture !== a && (this.texture = a, this.refreshTexture = !0, this.cachedTint = 16777215)
    }, b.TilingSprite.prototype._renderWebGL = function(a) {
        if (this.visible && this.renderable && 0 !== this.alpha) {
            if (this._mask && (a.spriteBatch.stop(), a.maskManager.pushMask(this.mask, a), a.spriteBatch.start()), this._filters && (a.spriteBatch.flush(), a.filterManager.pushFilter(this._filterBlock)), this.refreshTexture) {
                if (this.generateTilingTexture(!0, a), !this.tilingTexture)
                    return;
                this.tilingTexture.needsUpdate && (a.renderer.updateTexture(this.tilingTexture.baseTexture), this.tilingTexture.needsUpdate = !1)
            }
            a.spriteBatch.renderTilingSprite(this);
            for (var b = 0; b < this.children.length; b++)
                this.children[b]._renderWebGL(a);
            a.spriteBatch.stop(),
            this._filters && a.filterManager.popFilter(),
            this._mask && a.maskManager.popMask(this._mask, a),
            a.spriteBatch.start()
        }
    }, b.TilingSprite.prototype._renderCanvas = function(a) {
        if (this.visible && this.renderable && 0 !== this.alpha) {
            var c = a.context;
            this._mask && a.maskManager.pushMask(this._mask, a),
            c.globalAlpha = this.worldAlpha;
            var d = this.worldTransform,
                e = a.resolution,
                f = d.tx * e + a.shakeX,
                g = d.ty * e + a.shakeY;
            if (c.setTransform(d.a * e, d.b * e, d.c * e, d.d * e, f, g), this.refreshTexture) {
                if (this.generateTilingTexture(!1, a), !this.tilingTexture)
                    return;
                this.tilePattern = c.createPattern(this.tilingTexture.baseTexture.source, "repeat")
            }
            var h = a.currentBlendMode;
            this.blendMode !== a.currentBlendMode && (a.currentBlendMode = this.blendMode, c.globalCompositeOperation = b.blendModesCanvas[a.currentBlendMode]);
            var i = this.tilePosition,
                j = this.tileScale;
            i.x %= this.tilingTexture.baseTexture.width,
            i.y %= this.tilingTexture.baseTexture.height,
            c.scale(j.x, j.y),
            c.translate(i.x + this.anchor.x * -this._width, i.y + this.anchor.y * -this._height),
            c.fillStyle = this.tilePattern;
            var f = -i.x,
                g = -i.y,
                k = this._width / j.x,
                l = this._height / j.y;
            a.roundPixels && (f |= 0, g |= 0, k |= 0, l |= 0),
            c.fillRect(f, g, k, l),
            c.scale(1 / j.x, 1 / j.y),
            c.translate(-i.x + this.anchor.x * this._width, -i.y + this.anchor.y * this._height),
            this._mask && a.maskManager.popMask(a);
            for (var m = 0; m < this.children.length; m++)
                this.children[m]._renderCanvas(a);
            h !== this.blendMode && (a.currentBlendMode = h, c.globalCompositeOperation = b.blendModesCanvas[h])
        }
    }, b.TilingSprite.prototype.onTextureUpdate = function() {}, b.TilingSprite.prototype.generateTilingTexture = function(a, c) {
        if (this.texture.baseTexture.hasLoaded) {
            var d = this.texture,
                e = d.frame,
                f = this._frame.sourceSizeW || this._frame.width,
                g = this._frame.sourceSizeH || this._frame.height,
                h = 0,
                i = 0;
            this._frame.trimmed && (h = this._frame.spriteSourceSizeX, i = this._frame.spriteSourceSizeY),
            a && (f = b.getNextPowerOfTwo(f), g = b.getNextPowerOfTwo(g)),
            this.canvasBuffer ? (this.canvasBuffer.resize(f, g), this.tilingTexture.baseTexture.width = f, this.tilingTexture.baseTexture.height = g, this.tilingTexture.needsUpdate = !0) : (this.canvasBuffer = new b.CanvasBuffer(f, g), this.tilingTexture = b.Texture.fromCanvas(this.canvasBuffer.canvas), this.tilingTexture.isTiling = !0, this.tilingTexture.needsUpdate = !0),
            this.textureDebug && (this.canvasBuffer.context.strokeStyle = "#00ff00", this.canvasBuffer.context.strokeRect(0, 0, f, g));
            var j = d.crop.width,
                k = d.crop.height;
            j === f && k === g || (j = f, k = g),
            this.canvasBuffer.context.drawImage(d.baseTexture.source, d.crop.x, d.crop.y, d.crop.width, d.crop.height, h, i, j, k),
            this.tileScaleOffset.x = e.width / f,
            this.tileScaleOffset.y = e.height / g,
            this.refreshTexture = !1,
            this.tilingTexture.baseTexture._powerOf2 = !0
        }
    }, b.TilingSprite.prototype.getBounds = function() {
        var a = this._width,
            b = this._height,
            c = a * (1 - this.anchor.x),
            d = a * -this.anchor.x,
            e = b * (1 - this.anchor.y),
            f = b * -this.anchor.y,
            g = this.worldTransform,
            h = g.a,
            i = g.b,
            j = g.c,
            k = g.d,
            l = g.tx,
            m = g.ty,
            n = h * d + j * f + l,
            o = k * f + i * d + m,
            p = h * c + j * f + l,
            q = k * f + i * c + m,
            r = h * c + j * e + l,
            s = k * e + i * c + m,
            t = h * d + j * e + l,
            u = k * e + i * d + m,
            v = -(1 / 0),
            w = -(1 / 0),
            x = 1 / 0,
            y = 1 / 0;
        x = n < x ? n : x,
        x = p < x ? p : x,
        x = r < x ? r : x,
        x = t < x ? t : x,
        y = o < y ? o : y,
        y = q < y ? q : y,
        y = s < y ? s : y,
        y = u < y ? u : y,
        v = n > v ? n : v,
        v = p > v ? p : v,
        v = r > v ? r : v,
        v = t > v ? t : v,
        w = o > w ? o : w,
        w = q > w ? q : w,
        w = s > w ? s : w,
        w = u > w ? u : w;
        var z = this._bounds;
        return z.x = x, z.width = v - x, z.y = y, z.height = w - y, this._currentBounds = z, z
    }, b.TilingSprite.prototype.destroy = function() {
        b.Sprite.prototype.destroy.call(this),
        this.canvasBuffer && (this.canvasBuffer.destroy(), this.canvasBuffer = null),
        this.tileScale = null,
        this.tileScaleOffset = null,
        this.tilePosition = null,
        this.tilingTexture && (this.tilingTexture.destroy(!0), this.tilingTexture = null)
    }, Object.defineProperty(b.TilingSprite.prototype, "width", {
        get: function() {
            return this._width
        },
        set: function(a) {
            this._width = a
        }
    }), Object.defineProperty(b.TilingSprite.prototype, "height", {
        get: function() {
            return this._height
        },
        set: function(a) {
            this._height = a
        }
    }), "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = b), exports.PIXI = b) : "undefined" != typeof define && define.amd ? define("PIXI", function() {
        return a.PIXI = b
    }()) : a.PIXI = b, b
}).call(this),
function() {
    function a(a, b) {
        this._scaleFactor = a,
        this._deltaMode = b,
        this.originalEvent = null
    }
    var b = this,
        c = c || {
            VERSION: "2.6.2",
            GAMES: [],
            AUTO: 0,
            CANVAS: 1,
            WEBGL: 2,
            HEADLESS: 3,
            NONE: 0,
            LEFT: 1,
            RIGHT: 2,
            UP: 3,
            DOWN: 4,
            SPRITE: 0,
            BUTTON: 1,
            IMAGE: 2,
            GRAPHICS: 3,
            TEXT: 4,
            TILESPRITE: 5,
            BITMAPTEXT: 6,
            GROUP: 7,
            RENDERTEXTURE: 8,
            TILEMAP: 9,
            TILEMAPLAYER: 10,
            EMITTER: 11,
            POLYGON: 12,
            BITMAPDATA: 13,
            CANVAS_FILTER: 14,
            WEBGL_FILTER: 15,
            ELLIPSE: 16,
            SPRITEBATCH: 17,
            RETROFONT: 18,
            POINTER: 19,
            ROPE: 20,
            CIRCLE: 21,
            RECTANGLE: 22,
            LINE: 23,
            MATRIX: 24,
            POINT: 25,
            ROUNDEDRECTANGLE: 26,
            CREATURE: 27,
            VIDEO: 28,
            PENDING_ATLAS: -1,
            HORIZONTAL: 0,
            VERTICAL: 1,
            LANDSCAPE: 0,
            PORTRAIT: 1,
            ANGLE_UP: 270,
            ANGLE_DOWN: 90,
            ANGLE_LEFT: 180,
            ANGLE_RIGHT: 0,
            ANGLE_NORTH_EAST: 315,
            ANGLE_NORTH_WEST: 225,
            ANGLE_SOUTH_EAST: 45,
            ANGLE_SOUTH_WEST: 135,
            TOP_LEFT: 0,
            TOP_CENTER: 1,
            TOP_RIGHT: 2,
            LEFT_TOP: 3,
            LEFT_CENTER: 4,
            LEFT_BOTTOM: 5,
            CENTER: 6,
            RIGHT_TOP: 7,
            RIGHT_CENTER: 8,
            RIGHT_BOTTOM: 9,
            BOTTOM_LEFT: 10,
            BOTTOM_CENTER: 11,
            BOTTOM_RIGHT: 12,
            blendModes: {
                NORMAL: 0,
                ADD: 1,
                MULTIPLY: 2,
                SCREEN: 3,
                OVERLAY: 4,
                DARKEN: 5,
                LIGHTEN: 6,
                COLOR_DODGE: 7,
                COLOR_BURN: 8,
                HARD_LIGHT: 9,
                SOFT_LIGHT: 10,
                DIFFERENCE: 11,
                EXCLUSION: 12,
                HUE: 13,
                SATURATION: 14,
                COLOR: 15,
                LUMINOSITY: 16
            },
            scaleModes: {
                DEFAULT: 0,
                LINEAR: 0,
                NEAREST: 1
            },
            PIXI: PIXI || {}
        };
    if (Math.trunc || (Math.trunc = function(a) {
        return a < 0 ? Math.ceil(a) : Math.floor(a)
    }), Function.prototype.bind || (Function.prototype.bind = function() {
        var a = Array.prototype.slice;
        return function(b) {
            function c() {
                var f = e.concat(a.call(arguments));
                d.apply(this instanceof c ? this : b, f)
            }
            var d = this,
                e = a.call(arguments, 1);
            if ("function" != typeof d)
                throw new TypeError;
            return c.prototype = function a(b) {
                if (b && (a.prototype = b), !(this instanceof a))
                    return new a
            }(d.prototype), c
        }
    }()), Array.isArray || (Array.isArray = function(a) {
        return "[object Array]" === Object.prototype.toString.call(a)
    }), Array.prototype.forEach || (Array.prototype.forEach = function(a) {
        "use strict";
        if (void 0 === this || null === this)
            throw new TypeError;
        var b = Object(this),
            c = b.length >>> 0;
        if ("function" != typeof a)
            throw new TypeError;
        for (var d = arguments.length >= 2 ? arguments[1] : void 0, e = 0; e < c; e++)
            e in b && a.call(d, b[e], e, b)
    }), "function" != typeof window.Uint32Array && "object" != typeof window.Uint32Array) {
        var d = function(a) {
            var b = new Array;
            window[a] = function(a) {
                if ("number" == typeof a) {
                    Array.call(this, a),
                    this.length = a;
                    for (var b = 0; b < this.length; b++)
                        this[b] = 0
                } else {
                    Array.call(this, a.length),
                    this.length = a.length;
                    for (var b = 0; b < this.length; b++)
                        this[b] = a[b]
                }
            },
            window[a].prototype = b,
            window[a].constructor = window[a]
        };
        d("Uint32Array"),
        d("Int16Array")
    }
    window.console || (window.console = {}, window.console.log = window.console.assert = function() {}, window.console.warn = window.console.assert = function() {}),
    c.Utils = {
        reverseString: function(a) {
            return a.split("").reverse().join("")
        },
        getProperty: function(a, b) {
            for (var c = b.split("."), d = c.pop(), e = c.length, f = 1, g = c[0]; f < e && (a = a[g]);)
                g = c[f],
                f++;
            return a ? a[d] : null
        },
        setProperty: function(a, b, c) {
            for (var d = b.split("."), e = d.pop(), f = d.length, g = 1, h = d[0]; g < f && (a = a[h]);)
                h = d[g],
                g++;
            return a && (a[e] = c), a
        },
        chanceRoll: function(a) {
            return void 0 === a && (a = 50), a > 0 && 100 * Math.random() <= a
        },
        randomChoice: function(a, b) {
            return Math.random() < .5 ? a : b
        },
        parseDimension: function(a, b) {
            var c = 0,
                d = 0;
            return "string" == typeof a ? "%" === a.substr(-1) ? (c = parseInt(a, 10) / 100, d = 0 === b ? window.innerWidth * c : window.innerHeight * c) : d = parseInt(a, 10) : d = a, d
        },
        pad: function(a, b, c, d) {
            if (void 0 === b)
                var b = 0;
            if (void 0 === c)
                var c = " ";
            if (void 0 === d)
                var d = 3;
            a = a.toString();
            var e = 0;
            if (b + 1 >= a.length)
                switch (d) {
                case 1:
                    a = new Array(b + 1 - a.length).join(c) + a;
                    break;
                case 3:
                    var f = Math.ceil((e = b - a.length) / 2),
                        g = e - f;
                    a = new Array(g + 1).join(c) + a + new Array(f + 1).join(c);
                    break;
                default:
                    a += new Array(b + 1 - a.length).join(c)
                }
            return a
        },
        isPlainObject: function(a) {
            if ("object" != typeof a || a.nodeType || a === a.window)
                return !1;
            try {
                if (a.constructor && !{}.hasOwnProperty.call(a.constructor.prototype, "isPrototypeOf"))
                    return !1
            } catch (a) {
                return !1
            }
            return !0
        },
        extend: function() {
            var a,
                b,
                d,
                e,
                f,
                g,
                h = arguments[0] || {},
                i = 1,
                j = arguments.length,
                k = !1;
            for ("boolean" == typeof h && (k = h, h = arguments[1] || {}, i = 2), j === i && (h = this, --i); i < j; i++)
                if (null != (a = arguments[i]))
                    for (b in a)
                        d = h[b],
                        e = a[b],
                        h !== e && (k && e && (c.Utils.isPlainObject(e) || (f = Array.isArray(e))) ? (f ? (f = !1, g = d && Array.isArray(d) ? d : []) : g = d && c.Utils.isPlainObject(d) ? d : {}, h[b] = c.Utils.extend(k, g, e)) : void 0 !== e && (h[b] = e));
            return h
        },
        mixinPrototype: function(a, b, c) {
            void 0 === c && (c = !1);
            for (var d = Object.keys(b), e = 0; e < d.length; e++) {
                var f = d[e],
                    g = b[f];
                !c && f in a || (!g || "function" != typeof g.get && "function" != typeof g.set ? a[f] = g : "function" == typeof g.clone ? a[f] = g.clone() : Object.defineProperty(a, f, g))
            }
        },
        mixin: function(a, b) {
            if (!a || "object" != typeof a)
                return b;
            for (var d in a) {
                var e = a[d];
                if (!e.childNodes && !e.cloneNode) {
                    var f = typeof a[d];
                    a[d] && "object" === f ? typeof b[d] === f ? b[d] = c.Utils.mixin(a[d], b[d]) : b[d] = c.Utils.mixin(a[d], new e.constructor) : b[d] = a[d]
                }
            }
            return b
        }
    },
    c.Circle = function(a, b, d) {
        a = a || 0,
        b = b || 0,
        d = d || 0,
        this.x = a,
        this.y = b,
        this._diameter = d,
        this._radius = 0,
        d > 0 && (this._radius = .5 * d),
        this.type = c.CIRCLE
    },
    c.Circle.prototype = {
        circumference: function() {
            return 2 * (Math.PI * this._radius)
        },
        random: function(a) {
            void 0 === a && (a = new c.Point);
            var b = 2 * Math.PI * Math.random(),
                d = Math.random() + Math.random(),
                e = d > 1 ? 2 - d : d,
                f = e * Math.cos(b),
                g = e * Math.sin(b);
            return a.x = this.x + f * this.radius, a.y = this.y + g * this.radius, a
        },
        getBounds: function() {
            return new c.Rectangle(this.x - this.radius, this.y - this.radius, this.diameter, this.diameter)
        },
        setTo: function(a, b, c) {
            return this.x = a, this.y = b, this._diameter = c, this._radius = .5 * c, this
        },
        copyFrom: function(a) {
            return this.setTo(a.x, a.y, a.diameter)
        },
        copyTo: function(a) {
            return a.x = this.x, a.y = this.y, a.diameter = this._diameter, a
        },
        distance: function(a, b) {
            var d = c.Math.distance(this.x, this.y, a.x, a.y);
            return b ? Math.round(d) : d
        },
        clone: function(a) {
            return void 0 === a || null === a ? a = new c.Circle(this.x, this.y, this.diameter) : a.setTo(this.x, this.y, this.diameter), a
        },
        contains: function(a, b) {
            return c.Circle.contains(this, a, b)
        },
        circumferencePoint: function(a, b, d) {
            return c.Circle.circumferencePoint(this, a, b, d)
        },
        offset: function(a, b) {
            return this.x += a, this.y += b, this
        },
        offsetPoint: function(a) {
            return this.offset(a.x, a.y)
        },
        toString: function() {
            return "[{Phaser.Circle (x=" + this.x + " y=" + this.y + " diameter=" + this.diameter + " radius=" + this.radius + ")}]"
        }
    },
    c.Circle.prototype.constructor = c.Circle,
    Object.defineProperty(c.Circle.prototype, "diameter", {
        get: function() {
            return this._diameter
        },
        set: function(a) {
            a > 0 && (this._diameter = a, this._radius = .5 * a)
        }
    }),
    Object.defineProperty(c.Circle.prototype, "radius", {
        get: function() {
            return this._radius
        },
        set: function(a) {
            a > 0 && (this._radius = a, this._diameter = 2 * a)
        }
    }),
    Object.defineProperty(c.Circle.prototype, "left", {
        get: function() {
            return this.x - this._radius
        },
        set: function(a) {
            a > this.x ? (this._radius = 0, this._diameter = 0) : this.radius = this.x - a
        }
    }),
    Object.defineProperty(c.Circle.prototype, "right", {
        get: function() {
            return this.x + this._radius
        },
        set: function(a) {
            a < this.x ? (this._radius = 0, this._diameter = 0) : this.radius = a - this.x
        }
    }),
    Object.defineProperty(c.Circle.prototype, "top", {
        get: function() {
            return this.y - this._radius
        },
        set: function(a) {
            a > this.y ? (this._radius = 0, this._diameter = 0) : this.radius = this.y - a
        }
    }),
    Object.defineProperty(c.Circle.prototype, "bottom", {
        get: function() {
            return this.y + this._radius
        },
        set: function(a) {
            a < this.y ? (this._radius = 0, this._diameter = 0) : this.radius = a - this.y
        }
    }),
    Object.defineProperty(c.Circle.prototype, "area", {
        get: function() {
            return this._radius > 0 ? Math.PI * this._radius * this._radius : 0
        }
    }),
    Object.defineProperty(c.Circle.prototype, "empty", {
        get: function() {
            return 0 === this._diameter
        },
        set: function(a) {
            a === !0 && this.setTo(0, 0, 0)
        }
    }),
    c.Circle.contains = function(a, b, c) {
        if (a.radius > 0 && b >= a.left && b <= a.right && c >= a.top && c <= a.bottom) {
            var d = (a.x - b) * (a.x - b),
                e = (a.y - c) * (a.y - c);
            return d + e <= a.radius * a.radius
        }
        return !1
    },
    c.Circle.equals = function(a, b) {
        return a.x === b.x && a.y === b.y && a.diameter === b.diameter
    },
    c.Circle.intersects = function(a, b) {
        return c.Math.distance(a.x, a.y, b.x, b.y) <= a.radius + b.radius
    },
    c.Circle.circumferencePoint = function(a, b, d, e) {
        return void 0 === d && (d = !1), void 0 === e && (e = new c.Point), d === !0 && (b = c.Math.degToRad(b)), e.x = a.x + a.radius * Math.cos(b), e.y = a.y + a.radius * Math.sin(b), e
    },
    c.Circle.intersectsRectangle = function(a, b) {
        var c = Math.abs(a.x - b.x - b.halfWidth),
            d = b.halfWidth + a.radius;
        if (c > d)
            return !1;
        var e = Math.abs(a.y - b.y - b.halfHeight),
            f = b.halfHeight + a.radius;
        if (e > f)
            return !1;
        if (c <= b.halfWidth || e <= b.halfHeight)
            return !0;
        var g = c - b.halfWidth,
            h = e - b.halfHeight,
            i = g * g,
            j = h * h,
            k = a.radius * a.radius;
        return i + j <= k
    },
    PIXI.Circle = c.Circle,
    c.Ellipse = function(a, b, d, e) {
        a = a || 0,
        b = b || 0,
        d = d || 0,
        e = e || 0,
        this.x = a,
        this.y = b,
        this.width = d,
        this.height = e,
        this.type = c.ELLIPSE
    },
    c.Ellipse.prototype = {
        setTo: function(a, b, c, d) {
            return this.x = a, this.y = b, this.width = c, this.height = d, this
        },
        getBounds: function() {
            return new c.Rectangle(this.x - this.width, this.y - this.height, this.width, this.height)
        },
        copyFrom: function(a) {
            return this.setTo(a.x, a.y, a.width, a.height)
        },
        copyTo: function(a) {
            return a.x = this.x, a.y = this.y, a.width = this.width, a.height = this.height, a
        },
        clone: function(a) {
            return void 0 === a || null === a ? a = new c.Ellipse(this.x, this.y, this.width, this.height) : a.setTo(this.x, this.y, this.width, this.height), a
        },
        contains: function(a, b) {
            return c.Ellipse.contains(this, a, b)
        },
        random: function(a) {
            void 0 === a && (a = new c.Point);
            var b = Math.random() * Math.PI * 2,
                d = Math.random();
            return a.x = Math.sqrt(d) * Math.cos(b), a.y = Math.sqrt(d) * Math.sin(b), a.x = this.x + a.x * this.width / 2, a.y = this.y + a.y * this.height / 2, a
        },
        toString: function() {
            return "[{Phaser.Ellipse (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + ")}]"
        }
    },
    c.Ellipse.prototype.constructor = c.Ellipse,
    Object.defineProperty(c.Ellipse.prototype, "left", {
        get: function() {
            return this.x
        },
        set: function(a) {
            this.x = a
        }
    }),
    Object.defineProperty(c.Ellipse.prototype, "right", {
        get: function() {
            return this.x + this.width
        },
        set: function(a) {
            a < this.x ? this.width = 0 : this.width = a - this.x
        }
    }),
    Object.defineProperty(c.Ellipse.prototype, "top", {
        get: function() {
            return this.y
        },
        set: function(a) {
            this.y = a
        }
    }),
    Object.defineProperty(c.Ellipse.prototype, "bottom", {
        get: function() {
            return this.y + this.height
        },
        set: function(a) {
            a < this.y ? this.height = 0 : this.height = a - this.y
        }
    }),
    Object.defineProperty(c.Ellipse.prototype, "empty", {
        get: function() {
            return 0 === this.width || 0 === this.height
        },
        set: function(a) {
            a === !0 && this.setTo(0, 0, 0, 0)
        }
    }),
    c.Ellipse.contains = function(a, b, c) {
        if (a.width <= 0 || a.height <= 0)
            return !1;
        var d = (b - a.x) / a.width - .5,
            e = (c - a.y) / a.height - .5;
        return d *= d, e *= e, d + e < .25
    },
    PIXI.Ellipse = c.Ellipse,
    c.Line = function(a, b, d, e) {
        a = a || 0,
        b = b || 0,
        d = d || 0,
        e = e || 0,
        this.start = new c.Point(a, b),
        this.end = new c.Point(d, e),
        this.type = c.LINE
    },
    c.Line.prototype = {
        setTo: function(a, b, c, d) {
            return this.start.setTo(a, b), this.end.setTo(c, d), this
        },
        fromSprite: function(a, b, c) {
            return void 0 === c && (c = !1), c ? this.setTo(a.center.x, a.center.y, b.center.x, b.center.y) : this.setTo(a.x, a.y, b.x, b.y)
        },
        fromAngle: function(a, b, c, d) {
            return this.start.setTo(a, b), this.end.setTo(a + Math.cos(c) * d, b + Math.sin(c) * d), this
        },
        rotate: function(a, b) {
            var c = (this.start.x + this.end.x) / 2,
                d = (this.start.y + this.end.y) / 2;
            return this.start.rotate(c, d, a, b), this.end.rotate(c, d, a, b), this
        },
        rotateAround: function(a, b, c, d) {
            return this.start.rotate(a, b, c, d), this.end.rotate(a, b, c, d), this
        },
        intersects: function(a, b, d) {
            return c.Line.intersectsPoints(this.start, this.end, a.start, a.end, b, d)
        },
        reflect: function(a) {
            return c.Line.reflect(this, a)
        },
        midPoint: function(a) {
            return void 0 === a && (a = new c.Point), a.x = (this.start.x + this.end.x) / 2, a.y = (this.start.y + this.end.y) / 2, a
        },
        centerOn: function(a, b) {
            var c = (this.start.x + this.end.x) / 2,
                d = (this.start.y + this.end.y) / 2,
                e = a - c,
                f = b - d;
            this.start.add(e, f),
            this.end.add(e, f)
        },
        pointOnLine: function(a, b) {
            return (a - this.start.x) * (this.end.y - this.start.y) === (this.end.x - this.start.x) * (b - this.start.y)
        },
        pointOnSegment: function(a, b) {
            var c = Math.min(this.start.x, this.end.x),
                d = Math.max(this.start.x, this.end.x),
                e = Math.min(this.start.y, this.end.y),
                f = Math.max(this.start.y, this.end.y);
            return this.pointOnLine(a, b) && a >= c && a <= d && b >= e && b <= f
        },
        random: function(a) {
            void 0 === a && (a = new c.Point);
            var b = Math.random();
            return a.x = this.start.x + b * (this.end.x - this.start.x), a.y = this.start.y + b * (this.end.y - this.start.y), a
        },
        coordinatesOnLine: function(a, b) {
            void 0 === a && (a = 1),
            void 0 === b && (b = []);
            var c = Math.round(this.start.x),
                d = Math.round(this.start.y),
                e = Math.round(this.end.x),
                f = Math.round(this.end.y),
                g = Math.abs(e - c),
                h = Math.abs(f - d),
                i = c < e ? 1 : -1,
                j = d < f ? 1 : -1,
                k = g - h;
            b.push([c, d]);
            for (var l = 1; c !== e || d !== f;) {
                var m = k << 1;
                m > -h && (k -= h, c += i),
                m < g && (k += g, d += j),
                l % a === 0 && b.push([c, d]),
                l++
            }
            return b
        },
        clone: function(a) {
            return void 0 === a || null === a ? a = new c.Line(this.start.x, this.start.y, this.end.x, this.end.y) : a.setTo(this.start.x, this.start.y, this.end.x, this.end.y), a
        }
    },
    Object.defineProperty(c.Line.prototype, "length", {
        get: function() {
            return Math.sqrt((this.end.x - this.start.x) * (this.end.x - this.start.x) + (this.end.y - this.start.y) * (this.end.y - this.start.y))
        }
    }),
    Object.defineProperty(c.Line.prototype, "angle", {
        get: function() {
            return Math.atan2(this.end.y - this.start.y, this.end.x - this.start.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "slope", {
        get: function() {
            return (this.end.y - this.start.y) / (this.end.x - this.start.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "perpSlope", {
        get: function() {
            return -((this.end.x - this.start.x) / (this.end.y - this.start.y))
        }
    }),
    Object.defineProperty(c.Line.prototype, "x", {
        get: function() {
            return Math.min(this.start.x, this.end.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "y", {
        get: function() {
            return Math.min(this.start.y, this.end.y)
        }
    }),
    Object.defineProperty(c.Line.prototype, "left", {
        get: function() {
            return Math.min(this.start.x, this.end.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "right", {
        get: function() {
            return Math.max(this.start.x, this.end.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "top", {
        get: function() {
            return Math.min(this.start.y, this.end.y)
        }
    }),
    Object.defineProperty(c.Line.prototype, "bottom", {
        get: function() {
            return Math.max(this.start.y, this.end.y)
        }
    }),
    Object.defineProperty(c.Line.prototype, "width", {
        get: function() {
            return Math.abs(this.start.x - this.end.x)
        }
    }),
    Object.defineProperty(c.Line.prototype, "height", {
        get: function() {
            return Math.abs(this.start.y - this.end.y)
        }
    }),
    Object.defineProperty(c.Line.prototype, "normalX", {
        get: function() {
            return Math.cos(this.angle - 1.5707963267948966)
        }
    }),
    Object.defineProperty(c.Line.prototype, "normalY", {
        get: function() {
            return Math.sin(this.angle - 1.5707963267948966)
        }
    }),
    Object.defineProperty(c.Line.prototype, "normalAngle", {
        get: function() {
            return c.Math.wrap(this.angle - 1.5707963267948966, -Math.PI, Math.PI)
        }
    }),
    c.Line.intersectsPoints = function(a, b, d, e, f, g) {
        void 0 === f && (f = !0),
        void 0 === g && (g = new c.Point);
        var h = b.y - a.y,
            i = e.y - d.y,
            j = a.x - b.x,
            k = d.x - e.x,
            l = b.x * a.y - a.x * b.y,
            m = e.x * d.y - d.x * e.y,
            n = h * k - i * j;
        if (0 === n)
            return null;
        if (g.x = (j * m - k * l) / n, g.y = (i * l - h * m) / n, f) {
            var o = (e.y - d.y) * (b.x - a.x) - (e.x - d.x) * (b.y - a.y),
                p = ((e.x - d.x) * (a.y - d.y) - (e.y - d.y) * (a.x - d.x)) / o,
                q = ((b.x - a.x) * (a.y - d.y) - (b.y - a.y) * (a.x - d.x)) / o;
            return p >= 0 && p <= 1 && q >= 0 && q <= 1 ? g : null
        }
        return g
    },
    c.Line.intersects = function(a, b, d, e) {
        return c.Line.intersectsPoints(a.start, a.end, b.start, b.end, d, e)
    },
    c.Line.intersectsRectangle = function(a, b) {
        if (!c.Rectangle.intersects(a, b))
            return !1;
        var d = a.start.x,
            e = a.start.y,
            f = a.end.x,
            g = a.end.y,
            h = b.x,
            i = b.y,
            j = b.right,
            k = b.bottom,
            l = 0;
        if (d >= h && d <= j && e >= i && e <= k || f >= h && f <= j && g >= i && g <= k)
            return !0;
        if (d < h && f >= h) {
            if (l = e + (g - e) * (h - d) / (f - d), l > i && l <= k)
                return !0
        } else if (d > j && f <= j && (l = e + (g - e) * (j - d) / (f - d), l >= i && l <= k))
            return !0;
        if (e < i && g >= i) {
            if (l = d + (f - d) * (i - e) / (g - e), l >= h && l <= j)
                return !0
        } else if (e > k && g <= k && (l = d + (f - d) * (k - e) / (g - e), l >= h && l <= j))
            return !0;
        return !1
    },
    c.Line.reflect = function(a, b) {
        return 2 * b.normalAngle - 3.141592653589793 - a.angle
    },
    c.Matrix = function(a, b, d, e, f, g) {
        void 0 !== a && null !== a || (a = 1),
        void 0 !== b && null !== b || (b = 0),
        void 0 !== d && null !== d || (d = 0),
        void 0 !== e && null !== e || (e = 1),
        void 0 !== f && null !== f || (f = 0),
        void 0 !== g && null !== g || (g = 0),
        this.a = a,
        this.b = b,
        this.c = d,
        this.d = e,
        this.tx = f,
        this.ty = g,
        this.type = c.MATRIX
    },
    c.Matrix.prototype = {
        fromArray: function(a) {
            return this.setTo(a[0], a[1], a[3], a[4], a[2], a[5])
        },
        setTo: function(a, b, c, d, e, f) {
            return this.a = a, this.b = b, this.c = c, this.d = d, this.tx = e, this.ty = f, this
        },
        clone: function(a) {
            return void 0 === a || null === a ? a = new c.Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty) : (a.a = this.a, a.b = this.b, a.c = this.c, a.d = this.d, a.tx = this.tx, a.ty = this.ty), a
        },
        copyTo: function(a) {
            return a.copyFrom(this), a
        },
        copyFrom: function(a) {
            return this.a = a.a, this.b = a.b, this.c = a.c, this.d = a.d, this.tx = a.tx, this.ty = a.ty, this
        },
        toArray: function(a, b) {
            return void 0 === b && (b = new PIXI.Float32Array(9)), a ? (b[0] = this.a, b[1] = this.b, b[2] = 0, b[3] = this.c, b[4] = this.d, b[5] = 0, b[6] = this.tx, b[7] = this.ty, b[8] = 1) : (b[0] = this.a, b[1] = this.c, b[2] = this.tx, b[3] = this.b, b[4] = this.d, b[5] = this.ty, b[6] = 0, b[7] = 0, b[8] = 1), b
        },
        apply: function(a, b) {
            return void 0 === b && (b = new c.Point), b.x = this.a * a.x + this.c * a.y + this.tx, b.y = this.b * a.x + this.d * a.y + this.ty, b
        },
        applyInverse: function(a, b) {
            void 0 === b && (b = new c.Point);
            var d = 1 / (this.a * this.d + this.c * -this.b),
                e = a.x,
                f = a.y;
            return b.x = this.d * d * e + -this.c * d * f + (this.ty * this.c - this.tx * this.d) * d, b.y = this.a * d * f + -this.b * d * e + (-this.ty * this.a + this.tx * this.b) * d, b
        },
        translate: function(a, b) {
            return this.tx += a, this.ty += b, this
        },
        scale: function(a, b) {
            return this.a *= a, this.d *= b, this.c *= a, this.b *= b, this.tx *= a, this.ty *= b, this
        },
        rotate: function(a) {
            var b = Math.cos(a),
                c = Math.sin(a),
                d = this.a,
                e = this.c,
                f = this.tx;
            return this.a = d * b - this.b * c, this.b = d * c + this.b * b, this.c = e * b - this.d * c, this.d = e * c + this.d * b, this.tx = f * b - this.ty * c, this.ty = f * c + this.ty * b, this
        },
        append: function(a) {
            var b = this.a,
                c = this.b,
                d = this.c,
                e = this.d;
            return this.a = a.a * b + a.b * d, this.b = a.a * c + a.b * e, this.c = a.c * b + a.d * d, this.d = a.c * c + a.d * e, this.tx = a.tx * b + a.ty * d + this.tx, this.ty = a.tx * c + a.ty * e + this.ty, this
        },
        identity: function() {
            return this.setTo(1, 0, 0, 1, 0, 0)
        }
    },
    c.identityMatrix = new c.Matrix,
    PIXI.Matrix = c.Matrix,
    PIXI.identityMatrix = c.identityMatrix,
    c.Point = function(a, b) {
        a = a || 0,
        b = b || 0,
        this.x = a,
        this.y = b,
        this.type = c.POINT
    },
    c.Point.prototype = {
        copyFrom: function(a) {
            return this.setTo(a.x, a.y)
        },
        invert: function() {
            return this.setTo(this.y, this.x)
        },
        setTo: function(a, b) {
            return this.x = a || 0, this.y = b || (0 !== b ? this.x : 0), this
        },
        set: function(a, b) {
            return this.x = a || 0, this.y = b || (0 !== b ? this.x : 0), this
        },
        add: function(a, b) {
            return this.x += a, this.y += b, this
        },
        subtract: function(a, b) {
            return this.x -= a, this.y -= b, this
        },
        multiply: function(a, b) {
            return this.x *= a, this.y *= b, this
        },
        divide: function(a, b) {
            return this.x /= a, this.y /= b, this
        },
        clampX: function(a, b) {
            return this.x = c.Math.clamp(this.x, a, b), this
        },
        clampY: function(a, b) {
            return this.y = c.Math.clamp(this.y, a, b), this
        },
        clamp: function(a, b) {
            return this.x = c.Math.clamp(this.x, a, b), this.y = c.Math.clamp(this.y, a, b), this
        },
        clone: function(a) {
            return void 0 === a || null === a ? a = new c.Point(this.x, this.y) : a.setTo(this.x, this.y), a
        },
        copyTo: function(a) {
            return a.x = this.x, a.y = this.y, a
        },
        distance: function(a, b) {
            return c.Point.distance(this, a, b)
        },
        equals: function(a) {
            return a.x === this.x && a.y === this.y
        },
        angle: function(a, b) {
            return void 0 === b && (b = !1), b ? c.Math.radToDeg(Math.atan2(a.y - this.y, a.x - this.x)) : Math.atan2(a.y - this.y, a.x - this.x)
        },
        rotate: function(a, b, d, e, f) {
            return c.Point.rotate(this, a, b, d, e, f)
        },
        getMagnitude: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        },
        getMagnitudeSq: function() {
            return this.x * this.x + this.y * this.y
        },
        setMagnitude: function(a) {
            return this.normalize().multiply(a, a)
        },
        normalize: function() {
            if (!this.isZero()) {
                var a = this.getMagnitude();
                this.x /= a,
                this.y /= a
            }
            return this
        },
        isZero: function() {
            return 0 === this.x && 0 === this.y
        },
        dot: function(a) {
            return this.x * a.x + this.y * a.y
        },
        cross: function(a) {
            return this.x * a.y - this.y * a.x
        },
        perp: function() {
            return this.setTo(-this.y, this.x)
        },
        rperp: function() {
            return this.setTo(this.y, -this.x)
        },
        normalRightHand: function() {
            return this.setTo(this.y * -1, this.x)
        },
        floor: function() {
            return this.setTo(Math.floor(this.x), Math.floor(this.y))
        },
        ceil: function() {
            return this.setTo(Math.ceil(this.x), Math.ceil(this.y))
        },
        toString: function() {
            return "[{Point (x=" + this.x + " y=" + this.y + ")}]"
        }
    },
    c.Point.prototype.constructor = c.Point,
    c.Point.add = function(a, b, d) {
        return void 0 === d && (d = new c.Point), d.x = a.x + b.x, d.y = a.y + b.y, d
    },
    c.Point.subtract = function(a, b, d) {
        return void 0 === d && (d = new c.Point), d.x = a.x - b.x, d.y = a.y - b.y, d
    },
    c.Point.multiply = function(a, b, d) {
        return void 0 === d && (d = new c.Point), d.x = a.x * b.x, d.y = a.y * b.y, d
    },
    c.Point.divide = function(a, b, d) {
        return void 0 === d && (d = new c.Point), d.x = a.x / b.x, d.y = a.y / b.y, d
    },
    c.Point.equals = function(a, b) {
        return a.x === b.x && a.y === b.y
    },
    c.Point.angle = function(a, b) {
        return Math.atan2(a.y - b.y, a.x - b.x)
    },
    c.Point.negative = function(a, b) {
        return void 0 === b && (b = new c.Point), b.setTo(-a.x, -a.y)
    },
    c.Point.multiplyAdd = function(a, b, d, e) {
        return void 0 === e && (e = new c.Point), e.setTo(a.x + b.x * d, a.y + b.y * d)
    },
    c.Point.interpolate = function(a, b, d, e) {
        return void 0 === e && (e = new c.Point), e.setTo(a.x + (b.x - a.x) * d, a.y + (b.y - a.y) * d)
    },
    c.Point.perp = function(a, b) {
        return void 0 === b && (b = new c.Point), b.setTo(-a.y, a.x)
    },
    c.Point.rperp = function(a, b) {
        return void 0 === b && (b = new c.Point), b.setTo(a.y, -a.x)
    },
    c.Point.distance = function(a, b, d) {
        var e = c.Math.distance(a.x, a.y, b.x, b.y);
        return d ? Math.round(e) : e
    },
    c.Point.project = function(a, b, d) {
        void 0 === d && (d = new c.Point);
        var e = a.dot(b) / b.getMagnitudeSq();
        return 0 !== e && d.setTo(e * b.x, e * b.y), d
    },
    c.Point.projectUnit = function(a, b, d) {
        void 0 === d && (d = new c.Point);
        var e = a.dot(b);
        return 0 !== e && d.setTo(e * b.x, e * b.y), d
    },
    c.Point.normalRightHand = function(a, b) {
        return void 0 === b && (b = new c.Point), b.setTo(a.y * -1, a.x)
    },
    c.Point.normalize = function(a, b) {
        void 0 === b && (b = new c.Point);
        var d = a.getMagnitude();
        return 0 !== d && b.setTo(a.x / d, a.y / d), b
    },
    c.Point.rotate = function(a, b, d, e, f, g) {
        if (f && (e = c.Math.degToRad(e)), void 0 === g) {
            a.subtract(b, d);
            var h = Math.sin(e),
                i = Math.cos(e),
                j = i * a.x - h * a.y,
                k = h * a.x + i * a.y;
            a.x = j + b,
            a.y = k + d
        } else {
            var l = e + Math.atan2(a.y - d, a.x - b);
            a.x = b + g * Math.cos(l),
            a.y = d + g * Math.sin(l)
        }
        return a
    },
    c.Point.centroid = function(a, b) {
        if (void 0 === b && (b = new c.Point), "[object Array]" !== Object.prototype.toString.call(a))
            throw new Error("Phaser.Point. Parameter 'points' must be an array");
        var d = a.length;
        if (d < 1)
            throw new Error("Phaser.Point. Parameter 'points' array must not be empty");
        if (1 === d)
            return b.copyFrom(a[0]), b;
        for (var e = 0; e < d; e++)
            c.Point.add(b, a[e], b);
        return b.divide(d, d), b
    },
    c.Point.parse = function(a, b, d) {
        b = b || "x",
        d = d || "y";
        var e = new c.Point;
        return a[b] && (e.x = parseInt(a[b], 10)), a[d] && (e.y = parseInt(a[d], 10)), e
    },
    PIXI.Point = c.Point,
    c.Polygon = function() {
        this.area = 0,
        this._points = [],
        arguments.length > 0 && this.setTo.apply(this, arguments),
        this.closed = !0,
        this.flattened = !1,
        this.type = c.POLYGON
    },
    c.Polygon.prototype = {
        toNumberArray: function(a) {
            void 0 === a && (a = []);
            for (var b = 0; b < this._points.length; b++)
                "number" == typeof this._points[b] ? (a.push(this._points[b]), a.push(this._points[b + 1]), b++) : (a.push(this._points[b].x), a.push(this._points[b].y));
            return a
        },
        flatten: function() {
            return this._points = this.toNumberArray(), this.flattened = !0, this
        },
        clone: function(a) {
            var b = this._points.slice();
            return void 0 === a || null === a ? a = new c.Polygon(b) : a.setTo(b), a
        },
        contains: function(a, b) {
            var c = !1;
            if (this.flattened)
                for (var d = -2, e = this._points.length - 2; (d += 2) < this._points.length; e = d) {
                    var f = this._points[d],
                        g = this._points[d + 1],
                        h = this._points[e],
                        i = this._points[e + 1];
                    (g <= b && b < i || i <= b && b < g) && a < (h - f) * (b - g) / (i - g) + f && (c = !c)
                }
            else
                for (var d = -1, e = this._points.length - 1; ++d < this._points.length; e = d) {
                    var f = this._points[d].x,
                        g = this._points[d].y,
                        h = this._points[e].x,
                        i = this._points[e].y;
                    (g <= b && b < i || i <= b && b < g) && a < (h - f) * (b - g) / (i - g) + f && (c = !c)
                }
            return c
        },
        setTo: function(a) {
            if (this.area = 0, this._points = [], arguments.length > 0) {
                Array.isArray(a) || (a = Array.prototype.slice.call(arguments));
                for (var b = Number.MAX_VALUE, c = 0, d = a.length; c < d; c++) {
                    if ("number" == typeof a[c]) {
                        var e = new PIXI.Point(a[c], a[c + 1]);
                        c++
                    } else if (Array.isArray(a[c]))
                        var e = new PIXI.Point(a[c][0], a[c][1]);
                    else
                        var e = new PIXI.Point(a[c].x, a[c].y);
                    this._points.push(e),
                    e.y < b && (b = e.y)
                }
                this.calculateArea(b)
            }
            return this
        },
        calculateArea: function(a) {
            for (var b, c, d, e, f = 0, g = this._points.length; f < g; f++)
                b = this._points[f],
                c = f === g - 1 ? this._points[0] : this._points[f + 1],
                d = (b.y - a + (c.y - a)) / 2,
                e = b.x - c.x,
                this.area += d * e;
            return this.area
        }
    },
    c.Polygon.prototype.constructor = c.Polygon,
    Object.defineProperty(c.Polygon.prototype, "points", {
        get: function() {
            return this._points
        },
        set: function(a) {
            null != a ? this.setTo(a) : this.setTo()
        }
    }),
    PIXI.Polygon = c.Polygon,
    c.Rectangle = function(a, b, d, e) {
        a = a || 0,
        b = b || 0,
        d = d || 0,
        e = e || 0,
        this.x = a,
        this.y = b,
        this.width = d,
        this.height = e,
        this.type = c.RECTANGLE
    },
    c.Rectangle.prototype = {
        offset: function(a, b) {
            return this.x += a, this.y += b, this
        },
        offsetPoint: function(a) {
            return this.offset(a.x, a.y)
        },
        setTo: function(a, b, c, d) {
            return this.x = a, this.y = b, this.width = c, this.height = d, this
        },
        scale: function(a, b) {
            return void 0 === b && (b = a), this.width *= a, this.height *= b, this
        },
        centerOn: function(a, b) {
            return this.centerX = a, this.centerY = b, this
        },
        floor: function() {
            this.x = Math.floor(this.x),
            this.y = Math.floor(this.y)
        },
        floorAll: function() {
            this.x = Math.floor(this.x),
            this.y = Math.floor(this.y),
            this.width = Math.floor(this.width),
            this.height = Math.floor(this.height)
        },
        ceil: function() {
            this.x = Math.ceil(this.x),
            this.y = Math.ceil(this.y)
        },
        ceilAll: function() {
            this.x = Math.ceil(this.x),
            this.y = Math.ceil(this.y),
            this.width = Math.ceil(this.width),
            this.height = Math.ceil(this.height)
        },
        copyFrom: function(a) {
            return this.setTo(a.x, a.y, a.width, a.height)
        },
        copyTo: function(a) {
            return a.x = this.x, a.y = this.y, a.width = this.width, a.height = this.height, a
        },
        inflate: function(a, b) {
            return c.Rectangle.inflate(this, a, b)
        },
        size: function(a) {
            return c.Rectangle.size(this, a)
        },
        resize: function(a, b) {
            return this.width = a, this.height = b, this
        },
        clone: function(a) {
            return c.Rectangle.clone(this, a)
        },
        contains: function(a, b) {
            return c.Rectangle.contains(this, a, b)
        },
        containsRect: function(a) {
            return c.Rectangle.containsRect(a, this)
        },
        equals: function(a) {
            return c.Rectangle.equals(this, a)
        },
        intersection: function(a, b) {
            return c.Rectangle.intersection(this, a, b)
        },
        intersects: function(a) {
            return c.Rectangle.intersects(this, a)
        },
        intersectsRaw: function(a, b, d, e, f) {
            return c.Rectangle.intersectsRaw(this, a, b, d, e, f)
        },
        union: function(a, b) {
            return c.Rectangle.union(this, a, b)
        },
        random: function(a) {
            return void 0 === a && (a = new c.Point), a.x = this.randomX, a.y = this.randomY, a
        },
        getPoint: function(a, b) {
            switch (void 0 === b && (b = new c.Point), a) {
            default:
            case c.TOP_LEFT:
                return b.set(this.x, this.y);
            case c.TOP_CENTER:
                return b.set(this.centerX, this.y);
            case c.TOP_RIGHT:
                return b.set(this.right, this.y);
            case c.LEFT_CENTER:
                return b.set(this.x, this.centerY);
            case c.CENTER:
                return b.set(this.centerX, this.centerY);
            case c.RIGHT_CENTER:
                return b.set(this.right, this.centerY);
            case c.BOTTOM_LEFT:
                return b.set(this.x, this.bottom);
            case c.BOTTOM_CENTER:
                return b.set(this.centerX, this.bottom);
            case c.BOTTOM_RIGHT:
                return b.set(this.right, this.bottom)
            }
        },
        toString: function() {
            return "[{Rectangle (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + " empty=" + this.empty + ")}]"
        }
    },
    Object.defineProperty(c.Rectangle.prototype, "halfWidth", {
        get: function() {
            return Math.round(this.width / 2)
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "halfHeight", {
        get: function() {
            return Math.round(this.height / 2)
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "bottom", {
        get: function() {
            return this.y + this.height
        },
        set: function(a) {
            a <= this.y ? this.height = 0 : this.height = a - this.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "bottomLeft", {
        get: function() {
            return new c.Point(this.x, this.bottom)
        },
        set: function(a) {
            this.x = a.x,
            this.bottom = a.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "bottomRight", {
        get: function() {
            return new c.Point(this.right, this.bottom)
        },
        set: function(a) {
            this.right = a.x,
            this.bottom = a.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "left", {
        get: function() {
            return this.x
        },
        set: function(a) {
            a >= this.right ? this.width = 0 : this.width = this.right - a,
            this.x = a
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "right", {
        get: function() {
            return this.x + this.width
        },
        set: function(a) {
            a <= this.x ? this.width = 0 : this.width = a - this.x
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "volume", {
        get: function() {
            return this.width * this.height
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "perimeter", {
        get: function() {
            return 2 * this.width + 2 * this.height
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "centerX", {
        get: function() {
            return this.x + this.halfWidth
        },
        set: function(a) {
            this.x = a - this.halfWidth
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "centerY", {
        get: function() {
            return this.y + this.halfHeight
        },
        set: function(a) {
            this.y = a - this.halfHeight
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "randomX", {
        get: function() {
            return this.x + Math.random() * this.width
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "randomY", {
        get: function() {
            return this.y + Math.random() * this.height
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "top", {
        get: function() {
            return this.y
        },
        set: function(a) {
            a >= this.bottom ? (this.height = 0, this.y = a) : this.height = this.bottom - a
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "topLeft", {
        get: function() {
            return new c.Point(this.x, this.y)
        },
        set: function(a) {
            this.x = a.x,
            this.y = a.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "topRight", {
        get: function() {
            return new c.Point(this.x + this.width, this.y)
        },
        set: function(a) {
            this.right = a.x,
            this.y = a.y
        }
    }),
    Object.defineProperty(c.Rectangle.prototype, "empty", {
        get: function() {
            return !this.width || !this.height
        },
        set: function(a) {
            a === !0 && this.setTo(0, 0, 0, 0)
        }
    }),
    c.Rectangle.prototype.constructor = c.Rectangle,
    c.Rectangle.inflate = function(a, b, c) {
        return a.x -= b, a.width += 2 * b, a.y -= c, a.height += 2 * c, a
    },
    c.Rectangle.inflatePoint = function(a, b) {
        return c.Rectangle.inflate(a, b.x, b.y)
    },
    c.Rectangle.size = function(a, b) {
        return void 0 === b || null === b ? b = new c.Point(a.width, a.height) : b.setTo(a.width, a.height), b
    },
    c.Rectangle.clone = function(a, b) {
        return void 0 === b || null === b ? b = new c.Rectangle(a.x, a.y, a.width, a.height) : b.setTo(a.x, a.y, a.width, a.height), b
    },
    c.Rectangle.contains = function(a, b, c) {
        return !(a.width <= 0 || a.height <= 0) && (b >= a.x && b < a.right && c >= a.y && c < a.bottom)
    },
    c.Rectangle.containsRaw = function(a, b, c, d, e, f) {
        return e >= a && e < a + c && f >= b && f < b + d
    },
    c.Rectangle.containsPoint = function(a, b) {
        return c.Rectangle.contains(a, b.x, b.y)
    },
    c.Rectangle.containsRect = function(a, b) {
        return !(a.volume > b.volume) && (a.x >= b.x && a.y >= b.y && a.right < b.right && a.bottom < b.bottom)
    },
    c.Rectangle.equals = function(a, b) {
        return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height
    },
    c.Rectangle.sameDimensions = function(a, b) {
        return a.width === b.width && a.height === b.height
    },
    c.Rectangle.intersection = function(a, b, d) {
        return void 0 === d && (d = new c.Rectangle), c.Rectangle.intersects(a, b) && (d.x = Math.max(a.x, b.x), d.y = Math.max(a.y, b.y), d.width = Math.min(a.right, b.right) - d.x, d.height = Math.min(a.bottom, b.bottom) - d.y), d
    },
    c.Rectangle.intersects = function(a, b) {
        return !(a.width <= 0 || a.height <= 0 || b.width <= 0 || b.height <= 0) && !(a.right < b.x || a.bottom < b.y || a.x > b.right || a.y > b.bottom)
    },
    c.Rectangle.intersectsRaw = function(a, b, c, d, e, f) {
        return void 0 === f && (f = 0), !(b > a.right + f || c < a.left - f || d > a.bottom + f || e < a.top - f)
    },
    c.Rectangle.union = function(a, b, d) {
        return void 0 === d && (d = new c.Rectangle), d.setTo(Math.min(a.x, b.x), Math.min(a.y, b.y), Math.max(a.right, b.right) - Math.min(a.left, b.left), Math.max(a.bottom, b.bottom) - Math.min(a.top, b.top))
    },
    c.Rectangle.aabb = function(a, b) {
        void 0 === b && (b = new c.Rectangle);
        var d = Number.NEGATIVE_INFINITY,
            e = Number.POSITIVE_INFINITY,
            f = Number.NEGATIVE_INFINITY,
            g = Number.POSITIVE_INFINITY;
        return a.forEach(function(a) {
            a.x > d && (d = a.x),
            a.x < e && (e = a.x),
            a.y > f && (f = a.y),
            a.y < g && (g = a.y)
        }), b.setTo(e, g, d - e, f - g), b
    },
    PIXI.Rectangle = c.Rectangle,
    PIXI.EmptyRectangle = new c.Rectangle(0, 0, 0, 0),
    c.RoundedRectangle = function(a, b, d, e, f) {
        void 0 === a && (a = 0),
        void 0 === b && (b = 0),
        void 0 === d && (d = 0),
        void 0 === e && (e = 0),
        void 0 === f && (f = 20),
        this.x = a,
        this.y = b,
        this.width = d,
        this.height = e,
        this.radius = f || 20,
        this.type = c.ROUNDEDRECTANGLE
    },
    c.RoundedRectangle.prototype = {
        clone: function() {
            return new c.RoundedRectangle(this.x, this.y, this.width, this.height, this.radius)
        },
        contains: function(a, b) {
            if (this.width <= 0 || this.height <= 0)
                return !1;
            var c = this.x;
            if (a >= c && a <= c + this.width) {
                var d = this.y;
                if (b >= d && b <= d + this.height)
                    return !0
            }
            return !1
        }
    },
    c.RoundedRectangle.prototype.constructor = c.RoundedRectangle,
    PIXI.RoundedRectangle = c.RoundedRectangle,
    c.Camera = function(a, b, d, e, f, g) {
        this.game = a,
        this.world = a.world,
        this.id = 0,
        this.view = new c.Rectangle(d, e, f, g),
        this.bounds = new c.Rectangle(d, e, f, g),
        this.deadzone = null,
        this.visible = !0,
        this.roundPx = !0,
        this.atLimit = {
            x: !1,
            y: !1
        },
        this.target = null,
        this.displayObject = null,
        this.scale = null,
        this.totalInView = 0,
        this.lerp = new c.Point(1, 1),
        this.onShakeComplete = new c.Signal,
        this.onFlashComplete = new c.Signal,
        this.onFadeComplete = new c.Signal,
        this.fx = null,
        this._targetPosition = new c.Point,
        this._edge = 0,
        this._position = new c.Point,
        this._shake = {
            intensity: 0,
            duration: 0,
            horizontal: !1,
            vertical: !1,
            shakeBounds: !0,
            x: 0,
            y: 0
        },
        this._fxDuration = 0,
        this._fxType = 0
    },
    c.Camera.FOLLOW_LOCKON = 0,
    c.Camera.FOLLOW_PLATFORMER = 1,
    c.Camera.FOLLOW_TOPDOWN = 2,
    c.Camera.FOLLOW_TOPDOWN_TIGHT = 3,
    c.Camera.SHAKE_BOTH = 4,
    c.Camera.SHAKE_HORIZONTAL = 5,
    c.Camera.SHAKE_VERTICAL = 6,
    c.Camera.ENABLE_FX = !0,
    c.Camera.prototype = {
        boot: function() {
            this.displayObject = this.game.world,
            this.scale = this.game.world.scale,
            this.game.camera = this,
            c.Graphics && c.Camera.ENABLE_FX && (this.fx = new c.Graphics(this.game), this.game.stage.addChild(this.fx))
        },
        preUpdate: function() {
            this.totalInView = 0
        },
        follow: function(a, b, d, e) {
            void 0 === b && (b = c.Camera.FOLLOW_LOCKON),
            void 0 === d && (d = 1),
            void 0 === e && (e = 1),
            this.target = a,
            this.lerp.set(d, e);
            var f;
            switch (b) {
            case c.Camera.FOLLOW_PLATFORMER:
                var g = this.width / 8,
                    h = this.height / 3;
                this.deadzone = new c.Rectangle((this.width - g) / 2, (this.height - h) / 2 - .25 * h, g, h);
                break;
            case c.Camera.FOLLOW_TOPDOWN:
                f = Math.max(this.width, this.height) / 4,
                this.deadzone = new c.Rectangle((this.width - f) / 2, (this.height - f) / 2, f, f);
                break;
            case c.Camera.FOLLOW_TOPDOWN_TIGHT:
                f = Math.max(this.width, this.height) / 8,
                this.deadzone = new c.Rectangle((this.width - f) / 2, (this.height - f) / 2, f, f);
                break;
            case c.Camera.FOLLOW_LOCKON:
                this.deadzone = null;
                break;
            default:
                this.deadzone = null
            }
        },
        unfollow: function() {
            this.target = null
        },
        focusOn: function(a) {
            this.setPosition(Math.round(a.x - this.view.halfWidth), Math.round(a.y - this.view.halfHeight))
        },
        focusOnXY: function(a, b) {
            this.setPosition(Math.round(a - this.view.halfWidth), Math.round(b - this.view.halfHeight))
        },
        shake: function(a, b, d, e, f) {
            return void 0 === a && (a = .05), void 0 === b && (b = 500), void 0 === d && (d = !0), void 0 === e && (e = c.Camera.SHAKE_BOTH), void 0 === f && (f = !0), !(!d && this._shake.duration > 0) && (this._shake.intensity = a, this._shake.duration = b, this._shake.shakeBounds = f, this._shake.x = 0, this._shake.y = 0, this._shake.horizontal = e === c.Camera.SHAKE_BOTH || e === c.Camera.SHAKE_HORIZONTAL, this._shake.vertical = e === c.Camera.SHAKE_BOTH || e === c.Camera.SHAKE_VERTICAL, !0)
        },
        flash: function(a, b, c) {
            return void 0 === a && (a = 16777215), void 0 === b && (b = 500), void 0 === c && (c = !1), !(!this.fx || !c && this._fxDuration > 0) && (this.fx.clear(), this.fx.beginFill(a), this.fx.drawRect(0, 0, this.width, this.height), this.fx.endFill(), this.fx.alpha = 1, this._fxDuration = b, this._fxType = 0, !0)
        },
        fade: function(a, b, c) {
            return void 0 === a && (a = 0), void 0 === b && (b = 500), void 0 === c && (c = !1), !(!this.fx || !c && this._fxDuration > 0) && (this.fx.clear(), this.fx.beginFill(a), this.fx.drawRect(0, 0, this.width, this.height), this.fx.endFill(), this.fx.alpha = 0, this._fxDuration = b, this._fxType = 1, !0)
        },
        update: function() {
            this._fxDuration > 0 && this.updateFX(),
            this._shake.duration > 0 && this.updateShake(),
            this.bounds && this.checkBounds(),
            this.roundPx && (this.view.floor(), this._shake.x = Math.floor(this._shake.x), this._shake.y = Math.floor(this._shake.y)),
            this.displayObject.position.x = -this.view.x,
            this.displayObject.position.y = -this.view.y
        },
        updateFX: function() {
            0 === this._fxType ? (this.fx.alpha -= this.game.time.elapsedMS / this._fxDuration, this.fx.alpha <= 0 && (this._fxDuration = 0, this.fx.alpha = 0, this.onFlashComplete.dispatch())) : (this.fx.alpha += this.game.time.elapsedMS / this._fxDuration, this.fx.alpha >= 1 && (this._fxDuration = 0, this.fx.alpha = 1, this.onFadeComplete.dispatch()))
        },
        updateShake: function() {
            this._shake.duration -= this.game.time.elapsedMS,
            this._shake.duration <= 0 ? (this.onShakeComplete.dispatch(), this._shake.x = 0, this._shake.y = 0) : (this._shake.horizontal && (this._shake.x = this.game.rnd.frac() * this._shake.intensity * this.view.width * 2 - this._shake.intensity * this.view.width), this._shake.vertical && (this._shake.y = this.game.rnd.frac() * this._shake.intensity * this.view.height * 2 - this._shake.intensity * this.view.height))
        },
        updateTarget: function() {
            this._targetPosition.x = this.view.x + this.target.worldPosition.x,
            this._targetPosition.y = this.view.y + this.target.worldPosition.y,
            this.deadzone ? (this._edge = this._targetPosition.x - this.view.x, this._edge < this.deadzone.left ? this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.deadzone.left, this.lerp.x) : this._edge > this.deadzone.right && (this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.deadzone.right, this.lerp.x)), this._edge = this._targetPosition.y - this.view.y, this._edge < this.deadzone.top ? this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.deadzone.top, this.lerp.y) : this._edge > this.deadzone.bottom && (this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.deadzone.bottom, this.lerp.y))) : (this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.view.halfWidth, this.lerp.x), this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.view.halfHeight, this.lerp.y)),
            this.bounds && this.checkBounds(),
            this.roundPx && this.view.floor(),
            this.displayObject.position.x = -this.view.x,
            this.displayObject.position.y = -this.view.y
        },
        setBoundsToWorld: function() {
            this.bounds && this.bounds.copyFrom(this.game.world.bounds)
        },
        checkBounds: function() {
            this.atLimit.x = !1,
            this.atLimit.y = !1;
            var a = this.view.x + this._shake.x,
                b = this.view.right + this._shake.x,
                c = this.view.y + this._shake.y,
                d = this.view.bottom + this._shake.y;
            a <= this.bounds.x * this.scale.x && (this.atLimit.x = !0, this.view.x = this.bounds.x * this.scale.x, this._shake.shakeBounds || (this._shake.x = 0)),
            b >= this.bounds.right * this.scale.x && (this.atLimit.x = !0, this.view.x = this.bounds.right * this.scale.x - this.width, this._shake.shakeBounds || (this._shake.x = 0)),
            c <= this.bounds.top * this.scale.y && (this.atLimit.y = !0, this.view.y = this.bounds.top * this.scale.y, this._shake.shakeBounds || (this._shake.y = 0)),
            d >= this.bounds.bottom * this.scale.y && (this.atLimit.y = !0, this.view.y = this.bounds.bottom * this.scale.y - this.height, this._shake.shakeBounds || (this._shake.y = 0))
        },
        setPosition: function(a, b) {
            this.view.x = a,
            this.view.y = b,
            this.bounds && this.checkBounds()
        },
        setSize: function(a, b) {
            this.view.width = a,
            this.view.height = b
        },
        reset: function() {
            this.target = null,
            this.view.x = 0,
            this.view.y = 0,
            this._shake.duration = 0,
            this.resetFX()
        },
        resetFX: function() {
            this.fx.clear(),
            this.fx.alpha = 0,
            this._fxDuration = 0
        }
    },
    c.Camera.prototype.constructor = c.Camera,
    Object.defineProperty(c.Camera.prototype, "x", {
        get: function() {
            return this.view.x
        },
        set: function(a) {
            this.view.x = a,
            this.bounds && this.checkBounds()
        }
    }),
    Object.defineProperty(c.Camera.prototype, "y", {
        get: function() {
            return this.view.y
        },
        set: function(a) {
            this.view.y = a,
            this.bounds && this.checkBounds()
        }
    }),
    Object.defineProperty(c.Camera.prototype, "position", {
        get: function() {
            return this._position.set(this.view.x, this.view.y), this._position
        },
        set: function(a) {
            "undefined" != typeof a.x && (this.view.x = a.x),
            "undefined" != typeof a.y && (this.view.y = a.y),
            this.bounds && this.checkBounds()
        }
    }),
    Object.defineProperty(c.Camera.prototype, "width", {
        get: function() {
            return this.view.width
        },
        set: function(a) {
            this.view.width = a
        }
    }),
    Object.defineProperty(c.Camera.prototype, "height", {
        get: function() {
            return this.view.height
        },
        set: function(a) {
            this.view.height = a
        }
    }),
    Object.defineProperty(c.Camera.prototype, "shakeIntensity", {
        get: function() {
            return this._shake.intensity
        },
        set: function(a) {
            this._shake.intensity = a
        }
    }),
    c.State = function() {
        this.game = null,
        this.key = "",
        this.add = null,
        this.make = null,
        this.camera = null,
        this.cache = null,
        this.input = null,
        this.load = null,
        this.math = null,
        this.sound = null,
        this.scale = null,
        this.stage = null,
        this.state = null,
        this.time = null,
        this.tweens = null,
        this.world = null,
        this.particles = null,
        this.physics = null,
        this.rnd = null
    },
    c.State.prototype = {
        init: function() {},
        preload: function() {},
        loadUpdate: function() {},
        loadRender: function() {},
        create: function() {},
        update: function() {},
        preRender: function() {},
        render: function() {},
        resize: function() {},
        paused: function() {},
        resumed: function() {},
        pauseUpdate: function() {},
        shutdown: function() {}
    },
    c.State.prototype.constructor = c.State,
    c.StateManager = function(a, b) {
        this.game = a,
        this.states = {},
        this._pendingState = null,
        "undefined" != typeof b && null !== b && (this._pendingState = b),
        this._clearWorld = !1,
        this._clearCache = !1,
        this._created = !1,
        this._args = [],
        this.current = "",
        this.onStateChange = new c.Signal,
        this.onInitCallback = null,
        this.onPreloadCallback = null,
        this.onCreateCallback = null,
        this.onUpdateCallback = null,
        this.onRenderCallback = null,
        this.onResizeCallback = null,
        this.onPreRenderCallback = null,
        this.onLoadUpdateCallback = null,
        this.onLoadRenderCallback = null,
        this.onPausedCallback = null,
        this.onResumedCallback = null,
        this.onPauseUpdateCallback = null,
        this.onShutDownCallback = null
    },
    c.StateManager.prototype = {
        boot: function() {
            this.game.onPause.add(this.pause, this),
            this.game.onResume.add(this.resume, this),
            null !== this._pendingState && "string" != typeof this._pendingState && this.add("default", this._pendingState, !0)
        },
        add: function(a, b, d) {
            void 0 === d && (d = !1);
            var e;
            return b instanceof c.State ? e = b : "object" == typeof b ? (e = b, e.game = this.game) : "function" == typeof b && (e = new b(this.game)), this.states[a] = e, d && (this.game.isBooted ? this.start(a) : this._pendingState = a), e
        },
        remove: function(a) {
            this.current === a && (this.callbackContext = null, this.onInitCallback = null, this.onShutDownCallback = null, this.onPreloadCallback = null, this.onLoadRenderCallback = null, this.onLoadUpdateCallback = null, this.onCreateCallback = null, this.onUpdateCallback = null, this.onPreRenderCallback = null, this.onRenderCallback = null, this.onResizeCallback = null, this.onPausedCallback = null, this.onResumedCallback = null, this.onPauseUpdateCallback = null),
            delete this.states[a]
        },
        start: function(a, b, c) {
            void 0 === b && (b = !0),
            void 0 === c && (c = !1),
            this.checkState(a) && (this._pendingState = a, this._clearWorld = b, this._clearCache = c, arguments.length > 3 && (this._args = Array.prototype.splice.call(arguments, 3)))
        },
        restart: function(a, b) {
            void 0 === a && (a = !0),
            void 0 === b && (b = !1),
            this._pendingState = this.current,
            this._clearWorld = a,
            this._clearCache = b,
            arguments.length > 2 && (this._args = Array.prototype.slice.call(arguments, 2))
        },
        dummy: function() {},
        preUpdate: function() {
            if (this._pendingState && this.game.isBooted) {
                var a = this.current;
                if (this.clearCurrentState(), this.setCurrentState(this._pendingState), this.onStateChange.dispatch(this.current, a), this.current !== this._pendingState)
                    return;
                this._pendingState = null,
                this.onPreloadCallback ? (this.game.load.reset(!0), this.onPreloadCallback.call(this.callbackContext, this.game), 0 === this.game.load.totalQueuedFiles() && 0 === this.game.load.totalQueuedPacks() ? this.loadComplete() : this.game.load.start()) : this.loadComplete()
            }
        },
        clearCurrentState: function() {
            this.current && (this.onShutDownCallback && this.onShutDownCallback.call(this.callbackContext, this.game), this.game.tweens.removeAll(), this.game.camera.reset(), this.game.input.reset(!0), this.game.physics.clear(), this.game.time.removeAll(), this.game.scale.reset(this._clearWorld), this.game.debug && this.game.debug.reset(), this._clearWorld && (this.game.world.shutdown(), this._clearCache && this.game.cache.destroy()))
        },
        checkState: function(a) {
            return this.states[a] ? !!(this.states[a].preload || this.states[a].create || this.states[a].update || this.states[a].render) || (console.warn("Invalid Phaser State object given. Must contain at least a one of the required functions: preload, create, update or render"), !1) : (console.warn("Phaser.StateManager - No state found with the key: " + a), !1)
        },
        link: function(a) {
            this.states[a].game = this.game,
            this.states[a].add = this.game.add,
            this.states[a].make = this.game.make,
            this.states[a].camera = this.game.camera,
            this.states[a].cache = this.game.cache,
            this.states[a].input = this.game.input,
            this.states[a].load = this.game.load,
            this.states[a].math = this.game.math,
            this.states[a].sound = this.game.sound,
            this.states[a].scale = this.game.scale,
            this.states[a].state = this,
            this.states[a].stage = this.game.stage,
            this.states[a].time = this.game.time,
            this.states[a].tweens = this.game.tweens,
            this.states[a].world = this.game.world,
            this.states[a].particles = this.game.particles,
            this.states[a].rnd = this.game.rnd,
            this.states[a].physics = this.game.physics,
            this.states[a].key = a
        },
        unlink: function(a) {
            this.states[a] && (this.states[a].game = null, this.states[a].add = null, this.states[a].make = null, this.states[a].camera = null, this.states[a].cache = null, this.states[a].input = null, this.states[a].load = null, this.states[a].math = null, this.states[a].sound = null, this.states[a].scale = null, this.states[a].state = null, this.states[a].stage = null, this.states[a].time = null, this.states[a].tweens = null, this.states[a].world = null, this.states[a].particles = null, this.states[a].rnd = null, this.states[a].physics = null)
        },
        setCurrentState: function(a) {
            this.callbackContext = this.states[a],
            this.link(a),
            this.onInitCallback = this.states[a].init || this.dummy,
            this.onPreloadCallback = this.states[a].preload || null,
            this.onLoadRenderCallback = this.states[a].loadRender || null,
            this.onLoadUpdateCallback = this.states[a].loadUpdate || null,
            this.onCreateCallback = this.states[a].create || null,
            this.onUpdateCallback = this.states[a].update || null,
            this.onPreRenderCallback = this.states[a].preRender || null,
            this.onRenderCallback = this.states[a].render || null,
            this.onResizeCallback = this.states[a].resize || null,
            this.onPausedCallback = this.states[a].paused || null,
            this.onResumedCallback = this.states[a].resumed || null,
            this.onPauseUpdateCallback = this.states[a].pauseUpdate || null,
            this.onShutDownCallback = this.states[a].shutdown || this.dummy,
            "" !== this.current && this.game.physics.reset(),
            this.current = a,
            this._created = !1,
            this.onInitCallback.apply(this.callbackContext, this._args),
            a === this._pendingState && (this._args = []),
            this.game._kickstart = !0
        },
        getCurrentState: function() {
            return this.states[this.current]
        },
        loadComplete: function() {
            this._created === !1 && this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game),
            this._created === !1 && this.onCreateCallback ? (this._created = !0, this.onCreateCallback.call(this.callbackContext, this.game)) : this._created = !0
        },
        pause: function() {
            this._created && this.onPausedCallback && this.onPausedCallback.call(this.callbackContext, this.game)
        },
        resume: function() {
            this._created && this.onResumedCallback && this.onResumedCallback.call(this.callbackContext, this.game)
        },
        update: function() {
            this._created ? this.onUpdateCallback && this.onUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game)
        },
        pauseUpdate: function() {
            this._created ? this.onPauseUpdateCallback && this.onPauseUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game)
        },
        preRender: function(a) {
            this._created && this.onPreRenderCallback && this.onPreRenderCallback.call(this.callbackContext, this.game, a)
        },
        resize: function(a, b) {
            this.onResizeCallback && this.onResizeCallback.call(this.callbackContext, a, b)
        },
        render: function() {
            this._created ? this.onRenderCallback && (this.game.renderType === c.CANVAS ? (this.game.context.save(), this.game.context.setTransform(1, 0, 0, 1, 0, 0), this.onRenderCallback.call(this.callbackContext, this.game), this.game.context.restore()) : this.onRenderCallback.call(this.callbackContext, this.game)) : this.onLoadRenderCallback && this.onLoadRenderCallback.call(this.callbackContext, this.game)
        },
        destroy: function() {
            this._clearWorld = !0,
            this._clearCache = !0,
            this.clearCurrentState(),
            this.callbackContext = null,
            this.onInitCallback = null,
            this.onShutDownCallback = null,
            this.onPreloadCallback = null,
            this.onLoadRenderCallback = null,
            this.onLoadUpdateCallback = null,
            this.onCreateCallback = null,
            this.onUpdateCallback = null,
            this.onRenderCallback = null,
            this.onPausedCallback = null,
            this.onResumedCallback = null,
            this.onPauseUpdateCallback = null,
            this.game = null,
            this.states = {},
            this._pendingState = null,
            this.current = ""
        }
    },
    c.StateManager.prototype.constructor = c.StateManager,
    Object.defineProperty(c.StateManager.prototype, "created", {
        get: function() {
            return this._created
        }
    }),
    c.Signal = function() {},
    c.Signal.prototype = {
        _bindings: null,
        _prevParams: null,
        memorize: !1,
        _shouldPropagate: !0,
        active: !0,
        _boundDispatch: !1,
        validateListener: function(a, b) {
            if ("function" != typeof a)
                throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}", b))
        },
        _registerListener: function(a, b, d, e, f) {
            var g,
                h = this._indexOfListener(a, d);
            if (h !== -1) {
                if (g = this._bindings[h], g.isOnce() !== b)
                    throw new Error("You cannot add" + (b ? "" : "Once") + "() then add" + (b ? "Once" : "") + "() the same listener without removing the relationship first.")
            } else
                g = new c.SignalBinding(this, a, b, d, e, f),
                this._addBinding(g);
            return this.memorize && this._prevParams && g.execute(this._prevParams), g
        },
        _addBinding: function(a) {
            this._bindings || (this._bindings = []);
            var b = this._bindings.length;
            do b--;
            while (this._bindings[b] && a._priority <= this._bindings[b]._priority);
            this._bindings.splice(b + 1, 0, a)
        },
        _indexOfListener: function(a, b) {
            if (!this._bindings)
                return -1;
            void 0 === b && (b = null);
            for (var c, d = this._bindings.length; d--;)
                if (c = this._bindings[d], c._listener === a && c.context === b)
                    return d;
            return -1
        },
        has: function(a, b) {
            return this._indexOfListener(a, b) !== -1
        },
        add: function(a, b, c) {
            this.validateListener(a, "add");
            var d = [];
            if (arguments.length > 3)
                for (var e = 3; e < arguments.length; e++)
                    d.push(arguments[e]);
            return this._registerListener(a, !1, b, c, d)
        },
        addOnce: function(a, b, c) {
            this.validateListener(a, "addOnce");
            var d = [];
            if (arguments.length > 3)
                for (var e = 3; e < arguments.length; e++)
                    d.push(arguments[e]);
            return this._registerListener(a, !0, b, c, d)
        },
        remove: function(a, b) {
            this.validateListener(a, "remove");
            var c = this._indexOfListener(a, b);
            return c !== -1 && (this._bindings[c]._destroy(), this._bindings.splice(c, 1)), a
        },
        removeAll: function(a) {
            if (void 0 === a && (a = null), this._bindings) {
                for (var b = this._bindings.length; b--;)
                    a ? this._bindings[b].context === a && (this._bindings[b]._destroy(), this._bindings.splice(b, 1)) : this._bindings[b]._destroy();
                a || (this._bindings.length = 0)
            }
        },
        getNumListeners: function() {
            return this._bindings ? this._bindings.length : 0
        },
        halt: function() {
            this._shouldPropagate = !1
        },
        dispatch: function() {
            if (this.active && this._bindings) {
                var a,
                    b = Array.prototype.slice.call(arguments),
                    c = this._bindings.length;
                if (this.memorize && (this._prevParams = b), c) {
                    a = this._bindings.slice(),
                    this._shouldPropagate = !0;
                    do c--;
                    while (a[c] && this._shouldPropagate && a[c].execute(b) !== !1)
                }
            }
        },
        forget: function() {
            this._prevParams && (this._prevParams = null)
        },
        dispose: function() {
            this.removeAll(),
            this._bindings = null,
            this._prevParams && (this._prevParams = null)
        },
        toString: function() {
            return "[Phaser.Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
        }
    },
    Object.defineProperty(c.Signal.prototype, "boundDispatch", {
        get: function() {
            var a = this;
            return this._boundDispatch || (this._boundDispatch = function() {
                    return a.dispatch.apply(a, arguments)
                })
        }
    }),
    c.Signal.prototype.constructor = c.Signal,
    c.SignalBinding = function(a, b, c, d, e, f) {
        this._listener = b,
        c && (this._isOnce = !0),
        null != d && (this.context = d),
        this._signal = a,
        e && (this._priority = e),
        f && f.length && (this._args = f)
    },
    c.SignalBinding.prototype = {
        context: null,
        _isOnce: !1,
        _priority: 0,
        _args: null,
        callCount: 0,
        active: !0,
        params: null,
        execute: function(a) {
            var b,
                c;
            return this.active && this._listener && (c = this.params ? this.params.concat(a) : a, this._args && (c = c.concat(this._args)), b = this._listener.apply(this.context, c), this.callCount++, this._isOnce && this.detach()), b
        },
        detach: function() {
            return this.isBound() ? this._signal.remove(this._listener, this.context) : null
        },
        isBound: function() {
            return !!this._signal && !!this._listener
        },
        isOnce: function() {
            return this._isOnce
        },
        getListener: function() {
            return this._listener
        },
        getSignal: function() {
            return this._signal
        },
        _destroy: function() {
            delete this._signal,
            delete this._listener,
            delete this.context
        },
        toString: function() {
            return "[Phaser.SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]"
        }
    },
    c.SignalBinding.prototype.constructor = c.SignalBinding,
    c.Filter = function(a, b, d) {
        this.game = a,
        this.type = c.WEBGL_FILTER,
        this.passes = [this],
        this.shaders = [],
        this.dirty = !0,
        this.padding = 0,
        this.prevPoint = new c.Point;
        var e = new Date;
        if (this.uniforms = {
            resolution: {
                type: "2f",
                value: {
                    x: 256,
                    y: 256
                }
            },
            time: {
                type: "1f",
                value: 0
            },
            mouse: {
                type: "2f",
                value: {
                    x: 0,
                    y: 0
                }
            },
            date: {
                type: "4fv",
                value: [e.getFullYear(), e.getMonth(), e.getDate(), 60 * e.getHours() * 60 + 60 * e.getMinutes() + e.getSeconds()]
            },
            sampleRate: {
                type: "1f",
                value: 44100
            },
            iChannel0: {
                type: "sampler2D",
                value: null,
                textureData: {
                    repeat: !0
                }
            },
            iChannel1: {
                type: "sampler2D",
                value: null,
                textureData: {
                    repeat: !0
                }
            },
            iChannel2: {
                type: "sampler2D",
                value: null,
                textureData: {
                    repeat: !0
                }
            },
            iChannel3: {
                type: "sampler2D",
                value: null,
                textureData: {
                    repeat: !0
                }
            }
        }, b)
            for (var f in b)
                this.uniforms[f] = b[f];
        this.fragmentSrc = d || ""
    },
    c.Filter.prototype = {
        init: function() {},
        setResolution: function(a, b) {
            this.uniforms.resolution.value.x = a,
            this.uniforms.resolution.value.y = b
        },
        update: function(a) {
            if ("undefined" != typeof a) {
                var b = a.x / this.game.width,
                    c = 1 - a.y / this.game.height;
                b === this.prevPoint.x && c === this.prevPoint.y || (this.uniforms.mouse.value.x = b.toFixed(2), this.uniforms.mouse.value.y = c.toFixed(2), this.prevPoint.set(b, c))
            }
            this.uniforms.time.value = this.game.time.totalElapsedSeconds()
        },
        addToWorld: function(a, b, c, d, e, f) {
            void 0 === e && (e = 0),
            void 0 === f && (f = 0),
            void 0 !== c && null !== c ? this.width = c : c = this.width,
            void 0 !== d && null !== d ? this.height = d : d = this.height;
            var g = this.game.add.image(a, b, "__default");
            return g.width = c, g.height = d, g.anchor.set(e, f), g.filters = [this], g
        },
        destroy: function() {
            this.game = null
        }
    },
    c.Filter.prototype.constructor = c.Filter,
    Object.defineProperty(c.Filter.prototype, "width", {
        get: function() {
            return this.uniforms.resolution.value.x
        },
        set: function(a) {
            this.uniforms.resolution.value.x = a
        }
    }),
    Object.defineProperty(c.Filter.prototype, "height", {
        get: function() {
            return this.uniforms.resolution.value.y
        },
        set: function(a) {
            this.uniforms.resolution.value.y = a
        }
    }),
    c.Plugin = function(a, b) {
        void 0 === b && (b = null),
        this.game = a,
        this.parent = b,
        this.active = !1,
        this.visible = !1,
        this.hasPreUpdate = !1,
        this.hasUpdate = !1,
        this.hasPostUpdate = !1,
        this.hasRender = !1,
        this.hasPostRender = !1
    },
    c.Plugin.prototype = {
        preUpdate: function() {},
        update: function() {},
        render: function() {},
        postRender: function() {},
        destroy: function() {
            this.game = null,
            this.parent = null,
            this.active = !1,
            this.visible = !1
        }
    },
    c.Plugin.prototype.constructor = c.Plugin,
    c.PluginManager = function(a) {
        this.game = a,
        this.plugins = [],
        this._len = 0,
        this._i = 0
    },
    c.PluginManager.prototype = {
        add: function(a) {
            var b = Array.prototype.slice.call(arguments, 1),
                c = !1;
            return "function" == typeof a ? a = new a(this.game, this) : (a.game = this.game, a.parent = this), "function" == typeof a.preUpdate && (a.hasPreUpdate = !0, c = !0), "function" == typeof a.update && (a.hasUpdate = !0, c = !0), "function" == typeof a.postUpdate && (a.hasPostUpdate = !0, c = !0), "function" == typeof a.render && (a.hasRender = !0, c = !0), "function" == typeof a.postRender && (a.hasPostRender = !0, c = !0), c ? ((a.hasPreUpdate || a.hasUpdate || a.hasPostUpdate) && (a.active = !0), (a.hasRender || a.hasPostRender) && (a.visible = !0), this._len = this.plugins.push(a), "function" == typeof a.init && a.init.apply(a, b), a) : null
        },
        remove: function(a, b) {
            for (void 0 === b && (b = !0), this._i = this._len; this._i--;)
                if (this.plugins[this._i] === a)
                    return b && a.destroy(), this.plugins.splice(this._i, 1), void this._len--
        },
        removeAll: function() {
            for (this._i = this._len; this._i--;)
                this.plugins[this._i].destroy();
            this.plugins.length = 0,
            this._len = 0
        },
        preUpdate: function() {
            for (this._i = this._len; this._i--;)
                this.plugins[this._i].active && this.plugins[this._i].hasPreUpdate && this.plugins[this._i].preUpdate()
        },
        update: function() {
            for (this._i = this._len; this._i--;)
                this.plugins[this._i].active && this.plugins[this._i].hasUpdate && this.plugins[this._i].update()
        },
        postUpdate: function() {
            for (this._i = this._len; this._i--;)
                this.plugins[this._i].active && this.plugins[this._i].hasPostUpdate && this.plugins[this._i].postUpdate()
        },
        render: function() {
            for (this._i = this._len; this._i--;)
                this.plugins[this._i].visible && this.plugins[this._i].hasRender && this.plugins[this._i].render()
        },
        postRender: function() {
            for (this._i = this._len; this._i--;)
                this.plugins[this._i].visible && this.plugins[this._i].hasPostRender && this.plugins[this._i].postRender()
        },
        destroy: function() {
            this.removeAll(),
            this.game = null
        }
    },
    c.PluginManager.prototype.constructor = c.PluginManager,
    c.Stage = function(a) {
        this.game = a,
        PIXI.DisplayObjectContainer.call(this),
        this.name = "_stage_root",
        this.disableVisibilityChange = !1,
        this.exists = !0,
        this.worldTransform = new PIXI.Matrix,
        this.stage = this,
        this.currentRenderOrderID = 0,
        this._hiddenVar = "hidden",
        this._onChange = null,
        this._bgColor = {
            r: 0,
            g: 0,
            b: 0,
            a: 0,
            color: 0,
            rgba: "#000000"
        },
        this.game.transparent || (this._bgColor.a = 1),
        a.config && this.parseConfig(a.config)
    },
    c.Stage.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
    c.Stage.prototype.constructor = c.Stage,
    c.Stage.prototype.parseConfig = function(a) {
        a.disableVisibilityChange && (this.disableVisibilityChange = a.disableVisibilityChange),
        a.backgroundColor && this.setBackgroundColor(a.backgroundColor)
    },
    c.Stage.prototype.boot = function() {
        c.DOM.getOffset(this.game.canvas, this.offset),
        c.Canvas.setUserSelect(this.game.canvas, "none"),
        c.Canvas.setTouchAction(this.game.canvas, "none"),
        this.checkVisibility()
    },
    c.Stage.prototype.preUpdate = function() {
        this.currentRenderOrderID = 0;
        for (var a = 0; a < this.children.length; a++)
            this.children[a].preUpdate()
    },
    c.Stage.prototype.update = function() {
        for (var a = this.children.length; a--;)
            this.children[a].update()
    },
    c.Stage.prototype.postUpdate = function() {
        this.game.camera.update(),
        this.game.camera.target && (this.game.camera.target.postUpdate(), this.updateTransform(), this.game.camera.updateTarget());
        for (var a = 0; a < this.children.length; a++)
            this.children[a].postUpdate();
        this.updateTransform()
    },
    c.Stage.prototype.updateTransform = function() {
        this.worldAlpha = 1;
        for (var a = 0; a < this.children.length; a++)
            this.children[a].updateTransform()
    },
    c.Stage.prototype.checkVisibility = function() {
        void 0 !== document.hidden ? this._hiddenVar = "visibilitychange" : void 0 !== document.webkitHidden ? this._hiddenVar = "webkitvisibilitychange" : void 0 !== document.mozHidden ? this._hiddenVar = "mozvisibilitychange" : void 0 !== document.msHidden ? this._hiddenVar = "msvisibilitychange" : this._hiddenVar = null;
        var a = this;
        this._onChange = function(b) {
            return a.visibilityChange(b)
        },
        this._hiddenVar && document.addEventListener(this._hiddenVar, this._onChange, !1),
        window.onblur = this._onChange,
        window.onfocus = this._onChange,
        window.onpagehide = this._onChange,
        window.onpageshow = this._onChange,
        this.game.device.cocoonJSApp && (CocoonJS.App.onSuspended.addEventListener(function() {
            c.Stage.prototype.visibilityChange.call(a, {
                type: "pause"
            })
        }), CocoonJS.App.onActivated.addEventListener(function() {
            c.Stage.prototype.visibilityChange.call(a, {
                type: "resume"
            })
        }))
    },
    c.Stage.prototype.visibilityChange = function(a) {
        return "pagehide" === a.type || "blur" === a.type || "pageshow" === a.type || "focus" === a.type ? void ("pagehide" === a.type || "blur" === a.type ? this.game.focusLoss(a) : "pageshow" !== a.type && "focus" !== a.type || this.game.focusGain(a)) : void (this.disableVisibilityChange || (document.hidden || document.mozHidden || document.msHidden || document.webkitHidden || "pause" === a.type ? this.game.gamePaused(a) : this.game.gameResumed(a)))
    },
    c.Stage.prototype.setBackgroundColor = function(a) {
        this.game.transparent || (c.Color.valueToColor(a, this._bgColor), c.Color.updateColor(this._bgColor), this._bgColor.r /= 255, this._bgColor.g /= 255, this._bgColor.b /= 255, this._bgColor.a = 1)
    },
    c.Stage.prototype.destroy = function() {
        this._hiddenVar && document.removeEventListener(this._hiddenVar, this._onChange, !1),
        window.onpagehide = null,
        window.onpageshow = null,
        window.onblur = null,
        window.onfocus = null
    },
    Object.defineProperty(c.Stage.prototype, "backgroundColor", {
        get: function() {
            return this._bgColor.color
        },
        set: function(a) {
            this.setBackgroundColor(a)
        }
    }),
    Object.defineProperty(c.Stage.prototype, "smoothed", {
        get: function() {
            return PIXI.scaleModes.DEFAULT === PIXI.scaleModes.LINEAR
        },
        set: function(a) {
            a ? PIXI.scaleModes.DEFAULT = PIXI.scaleModes.LINEAR : PIXI.scaleModes.DEFAULT = PIXI.scaleModes.NEAREST
        }
    }),
    c.Group = function(a, b, d, e, f, g) {
        void 0 === e && (e = !1),
        void 0 === f && (f = !1),
        void 0 === g && (g = c.Physics.ARCADE),
        this.game = a,
        void 0 === b && (b = a.world),
        this.name = d || "group",
        this.z = 0,
        PIXI.DisplayObjectContainer.call(this),
        e ? (this.game.stage.addChild(this), this.z = this.game.stage.children.length) : b && (b.addChild(this), this.z = b.children.length),
        this.type = c.GROUP,
        this.physicsType = c.GROUP,
        this.alive = !0,
        this.exists = !0,
        this.ignoreDestroy = !1,
        this.pendingDestroy = !1,
        this.classType = c.Sprite,
        this.cursor = null,
        this.inputEnableChildren = !1,
        this.onChildInputDown = new c.Signal,
        this.onChildInputUp = new c.Signal,
        this.onChildInputOver = new c.Signal,
        this.onChildInputOut = new c.Signal,
        this.enableBody = f,
        this.enableBodyDebug = !1,
        this.physicsBodyType = g,
        this.physicsSortDirection = null,
        this.onDestroy = new c.Signal,
        this.cursorIndex = 0,
        this.fixedToCamera = !1,
        this.cameraOffset = new c.Point,
        this.hash = [],
        this._sortProperty = "z"
    },
    c.Group.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
    c.Group.prototype.constructor = c.Group,
    c.Group.RETURN_NONE = 0,
    c.Group.RETURN_TOTAL = 1,
    c.Group.RETURN_CHILD = 2,
    c.Group.RETURN_ALL = 3,
    c.Group.SORT_ASCENDING = -1,
    c.Group.SORT_DESCENDING = 1,
    c.Group.prototype.add = function(a, b, c) {
        return void 0 === b && (b = !1), a.parent === this ? a : (a.body && a.parent && a.parent.hash && a.parent.removeFromHash(a), void 0 === c ? (a.z = this.children.length, this.addChild(a)) : (this.addChildAt(a, c), this.updateZ()), this.enableBody && a.hasOwnProperty("body") && null === a.body ? this.game.physics.enable(a, this.physicsBodyType) : a.body && this.addToHash(a), !this.inputEnableChildren || a.input && !a.inputEnabled || (a.inputEnabled = !0), !b && a.events && a.events.onAddedToGroup$dispatch(a, this), null === this.cursor && (this.cursor = a), a)
    },
    c.Group.prototype.addAt = function(a, b, c) {
        this.add(a, c, b)
    },
    c.Group.prototype.addToHash = function(a) {
        if (a.parent === this) {
            var b = this.hash.indexOf(a);
            if (b === -1)
                return this.hash.push(a), !0
        }
        return !1
    },
    c.Group.prototype.removeFromHash = function(a) {
        if (a) {
            var b = this.hash.indexOf(a);
            if (b !== -1)
                return this.hash.splice(b, 1), !0
        }
        return !1
    },
    c.Group.prototype.addMultiple = function(a, b) {
        if (a instanceof c.Group)
            a.moveAll(this, b);
        else if (Array.isArray(a))
            for (var d = 0; d < a.length; d++)
                this.add(a[d], b);
        return a
    },
    c.Group.prototype.getAt = function(a) {
        return a < 0 || a >= this.children.length ? -1 : this.getChildAt(a)
    },
    c.Group.prototype.create = function(a, b, c, d, e, f) {
        void 0 === e && (e = !0);
        var g = new this.classType(this.game, a, b, c, d);
        return g.exists = e, g.visible = e, g.alive = e, this.add(g, !1, f)
    },
    c.Group.prototype.createMultiple = function(a, b, c, d) {
        void 0 === c && (c = 0),
        void 0 === d && (d = !1),
        Array.isArray(b) || (b = [b]),
        Array.isArray(c) || (c = [c]);
        var e = this,
            f = [];
        return b.forEach(function(b) {
            c.forEach(function(c) {
                for (var g = 0; g < a; g++)
                    f.push(e.create(0, 0, b, c, d))
            })
        }), f
    },
    c.Group.prototype.updateZ = function() {
        for (var a = this.children.length; a--;)
            this.children[a].z = a
    },
    c.Group.prototype.align = function(a, b, d, e, f, g) {
        if (void 0 === f && (f = c.TOP_LEFT), void 0 === g && (g = 0), 0 === this.children.length || g > this.children.length || a === -1 && b === -1)
            return !1;
        for (var h = new c.Rectangle(0, 0, d, e), i = a * d, j = b * e, k = g; k < this.children.length; k++) {
            var l = this.children[k];
            if (l.alignIn)
                if (l.alignIn(h, f), a === -1)
                    h.y += e,
                    h.y === j && (h.x += d, h.y = 0);
                else if (b === -1)
                    h.x += d,
                    h.x === i && (h.x = 0, h.y += e);
                else if (h.x += d, h.x === i && (h.x = 0, h.y += e, h.y === j))
                    return !0
        }
        return !0
    };
    c.Group.prototype.resetCursor = function(a) {
        if (void 0 === a && (a = 0), a > this.children.length - 1 && (a = 0), this.cursor)
            return this.cursorIndex = a, this.cursor = this.children[this.cursorIndex], this.cursor
    };
    c.Group.prototype.next = function() {
        if (this.cursor)
            return this.cursorIndex >= this.children.length - 1 ? this.cursorIndex = 0 : this.cursorIndex++, this.cursor = this.children[this.cursorIndex], this.cursor
    },
    c.Group.prototype.previous = function() {
        if (this.cursor)
            return 0 === this.cursorIndex ? this.cursorIndex = this.children.length - 1 : this.cursorIndex--, this.cursor = this.children[this.cursorIndex], this.cursor
    },
    c.Group.prototype.swap = function(a, b) {
        this.swapChildren(a, b),
        this.updateZ()
    },
    c.Group.prototype.bringToTop = function(a) {
        return a.parent === this && this.getIndex(a) < this.children.length && (this.remove(a, !1, !0), this.add(a, !0)), a
    },
    c.Group.prototype.sendToBack = function(a) {
        return a.parent === this && this.getIndex(a) > 0 && (this.remove(a, !1, !0), this.addAt(a, 0, !0)), a
    },
    c.Group.prototype.moveUp = function(a) {
        if (a.parent === this && this.getIndex(a) < this.children.length - 1) {
            var b = this.getIndex(a),
                c = this.getAt(b + 1);
            c && this.swap(a, c)
        }
        return a
    },
    c.Group.prototype.moveDown = function(a) {
        if (a.parent === this && this.getIndex(a) > 0) {
            var b = this.getIndex(a),
                c = this.getAt(b - 1);
            c && this.swap(a, c)
        }
        return a
    },
    c.Group.prototype.xy = function(a, b, c) {
        return a < 0 || a > this.children.length ? -1 : (this.getChildAt(a).x = b, void (this.getChildAt(a).y = c))
    },
    c.Group.prototype.reverse = function() {
        this.children.reverse(),
        this.updateZ()
    },
    c.Group.prototype.getIndex = function(a) {
        return this.children.indexOf(a)
    },
    c.Group.prototype.getByName = function(a) {
        for (var b = 0; b < this.children.length; b++)
            if (this.children[b].name === a)
                return this.children[b];
        return null
    },
    c.Group.prototype.replace = function(a, b) {
        var d = this.getIndex(a);
        if (d !== -1)
            return b.parent && (b.parent instanceof c.Group ? b.parent.remove(b) : b.parent.removeChild(b)), this.remove(a), this.addAt(b, d), a
    },
    c.Group.prototype.hasProperty = function(a, b) {
        var c = b.length;
        return 1 === c && b[0] in a || (2 === c && b[0] in a && b[1] in a[b[0]] || (3 === c && b[0] in a && b[1] in a[b[0]] && b[2] in a[b[0]][b[1]] || 4 === c && b[0] in a && b[1] in a[b[0]] && b[2] in a[b[0]][b[1]] && b[3] in a[b[0]][b[1]][b[2]]))
    },
    c.Group.prototype.setProperty = function(a, b, c, d, e) {
        if (void 0 === e && (e = !1), d = d || 0, !this.hasProperty(a, b) && (!e || d > 0))
            return !1;
        var f = b.length;
        return 1 === f ? 0 === d ? a[b[0]] = c : 1 === d ? a[b[0]] += c : 2 === d ? a[b[0]] -= c : 3 === d ? a[b[0]] *= c : 4 === d && (a[b[0]] /= c) : 2 === f ? 0 === d ? a[b[0]][b[1]] = c : 1 === d ? a[b[0]][b[1]] += c : 2 === d ? a[b[0]][b[1]] -= c : 3 === d ? a[b[0]][b[1]] *= c : 4 === d && (a[b[0]][b[1]] /= c) : 3 === f ? 0 === d ? a[b[0]][b[1]][b[2]] = c : 1 === d ? a[b[0]][b[1]][b[2]] += c : 2 === d ? a[b[0]][b[1]][b[2]] -= c : 3 === d ? a[b[0]][b[1]][b[2]] *= c : 4 === d && (a[b[0]][b[1]][b[2]] /= c) : 4 === f && (0 === d ? a[b[0]][b[1]][b[2]][b[3]] = c : 1 === d ? a[b[0]][b[1]][b[2]][b[3]] += c : 2 === d ? a[b[0]][b[1]][b[2]][b[3]] -= c : 3 === d ? a[b[0]][b[1]][b[2]][b[3]] *= c : 4 === d && (a[b[0]][b[1]][b[2]][b[3]] /= c)), !0
    },
    c.Group.prototype.checkProperty = function(a, b, d, e) {
        return void 0 === e && (e = !1), !(!c.Utils.getProperty(a, b) && e) && c.Utils.getProperty(a, b) === d
    },
    c.Group.prototype.set = function(a, b, c, d, e, f, g) {
        if (void 0 === g && (g = !1), b = b.split("."), void 0 === d && (d = !1), void 0 === e && (e = !1), (d === !1 || d && a.alive) && (e === !1 || e && a.visible))
            return this.setProperty(a, b, c, f, g)
    },
    c.Group.prototype.setAll = function(a, b, c, d, e, f) {
        void 0 === c && (c = !1),
        void 0 === d && (d = !1),
        void 0 === f && (f = !1),
        a = a.split("."),
        e = e || 0;
        for (var g = 0; g < this.children.length; g++)
            (!c || c && this.children[g].alive) && (!d || d && this.children[g].visible) && this.setProperty(this.children[g], a, b, e, f)
    },
    c.Group.prototype.setAllChildren = function(a, b, d, e, f, g) {
        void 0 === d && (d = !1),
        void 0 === e && (e = !1),
        void 0 === g && (g = !1),
        f = f || 0;
        for (var h = 0; h < this.children.length; h++)
            (!d || d && this.children[h].alive) && (!e || e && this.children[h].visible) && (this.children[h] instanceof c.Group ? this.children[h].setAllChildren(a, b, d, e, f, g) : this.setProperty(this.children[h], a.split("."), b, f, g))
    },
    c.Group.prototype.checkAll = function(a, b, c, d, e) {
        void 0 === c && (c = !1),
        void 0 === d && (d = !1),
        void 0 === e && (e = !1);
        for (var f = 0; f < this.children.length; f++)
            if ((!c || c && this.children[f].alive) && (!d || d && this.children[f].visible) && !this.checkProperty(this.children[f], a, b, e))
                return !1;
        return !0
    },
    c.Group.prototype.addAll = function(a, b, c, d) {
        this.setAll(a, b, c, d, 1)
    },
    c.Group.prototype.subAll = function(a, b, c, d) {
        this.setAll(a, b, c, d, 2)
    },
    c.Group.prototype.multiplyAll = function(a, b, c, d) {
        this.setAll(a, b, c, d, 3)
    },
    c.Group.prototype.divideAll = function(a, b, c, d) {
        this.setAll(a, b, c, d, 4)
    },
    c.Group.prototype.callAllExists = function(a, b) {
        var c;
        if (arguments.length > 2) {
            c = [];
            for (var d = 2; d < arguments.length; d++)
                c.push(arguments[d])
        }
        for (var d = 0; d < this.children.length; d++)
            this.children[d].exists === b && this.children[d][a] && this.children[d][a].apply(this.children[d], c)
    },
    c.Group.prototype.callbackFromArray = function(a, b, c) {
        if (1 === c) {
            if (a[b[0]])
                return a[b[0]]
        } else if (2 === c) {
            if (a[b[0]][b[1]])
                return a[b[0]][b[1]]
        } else if (3 === c) {
            if (a[b[0]][b[1]][b[2]])
                return a[b[0]][b[1]][b[2]]
        } else if (4 === c) {
            if (a[b[0]][b[1]][b[2]][b[3]])
                return a[b[0]][b[1]][b[2]][b[3]]
        } else if (a[b])
            return a[b];
        return !1
    },
    c.Group.prototype.callAll = function(a, b) {
        if (void 0 !== a) {
            a = a.split(".");
            var c = a.length;
            if (void 0 === b || null === b || "" === b)
                b = null;
            else if ("string" == typeof b) {
                b = b.split(".");
                var d = b.length
            }
            var e;
            if (arguments.length > 2) {
                e = [];
                for (var f = 2; f < arguments.length; f++)
                    e.push(arguments[f])
            }
            for (var g = null, h = null, f = 0; f < this.children.length; f++)
                g = this.callbackFromArray(this.children[f], a, c),
                b && g ? (h = this.callbackFromArray(this.children[f], b, d), g && g.apply(h, e)) : g && g.apply(this.children[f], e)
        }
    },
    c.Group.prototype.preUpdate = function() {
        if (this.pendingDestroy)
            return this.destroy(), !1;
        if (!this.exists || !this.parent.exists)
            return this.renderOrderID = -1, !1;
        for (var a = 0; a < this.children.length; a++)
            this.children[a].preUpdate();
        return !0
    },
    c.Group.prototype.update = function() {
        for (var a = this.children.length; a--;)
            this.children[a].update()
    },
    c.Group.prototype.postUpdate = function() {
        this.fixedToCamera && (this.x = this.game.camera.view.x + this.cameraOffset.x, this.y = this.game.camera.view.y + this.cameraOffset.y);
        for (var a = 0; a < this.children.length; a++)
            this.children[a].postUpdate()
    },
    c.Group.prototype.filter = function(a, b) {
        for (var d = -1, e = this.children.length, f = []; ++d < e;) {
            var g = this.children[d];
            (!b || b && g.exists) && a(g, d, this.children) && f.push(g)
        }
        return new c.ArraySet(f)
    },
    c.Group.prototype.forEach = function(a, b, c) {
        if (void 0 === c && (c = !1), arguments.length <= 3)
            for (var d = 0; d < this.children.length; d++)
                (!c || c && this.children[d].exists) && a.call(b, this.children[d]);
        else {
            for (var e = [null], d = 3; d < arguments.length; d++)
                e.push(arguments[d]);
            for (var d = 0; d < this.children.length; d++)
                (!c || c && this.children[d].exists) && (e[0] = this.children[d], a.apply(b, e))
        }
    },
    c.Group.prototype.forEachExists = function(a, b) {
        var d;
        if (arguments.length > 2) {
            d = [null];
            for (var e = 2; e < arguments.length; e++)
                d.push(arguments[e])
        }
        this.iterate("exists", !0, c.Group.RETURN_TOTAL, a, b, d)
    },
    c.Group.prototype.forEachAlive = function(a, b) {
        var d;
        if (arguments.length > 2) {
            d = [null];
            for (var e = 2; e < arguments.length; e++)
                d.push(arguments[e])
        }
        this.iterate("alive", !0, c.Group.RETURN_TOTAL, a, b, d)
    },
    c.Group.prototype.forEachDead = function(a, b) {
        var d;
        if (arguments.length > 2) {
            d = [null];
            for (var e = 2; e < arguments.length; e++)
                d.push(arguments[e])
        }
        this.iterate("alive", !1, c.Group.RETURN_TOTAL, a, b, d)
    },
    c.Group.prototype.sort = function(a, b) {
        this.children.length < 2 || (void 0 === a && (a = "z"), void 0 === b && (b = c.Group.SORT_ASCENDING), this._sortProperty = a, b === c.Group.SORT_ASCENDING ? this.children.sort(this.ascendingSortHandler.bind(this)) : this.children.sort(this.descendingSortHandler.bind(this)), this.updateZ())
    },
    c.Group.prototype.customSort = function(a, b) {
        this.children.length < 2 || (this.children.sort(a.bind(b)), this.updateZ())
    },
    c.Group.prototype.ascendingSortHandler = function(a, b) {
        return a[this._sortProperty] < b[this._sortProperty] ? -1 : a[this._sortProperty] > b[this._sortProperty] ? 1 : a.z < b.z ? -1 : 1
    },
    c.Group.prototype.descendingSortHandler = function(a, b) {
        return a[this._sortProperty] < b[this._sortProperty] ? 1 : a[this._sortProperty] > b[this._sortProperty] ? -1 : 0
    },
    c.Group.prototype.iterate = function(a, b, d, e, f, g) {
        if (0 === this.children.length) {
            if (d === c.Group.RETURN_TOTAL)
                return 0;
            if (d === c.Group.RETURN_ALL)
                return []
        }
        var h = 0;
        if (d === c.Group.RETURN_ALL)
            var i = [];
        for (var j = 0; j < this.children.length; j++)
            if (this.children[j][a] === b) {
                if (h++, e && (g ? (g[0] = this.children[j], e.apply(f, g)) : e.call(f, this.children[j])), d === c.Group.RETURN_CHILD)
                    return this.children[j];
                d === c.Group.RETURN_ALL && i.push(this.children[j])
            }
        return d === c.Group.RETURN_TOTAL ? h : d === c.Group.RETURN_ALL ? i : null
    },
    c.Group.prototype.getFirstExists = function(a, b, d, e, f, g) {
        void 0 === b && (b = !1),
        "boolean" != typeof a && (a = !0);
        var h = this.iterate("exists", a, c.Group.RETURN_CHILD);
        return null === h && b ? this.create(d, e, f, g) : this.resetChild(h, d, e, f, g)
    },
    c.Group.prototype.getFirstAlive = function(a, b, d, e, f) {
        void 0 === a && (a = !1);
        var g = this.iterate("alive", !0, c.Group.RETURN_CHILD);
        return null === g && a ? this.create(b, d, e, f) : this.resetChild(g, b, d, e, f)
    },
    c.Group.prototype.getFirstDead = function(a, b, d, e, f) {
        void 0 === a && (a = !1);
        var g = this.iterate("alive", !1, c.Group.RETURN_CHILD);
        return null === g && a ? this.create(b, d, e, f) : this.resetChild(g, b, d, e, f)
    },
    c.Group.prototype.resetChild = function(a, b, c, d, e) {
        return null === a ? null : (void 0 === b && (b = null), void 0 === c && (c = null), null !== b && null !== c && a.reset(b, c), void 0 !== d && a.loadTexture(d, e), a)
    },
    c.Group.prototype.getTop = function() {
        if (this.children.length > 0)
            return this.children[this.children.length - 1]
    },
    c.Group.prototype.getBottom = function() {
        if (this.children.length > 0)
            return this.children[0]
    },
    c.Group.prototype.getClosestTo = function(a, b, d) {
        for (var e = Number.MAX_VALUE, f = 0, g = null, h = 0; h < this.children.length; h++) {
            var i = this.children[h];
            i.exists && (f = Math.abs(c.Point.distance(a, i)), f < e && (!b || b.call(d, i, f)) && (e = f, g = i))
        }
        return g
    },
    c.Group.prototype.getFurthestFrom = function(a, b, d) {
        for (var e = 0, f = 0, g = null, h = 0; h < this.children.length; h++) {
            var i = this.children[h];
            i.exists && (f = Math.abs(c.Point.distance(a, i)), f > e && (!b || b.call(d, i, f)) && (e = f, g = i))
        }
        return g
    },
    c.Group.prototype.countLiving = function() {
        return this.iterate("alive", !0, c.Group.RETURN_TOTAL)
    },
    c.Group.prototype.countDead = function() {
        return this.iterate("alive", !1, c.Group.RETURN_TOTAL)
    },
    c.Group.prototype.getRandom = function(a, b) {
        return void 0 === a && (a = 0), void 0 === b && (b = this.children.length), 0 === b ? null : c.ArrayUtils.getRandomItem(this.children, a, b)
    },
    c.Group.prototype.getRandomExists = function(a, b) {
        var c = this.getAll("exists", !0, a, b);
        return this.game.rnd.pick(c)
    },
    c.Group.prototype.getAll = function(a, b, c, d) {
        void 0 === c && (c = 0),
        void 0 === d && (d = this.children.length);
        for (var e = [], f = c; f < d; f++) {
            var g = this.children[f];
            a && g[a] === b && e.push(g)
        }
        return e
    },
    c.Group.prototype.remove = function(a, b, c) {
        if (void 0 === b && (b = !1), void 0 === c && (c = !1), 0 === this.children.length || this.children.indexOf(a) === -1)
            return !1;
        c || !a.events || a.destroyPhase || a.events.onRemovedFromGroup$dispatch(a, this);
        var d = this.removeChild(a);
        return this.removeFromHash(a), this.updateZ(), this.cursor === a && this.next(), b && d && d.destroy(!0), !0
    },
    c.Group.prototype.moveAll = function(a, b) {
        if (void 0 === b && (b = !1), this.children.length > 0 && a instanceof c.Group) {
            do a.add(this.children[0], b);
            while (this.children.length > 0);
            this.hash = [],
            this.cursor = null
        }
        return a
    },
    c.Group.prototype.removeAll = function(a, b, c) {
        if (void 0 === a && (a = !1), void 0 === b && (b = !1), void 0 === c && (c = !1), 0 !== this.children.length) {
            do {
                !b && this.children[0].events && this.children[0].events.onRemovedFromGroup$dispatch(this.children[0], this);
                var d = this.removeChild(this.children[0]);
                this.removeFromHash(d),
                a && d && d.destroy(!0, c)
            } while (this.children.length > 0);
            this.hash = [],
            this.cursor = null
        }
    },
    c.Group.prototype.removeBetween = function(a, b, c, d) {
        if (void 0 === b && (b = this.children.length - 1), void 0 === c && (c = !1), void 0 === d && (d = !1), 0 !== this.children.length) {
            if (a > b || a < 0 || b > this.children.length)
                return !1;
            for (var e = b; e >= a;) {
                !d && this.children[e].events && this.children[e].events.onRemovedFromGroup$dispatch(this.children[e], this);
                var f = this.removeChild(this.children[e]);
                this.removeFromHash(f),
                c && f && f.destroy(!0),
                this.cursor === this.children[e] && (this.cursor = null),
                e--
            }
            this.updateZ()
        }
    },
    c.Group.prototype.destroy = function(a, b) {
        null === this.game || this.ignoreDestroy || (void 0 === a && (a = !0), void 0 === b && (b = !1), this.onDestroy.dispatch(this, a, b), this.removeAll(a), this.cursor = null, this.filters = null, this.pendingDestroy = !1, b || (this.parent && this.parent.removeChild(this), this.game = null, this.exists = !1))
    },
    Object.defineProperty(c.Group.prototype, "total", {
        get: function() {
            return this.iterate("exists", !0, c.Group.RETURN_TOTAL)
        }
    }),
    Object.defineProperty(c.Group.prototype, "length", {
        get: function() {
            return this.children.length
        }
    }),
    Object.defineProperty(c.Group.prototype, "angle", {
        get: function() {
            return c.Math.radToDeg(this.rotation)
        },
        set: function(a) {
            this.rotation = c.Math.degToRad(a)
        }
    }),
    Object.defineProperty(c.Group.prototype, "centerX", {
        get: function() {
            return this.getBounds(this.parent).centerX
        },
        set: function(a) {
            var b = this.getBounds(this.parent),
                c = this.x - b.x;
            this.x = a + c - b.halfWidth
        }
    }),
    Object.defineProperty(c.Group.prototype, "centerY", {
        get: function() {
            return this.getBounds(this.parent).centerY
        },
        set: function(a) {
            var b = this.getBounds(this.parent),
                c = this.y - b.y;
            this.y = a + c - b.halfHeight
        }
    }),
    Object.defineProperty(c.Group.prototype, "left", {
        get: function() {
            return this.getBounds(this.parent).left
        },
        set: function(a) {
            var b = this.getBounds(this.parent),
                c = this.x - b.x;
            this.x = a + c
        }
    }),
    Object.defineProperty(c.Group.prototype, "right", {
        get: function() {
            return this.getBounds(this.parent).right
        },
        set: function(a) {
            var b = this.getBounds(this.parent),
                c = this.x - b.x;
            this.x = a + c - b.width
        }
    }),
    Object.defineProperty(c.Group.prototype, "top", {
        get: function() {
            return this.getBounds(this.parent).top
        },
        set: function(a) {
            var b = this.getBounds(this.parent),
                c = this.y - b.y;
            this.y = a + c
        }
    }),
    Object.defineProperty(c.Group.prototype, "bottom", {
        get: function() {
            return this.getBounds(this.parent).bottom
        },
        set: function(a) {
            var b = this.getBounds(this.parent),
                c = this.y - b.y;
            this.y = a + c - b.height
        }
    }),
    c.World = function(a) {
        c.Group.call(this, a, null, "__world", !1),
        this.bounds = new c.Rectangle(0, 0, a.width, a.height),
        this.camera = null,
        this._definedSize = !1,
        this._width = a.width,
        this._height = a.height,
        this.game.state.onStateChange.add(this.stateChange, this)
    },
    c.World.prototype = Object.create(c.Group.prototype),
    c.World.prototype.constructor = c.World,
    c.World.prototype.boot = function() {
        this.camera = new c.Camera(this.game, 0, 0, 0, this.game.width, this.game.height),
        this.game.stage.addChild(this),
        this.camera.boot()
    },
    c.World.prototype.stateChange = function() {
        this.x = 0,
        this.y = 0,
        this.camera.reset()
    },
    c.World.prototype.setBounds = function(a, b, c, d) {
        this._definedSize = !0,
        this._width = c,
        this._height = d,
        this.bounds.setTo(a, b, c, d),
        this.x = a,
        this.y = b,
        this.camera.bounds && this.camera.bounds.setTo(a, b, Math.max(c, this.game.width), Math.max(d, this.game.height)),
        this.game.physics.setBoundsToWorld()
    },
    c.World.prototype.resize = function(a, b) {
        this._definedSize && (a < this._width && (a = this._width), b < this._height && (b = this._height)),
        this.bounds.width = a,
        this.bounds.height = b,
        this.game.camera.setBoundsToWorld(),
        this.game.physics.setBoundsToWorld()
    },
    c.World.prototype.shutdown = function() {
        this.destroy(!0, !0)
    },
    c.World.prototype.wrap = function(a, b, c, d, e) {
        void 0 === b && (b = 0),
        void 0 === c && (c = !1),
        void 0 === d && (d = !0),
        void 0 === e && (e = !0),
        c ? (a.getBounds(), d && (a.x + a._currentBounds.width < this.bounds.x ? a.x = this.bounds.right : a.x > this.bounds.right && (a.x = this.bounds.left)), e && (a.y + a._currentBounds.height < this.bounds.top ? a.y = this.bounds.bottom : a.y > this.bounds.bottom && (a.y = this.bounds.top))) : (d && a.x + b < this.bounds.x ? a.x = this.bounds.right + b : d && a.x - b > this.bounds.right && (a.x = this.bounds.left - b), e && a.y + b < this.bounds.top ? a.y = this.bounds.bottom + b : e && a.y - b > this.bounds.bottom && (a.y = this.bounds.top - b))
    },
    Object.defineProperty(c.World.prototype, "width", {
        get: function() {
            return this.bounds.width
        },
        set: function(a) {
            a < this.game.width && (a = this.game.width),
            this.bounds.width = a,
            this._width = a,
            this._definedSize = !0
        }
    }),
    Object.defineProperty(c.World.prototype, "height", {
        get: function() {
            return this.bounds.height
        },
        set: function(a) {
            a < this.game.height && (a = this.game.height),
            this.bounds.height = a,
            this._height = a,
            this._definedSize = !0
        }
    }),
    Object.defineProperty(c.World.prototype, "centerX", {
        get: function() {
            return this.bounds.halfWidth + this.bounds.x
        }
    }),
    Object.defineProperty(c.World.prototype, "centerY", {
        get: function() {
            return this.bounds.halfHeight + this.bounds.y
        }
    }),
    Object.defineProperty(c.World.prototype, "randomX", {
        get: function() {
            return this.bounds.x < 0 ? this.game.rnd.between(this.bounds.x, this.bounds.width - Math.abs(this.bounds.x)) : this.game.rnd.between(this.bounds.x, this.bounds.width)
        }
    }),
    Object.defineProperty(c.World.prototype, "randomY", {
        get: function() {
            return this.bounds.y < 0 ? this.game.rnd.between(this.bounds.y, this.bounds.height - Math.abs(this.bounds.y)) : this.game.rnd.between(this.bounds.y, this.bounds.height)
        }
    }),
    c.Game = function(a, b, d, e, f, g, h, i) {
        return this.id = c.GAMES.push(this) - 1, this.config = null, this.physicsConfig = i, this.parent = "", this.width = 800, this.height = 600, this.resolution = 1, this._width = 800, this._height = 600, this.transparent = !1, this.antialias = !0, this.preserveDrawingBuffer = !1, this.clearBeforeRender = !0, this.renderer = null, this.renderType = c.AUTO, this.state = null, this.isBooted = !1, this.isRunning = !1, this.raf = null, this.add = null, this.make = null, this.cache = null, this.input = null, this.load = null, this.math = null, this.net = null, this.scale = null, this.sound = null, this.stage = null, this.time = null, this.tweens = null, this.world = null, this.physics = null, this.plugins = null, this.rnd = null, this.device = c.Device, this.camera = null, this.canvas = null, this.context = null, this.debug = null, this.particles = null, this.create = null, this.lockRender = !1, this.stepping = !1, this.pendingStep = !1, this.stepCount = 0, this.onPause = null, this.onResume = null, this.onBlur = null, this.onFocus = null, this._paused = !1, this._codePaused = !1, this.currentUpdateID = 0, this.updatesThisFrame = 1, this._deltaTime = 0, this._lastCount = 0, this._spiraling = 0, this._kickstart = !0, this.fpsProblemNotifier = new c.Signal, this.forceSingleUpdate = !0, this._nextFpsNotification = 0, 1 === arguments.length && "object" == typeof arguments[0] ? this.parseConfig(arguments[0]) : (this.config = {
            enableDebug: !0
        }, "undefined" != typeof a && (this._width = a), "undefined" != typeof b && (this._height = b), "undefined" != typeof d && (this.renderType = d), "undefined" != typeof e && (this.parent = e), "undefined" != typeof g && (this.transparent = g), "undefined" != typeof h && (this.antialias = h), this.rnd = new c.RandomDataGenerator([(Date.now() * Math.random()).toString()]), this.state = new c.StateManager(this, f)), this.device.whenReady(this.boot, this), this
    },
    c.Game.prototype = {
        parseConfig: function(a) {
            this.config = a,
            void 0 === a.enableDebug && (this.config.enableDebug = !0),
            a.width && (this._width = a.width),
            a.height && (this._height = a.height),
            a.renderer && (this.renderType = a.renderer),
            a.parent && (this.parent = a.parent),
            void 0 !== a.transparent && (this.transparent = a.transparent),
            void 0 !== a.antialias && (this.antialias = a.antialias),
            a.resolution && (this.resolution = a.resolution),
            void 0 !== a.preserveDrawingBuffer && (this.preserveDrawingBuffer = a.preserveDrawingBuffer),
            a.physicsConfig && (this.physicsConfig = a.physicsConfig);
            var b = [(Date.now() * Math.random()).toString()];
            a.seed && (b = a.seed),
            this.rnd = new c.RandomDataGenerator(b);
            var d = null;
            a.state && (d = a.state),
            this.state = new c.StateManager(this, d)
        },
        boot: function() {
            this.isBooted || (this.onPause = new c.Signal, this.onResume = new c.Signal, this.onBlur = new c.Signal, this.onFocus = new c.Signal, this.isBooted = !0, PIXI.game = this, this.math = c.Math, this.scale = new c.ScaleManager(this, this._width, this._height), this.stage = new c.Stage(this), this.setUpRenderer(), this.world = new c.World(this), this.add = new c.GameObjectFactory(this), this.make = new c.GameObjectCreator(this), this.cache = new c.Cache(this), this.load = new c.Loader(this), this.time = new c.Time(this), this.tweens = new c.TweenManager(this), this.input = new c.Input(this), this.sound = new c.SoundManager(this), this.physics = new c.Physics(this, this.physicsConfig), this.particles = new c.Particles(this), this.create = new c.Create(this), this.plugins = new c.PluginManager(this), this.net = new c.Net(this), this.time.boot(), this.stage.boot(), this.world.boot(), this.scale.boot(), this.input.boot(), this.sound.boot(), this.state.boot(), this.config.enableDebug ? (this.debug = new c.Utils.Debug(this), this.debug.boot()) : this.debug = {
                preUpdate: function() {},
                update: function() {},
                reset: function() {}
            }, this.showDebugHeader(), this.isRunning = !0, this.config && this.config.forceSetTimeOut ? this.raf = new c.RequestAnimationFrame(this, this.config.forceSetTimeOut) : this.raf = new c.RequestAnimationFrame(this, (!1)), this._kickstart = !0, window.focus && (!window.PhaserGlobal || window.PhaserGlobal && !window.PhaserGlobal.stopFocus) && window.focus(), this.raf.start())
        },
        showDebugHeader: function() {
            if (!window.PhaserGlobal || !window.PhaserGlobal.hideBanner) {
                var a = c.VERSION,
                    b = "Canvas",
                    d = "HTML Audio",
                    e = 1;
                if (this.renderType === c.WEBGL ? (b = "WebGL", e++) : this.renderType === c.HEADLESS && (b = "Headless"), this.device.webAudio && (d = "WebAudio", e++), this.device.chrome) {
                    for (var f = ["%c %c %c Phaser v" + a + " | Pixi.js | " + b + " | " + d + "  %c %c %c http://phaser.io %c♥%c♥%c♥", "background: #fb8cb3", "background: #d44a52", "color: #ffffff; background: #871905;", "background: #d44a52", "background: #fb8cb3", "background: #ffffff"], g = 0; g < 3; g++)
                        g < e ? f.push("color: #ff2424; background: #fff") : f.push("color: #959595; background: #fff");
                    console.log.apply(console, f)
                } else
                    window.console && console.log("Phaser v" + a + " | Pixi.js " + PIXI.VERSION + " | " + b + " | " + d + " | http://phaser.io")
            }
        },
        setUpRenderer: function() {
            if (this.config.canvas ? this.canvas = this.config.canvas : this.canvas = c.Canvas.create(this, this.width, this.height, this.config.canvasID, !0), this.config.canvasStyle ? this.canvas.style = this.config.canvasStyle : this.canvas.style["-webkit-full-screen"] = "width: 100%; height: 100%", this.renderType === c.HEADLESS || this.renderType === c.CANVAS || this.renderType === c.AUTO && !this.device.webGL) {
                if (!this.device.canvas)
                    throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.");
                this.renderType = c.CANVAS,
                this.renderer = new PIXI.CanvasRenderer(this),
                this.context = this.renderer.context
            } else
                this.renderType = c.WEBGL,
                this.renderer = new PIXI.WebGLRenderer(this),
                this.context = null,
                this.canvas.addEventListener("webglcontextlost", this.contextLost.bind(this), !1),
                this.canvas.addEventListener("webglcontextrestored", this.contextRestored.bind(this), !1);
            this.device.cocoonJS && (this.canvas.screencanvas = this.renderType === c.CANVAS),
            this.renderType !== c.HEADLESS && (this.stage.smoothed = this.antialias, c.Canvas.addToDOM(this.canvas, this.parent, !1), c.Canvas.setTouchAction(this.canvas))
        },
        contextLost: function(a) {
            a.preventDefault(),
            this.renderer.contextLost = !0
        },
        contextRestored: function() {
            this.renderer.initContext(),
            this.cache.clearGLTextures(),
            this.renderer.contextLost = !1
        },
        update: function(a) {
            if (this.time.update(a), this._kickstart)
                return this.updateLogic(this.time.desiredFpsMult), this.updateRender(this.time.slowMotion * this.time.desiredFps), void (this._kickstart = !1);
            if (this._spiraling > 1 && !this.forceSingleUpdate)
                this.time.time > this._nextFpsNotification && (this._nextFpsNotification = this.time.time + 1e4, this.fpsProblemNotifier.dispatch()),
                this._deltaTime = 0,
                this._spiraling = 0,
                this.updateRender(this.time.slowMotion * this.time.desiredFps);
            else {
                var b = 1e3 * this.time.slowMotion / this.time.desiredFps;
                this._deltaTime += Math.max(Math.min(3 * b, this.time.elapsed), 0);
                var c = 0;
                for (this.updatesThisFrame = Math.floor(this._deltaTime / b), this.forceSingleUpdate && (this.updatesThisFrame = Math.min(1, this.updatesThisFrame)); this._deltaTime >= b && (this._deltaTime -= b, this.currentUpdateID = c, this.updateLogic(this.time.desiredFpsMult), c++, !this.forceSingleUpdate || 1 !== c);)
                    this.time.refresh();
                c > this._lastCount ? this._spiraling++ : c < this._lastCount && (this._spiraling = 0),
                this._lastCount = c,
                this.updateRender(this._deltaTime / b)
            }
        },
        updateLogic: function(a) {
            this._paused || this.pendingStep ? (this.scale.pauseUpdate(), this.state.pauseUpdate(), this.debug.preUpdate()) : (this.stepping && (this.pendingStep = !0), this.scale.preUpdate(), this.debug.preUpdate(), this.camera.preUpdate(), this.physics.preUpdate(), this.state.preUpdate(a), this.plugins.preUpdate(a), this.stage.preUpdate(), this.state.update(), this.stage.update(), this.tweens.update(), this.sound.update(), this.input.update(), this.physics.update(), this.particles.update(), this.plugins.update(), this.stage.postUpdate(), this.plugins.postUpdate()),
            this.stage.updateTransform()
        },
        updateRender: function(a) {
            this.lockRender || (this.state.preRender(a), this.renderType !== c.HEADLESS && (this.renderer.render(this.stage), this.plugins.render(a), this.state.render(a)), this.plugins.postRender(a))
        },
        enableStep: function() {
            this.stepping = !0,
            this.pendingStep = !1,
            this.stepCount = 0
        },
        disableStep: function() {
            this.stepping = !1,
            this.pendingStep = !1
        },
        step: function() {
            this.pendingStep = !1,
            this.stepCount++
        },
        destroy: function() {
            this.raf.stop(),
            this.state.destroy(),
            this.sound.destroy(),
            this.scale.destroy(),
            this.stage.destroy(),
            this.input.destroy(),
            this.physics.destroy(),
            this.plugins.destroy(),
            this.state = null,
            this.sound = null,
            this.scale = null,
            this.stage = null,
            this.input = null,
            this.physics = null,
            this.plugins = null,
            this.cache = null,
            this.load = null,
            this.time = null,
            this.world = null,
            this.isBooted = !1,
            this.renderer.destroy(!1),
            c.Canvas.removeFromDOM(this.canvas),
            PIXI.defaultRenderer = null,
            c.GAMES[this.id] = null
        },
        gamePaused: function(a) {
            this._paused || (this._paused = !0, this.time.gamePaused(), this.sound.muteOnPause && this.sound.setMute(), this.onPause.dispatch(a), this.device.cordova && this.device.iOS && (this.lockRender = !0))
        },
        gameResumed: function(a) {
            this._paused && !this._codePaused && (this._paused = !1, this.time.gameResumed(), this.input.reset(), this.sound.muteOnPause && this.sound.unsetMute(), this.onResume.dispatch(a), this.device.cordova && this.device.iOS && (this.lockRender = !1))
        },
        focusLoss: function(a) {
            this.onBlur.dispatch(a),
            this.stage.disableVisibilityChange || this.gamePaused(a)
        },
        focusGain: function(a) {
            this.onFocus.dispatch(a),
            this.stage.disableVisibilityChange || this.gameResumed(a)
        }
    },
    c.Game.prototype.constructor = c.Game,
    Object.defineProperty(c.Game.prototype, "paused", {
        get: function() {
            return this._paused
        },
        set: function(a) {
            a === !0 ? (this._paused === !1 && (this._paused = !0, this.sound.setMute(), this.time.gamePaused(), this.onPause.dispatch(this)), this._codePaused = !0) : (this._paused && (this._paused = !1, this.input.reset(), this.sound.unsetMute(), this.time.gameResumed(), this.onResume.dispatch(this)), this._codePaused = !1)
        }
    }),
    c.Input = function(a) {
        this.game = a,
        this.hitCanvas = null,
        this.hitContext = null,
        this.moveCallbacks = [],
        this.customCandidateHandler = null,
        this.customCandidateHandlerContext = null,
        this.pollRate = 0,
        this.enabled = !0,
        this.multiInputOverride = c.Input.MOUSE_TOUCH_COMBINE,
        this.position = null,
        this.speed = null,
        this.circle = null,
        this.scale = null,
        this.maxPointers = -1,
        this.tapRate = 200,
        this.doubleTapRate = 300,
        this.holdRate = 2e3,
        this.justPressedRate = 200,
        this.justReleasedRate = 200,
        this.recordPointerHistory = !1,
        this.recordRate = 100,
        this.recordLimit = 100,
        this.pointer1 = null,
        this.pointer2 = null,
        this.pointer3 = null,
        this.pointer4 = null,
        this.pointer5 = null,
        this.pointer6 = null,
        this.pointer7 = null,
        this.pointer8 = null,
        this.pointer9 = null,
        this.pointer10 = null,
        this.pointers = [],
        this.activePointer = null,
        this.mousePointer = null,
        this.mouse = null,
        this.keyboard = null,
        this.touch = null,
        this.mspointer = null,
        this.gamepad = null,
        this.resetLocked = !1,
        this.onDown = null,
        this.onUp = null,
        this.onTap = null,
        this.onHold = null,
        this.minPriorityID = 0,
        this.interactiveItems = new c.ArraySet,
        this._localPoint = new c.Point,
        this._pollCounter = 0,
        this._oldPosition = null,
        this._x = 0,
        this._y = 0
    },
    c.Input.MOUSE_OVERRIDES_TOUCH = 0,
    c.Input.TOUCH_OVERRIDES_MOUSE = 1,
    c.Input.MOUSE_TOUCH_COMBINE = 2,
    c.Input.MAX_POINTERS = 10,
    c.Input.prototype = {
        boot: function() {
            this.mousePointer = new c.Pointer(this.game, 0, c.PointerMode.CURSOR),
            this.addPointer(),
            this.addPointer(),
            this.mouse = new c.Mouse(this.game),
            this.touch = new c.Touch(this.game),
            this.mspointer = new c.MSPointer(this.game),
            c.Keyboard && (this.keyboard = new c.Keyboard(this.game)),
            c.Gamepad && (this.gamepad = new c.Gamepad(this.game)),
            this.onDown = new c.Signal,
            this.onUp = new c.Signal,
            this.onTap = new c.Signal,
            this.onHold = new c.Signal,
            this.scale = new c.Point(1, 1),
            this.speed = new c.Point,
            this.position = new c.Point,
            this._oldPosition = new c.Point,
            this.circle = new c.Circle(0, 0, 44),
            this.activePointer = this.mousePointer,
            this.hitCanvas = PIXI.CanvasPool.create(this, 1, 1),
            this.hitContext = this.hitCanvas.getContext("2d"),
            this.mouse.start(),
            this.touch.start(),
            this.mspointer.start(),
            this.mousePointer.active = !0,
            this.keyboard && this.keyboard.start();
            var a = this;
            this._onClickTrampoline = function(b) {
                a.onClickTrampoline(b)
            },
            this.game.canvas.addEventListener("click", this._onClickTrampoline, !1)
        },
        destroy: function() {
            this.mouse.stop(),
            this.touch.stop(),
            this.mspointer.stop(),
            this.keyboard && this.keyboard.stop(),
            this.gamepad && this.gamepad.stop(),
            this.moveCallbacks = [],
            PIXI.CanvasPool.remove(this),
            this.game.canvas.removeEventListener("click", this._onClickTrampoline)
        },
        setInteractiveCandidateHandler: function(a, b) {
            this.customCandidateHandler = a,
            this.customCandidateHandlerContext = b
        },
        addMoveCallback: function(a, b) {
            this.moveCallbacks.push({
                callback: a,
                context: b
            })
        },
        deleteMoveCallback: function(a, b) {
            for (var c = this.moveCallbacks.length; c--;)
                if (this.moveCallbacks[c].callback === a && this.moveCallbacks[c].context === b)
                    return void this.moveCallbacks.splice(c, 1)
        },
        addPointer: function() {
            if (this.pointers.length >= c.Input.MAX_POINTERS)
                return console.warn("Phaser.Input.addPointer: Maximum limit of " + c.Input.MAX_POINTERS + " pointers reached."), null;
            var a = this.pointers.length + 1,
                b = new c.Pointer(this.game, a, c.PointerMode.TOUCH);
            return this.pointers.push(b), this["pointer" + a] = b, b
        },
        update: function() {
            if (this.keyboard && this.keyboard.update(), this.pollRate > 0 && this._pollCounter < this.pollRate)
                return void this._pollCounter++;
            this.speed.x = this.position.x - this._oldPosition.x,
            this.speed.y = this.position.y - this._oldPosition.y,
            this._oldPosition.copyFrom(this.position),
            this.mousePointer.update(),
            this.gamepad && this.gamepad.active && this.gamepad.update();
            for (var a = 0; a < this.pointers.length; a++)
                this.pointers[a].update();
            this._pollCounter = 0
        },
        reset: function(a) {
            if (this.game.isBooted && !this.resetLocked) {
                void 0 === a && (a = !1),
                this.mousePointer.reset(),
                this.keyboard && this.keyboard.reset(a),
                this.gamepad && this.gamepad.reset();
                for (var b = 0; b < this.pointers.length; b++)
                    this.pointers[b].reset();
                "none" !== this.game.canvas.style.cursor && (this.game.canvas.style.cursor = "inherit"),
                a && (this.onDown.dispose(), this.onUp.dispose(), this.onTap.dispose(), this.onHold.dispose(), this.onDown = new c.Signal, this.onUp = new c.Signal, this.onTap = new c.Signal, this.onHold = new c.Signal, this.moveCallbacks = []),
                this._pollCounter = 0
            }
        },
        resetSpeed: function(a, b) {
            this._oldPosition.setTo(a, b),
            this.speed.setTo(0, 0)
        },
        startPointer: function(a) {
            if (this.maxPointers >= 0 && this.countActivePointers(this.maxPointers) >= this.maxPointers)
                return null;
            if (!this.pointer1.active)
                return this.pointer1.start(a);
            if (!this.pointer2.active)
                return this.pointer2.start(a);
            for (var b = 2; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (!c.active)
                    return c.start(a)
            }
            return null
        },
        updatePointer: function(a) {
            if (this.pointer1.active && this.pointer1.identifier === a.identifier)
                return this.pointer1.move(a);
            if (this.pointer2.active && this.pointer2.identifier === a.identifier)
                return this.pointer2.move(a);
            for (var b = 2; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.active && c.identifier === a.identifier)
                    return c.move(a)
            }
            return null
        },
        stopPointer: function(a) {
            if (this.pointer1.active && this.pointer1.identifier === a.identifier)
                return this.pointer1.stop(a);
            if (this.pointer2.active && this.pointer2.identifier === a.identifier)
                return this.pointer2.stop(a);
            for (var b = 2; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.active && c.identifier === a.identifier)
                    return c.stop(a)
            }
            return null
        },
        countActivePointers: function(a) {
            void 0 === a && (a = this.pointers.length);
            for (var b = a, c = 0; c < this.pointers.length && b > 0; c++) {
                var d = this.pointers[c];
                d.active && b--
            }
            return a - b
        },
        getPointer: function(a) {
            void 0 === a && (a = !1);
            for (var b = 0; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.active === a)
                    return c
            }
            return null
        },
        getPointerFromIdentifier: function(a) {
            for (var b = 0; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.identifier === a)
                    return c
            }
            return null
        },
        getPointerFromId: function(a) {
            for (var b = 0; b < this.pointers.length; b++) {
                var c = this.pointers[b];
                if (c.pointerId === a)
                    return c
            }
            return null
        },
        getLocalPosition: function(a, b, d) {
            void 0 === d && (d = new c.Point);
            var e = a.worldTransform,
                f = 1 / (e.a * e.d + e.c * -e.b);
            return d.setTo(e.d * f * b.x + -e.c * f * b.y + (e.ty * e.c - e.tx * e.d) * f, e.a * f * b.y + -e.b * f * b.x + (-e.ty * e.a + e.tx * e.b) * f)
        },
        hitTest: function(a, b, d) {
            if (!a.worldVisible)
                return !1;
            if (this.getLocalPosition(a, b, this._localPoint), d.copyFrom(this._localPoint), a.hitArea && a.hitArea.contains)
                return a.hitArea.contains(this._localPoint.x, this._localPoint.y);
            if (a instanceof c.TileSprite) {
                var e = a.width,
                    f = a.height,
                    g = -e * a.anchor.x;
                if (this._localPoint.x >= g && this._localPoint.x < g + e) {
                    var h = -f * a.anchor.y;
                    if (this._localPoint.y >= h && this._localPoint.y < h + f)
                        return !0
                }
            } else if (a instanceof PIXI.Sprite) {
                var e = a.texture.frame.width,
                    f = a.texture.frame.height,
                    g = -e * a.anchor.x;
                if (this._localPoint.x >= g && this._localPoint.x < g + e) {
                    var h = -f * a.anchor.y;
                    if (this._localPoint.y >= h && this._localPoint.y < h + f)
                        return !0
                }
            } else if (a instanceof c.Graphics)
                for (var i = 0; i < a.graphicsData.length; i++) {
                    var j = a.graphicsData[i];
                    if (j.fill && j.shape && j.shape.contains(this._localPoint.x, this._localPoint.y))
                        return !0
                }
            for (var i = 0; i < a.children.length; i++)
                if (this.hitTest(a.children[i], b, d))
                    return !0;
            return !1
        },
        onClickTrampoline: function() {
            this.activePointer.processClickTrampolines()
        }
    },
    c.Input.prototype.constructor = c.Input,
    Object.defineProperty(c.Input.prototype, "x", {
        get: function() {
            return this._x
        },
        set: function(a) {
            this._x = Math.floor(a)
        }
    }),
    Object.defineProperty(c.Input.prototype, "y", {
        get: function() {
            return this._y
        },
        set: function(a) {
            this._y = Math.floor(a)
        }
    }),
    Object.defineProperty(c.Input.prototype, "pollLocked", {
        get: function() {
            return this.pollRate > 0 && this._pollCounter < this.pollRate
        }
    }),
    Object.defineProperty(c.Input.prototype, "totalInactivePointers", {
        get: function() {
            return this.pointers.length - this.countActivePointers()
        }
    }),
    Object.defineProperty(c.Input.prototype, "totalActivePointers", {
        get: function() {
            return this.countActivePointers()
        }
    }),
    Object.defineProperty(c.Input.prototype, "worldX", {
        get: function() {
            return this.game.camera.view.x + this.x
        }
    }),
    Object.defineProperty(c.Input.prototype, "worldY", {
        get: function() {
            return this.game.camera.view.y + this.y
        }
    }),
    c.Mouse = function(a) {
        this.game = a,
        this.input = a.input,
        this.callbackContext = this.game,
        this.mouseDownCallback = null,
        this.mouseUpCallback = null,
        this.mouseOutCallback = null,
        this.mouseOverCallback = null,
        this.mouseWheelCallback = null,
        this.capture = !1,
        this.button = -1,
        this.wheelDelta = 0,
        this.enabled = !0,
        this.locked = !1,
        this.stopOnGameOut = !1,
        this.pointerLock = new c.Signal,
        this.event = null,
        this._onMouseDown = null,
        this._onMouseMove = null,
        this._onMouseUp = null,
        this._onMouseOut = null,
        this._onMouseOver = null,
        this._onMouseWheel = null,
        this._wheelEvent = null
    },
    c.Mouse.NO_BUTTON = -1,
    c.Mouse.LEFT_BUTTON = 0,
    c.Mouse.MIDDLE_BUTTON = 1,
    c.Mouse.RIGHT_BUTTON = 2,
    c.Mouse.BACK_BUTTON = 3,
    c.Mouse.FORWARD_BUTTON = 4,
    c.Mouse.WHEEL_UP = 1,
    c.Mouse.WHEEL_DOWN = -1,
    c.Mouse.prototype = {
        start: function() {
            if ((!this.game.device.android || this.game.device.chrome !== !1) && null === this._onMouseDown) {
                var b = this;
                this._onMouseDown = function(a) {
                    return b.onMouseDown(a)
                },
                this._onMouseMove = function(a) {
                    return b.onMouseMove(a)
                },
                this._onMouseUp = function(a) {
                    return b.onMouseUp(a)
                },
                this._onMouseUpGlobal = function(a) {
                    return b.onMouseUpGlobal(a)
                },
                this._onMouseOutGlobal = function(a) {
                    return b.onMouseOutGlobal(a)
                },
                this._onMouseOut = function(a) {
                    return b.onMouseOut(a)
                },
                this._onMouseOver = function(a) {
                    return b.onMouseOver(a)
                },
                this._onMouseWheel = function(a) {
                    return b.onMouseWheel(a)
                };
                var c = this.game.canvas;
                c.addEventListener("mousedown", this._onMouseDown, !0),
                c.addEventListener("mousemove", this._onMouseMove, !0),
                c.addEventListener("mouseup", this._onMouseUp, !0),
                this.game.device.cocoonJS || (window.addEventListener("mouseup", this._onMouseUpGlobal, !0), window.addEventListener("mouseout", this._onMouseOutGlobal, !0), c.addEventListener("mouseover", this._onMouseOver, !0), c.addEventListener("mouseout", this._onMouseOut, !0));
                var d = this.game.device.wheelEvent;
                d && (c.addEventListener(d, this._onMouseWheel, !0), "mousewheel" === d ? this._wheelEvent = new a((-.025), 1) : "DOMMouseScroll" === d && (this._wheelEvent = new a(1, 1)))
            }
        },
        onMouseDown: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.mouseDownCallback && this.mouseDownCallback.call(this.callbackContext, a),
            this.input.enabled && this.enabled && (a.identifier = 0, this.input.mousePointer.start(a))
        },
        onMouseMove: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.mouseMoveCallback && this.mouseMoveCallback.call(this.callbackContext, a),
            this.input.enabled && this.enabled && (a.identifier = 0, this.input.mousePointer.move(a))
        },
        onMouseUp: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, a),
            this.input.enabled && this.enabled && (a.identifier = 0, this.input.mousePointer.stop(a))
        },
        onMouseUpGlobal: function(a) {
            this.input.mousePointer.withinGame || (this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, a), a.identifier = 0, this.input.mousePointer.stop(a))
        },
        onMouseOutGlobal: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.input.mousePointer.withinGame = !1,
            this.input.enabled && this.enabled && (this.input.mousePointer.stop(a), this.input.mousePointer.leftButton.stop(a), this.input.mousePointer.rightButton.stop(a))
        },
        onMouseOut: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.input.mousePointer.withinGame = !1,
            this.mouseOutCallback && this.mouseOutCallback.call(this.callbackContext, a),
            this.input.enabled && this.enabled && this.stopOnGameOut && (a.identifier = 0, this.input.mousePointer.stop(a))
        },
        onMouseOver: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.input.mousePointer.withinGame = !0,
            this.mouseOverCallback && this.mouseOverCallback.call(this.callbackContext, a)
        },
        onMouseWheel: function(a) {
            this._wheelEvent && (a = this._wheelEvent.bindEvent(a)),
            this.event = a,
            this.capture && a.preventDefault(),
            this.wheelDelta = c.Math.clamp(-a.deltaY, -1, 1),
            this.mouseWheelCallback && this.mouseWheelCallback.call(this.callbackContext, a)
        },
        requestPointerLock: function() {
            if (this.game.device.pointerLock) {
                var a = this.game.canvas;
                a.requestPointerLock = a.requestPointerLock || a.mozRequestPointerLock || a.webkitRequestPointerLock,
                a.requestPointerLock();
                var b = this;
                this._pointerLockChange = function(a) {
                    return b.pointerLockChange(a)
                },
                document.addEventListener("pointerlockchange", this._pointerLockChange, !0),
                document.addEventListener("mozpointerlockchange", this._pointerLockChange, !0),
                document.addEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
            }
        },
        pointerLockChange: function(a) {
            var b = this.game.canvas;
            document.pointerLockElement === b || document.mozPointerLockElement === b || document.webkitPointerLockElement === b ? (this.locked = !0, this.pointerLock.dispatch(!0, a)) : (this.locked = !1, this.pointerLock.dispatch(!1, a))
        },
        releasePointerLock: function() {
            document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock,
            document.exitPointerLock(),
            document.removeEventListener("pointerlockchange", this._pointerLockChange, !0),
            document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0),
            document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
        },
        stop: function() {
            var a = this.game.canvas;
            a.removeEventListener("mousedown", this._onMouseDown, !0),
            a.removeEventListener("mousemove", this._onMouseMove, !0),
            a.removeEventListener("mouseup", this._onMouseUp, !0),
            a.removeEventListener("mouseover", this._onMouseOver, !0),
            a.removeEventListener("mouseout", this._onMouseOut, !0);
            var b = this.game.device.wheelEvent;
            b && a.removeEventListener(b, this._onMouseWheel, !0),
            window.removeEventListener("mouseup", this._onMouseUpGlobal, !0),
            window.removeEventListener("mouseout", this._onMouseOutGlobal, !0),
            document.removeEventListener("pointerlockchange", this._pointerLockChange, !0),
            document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0),
            document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
        }
    },
    c.Mouse.prototype.constructor = c.Mouse,
    a.prototype = {},
    a.prototype.constructor = a,
    a.prototype.bindEvent = function(b) {
        if (!a._stubsGenerated && b) {
            var c = function(a) {
                return function() {
                    var b = this.originalEvent[a];
                    return "function" != typeof b ? b : b.bind(this.originalEvent)
                }
            };
            for (var d in b)
                d in a.prototype || Object.defineProperty(a.prototype, d, {
                    get: c(d)
                });
            a._stubsGenerated = !0
        }
        return this.originalEvent = b, this
    },
    Object.defineProperties(a.prototype, {
        type: {
            value: "wheel"
        },
        deltaMode: {
            get: function() {
                return this._deltaMode
            }
        },
        deltaY: {
            get: function() {
                return this._scaleFactor * (this.originalEvent.wheelDelta || this.originalEvent.detail) || 0
            }
        },
        deltaX: {
            get: function() {
                return this._scaleFactor * this.originalEvent.wheelDeltaX || 0
            }
        },
        deltaZ: {
            value: 0
        }
    }),
    c.MSPointer = function(a) {
        this.game = a,
        this.input = a.input,
        this.callbackContext = this.game,
        this.pointerDownCallback = null,
        this.pointerMoveCallback = null,
        this.pointerUpCallback = null,
        this.capture = !0,
        this.button = -1,
        this.event = null,
        this.enabled = !0,
        this._onMSPointerDown = null,
        this._onMSPointerMove = null,
        this._onMSPointerUp = null,
        this._onMSPointerUpGlobal = null,
        this._onMSPointerOut = null,
        this._onMSPointerOver = null
    },
    c.MSPointer.prototype = {
        start: function() {
            if (null === this._onMSPointerDown) {
                var a = this;
                if (this.game.device.mspointer) {
                    this._onMSPointerDown = function(b) {
                        return a.onPointerDown(b)
                    },
                    this._onMSPointerMove = function(b) {
                        return a.onPointerMove(b)
                    },
                    this._onMSPointerUp = function(b) {
                        return a.onPointerUp(b)
                    },
                    this._onMSPointerUpGlobal = function(b) {
                        return a.onPointerUpGlobal(b)
                    },
                    this._onMSPointerOut = function(b) {
                        return a.onPointerOut(b)
                    },
                    this._onMSPointerOver = function(b) {
                        return a.onPointerOver(b)
                    };
                    var b = this.game.canvas;
                    b.addEventListener("MSPointerDown", this._onMSPointerDown, !1),
                    b.addEventListener("MSPointerMove", this._onMSPointerMove, !1),
                    b.addEventListener("MSPointerUp", this._onMSPointerUp, !1),
                    b.addEventListener("pointerdown", this._onMSPointerDown, !1),
                    b.addEventListener("pointermove", this._onMSPointerMove, !1),
                    b.addEventListener("pointerup", this._onMSPointerUp, !1),
                    b.style["-ms-content-zooming"] = "none",
                    b.style["-ms-touch-action"] = "none",
                    this.game.device.cocoonJS || (window.addEventListener("MSPointerUp", this._onMSPointerUpGlobal, !0), b.addEventListener("MSPointerOver", this._onMSPointerOver, !0), b.addEventListener("MSPointerOut", this._onMSPointerOut, !0), window.addEventListener("pointerup", this._onMSPointerUpGlobal, !0), b.addEventListener("pointerover", this._onMSPointerOver, !0), b.addEventListener("pointerout", this._onMSPointerOut, !0))
                }
            }
        },
        onPointerDown: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.pointerDownCallback && this.pointerDownCallback.call(this.callbackContext, a),
            this.input.enabled && this.enabled && (a.identifier = a.pointerId, "mouse" === a.pointerType || 4 === a.pointerType ? this.input.mousePointer.start(a) : this.input.startPointer(a))
        },
        onPointerMove: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.pointerMoveCallback && this.pointerMoveCallback.call(this.callbackContext, a),
            this.input.enabled && this.enabled && (a.identifier = a.pointerId, "mouse" === a.pointerType || 4 === a.pointerType ? this.input.mousePointer.move(a) : this.input.updatePointer(a))
        },
        onPointerUp: function(a) {
            this.event = a,
            this.capture && a.preventDefault(),
            this.pointerUpCallback && this.pointerUpCallback.call(this.callbackContext, a),
            this.input.enabled && this.enabled && (a.identifier = a.pointerId, "mouse" === a.pointerType || 4 === a.pointerType ? this.input.mousePointer.stop(a) : this.input.stopPointer(a));
        },
        onPointerUpGlobal: function(a) {
            if ("mouse" !== a.pointerType && 4 !== a.pointerType || this.input.mousePointer.withinGame) {
                var b = this.input.getPointerFromIdentifier(a.identifier);
                b && b.withinGame && this.onPointerUp(a)
            } else
                this.onPointerUp(a)
        },
        onPointerOut: function(a) {
            if (this.event = a, this.capture && a.preventDefault(), "mouse" === a.pointerType || 4 === a.pointerType)
                this.input.mousePointer.withinGame = !1;
            else {
                var b = this.input.getPointerFromIdentifier(a.identifier);
                b && (b.withinGame = !1)
            }
            this.input.mouse.mouseOutCallback && this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext, a),
            this.input.enabled && this.enabled && this.input.mouse.stopOnGameOut && (a.identifier = 0, b ? b.stop(a) : this.input.mousePointer.stop(a))
        },
        onPointerOver: function(a) {
            if (this.event = a, this.capture && a.preventDefault(), "mouse" === a.pointerType || 4 === a.pointerType)
                this.input.mousePointer.withinGame = !0;
            else {
                var b = this.input.getPointerFromIdentifier(a.identifier);
                b && (b.withinGame = !0)
            }
            this.input.mouse.mouseOverCallback && this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext, a)
        },
        stop: function() {
            var a = this.game.canvas;
            a.removeEventListener("MSPointerDown", this._onMSPointerDown, !1),
            a.removeEventListener("MSPointerMove", this._onMSPointerMove, !1),
            a.removeEventListener("MSPointerUp", this._onMSPointerUp, !1),
            a.removeEventListener("pointerdown", this._onMSPointerDown, !1),
            a.removeEventListener("pointermove", this._onMSPointerMove, !1),
            a.removeEventListener("pointerup", this._onMSPointerUp, !1),
            window.removeEventListener("MSPointerUp", this._onMSPointerUpGlobal, !0),
            a.removeEventListener("MSPointerOver", this._onMSPointerOver, !0),
            a.removeEventListener("MSPointerOut", this._onMSPointerOut, !0),
            window.removeEventListener("pointerup", this._onMSPointerUpGlobal, !0),
            a.removeEventListener("pointerover", this._onMSPointerOver, !0),
            a.removeEventListener("pointerout", this._onMSPointerOut, !0)
        }
    },
    c.MSPointer.prototype.constructor = c.MSPointer,
    c.DeviceButton = function(a, b) {
        this.parent = a,
        this.game = a.game,
        this.event = null,
        this.isDown = !1,
        this.isUp = !0,
        this.timeDown = 0,
        this.timeUp = 0,
        this.repeats = 0,
        this.altKey = !1,
        this.shiftKey = !1,
        this.ctrlKey = !1,
        this.value = 0,
        this.buttonCode = b,
        this.onDown = new c.Signal,
        this.onUp = new c.Signal,
        this.onFloat = new c.Signal
    },
    c.DeviceButton.prototype = {
        start: function(a, b) {
            this.isDown || (this.isDown = !0, this.isUp = !1, this.timeDown = this.game.time.time, this.repeats = 0, this.event = a, this.value = b, a && (this.altKey = a.altKey, this.shiftKey = a.shiftKey, this.ctrlKey = a.ctrlKey), this.onDown.dispatch(this, b))
        },
        stop: function(a, b) {
            this.isUp || (this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.event = a, this.value = b, a && (this.altKey = a.altKey, this.shiftKey = a.shiftKey, this.ctrlKey = a.ctrlKey), this.onUp.dispatch(this, b))
        },
        padFloat: function(a) {
            this.value = a,
            this.onFloat.dispatch(this, a)
        },
        justPressed: function(a) {
            return a = a || 250, this.isDown && this.timeDown + a > this.game.time.time
        },
        justReleased: function(a) {
            return a = a || 250, this.isUp && this.timeUp + a > this.game.time.time
        },
        reset: function() {
            this.isDown = !1,
            this.isUp = !0,
            this.timeDown = this.game.time.time,
            this.repeats = 0,
            this.altKey = !1,
            this.shiftKey = !1,
            this.ctrlKey = !1
        },
        destroy: function() {
            this.onDown.dispose(),
            this.onUp.dispose(),
            this.onFloat.dispose(),
            this.parent = null,
            this.game = null
        }
    },
    c.DeviceButton.prototype.constructor = c.DeviceButton,
    Object.defineProperty(c.DeviceButton.prototype, "duration", {
        get: function() {
            return this.isUp ? -1 : this.game.time.time - this.timeDown
        }
    }),
    c.Pointer = function(a, b, d) {
        this.game = a,
        this.id = b,
        this.type = c.POINTER,
        this.exists = !0,
        this.identifier = 0,
        this.pointerId = null,
        this.pointerMode = d || c.PointerMode.CURSOR | c.PointerMode.CONTACT,
        this.target = null,
        this.button = null,
        this.leftButton = new c.DeviceButton(this, c.Pointer.LEFT_BUTTON),
        this.middleButton = new c.DeviceButton(this, c.Pointer.MIDDLE_BUTTON),
        this.rightButton = new c.DeviceButton(this, c.Pointer.RIGHT_BUTTON),
        this.backButton = new c.DeviceButton(this, c.Pointer.BACK_BUTTON),
        this.forwardButton = new c.DeviceButton(this, c.Pointer.FORWARD_BUTTON),
        this.eraserButton = new c.DeviceButton(this, c.Pointer.ERASER_BUTTON),
        this._holdSent = !1,
        this._history = [],
        this._nextDrop = 0,
        this._stateReset = !1,
        this.withinGame = !1,
        this.clientX = -1,
        this.clientY = -1,
        this.pageX = -1,
        this.pageY = -1,
        this.screenX = -1,
        this.screenY = -1,
        this.rawMovementX = 0,
        this.rawMovementY = 0,
        this.movementX = 0,
        this.movementY = 0,
        this.x = -1,
        this.y = -1,
        this.isMouse = 0 === b,
        this.isDown = !1,
        this.isUp = !0,
        this.timeDown = 0,
        this.timeUp = 0,
        this.previousTapTime = 0,
        this.totalTouches = 0,
        this.msSinceLastClick = Number.MAX_VALUE,
        this.targetObject = null,
        this.interactiveCandidates = [],
        this.active = !1,
        this.dirty = !1,
        this.position = new c.Point,
        this.positionDown = new c.Point,
        this.positionUp = new c.Point,
        this.circle = new c.Circle(0, 0, 44),
        this._clickTrampolines = null,
        this._trampolineTargetObject = null
    },
    c.Pointer.NO_BUTTON = 0,
    c.Pointer.LEFT_BUTTON = 1,
    c.Pointer.RIGHT_BUTTON = 2,
    c.Pointer.MIDDLE_BUTTON = 4,
    c.Pointer.BACK_BUTTON = 8,
    c.Pointer.FORWARD_BUTTON = 16,
    c.Pointer.ERASER_BUTTON = 32,
    c.Pointer.prototype = {
        resetButtons: function() {
            this.isDown = !1,
            this.isUp = !0,
            this.isMouse && (this.leftButton.reset(), this.middleButton.reset(), this.rightButton.reset(), this.backButton.reset(), this.forwardButton.reset(), this.eraserButton.reset())
        },
        processButtonsDown: function(a, b) {
            c.Pointer.LEFT_BUTTON & a && this.leftButton.start(b),
            c.Pointer.RIGHT_BUTTON & a && this.rightButton.start(b),
            c.Pointer.MIDDLE_BUTTON & a && this.middleButton.start(b),
            c.Pointer.BACK_BUTTON & a && this.backButton.start(b),
            c.Pointer.FORWARD_BUTTON & a && this.forwardButton.start(b),
            c.Pointer.ERASER_BUTTON & a && this.eraserButton.start(b)
        },
        processButtonsUp: function(a, b) {
            a === c.Mouse.LEFT_BUTTON && this.leftButton.stop(b),
            a === c.Mouse.RIGHT_BUTTON && this.rightButton.stop(b),
            a === c.Mouse.MIDDLE_BUTTON && this.middleButton.stop(b),
            a === c.Mouse.BACK_BUTTON && this.backButton.stop(b),
            a === c.Mouse.FORWARD_BUTTON && this.forwardButton.stop(b),
            5 === a && this.eraserButton.stop(b)
        },
        updateButtons: function(a) {
            this.button = a.button;
            var b = "down" === a.type.toLowerCase().substr(-4);
            void 0 !== a.buttons ? b ? this.processButtonsDown(a.buttons, a) : this.processButtonsUp(a.button, a) : b ? this.leftButton.start(a) : (this.leftButton.stop(a), this.rightButton.stop(a)),
            1 === a.buttons && a.ctrlKey && this.leftButton.isDown && (this.leftButton.stop(a), this.rightButton.start(a)),
            this.isUp = !0,
            this.isDown = !1,
            (this.leftButton.isDown || this.rightButton.isDown || this.middleButton.isDown || this.backButton.isDown || this.forwardButton.isDown || this.eraserButton.isDown) && (this.isUp = !1, this.isDown = !0)
        },
        start: function(a) {
            var b = this.game.input;
            return a.pointerId && (this.pointerId = a.pointerId), this.identifier = a.identifier, this.target = a.target, this.isMouse ? this.updateButtons(a) : (this.isDown = !0, this.isUp = !1), this.active = !0, this.withinGame = !0, this.dirty = !1, this._history = [], this._clickTrampolines = null, this._trampolineTargetObject = null, this.msSinceLastClick = this.game.time.time - this.timeDown, this.timeDown = this.game.time.time, this._holdSent = !1, this.move(a, !0), this.positionDown.setTo(this.x, this.y), (b.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || b.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || b.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === b.totalActivePointers) && (b.x = this.x, b.y = this.y, b.position.setTo(this.x, this.y), b.onDown.dispatch(this, a), b.resetSpeed(this.x, this.y)), this._stateReset = !1, this.totalTouches++, null !== this.targetObject && this.targetObject._touchedHandler(this), this
        },
        update: function() {
            var a = this.game.input;
            this.active && (this.dirty && (a.interactiveItems.total > 0 && this.processInteractiveObjects(!1), this.dirty = !1), this._holdSent === !1 && this.duration >= a.holdRate && ((a.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || a.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || a.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === a.totalActivePointers) && a.onHold.dispatch(this), this._holdSent = !0), a.recordPointerHistory && this.game.time.time >= this._nextDrop && (this._nextDrop = this.game.time.time + a.recordRate, this._history.push({
                x: this.position.x,
                y: this.position.y
            }), this._history.length > a.recordLimit && this._history.shift()))
        },
        move: function(a, b) {
            var d = this.game.input;
            if (!d.pollLocked) {
                if (void 0 === b && (b = !1), void 0 !== a.button && (this.button = a.button), b && this.isMouse && this.updateButtons(a), this.clientX = a.clientX, this.clientY = a.clientY, this.pageX = a.pageX, this.pageY = a.pageY, this.screenX = a.screenX, this.screenY = a.screenY, this.isMouse && d.mouse.locked && !b && (this.rawMovementX = a.movementX || a.mozMovementX || a.webkitMovementX || 0, this.rawMovementY = a.movementY || a.mozMovementY || a.webkitMovementY || 0, this.movementX += this.rawMovementX, this.movementY += this.rawMovementY), this.x = (this.pageX - this.game.scale.offset.x) * d.scale.x, this.y = (this.pageY - this.game.scale.offset.y) * d.scale.y, this.position.setTo(this.x, this.y), this.circle.x = this.x, this.circle.y = this.y, (d.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || d.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || d.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === d.totalActivePointers) && (d.activePointer = this, d.x = this.x, d.y = this.y, d.position.setTo(d.x, d.y), d.circle.x = d.x, d.circle.y = d.y), this.withinGame = this.game.scale.bounds.contains(this.pageX, this.pageY), this.game.paused)
                    return this;
                for (var e = d.moveCallbacks.length; e--;)
                    d.moveCallbacks[e].callback.call(d.moveCallbacks[e].context, this, this.x, this.y, b);
                return null !== this.targetObject && this.targetObject.isDragged === !0 ? this.targetObject.update(this) === !1 && (this.targetObject = null) : d.interactiveItems.total > 0 && this.processInteractiveObjects(b), this
            }
        },
        processInteractiveObjects: function(a) {
            var b = 0,
                c = -1,
                d = null,
                e = this.game.input.interactiveItems.first;
            for (this.interactiveCandidates = []; e;)
                e.checked = !1,
                e.validForInput(c, b, !1) && (e.checked = !0, (a && e.checkPointerDown(this, !0) || !a && e.checkPointerOver(this, !0)) && (b = e.sprite.renderOrderID, c = e.priorityID, d = e, this.interactiveCandidates.push(e))),
                e = this.game.input.interactiveItems.next;
            for (e = this.game.input.interactiveItems.first; e;)
                !e.checked && e.validForInput(c, b, !0) && (a && e.checkPointerDown(this, !1) || !a && e.checkPointerOver(this, !1)) && (b = e.sprite.renderOrderID, c = e.priorityID, d = e, this.interactiveCandidates.push(e)),
                e = this.game.input.interactiveItems.next;
            return this.game.input.customCandidateHandler && (d = this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext, this, this.interactiveCandidates, d)), this.swapTarget(d, !1), null !== this.targetObject
        },
        swapTarget: function(a, b) {
            void 0 === b && (b = !1),
            null === a ? this.targetObject && (this.targetObject._pointerOutHandler(this, b), this.targetObject = null) : null === this.targetObject ? (this.targetObject = a, a._pointerOverHandler(this, b)) : this.targetObject === a ? a.update(this) === !1 && (this.targetObject = null) : (this.targetObject._pointerOutHandler(this, b), this.targetObject = a, this.targetObject._pointerOverHandler(this, b))
        },
        leave: function(a) {
            this.withinGame = !1,
            this.move(a, !1)
        },
        stop: function(a) {
            var b = this.game.input;
            return this._stateReset && this.withinGame ? void a.preventDefault() : (this.timeUp = this.game.time.time, (b.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || b.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || b.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === b.totalActivePointers) && (b.onUp.dispatch(this, a), this.duration >= 0 && this.duration <= b.tapRate && (this.timeUp - this.previousTapTime < b.doubleTapRate ? b.onTap.dispatch(this, !0) : b.onTap.dispatch(this, !1), this.previousTapTime = this.timeUp)), this.isMouse ? this.updateButtons(a) : (this.isDown = !1, this.isUp = !0), this.id > 0 && (this.active = !1), this.withinGame = this.game.scale.bounds.contains(a.pageX, a.pageY), this.pointerId = null, this.identifier = null, this.positionUp.setTo(this.x, this.y), this.isMouse === !1 && b.currentPointers--, b.interactiveItems.callAll("_releasedHandler", this), this._clickTrampolines && (this._trampolineTargetObject = this.targetObject), this.targetObject = null, this)
        },
        justPressed: function(a) {
            return a = a || this.game.input.justPressedRate, this.isDown === !0 && this.timeDown + a > this.game.time.time
        },
        justReleased: function(a) {
            return a = a || this.game.input.justReleasedRate, this.isUp && this.timeUp + a > this.game.time.time
        },
        addClickTrampoline: function(a, b, c, d) {
            if (this.isDown) {
                for (var e = this._clickTrampolines = this._clickTrampolines || [], f = 0; f < e.length; f++)
                    if (e[f].name === a) {
                        e.splice(f, 1);
                        break
                    }
                e.push({
                    name: a,
                    targetObject: this.targetObject,
                    callback: b,
                    callbackContext: c,
                    callbackArgs: d
                })
            }
        },
        processClickTrampolines: function() {
            var a = this._clickTrampolines;
            if (a) {
                for (var b = 0; b < a.length; b++) {
                    var c = a[b];
                    c.targetObject === this._trampolineTargetObject && c.callback.apply(c.callbackContext, c.callbackArgs)
                }
                this._clickTrampolines = null,
                this._trampolineTargetObject = null
            }
        },
        reset: function() {
            this.isMouse === !1 && (this.active = !1),
            this.pointerId = null,
            this.identifier = null,
            this.dirty = !1,
            this.totalTouches = 0,
            this._holdSent = !1,
            this._history.length = 0,
            this._stateReset = !0,
            this.resetButtons(),
            this.targetObject && this.targetObject._releasedHandler(this),
            this.targetObject = null
        },
        resetMovement: function() {
            this.movementX = 0,
            this.movementY = 0
        }
    },
    c.Pointer.prototype.constructor = c.Pointer,
    Object.defineProperty(c.Pointer.prototype, "duration", {
        get: function() {
            return this.isUp ? -1 : this.game.time.time - this.timeDown
        }
    }),
    Object.defineProperty(c.Pointer.prototype, "worldX", {
        get: function() {
            return this.game.world.camera.x + this.x
        }
    }),
    Object.defineProperty(c.Pointer.prototype, "worldY", {
        get: function() {
            return this.game.world.camera.y + this.y
        }
    }),
    c.PointerMode = {
        CURSOR: 1,
        CONTACT: 2
    },
    c.Touch = function(a) {
        this.game = a,
        this.enabled = !0,
        this.touchLockCallbacks = [],
        this.callbackContext = this.game,
        this.touchStartCallback = null,
        this.touchMoveCallback = null,
        this.touchEndCallback = null,
        this.touchEnterCallback = null,
        this.touchLeaveCallback = null,
        this.touchCancelCallback = null,
        this.preventDefault = !0,
        this.event = null,
        this._onTouchStart = null,
        this._onTouchMove = null,
        this._onTouchEnd = null,
        this._onTouchEnter = null,
        this._onTouchLeave = null,
        this._onTouchCancel = null,
        this._onTouchMove = null
    },
    c.Touch.prototype = {
        start: function() {
            if (null === this._onTouchStart) {
                var a = this;
                this.game.device.touch && (this._onTouchStart = function(b) {
                    return a.onTouchStart(b)
                }, this._onTouchMove = function(b) {
                    return a.onTouchMove(b)
                }, this._onTouchEnd = function(b) {
                    return a.onTouchEnd(b)
                }, this._onTouchEnter = function(b) {
                    return a.onTouchEnter(b)
                }, this._onTouchLeave = function(b) {
                    return a.onTouchLeave(b)
                }, this._onTouchCancel = function(b) {
                    return a.onTouchCancel(b)
                }, this.game.canvas.addEventListener("touchstart", this._onTouchStart, !1), this.game.canvas.addEventListener("touchmove", this._onTouchMove, !1), this.game.canvas.addEventListener("touchend", this._onTouchEnd, !1), this.game.canvas.addEventListener("touchcancel", this._onTouchCancel, !1), this.game.device.cocoonJS || (this.game.canvas.addEventListener("touchenter", this._onTouchEnter, !1), this.game.canvas.addEventListener("touchleave", this._onTouchLeave, !1)))
            }
        },
        consumeDocumentTouches: function() {
            this._documentTouchMove = function(a) {
                a.preventDefault()
            },
            document.addEventListener("touchmove", this._documentTouchMove, !1)
        },
        addTouchLockCallback: function(a, b, c) {
            void 0 === c && (c = !1),
            this.touchLockCallbacks.push({
                callback: a,
                context: b,
                onEnd: c
            })
        },
        removeTouchLockCallback: function(a, b) {
            for (var c = this.touchLockCallbacks.length; c--;)
                if (this.touchLockCallbacks[c].callback === a && this.touchLockCallbacks[c].context === b)
                    return this.touchLockCallbacks.splice(c, 1), !0;
            return !1
        },
        onTouchStart: function(a) {
            for (var b = this.touchLockCallbacks.length; b--;) {
                var c = this.touchLockCallbacks[b];
                !c.onEnd && c.callback.call(c.context, this, a) && this.touchLockCallbacks.splice(b, 1)
            }
            if (this.event = a, this.game.input.enabled && this.enabled) {
                this.touchStartCallback && this.touchStartCallback.call(this.callbackContext, a),
                this.preventDefault && a.preventDefault();
                for (var b = 0; b < a.changedTouches.length; b++)
                    this.game.input.startPointer(a.changedTouches[b])
            }
        },
        onTouchCancel: function(a) {
            if (this.event = a, this.touchCancelCallback && this.touchCancelCallback.call(this.callbackContext, a), this.game.input.enabled && this.enabled) {
                this.preventDefault && a.preventDefault();
                for (var b = 0; b < a.changedTouches.length; b++)
                    this.game.input.stopPointer(a.changedTouches[b])
            }
        },
        onTouchEnter: function(a) {
            this.event = a,
            this.touchEnterCallback && this.touchEnterCallback.call(this.callbackContext, a),
            this.game.input.enabled && this.enabled && this.preventDefault && a.preventDefault()
        },
        onTouchLeave: function(a) {
            this.event = a,
            this.touchLeaveCallback && this.touchLeaveCallback.call(this.callbackContext, a),
            this.preventDefault && a.preventDefault()
        },
        onTouchMove: function(a) {
            this.event = a,
            this.touchMoveCallback && this.touchMoveCallback.call(this.callbackContext, a),
            this.preventDefault && a.preventDefault();
            for (var b = 0; b < a.changedTouches.length; b++)
                this.game.input.updatePointer(a.changedTouches[b])
        },
        onTouchEnd: function(a) {
            for (var b = this.touchLockCallbacks.length; b--;) {
                var c = this.touchLockCallbacks[b];
                c.onEnd && c.callback.call(c.context, this, a) && this.touchLockCallbacks.splice(b, 1)
            }
            this.event = a,
            this.touchEndCallback && this.touchEndCallback.call(this.callbackContext, a),
            this.preventDefault && a.preventDefault();
            for (var b = 0; b < a.changedTouches.length; b++)
                this.game.input.stopPointer(a.changedTouches[b])
        },
        stop: function() {
            this.game.device.touch && (this.game.canvas.removeEventListener("touchstart", this._onTouchStart), this.game.canvas.removeEventListener("touchmove", this._onTouchMove), this.game.canvas.removeEventListener("touchend", this._onTouchEnd), this.game.canvas.removeEventListener("touchenter", this._onTouchEnter), this.game.canvas.removeEventListener("touchleave", this._onTouchLeave), this.game.canvas.removeEventListener("touchcancel", this._onTouchCancel))
        }
    },
    c.Touch.prototype.constructor = c.Touch,
    c.InputHandler = function(a) {
        this.sprite = a,
        this.game = a.game,
        this.enabled = !1,
        this.checked = !1,
        this.priorityID = 0,
        this.useHandCursor = !1,
        this._setHandCursor = !1,
        this.isDragged = !1,
        this.allowHorizontalDrag = !0,
        this.allowVerticalDrag = !0,
        this.bringToTop = !1,
        this.snapOffset = null,
        this.snapOnDrag = !1,
        this.snapOnRelease = !1,
        this.snapX = 0,
        this.snapY = 0,
        this.snapOffsetX = 0,
        this.snapOffsetY = 0,
        this.pixelPerfectOver = !1,
        this.pixelPerfectClick = !1,
        this.pixelPerfectAlpha = 255,
        this.draggable = !1,
        this.boundsRect = null,
        this.boundsSprite = null,
        this.scaleLayer = !1,
        this.dragOffset = new c.Point,
        this.dragFromCenter = !1,
        this.dragStopBlocksInputUp = !1,
        this.dragStartPoint = new c.Point,
        this.dragDistanceThreshold = 0,
        this.dragTimeThreshold = 0,
        this.downPoint = new c.Point,
        this.snapPoint = new c.Point,
        this._dragPoint = new c.Point,
        this._dragPhase = !1,
        this._pendingDrag = !1,
        this._dragTimePass = !1,
        this._dragDistancePass = !1,
        this._wasEnabled = !1,
        this._tempPoint = new c.Point,
        this._pointerData = [],
        this._pointerData.push({
            id: 0,
            x: 0,
            y: 0,
            camX: 0,
            camY: 0,
            isDown: !1,
            isUp: !1,
            isOver: !1,
            isOut: !1,
            timeOver: 0,
            timeOut: 0,
            timeDown: 0,
            timeUp: 0,
            downDuration: 0,
            isDragged: !1
        })
    },
    c.InputHandler.prototype = {
        start: function(a, b) {
            if (a = a || 0, void 0 === b && (b = !1), this.enabled === !1) {
                this.game.input.interactiveItems.add(this),
                this.useHandCursor = b,
                this.priorityID = a;
                for (var d = 0; d < 10; d++)
                    this._pointerData[d] = {
                        id: d,
                        x: 0,
                        y: 0,
                        isDown: !1,
                        isUp: !1,
                        isOver: !1,
                        isOut: !1,
                        timeOver: 0,
                        timeOut: 0,
                        timeDown: 0,
                        timeUp: 0,
                        downDuration: 0,
                        isDragged: !1
                    };
                this.snapOffset = new c.Point,
                this.enabled = !0,
                this._wasEnabled = !0
            }
            return this.sprite.events.onAddedToGroup.add(this.addedToGroup, this), this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup, this), this.sprite
        },
        addedToGroup: function() {
            this._dragPhase || this._wasEnabled && !this.enabled && this.start()
        },
        removedFromGroup: function() {
            this._dragPhase || (this.enabled ? (this._wasEnabled = !0, this.stop()) : this._wasEnabled = !1)
        },
        reset: function() {
            this.enabled = !1;
            for (var a = 0; a < 10; a++)
                this._pointerData[a] = {
                    id: a,
                    x: 0,
                    y: 0,
                    isDown: !1,
                    isUp: !1,
                    isOver: !1,
                    isOut: !1,
                    timeOver: 0,
                    timeOut: 0,
                    timeDown: 0,
                    timeUp: 0,
                    downDuration: 0,
                    isDragged: !1
                }
        },
        stop: function() {
            this.enabled !== !1 && (this.enabled = !1, this.game.input.interactiveItems.remove(this))
        },
        destroy: function() {
            this.sprite && (this._setHandCursor && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), this.enabled = !1, this.game.input.interactiveItems.remove(this), this._pointerData.length = 0, this.boundsRect = null, this.boundsSprite = null, this.sprite = null)
        },
        validForInput: function(a, b, c) {
            return void 0 === c && (c = !0), !(!this.enabled || 0 === this.sprite.scale.x || 0 === this.sprite.scale.y || this.priorityID < this.game.input.minPriorityID || this.sprite.parent && this.sprite.parent.ignoreChildInput) && (!(!c && (this.pixelPerfectClick || this.pixelPerfectOver)) && (this.priorityID > a || this.priorityID === a && this.sprite.renderOrderID > b))
        },
        isPixelPerfect: function() {
            return this.pixelPerfectClick || this.pixelPerfectOver
        },
        pointerX: function(a) {
            return a = a || 0, this._pointerData[a].x
        },
        pointerY: function(a) {
            return a = a || 0, this._pointerData[a].y
        },
        pointerDown: function(a) {
            return a = a || 0, this._pointerData[a].isDown
        },
        pointerUp: function(a) {
            return a = a || 0, this._pointerData[a].isUp
        },
        pointerTimeDown: function(a) {
            return a = a || 0, this._pointerData[a].timeDown
        },
        pointerTimeUp: function(a) {
            return a = a || 0, this._pointerData[a].timeUp
        },
        pointerOver: function(a) {
            if (!this.enabled)
                return !1;
            if (void 0 === a) {
                for (var b = 0; b < 10; b++)
                    if (this._pointerData[b].isOver)
                        return !0;
                return !1
            }
            return this._pointerData[a].isOver
        },
        pointerOut: function(a) {
            if (!this.enabled)
                return !1;
            if (void 0 !== a)
                return this._pointerData[a].isOut;
            for (var b = 0; b < 10; b++)
                if (this._pointerData[b].isOut)
                    return !0
        },
        pointerTimeOver: function(a) {
            return a = a || 0, this._pointerData[a].timeOver
        },
        pointerTimeOut: function(a) {
            return a = a || 0, this._pointerData[a].timeOut
        },
        pointerDragged: function(a) {
            return a = a || 0, this._pointerData[a].isDragged
        },
        checkPointerDown: function(a, b) {
            return !!(a.isDown && this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && 0 !== this.sprite.worldScale.x && 0 !== this.sprite.worldScale.y) && (!!this.game.input.hitTest(this.sprite, a, this._tempPoint) && (void 0 === b && (b = !1), !(!b && this.pixelPerfectClick) || this.checkPixel(this._tempPoint.x, this._tempPoint.y)))
        },
        checkPointerOver: function(a, b) {
            return !!(this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && 0 !== this.sprite.worldScale.x && 0 !== this.sprite.worldScale.y) && (!!this.game.input.hitTest(this.sprite, a, this._tempPoint) && (void 0 === b && (b = !1), !(!b && this.pixelPerfectOver) || this.checkPixel(this._tempPoint.x, this._tempPoint.y)))
        },
        checkPixel: function(a, b, c) {
            if (this.sprite.texture.baseTexture.source) {
                if (null === a && null === b) {
                    this.game.input.getLocalPosition(this.sprite, c, this._tempPoint);
                    var a = this._tempPoint.x,
                        b = this._tempPoint.y
                }
                if (0 !== this.sprite.anchor.x && (a -= -this.sprite.texture.frame.width * this.sprite.anchor.x), 0 !== this.sprite.anchor.y && (b -= -this.sprite.texture.frame.height * this.sprite.anchor.y), a += this.sprite.texture.frame.x, b += this.sprite.texture.frame.y, this.sprite.texture.trim && (a -= this.sprite.texture.trim.x, b -= this.sprite.texture.trim.y, a < this.sprite.texture.crop.x || a > this.sprite.texture.crop.right || b < this.sprite.texture.crop.y || b > this.sprite.texture.crop.bottom))
                    return this._dx = a, this._dy = b, !1;
                this._dx = a,
                this._dy = b,
                this.game.input.hitContext.clearRect(0, 0, 1, 1),
                this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source, a, b, 1, 1, 0, 0, 1, 1);
                var d = this.game.input.hitContext.getImageData(0, 0, 1, 1);
                if (d.data[3] >= this.pixelPerfectAlpha)
                    return !0
            }
            return !1
        },
        update: function(a) {
            if (null !== this.sprite && void 0 !== this.sprite.parent)
                return this.enabled && this.sprite.visible && this.sprite.parent.visible ? this._pendingDrag ? (this._dragDistancePass || (this._dragDistancePass = c.Math.distance(a.x, a.y, this.downPoint.x, this.downPoint.y) >= this.dragDistanceThreshold), this._dragDistancePass && this._dragTimePass && this.startDrag(a), !0) : this.draggable && this._draggedPointerID === a.id ? this.updateDrag(a, !1) : this._pointerData[a.id].isOver ? this.checkPointerOver(a) ? (this._pointerData[a.id].x = a.x - this.sprite.x, this._pointerData[a.id].y = a.y - this.sprite.y, !0) : (this._pointerOutHandler(a), !1) : void 0 : (this._pointerOutHandler(a), !1)
        },
        _pointerOverHandler: function(a, b) {
            if (null !== this.sprite) {
                var d = this._pointerData[a.id];
                if (d.isOver === !1 || a.dirty) {
                    var e = d.isOver === !1;
                    d.isOver = !0,
                    d.isOut = !1,
                    d.timeOver = this.game.time.time,
                    d.x = a.x - this.sprite.x,
                    d.y = a.y - this.sprite.y,
                    this.useHandCursor && d.isDragged === !1 && (this.game.canvas.style.cursor = "pointer", this._setHandCursor = !0),
                    !b && e && this.sprite && this.sprite.events && this.sprite.events.onInputOver$dispatch(this.sprite, a),
                    this.sprite.parent && this.sprite.parent.type === c.GROUP && this.sprite.parent.onChildInputOver.dispatch(this.sprite, a)
                }
            }
        },
        _pointerOutHandler: function(a, b) {
            if (null !== this.sprite) {
                var d = this._pointerData[a.id];
                d.isOver = !1,
                d.isOut = !0,
                d.timeOut = this.game.time.time,
                this.useHandCursor && d.isDragged === !1 && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1),
                !b && this.sprite && this.sprite.events && (this.sprite.events.onInputOut$dispatch(this.sprite, a), this.sprite && this.sprite.parent && this.sprite.parent.type === c.GROUP && this.sprite.parent.onChildInputOut.dispatch(this.sprite, a))
            }
        },
        _touchedHandler: function(a) {
            if (null !== this.sprite) {
                var b = this._pointerData[a.id];
                if (!b.isDown && b.isOver) {
                    if (this.pixelPerfectClick && !this.checkPixel(null, null, a))
                        return;
                    if (b.isDown = !0, b.isUp = !1, b.timeDown = this.game.time.time, this.downPoint.set(a.x, a.y), a.dirty = !0, this.sprite && this.sprite.events && (this.sprite.events.onInputDown$dispatch(this.sprite, a), this.sprite && this.sprite.parent && this.sprite.parent.type === c.GROUP && this.sprite.parent.onChildInputDown.dispatch(this.sprite, a), null === this.sprite))
                        return;
                    this.draggable && this.isDragged === !1 && (0 === this.dragTimeThreshold && 0 === this.dragDistanceThreshold ? this.startDrag(a) : (this._pendingDrag = !0, this._dragDistancePass = 0 === this.dragDistanceThreshold, this.dragTimeThreshold > 0 ? (this._dragTimePass = !1, this.game.time.events.add(this.dragTimeThreshold, this.dragTimeElapsed, this, a)) : this._dragTimePass = !0)),
                    this.bringToTop && this.sprite.bringToTop()
                }
            }
        },
        dragTimeElapsed: function(a) {
            this._dragTimePass = !0,
            this._pendingDrag && this.sprite && this._dragDistancePass && this.startDrag(a)
        },
        _releasedHandler: function(a) {
            if (null !== this.sprite) {
                var b = this._pointerData[a.id];
                if (b.isDown && a.isUp) {
                    b.isDown = !1,
                    b.isUp = !0,
                    b.timeUp = this.game.time.time,
                    b.downDuration = b.timeUp - b.timeDown;
                    var d = this.checkPointerOver(a);
                    this.sprite && this.sprite.events && (this.dragStopBlocksInputUp && (!this.dragStopBlocksInputUp || this.draggable && this.isDragged && this._draggedPointerID === a.id) || this.sprite.events.onInputUp$dispatch(this.sprite, a, d), this.sprite && this.sprite.parent && this.sprite.parent.type === c.GROUP && this.sprite.parent.onChildInputUp.dispatch(this.sprite, a, d), d && (d = this.checkPointerOver(a))),
                    b.isOver = d,
                    !d && this.useHandCursor && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1),
                    a.dirty = !0,
                    this._pendingDrag = !1,
                    this.draggable && this.isDragged && this._draggedPointerID === a.id && this.stopDrag(a)
                }
            }
        },
        updateDrag: function(a, b) {
            if (void 0 === b && (b = !1), a.isUp)
                return this.stopDrag(a), !1;
            var c = this.globalToLocalX(a.x) + this._dragPoint.x + this.dragOffset.x,
                d = this.globalToLocalY(a.y) + this._dragPoint.y + this.dragOffset.y;
            if (this.sprite.fixedToCamera)
                this.allowHorizontalDrag && (this.sprite.cameraOffset.x = c),
                this.allowVerticalDrag && (this.sprite.cameraOffset.y = d),
                this.boundsRect && this.checkBoundsRect(),
                this.boundsSprite && this.checkBoundsSprite(),
                this.snapOnDrag && (this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY, this.snapPoint.set(this.sprite.cameraOffset.x, this.sprite.cameraOffset.y));
            else {
                var e = this.game.camera.x - this._pointerData[a.id].camX,
                    f = this.game.camera.y - this._pointerData[a.id].camY;
                this.allowHorizontalDrag && (this.sprite.x = c + e),
                this.allowVerticalDrag && (this.sprite.y = d + f),
                this.boundsRect && this.checkBoundsRect(),
                this.boundsSprite && this.checkBoundsSprite(),
                this.snapOnDrag && (this.sprite.x = Math.round((this.sprite.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.y = Math.round((this.sprite.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY, this.snapPoint.set(this.sprite.x, this.sprite.y))
            }
            return this.sprite.events.onDragUpdate.dispatch(this.sprite, a, c, d, this.snapPoint, b), !0
        },
        justOver: function(a, b) {
            return a = a || 0, b = b || 500, this._pointerData[a].isOver && this.overDuration(a) < b
        },
        justOut: function(a, b) {
            return a = a || 0, b = b || 500, this._pointerData[a].isOut && this.game.time.time - this._pointerData[a].timeOut < b
        },
        justPressed: function(a, b) {
            return a = a || 0, b = b || 500, this._pointerData[a].isDown && this.downDuration(a) < b
        },
        justReleased: function(a, b) {
            return a = a || 0, b = b || 500, this._pointerData[a].isUp && this.game.time.time - this._pointerData[a].timeUp < b
        },
        overDuration: function(a) {
            return a = a || 0, this._pointerData[a].isOver ? this.game.time.time - this._pointerData[a].timeOver : -1
        },
        downDuration: function(a) {
            return a = a || 0, this._pointerData[a].isDown ? this.game.time.time - this._pointerData[a].timeDown : -1
        },
        enableDrag: function(a, b, d, e, f, g) {
            void 0 === a && (a = !1),
            void 0 === b && (b = !1),
            void 0 === d && (d = !1),
            void 0 === e && (e = 255),
            void 0 === f && (f = null),
            void 0 === g && (g = null),
            this._dragPoint = new c.Point,
            this.draggable = !0,
            this.bringToTop = b,
            this.dragOffset = new c.Point,
            this.dragFromCenter = a,
            this.pixelPerfectClick = d,
            this.pixelPerfectAlpha = e,
            f && (this.boundsRect = f),
            g && (this.boundsSprite = g)
        },
        disableDrag: function() {
            if (this._pointerData)
                for (var a = 0; a < 10; a++)
                    this._pointerData[a].isDragged = !1;
            this.draggable = !1,
            this.isDragged = !1,
            this._draggedPointerID = -1,
            this._pendingDrag = !1
        },
        startDrag: function(a) {
            var b = this.sprite.x,
                c = this.sprite.y;
            if (this.isDragged = !0, this._draggedPointerID = a.id, this._pointerData[a.id].camX = this.game.camera.x, this._pointerData[a.id].camY = this.game.camera.y, this._pointerData[a.id].isDragged = !0, this.sprite.fixedToCamera) {
                if (this.dragFromCenter) {
                    var d = this.sprite.getBounds();
                    this.sprite.cameraOffset.x = this.globalToLocalX(a.x) + (this.sprite.cameraOffset.x - d.centerX),
                    this.sprite.cameraOffset.y = this.globalToLocalY(a.y) + (this.sprite.cameraOffset.y - d.centerY)
                }
                this._dragPoint.setTo(this.sprite.cameraOffset.x - a.x, this.sprite.cameraOffset.y - a.y)
            } else {
                if (this.dragFromCenter) {
                    var d = this.sprite.getBounds();
                    this.sprite.x = this.globalToLocalX(a.x) + (this.sprite.x - d.centerX),
                    this.sprite.y = this.globalToLocalY(a.y) + (this.sprite.y - d.centerY)
                }
                this._dragPoint.setTo(this.sprite.x - this.globalToLocalX(a.x), this.sprite.y - this.globalToLocalY(a.y))
            }
            this.updateDrag(a, !0),
            this.bringToTop && (this._dragPhase = !0, this.sprite.bringToTop()),
            this.dragStartPoint.set(b, c),
            this.sprite.events.onDragStart$dispatch(this.sprite, a, b, c),
            this._pendingDrag = !1
        },
        globalToLocalX: function(a) {
            return this.scaleLayer && (a -= this.game.scale.grid.boundsFluid.x, a *= this.game.scale.grid.scaleFluidInversed.x), a
        },
        globalToLocalY: function(a) {
            return this.scaleLayer && (a -= this.game.scale.grid.boundsFluid.y, a *= this.game.scale.grid.scaleFluidInversed.y), a
        },
        stopDrag: function(a) {
            this.isDragged = !1,
            this._draggedPointerID = -1,
            this._pointerData[a.id].isDragged = !1,
            this._dragPhase = !1,
            this._pendingDrag = !1,
            this.snapOnRelease && (this.sprite.fixedToCamera ? (this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY) : (this.sprite.x = Math.round((this.sprite.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.y = Math.round((this.sprite.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY)),
            this.sprite.events.onDragStop$dispatch(this.sprite, a),
            this.checkPointerOver(a) === !1 && this._pointerOutHandler(a)
        },
        setDragLock: function(a, b) {
            void 0 === a && (a = !0),
            void 0 === b && (b = !0),
            this.allowHorizontalDrag = a,
            this.allowVerticalDrag = b
        },
        enableSnap: function(a, b, c, d, e, f) {
            void 0 === c && (c = !0),
            void 0 === d && (d = !1),
            void 0 === e && (e = 0),
            void 0 === f && (f = 0),
            this.snapX = a,
            this.snapY = b,
            this.snapOffsetX = e,
            this.snapOffsetY = f,
            this.snapOnDrag = c,
            this.snapOnRelease = d
        },
        disableSnap: function() {
            this.snapOnDrag = !1,
            this.snapOnRelease = !1
        },
        checkBoundsRect: function() {
            this.sprite.fixedToCamera ? (this.sprite.cameraOffset.x < this.boundsRect.left ? this.sprite.cameraOffset.x = this.boundsRect.left : this.sprite.cameraOffset.x + this.sprite.width > this.boundsRect.right && (this.sprite.cameraOffset.x = this.boundsRect.right - this.sprite.width), this.sprite.cameraOffset.y < this.boundsRect.top ? this.sprite.cameraOffset.y = this.boundsRect.top : this.sprite.cameraOffset.y + this.sprite.height > this.boundsRect.bottom && (this.sprite.cameraOffset.y = this.boundsRect.bottom - this.sprite.height)) : (this.sprite.left < this.boundsRect.left ? this.sprite.x = this.boundsRect.x + this.sprite.offsetX : this.sprite.right > this.boundsRect.right && (this.sprite.x = this.boundsRect.right - (this.sprite.width - this.sprite.offsetX)), this.sprite.top < this.boundsRect.top ? this.sprite.y = this.boundsRect.top + this.sprite.offsetY : this.sprite.bottom > this.boundsRect.bottom && (this.sprite.y = this.boundsRect.bottom - (this.sprite.height - this.sprite.offsetY)))
        },
        checkBoundsSprite: function() {
            this.sprite.fixedToCamera && this.boundsSprite.fixedToCamera ? (this.sprite.cameraOffset.x < this.boundsSprite.cameraOffset.x ? this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x : this.sprite.cameraOffset.x + this.sprite.width > this.boundsSprite.cameraOffset.x + this.boundsSprite.width && (this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x + this.boundsSprite.width - this.sprite.width), this.sprite.cameraOffset.y < this.boundsSprite.cameraOffset.y ? this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y : this.sprite.cameraOffset.y + this.sprite.height > this.boundsSprite.cameraOffset.y + this.boundsSprite.height && (this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y + this.boundsSprite.height - this.sprite.height)) : (this.sprite.left < this.boundsSprite.left ? this.sprite.x = this.boundsSprite.left + this.sprite.offsetX : this.sprite.right > this.boundsSprite.right && (this.sprite.x = this.boundsSprite.right - (this.sprite.width - this.sprite.offsetX)), this.sprite.top < this.boundsSprite.top ? this.sprite.y = this.boundsSprite.top + this.sprite.offsetY : this.sprite.bottom > this.boundsSprite.bottom && (this.sprite.y = this.boundsSprite.bottom - (this.sprite.height - this.sprite.offsetY)))
        }
    },
    c.InputHandler.prototype.constructor = c.InputHandler,
    c.Gamepad = function(a) {
        this.game = a,
        this._gamepadIndexMap = {},
        this._rawPads = [],
        this._active = !1,
        this.enabled = !0,
        this._gamepadSupportAvailable = !!navigator.webkitGetGamepads || !!navigator.webkitGamepads || navigator.userAgent.indexOf("Firefox/") !== -1 || !!navigator.getGamepads,
        this._prevRawGamepadTypes = [],
        this._prevTimestamps = [],
        this.callbackContext = this,
        this.onConnectCallback = null,
        this.onDisconnectCallback = null,
        this.onDownCallback = null,
        this.onUpCallback = null,
        this.onAxisCallback = null,
        this.onFloatCallback = null,
        this._ongamepadconnected = null,
        this._gamepaddisconnected = null,
        this._gamepads = [new c.SinglePad(a, this), new c.SinglePad(a, this), new c.SinglePad(a, this), new c.SinglePad(a, this)]
    },
    c.Gamepad.prototype = {
        addCallbacks: function(a, b) {
            "undefined" != typeof b && (this.onConnectCallback = "function" == typeof b.onConnect ? b.onConnect : this.onConnectCallback, this.onDisconnectCallback = "function" == typeof b.onDisconnect ? b.onDisconnect : this.onDisconnectCallback, this.onDownCallback = "function" == typeof b.onDown ? b.onDown : this.onDownCallback, this.onUpCallback = "function" == typeof b.onUp ? b.onUp : this.onUpCallback, this.onAxisCallback = "function" == typeof b.onAxis ? b.onAxis : this.onAxisCallback, this.onFloatCallback = "function" == typeof b.onFloat ? b.onFloat : this.onFloatCallback, this.callbackContext = a)
        },
        start: function() {
            if (!this._active) {
                this._active = !0;
                var a = this;
                this._onGamepadConnected = function(b) {
                    return a.onGamepadConnected(b)
                },
                this._onGamepadDisconnected = function(b) {
                    return a.onGamepadDisconnected(b)
                },
                window.addEventListener("gamepadconnected", this._onGamepadConnected, !1),
                window.addEventListener("gamepaddisconnected", this._onGamepadDisconnected, !1)
            }
        },
        onGamepadConnected: function(a) {
            var b = a.gamepad;
            this._rawPads.push(b),
            this._gamepads[b.index].connect(b)
        },
        onGamepadDisconnected: function(a) {
            var b = a.gamepad;
            for (var c in this._rawPads)
                this._rawPads[c].index === b.index && this._rawPads.splice(c, 1);
            this._gamepads[b.index].disconnect()
        },
        update: function() {
            this._pollGamepads(),
            this.pad1.pollStatus(),
            this.pad2.pollStatus(),
            this.pad3.pollStatus(),
            this.pad4.pollStatus()
        },
        _pollGamepads: function() {
            if (this._active) {
                if (navigator.getGamepads)
                    var a = navigator.getGamepads();
                else if (navigator.webkitGetGamepads)
                    var a = navigator.webkitGetGamepads();
                else if (navigator.webkitGamepads)
                    var a = navigator.webkitGamepads();
                if (a) {
                    this._rawPads = [];
                    for (var b = !1, c = 0; c < a.length && (typeof a[c] !== this._prevRawGamepadTypes[c] && (b = !0, this._prevRawGamepadTypes[c] = typeof a[c]), a[c] && this._rawPads.push(a[c]), 3 !== c); c++)
                        ;
                    for (var d = 0; d < this._gamepads.length; d++)
                        this._gamepads[d]._rawPad = this._rawPads[d];
                    if (b) {
                        for (var e, f = {
                                rawIndices: {},
                                padIndices: {}
                            }, g = 0; g < this._gamepads.length; g++)
                            if (e = this._gamepads[g], e.connected)
                                for (var h = 0; h < this._rawPads.length; h++)
                                    this._rawPads[h].index === e.index && (f.rawIndices[e.index] = !0, f.padIndices[g] = !0);
                        for (var i = 0; i < this._gamepads.length; i++)
                            if (e = this._gamepads[i], !f.padIndices[i]) {
                                this._rawPads.length < 1 && e.disconnect();
                                for (var j = 0; j < this._rawPads.length && !f.padIndices[i]; j++) {
                                    var k = this._rawPads[j];
                                    if (k) {
                                        if (f.rawIndices[k.index]) {
                                            e.disconnect();
                                            continue
                                        }
                                        e.connect(k),
                                        f.rawIndices[k.index] = !0,
                                        f.padIndices[i] = !0
                                    } else
                                        e.disconnect()
                                }
                            }
                    }
                }
            }
        },
        setDeadZones: function(a) {
            for (var b = 0; b < this._gamepads.length; b++)
                this._gamepads[b].deadZone = a
        },
        stop: function() {
            this._active = !1,
            window.removeEventListener("gamepadconnected", this._onGamepadConnected),
            window.removeEventListener("gamepaddisconnected", this._onGamepadDisconnected)
        },
        reset: function() {
            this.update();
            for (var a = 0; a < this._gamepads.length; a++)
                this._gamepads[a].reset()
        },
        justPressed: function(a, b) {
            for (var c = 0; c < this._gamepads.length; c++)
                if (this._gamepads[c].justPressed(a, b) === !0)
                    return !0;
            return !1
        },
        justReleased: function(a, b) {
            for (var c = 0; c < this._gamepads.length; c++)
                if (this._gamepads[c].justReleased(a, b) === !0)
                    return !0;
            return !1
        },
        isDown: function(a) {
            for (var b = 0; b < this._gamepads.length; b++)
                if (this._gamepads[b].isDown(a) === !0)
                    return !0;
            return !1
        },
        destroy: function() {
            this.stop();
            for (var a = 0; a < this._gamepads.length; a++)
                this._gamepads[a].destroy()
        }
    },
    c.Gamepad.prototype.constructor = c.Gamepad,
    Object.defineProperty(c.Gamepad.prototype, "active", {
        get: function() {
            return this._active
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "supported", {
        get: function() {
            return this._gamepadSupportAvailable
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "padsConnected", {
        get: function() {
            return this._rawPads.length
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "pad1", {
        get: function() {
            return this._gamepads[0]
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "pad2", {
        get: function() {
            return this._gamepads[1]
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "pad3", {
        get: function() {
            return this._gamepads[2]
        }
    }),
    Object.defineProperty(c.Gamepad.prototype, "pad4", {
        get: function() {
            return this._gamepads[3]
        }
    }),
    c.Gamepad.BUTTON_0 = 0,
    c.Gamepad.BUTTON_1 = 1,
    c.Gamepad.BUTTON_2 = 2,
    c.Gamepad.BUTTON_3 = 3,
    c.Gamepad.BUTTON_4 = 4,
    c.Gamepad.BUTTON_5 = 5,
    c.Gamepad.BUTTON_6 = 6,
    c.Gamepad.BUTTON_7 = 7,
    c.Gamepad.BUTTON_8 = 8,
    c.Gamepad.BUTTON_9 = 9,
    c.Gamepad.BUTTON_10 = 10,
    c.Gamepad.BUTTON_11 = 11,
    c.Gamepad.BUTTON_12 = 12,
    c.Gamepad.BUTTON_13 = 13,
    c.Gamepad.BUTTON_14 = 14,
    c.Gamepad.BUTTON_15 = 15,
    c.Gamepad.AXIS_0 = 0,
    c.Gamepad.AXIS_1 = 1,
    c.Gamepad.AXIS_2 = 2,
    c.Gamepad.AXIS_3 = 3,
    c.Gamepad.AXIS_4 = 4,
    c.Gamepad.AXIS_5 = 5,
    c.Gamepad.AXIS_6 = 6,
    c.Gamepad.AXIS_7 = 7,
    c.Gamepad.AXIS_8 = 8,
    c.Gamepad.AXIS_9 = 9,
    c.Gamepad.XBOX360_A = 0,
    c.Gamepad.XBOX360_B = 1,
    c.Gamepad.XBOX360_X = 2,
    c.Gamepad.XBOX360_Y = 3,
    c.Gamepad.XBOX360_LEFT_BUMPER = 4,
    c.Gamepad.XBOX360_RIGHT_BUMPER = 5,
    c.Gamepad.XBOX360_LEFT_TRIGGER = 6,
    c.Gamepad.XBOX360_RIGHT_TRIGGER = 7,
    c.Gamepad.XBOX360_BACK = 8,
    c.Gamepad.XBOX360_START = 9,
    c.Gamepad.XBOX360_STICK_LEFT_BUTTON = 10,
    c.Gamepad.XBOX360_STICK_RIGHT_BUTTON = 11,
    c.Gamepad.XBOX360_DPAD_LEFT = 14,
    c.Gamepad.XBOX360_DPAD_RIGHT = 15,
    c.Gamepad.XBOX360_DPAD_UP = 12,
    c.Gamepad.XBOX360_DPAD_DOWN = 13,
    c.Gamepad.XBOX360_STICK_LEFT_X = 0,
    c.Gamepad.XBOX360_STICK_LEFT_Y = 1,
    c.Gamepad.XBOX360_STICK_RIGHT_X = 2,
    c.Gamepad.XBOX360_STICK_RIGHT_Y = 3,
    c.Gamepad.PS3XC_X = 0,
    c.Gamepad.PS3XC_CIRCLE = 1,
    c.Gamepad.PS3XC_SQUARE = 2;
    c.Gamepad.PS3XC_TRIANGLE = 3;
    c.Gamepad.PS3XC_L1 = 4,
    c.Gamepad.PS3XC_R1 = 5,
    c.Gamepad.PS3XC_L2 = 6,
    c.Gamepad.PS3XC_R2 = 7,
    c.Gamepad.PS3XC_SELECT = 8,
    c.Gamepad.PS3XC_START = 9,
    c.Gamepad.PS3XC_STICK_LEFT_BUTTON = 10,
    c.Gamepad.PS3XC_STICK_RIGHT_BUTTON = 11,
    c.Gamepad.PS3XC_DPAD_UP = 12,
    c.Gamepad.PS3XC_DPAD_DOWN = 13,
    c.Gamepad.PS3XC_DPAD_LEFT = 14,
    c.Gamepad.PS3XC_DPAD_RIGHT = 15,
    c.Gamepad.PS3XC_STICK_LEFT_X = 0,
    c.Gamepad.PS3XC_STICK_LEFT_Y = 1,
    c.Gamepad.PS3XC_STICK_RIGHT_X = 2,
    c.Gamepad.PS3XC_STICK_RIGHT_Y = 3,
    c.SinglePad = function(a, b) {
        this.game = a,
        this.index = null,
        this.connected = !1,
        this.callbackContext = this,
        this.onConnectCallback = null,
        this.onDisconnectCallback = null,
        this.onDownCallback = null,
        this.onUpCallback = null,
        this.onAxisCallback = null,
        this.onFloatCallback = null,
        this.deadZone = .26,
        this._padParent = b,
        this._rawPad = null,
        this._prevTimestamp = null,
        this._buttons = [],
        this._buttonsLen = 0,
        this._axes = [],
        this._axesLen = 0
    },
    c.SinglePad.prototype = {
        addCallbacks: function(a, b) {
            "undefined" != typeof b && (this.onConnectCallback = "function" == typeof b.onConnect ? b.onConnect : this.onConnectCallback, this.onDisconnectCallback = "function" == typeof b.onDisconnect ? b.onDisconnect : this.onDisconnectCallback, this.onDownCallback = "function" == typeof b.onDown ? b.onDown : this.onDownCallback, this.onUpCallback = "function" == typeof b.onUp ? b.onUp : this.onUpCallback, this.onAxisCallback = "function" == typeof b.onAxis ? b.onAxis : this.onAxisCallback, this.onFloatCallback = "function" == typeof b.onFloat ? b.onFloat : this.onFloatCallback, this.callbackContext = a)
        },
        getButton: function(a) {
            return this._buttons[a] ? this._buttons[a] : null
        },
        pollStatus: function() {
            if (this.connected && this.game.input.enabled && this.game.input.gamepad.enabled && (!this._rawPad.timestamp || this._rawPad.timestamp !== this._prevTimestamp)) {
                for (var a = 0; a < this._buttonsLen; a++) {
                    var b = isNaN(this._rawPad.buttons[a]) ? this._rawPad.buttons[a].value : this._rawPad.buttons[a];
                    b !== this._buttons[a].value && (1 === b ? this.processButtonDown(a, b) : 0 === b ? this.processButtonUp(a, b) : this.processButtonFloat(a, b))
                }
                for (var c = 0; c < this._axesLen; c++) {
                    var d = this._rawPad.axes[c];
                    d > 0 && d > this.deadZone || d < 0 && d < -this.deadZone ? this.processAxisChange(c, d) : this.processAxisChange(c, 0)
                }
                this._prevTimestamp = this._rawPad.timestamp
            }
        },
        connect: function(a) {
            var b = !this.connected;
            this.connected = !0,
            this.index = a.index,
            this._rawPad = a,
            this._buttons = [],
            this._buttonsLen = a.buttons.length,
            this._axes = [],
            this._axesLen = a.axes.length;
            for (var d = 0; d < this._axesLen; d++)
                this._axes[d] = a.axes[d];
            for (var e in a.buttons)
                e = parseInt(e, 10),
                this._buttons[e] = new c.DeviceButton(this, e);
            b && this._padParent.onConnectCallback && this._padParent.onConnectCallback.call(this._padParent.callbackContext, this.index),
            b && this.onConnectCallback && this.onConnectCallback.call(this.callbackContext)
        },
        disconnect: function() {
            var a = this.connected,
                b = this.index;
            this.connected = !1,
            this.index = null,
            this._rawPad = void 0;
            for (var c = 0; c < this._buttonsLen; c++)
                this._buttons[c].destroy();
            this._buttons = [],
            this._buttonsLen = 0,
            this._axes = [],
            this._axesLen = 0,
            a && this._padParent.onDisconnectCallback && this._padParent.onDisconnectCallback.call(this._padParent.callbackContext, b),
            a && this.onDisconnectCallback && this.onDisconnectCallback.call(this.callbackContext)
        },
        destroy: function() {
            this._rawPad = void 0;
            for (var a = 0; a < this._buttonsLen; a++)
                this._buttons[a].destroy();
            this._buttons = [],
            this._buttonsLen = 0,
            this._axes = [],
            this._axesLen = 0,
            this.onConnectCallback = null,
            this.onDisconnectCallback = null,
            this.onDownCallback = null,
            this.onUpCallback = null,
            this.onAxisCallback = null,
            this.onFloatCallback = null
        },
        processAxisChange: function(a, b) {
            this._axes[a] !== b && (this._axes[a] = b, this._padParent.onAxisCallback && this._padParent.onAxisCallback.call(this._padParent.callbackContext, this, a, b), this.onAxisCallback && this.onAxisCallback.call(this.callbackContext, this, a, b))
        },
        processButtonDown: function(a, b) {
            this._buttons[a] && this._buttons[a].start(null, b),
            this._padParent.onDownCallback && this._padParent.onDownCallback.call(this._padParent.callbackContext, a, b, this.index),
            this.onDownCallback && this.onDownCallback.call(this.callbackContext, a, b)
        },
        processButtonUp: function(a, b) {
            this._padParent.onUpCallback && this._padParent.onUpCallback.call(this._padParent.callbackContext, a, b, this.index),
            this.onUpCallback && this.onUpCallback.call(this.callbackContext, a, b),
            this._buttons[a] && this._buttons[a].stop(null, b)
        },
        processButtonFloat: function(a, b) {
            this._padParent.onFloatCallback && this._padParent.onFloatCallback.call(this._padParent.callbackContext, a, b, this.index),
            this.onFloatCallback && this.onFloatCallback.call(this.callbackContext, a, b),
            this._buttons[a] && this._buttons[a].padFloat(b)
        },
        axis: function(a) {
            return !!this._axes[a] && this._axes[a]
        },
        isDown: function(a) {
            return !!this._buttons[a] && this._buttons[a].isDown
        },
        isUp: function(a) {
            return !!this._buttons[a] && this._buttons[a].isUp
        },
        justReleased: function(a, b) {
            if (this._buttons[a])
                return this._buttons[a].justReleased(b)
        },
        justPressed: function(a, b) {
            if (this._buttons[a])
                return this._buttons[a].justPressed(b)
        },
        buttonValue: function(a) {
            return this._buttons[a] ? this._buttons[a].value : null
        },
        reset: function() {
            for (var a = 0; a < this._axes.length; a++)
                this._axes[a] = 0
        }
    },
    c.SinglePad.prototype.constructor = c.SinglePad,
    c.Key = function(a, b) {
        this.game = a,
        this._enabled = !0,
        this.event = null,
        this.isDown = !1,
        this.isUp = !0,
        this.altKey = !1,
        this.ctrlKey = !1,
        this.shiftKey = !1,
        this.timeDown = 0,
        this.duration = 0,
        this.timeUp = -2500,
        this.repeats = 0,
        this.keyCode = b,
        this.onDown = new c.Signal,
        this.onHoldCallback = null,
        this.onHoldContext = null,
        this.onUp = new c.Signal,
        this._justDown = !1,
        this._justUp = !1
    },
    c.Key.prototype = {
        update: function() {
            this._enabled && this.isDown && (this.duration = this.game.time.time - this.timeDown, this.repeats++, this.onHoldCallback && this.onHoldCallback.call(this.onHoldContext, this))
        },
        processKeyDown: function(a) {
            this._enabled && (this.event = a, this.isDown || (this.altKey = a.altKey, this.ctrlKey = a.ctrlKey, this.shiftKey = a.shiftKey, this.isDown = !0, this.isUp = !1, this.timeDown = this.game.time.time, this.duration = 0, this.repeats = 0, this._justDown = !0, this.onDown.dispatch(this)))
        },
        processKeyUp: function(a) {
            this._enabled && (this.event = a, this.isUp || (this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.duration = this.game.time.time - this.timeDown, this._justUp = !0, this.onUp.dispatch(this)))
        },
        reset: function(a) {
            void 0 === a && (a = !0),
            this.isDown = !1,
            this.isUp = !0,
            this.timeUp = this.game.time.time,
            this.duration = 0,
            this._enabled = !0,
            this._justDown = !1,
            this._justUp = !1,
            a && (this.onDown.removeAll(), this.onUp.removeAll(), this.onHoldCallback = null, this.onHoldContext = null)
        },
        downDuration: function(a) {
            return void 0 === a && (a = 50), this.isDown && this.duration < a
        },
        upDuration: function(a) {
            return void 0 === a && (a = 50), !this.isDown && this.game.time.time - this.timeUp < a
        }
    },
    Object.defineProperty(c.Key.prototype, "justDown", {
        get: function() {
            var a = this._justDown;
            return this._justDown = !1, a
        }
    }),
    Object.defineProperty(c.Key.prototype, "justUp", {
        get: function() {
            var a = this._justUp;
            return this._justUp = !1, a
        }
    }),
    Object.defineProperty(c.Key.prototype, "enabled", {
        get: function() {
            return this._enabled
        },
        set: function(a) {
            a = !!a,
            a !== this._enabled && (a || this.reset(!1), this._enabled = a)
        }
    }),
    c.Key.prototype.constructor = c.Key,
    c.Keyboard = function(a) {
        this.game = a,
        this.enabled = !0,
        this.event = null,
        this.pressEvent = null,
        this.callbackContext = this,
        this.onDownCallback = null,
        this.onPressCallback = null,
        this.onUpCallback = null,
        this._keys = [],
        this._capture = [],
        this._onKeyDown = null,
        this._onKeyPress = null,
        this._onKeyUp = null,
        this._i = 0,
        this._k = 0
    },
    c.Keyboard.prototype = {
        addCallbacks: function(a, b, c, d) {
            this.callbackContext = a,
            void 0 !== b && null !== b && (this.onDownCallback = b),
            void 0 !== c && null !== c && (this.onUpCallback = c),
            void 0 !== d && null !== d && (this.onPressCallback = d)
        },
        addKey: function(a) {
            return this._keys[a] || (this._keys[a] = new c.Key(this.game, a), this.addKeyCapture(a)), this._keys[a]
        },
        addKeys: function(a) {
            var b = {};
            for (var c in a)
                b[c] = this.addKey(a[c]);
            return b
        },
        removeKey: function(a) {
            this._keys[a] && (this._keys[a] = null, this.removeKeyCapture(a))
        },
        createCursorKeys: function() {
            return this.addKeys({
                up: c.KeyCode.UP,
                down: c.KeyCode.DOWN,
                left: c.KeyCode.LEFT,
                right: c.KeyCode.RIGHT
            })
        },
        start: function() {
            if (!this.game.device.cocoonJS && null === this._onKeyDown) {
                var a = this;
                this._onKeyDown = function(b) {
                    return a.processKeyDown(b)
                },
                this._onKeyUp = function(b) {
                    return a.processKeyUp(b)
                },
                this._onKeyPress = function(b) {
                    return a.processKeyPress(b)
                },
                window.addEventListener("keydown", this._onKeyDown, !1),
                window.addEventListener("keyup", this._onKeyUp, !1),
                window.addEventListener("keypress", this._onKeyPress, !1)
            }
        },
        stop: function() {
            window.removeEventListener("keydown", this._onKeyDown),
            window.removeEventListener("keyup", this._onKeyUp),
            window.removeEventListener("keypress", this._onKeyPress),
            this._onKeyDown = null,
            this._onKeyUp = null,
            this._onKeyPress = null
        },
        destroy: function() {
            this.stop(),
            this.clearCaptures(),
            this._keys.length = 0,
            this._i = 0
        },
        addKeyCapture: function(a) {
            if ("object" == typeof a)
                for (var b in a)
                    this._capture[a[b]] = !0;
            else
                this._capture[a] = !0
        },
        removeKeyCapture: function(a) {
            delete this._capture[a]
        },
        clearCaptures: function() {
            this._capture = {}
        },
        update: function() {
            for (this._i = this._keys.length; this._i--;)
                this._keys[this._i] && this._keys[this._i].update()
        },
        processKeyDown: function(a) {
            if (this.event = a, this.game.input.enabled && this.enabled) {
                var b = a.keyCode;
                this._capture[b] && a.preventDefault(),
                this._keys[b] || (this._keys[b] = new c.Key(this.game, b)),
                this._keys[b].processKeyDown(a),
                this._k = b,
                this.onDownCallback && this.onDownCallback.call(this.callbackContext, a)
            }
        },
        processKeyPress: function(a) {
            this.pressEvent = a,
            this.game.input.enabled && this.enabled && this.onPressCallback && this.onPressCallback.call(this.callbackContext, String.fromCharCode(a.charCode), a)
        },
        processKeyUp: function(a) {
            if (this.event = a, this.game.input.enabled && this.enabled) {
                var b = a.keyCode;
                this._capture[b] && a.preventDefault(),
                this._keys[b] || (this._keys[b] = new c.Key(this.game, b)),
                this._keys[b].processKeyUp(a),
                this.onUpCallback && this.onUpCallback.call(this.callbackContext, a)
            }
        },
        reset: function(a) {
            void 0 === a && (a = !0),
            this.event = null;
            for (var b = this._keys.length; b--;)
                this._keys[b] && this._keys[b].reset(a)
        },
        downDuration: function(a, b) {
            return this._keys[a] ? this._keys[a].downDuration(b) : null
        },
        upDuration: function(a, b) {
            return this._keys[a] ? this._keys[a].upDuration(b) : null
        },
        isDown: function(a) {
            return this._keys[a] ? this._keys[a].isDown : null
        }
    },
    Object.defineProperty(c.Keyboard.prototype, "lastChar", {
        get: function() {
            return 32 === this.event.charCode ? "" : String.fromCharCode(this.pressEvent.charCode)
        }
    }),
    Object.defineProperty(c.Keyboard.prototype, "lastKey", {
        get: function() {
            return this._keys[this._k]
        }
    }),
    c.Keyboard.prototype.constructor = c.Keyboard,
    c.KeyCode = {
        A: "A".charCodeAt(0),
        B: "B".charCodeAt(0),
        C: "C".charCodeAt(0),
        D: "D".charCodeAt(0),
        E: "E".charCodeAt(0),
        F: "F".charCodeAt(0),
        G: "G".charCodeAt(0),
        H: "H".charCodeAt(0),
        I: "I".charCodeAt(0),
        J: "J".charCodeAt(0),
        K: "K".charCodeAt(0),
        L: "L".charCodeAt(0),
        M: "M".charCodeAt(0),
        N: "N".charCodeAt(0),
        O: "O".charCodeAt(0),
        P: "P".charCodeAt(0),
        Q: "Q".charCodeAt(0),
        R: "R".charCodeAt(0),
        S: "S".charCodeAt(0),
        T: "T".charCodeAt(0),
        U: "U".charCodeAt(0),
        V: "V".charCodeAt(0),
        W: "W".charCodeAt(0),
        X: "X".charCodeAt(0),
        Y: "Y".charCodeAt(0),
        Z: "Z".charCodeAt(0),
        ZERO: "0".charCodeAt(0),
        ONE: "1".charCodeAt(0),
        TWO: "2".charCodeAt(0),
        THREE: "3".charCodeAt(0),
        FOUR: "4".charCodeAt(0),
        FIVE: "5".charCodeAt(0),
        SIX: "6".charCodeAt(0),
        SEVEN: "7".charCodeAt(0),
        EIGHT: "8".charCodeAt(0),
        NINE: "9".charCodeAt(0),
        NUMPAD_0: 96,
        NUMPAD_1: 97,
        NUMPAD_2: 98,
        NUMPAD_3: 99,
        NUMPAD_4: 100,
        NUMPAD_5: 101,
        NUMPAD_6: 102,
        NUMPAD_7: 103,
        NUMPAD_8: 104,
        NUMPAD_9: 105,
        NUMPAD_MULTIPLY: 106,
        NUMPAD_ADD: 107,
        NUMPAD_ENTER: 108,
        NUMPAD_SUBTRACT: 109,
        NUMPAD_DECIMAL: 110,
        NUMPAD_DIVIDE: 111,
        F1: 112,
        F2: 113,
        F3: 114,
        F4: 115,
        F5: 116,
        F6: 117,
        F7: 118,
        F8: 119,
        F9: 120,
        F10: 121,
        F11: 122,
        F12: 123,
        F13: 124,
        F14: 125,
        F15: 126,
        COLON: 186,
        EQUALS: 187,
        COMMA: 188,
        UNDERSCORE: 189,
        PERIOD: 190,
        QUESTION_MARK: 191,
        TILDE: 192,
        OPEN_BRACKET: 219,
        BACKWARD_SLASH: 220,
        CLOSED_BRACKET: 221,
        QUOTES: 222,
        BACKSPACE: 8,
        TAB: 9,
        CLEAR: 12,
        ENTER: 13,
        SHIFT: 16,
        CONTROL: 17,
        ALT: 18,
        CAPS_LOCK: 20,
        ESC: 27,
        SPACEBAR: 32,
        PAGE_UP: 33,
        PAGE_DOWN: 34,
        END: 35,
        HOME: 36,
        LEFT: 37,
        UP: 38,
        RIGHT: 39,
        DOWN: 40,
        PLUS: 43,
        MINUS: 44,
        INSERT: 45,
        DELETE: 46,
        HELP: 47,
        NUM_LOCK: 144
    };
    for (var e in c.KeyCode)
        c.KeyCode.hasOwnProperty(e) && !e.match(/[a-z]/) && (c.Keyboard[e] = c.KeyCode[e]);
    c.Component = function() {},
    c.Component.Angle = function() {},
    c.Component.Angle.prototype = {
        angle: {
            get: function() {
                return c.Math.wrapAngle(c.Math.radToDeg(this.rotation))
            },
            set: function(a) {
                this.rotation = c.Math.degToRad(c.Math.wrapAngle(a))
            }
        }
    },
    c.Component.Animation = function() {},
    c.Component.Animation.prototype = {
        play: function(a, b, c, d) {
            if (this.animations)
                return this.animations.play(a, b, c, d)
        }
    },
    c.Component.AutoCull = function() {},
    c.Component.AutoCull.prototype = {
        autoCull: !1,
        inCamera: {
            get: function() {
                return this.autoCull || this.checkWorldBounds || (this._bounds.copyFrom(this.getBounds()), this._bounds.x += this.game.camera.view.x, this._bounds.y += this.game.camera.view.y), this.game.world.camera.view.intersects(this._bounds)
            }
        }
    },
    c.Component.Bounds = function() {},
    c.Component.Bounds.prototype = {
        offsetX: {
            get: function() {
                return this.anchor.x * this.width
            }
        },
        offsetY: {
            get: function() {
                return this.anchor.y * this.height
            }
        },
        centerX: {
            get: function() {
                return this.x - this.offsetX + .5 * this.width
            },
            set: function(a) {
                this.x = a + this.offsetX - .5 * this.width
            }
        },
        centerY: {
            get: function() {
                return this.y - this.offsetY + .5 * this.height
            },
            set: function(a) {
                this.y = a + this.offsetY - .5 * this.height
            }
        },
        left: {
            get: function() {
                return this.x - this.offsetX
            },
            set: function(a) {
                this.x = a + this.offsetX
            }
        },
        right: {
            get: function() {
                return this.x + this.width - this.offsetX
            },
            set: function(a) {
                this.x = a - this.width + this.offsetX
            }
        },
        top: {
            get: function() {
                return this.y - this.offsetY
            },
            set: function(a) {
                this.y = a + this.offsetY
            }
        },
        bottom: {
            get: function() {
                return this.y + this.height - this.offsetY
            },
            set: function(a) {
                this.y = a - this.height + this.offsetY
            }
        },
        alignIn: function(a, b, d, e) {
            switch (void 0 === d && (d = 0), void 0 === e && (e = 0), b) {
            default:
            case c.TOP_LEFT:
                this.left = a.left - d,
                this.top = a.top - e;
                break;
            case c.TOP_CENTER:
                this.centerX = a.centerX + d,
                this.top = a.top - e;
                break;
            case c.TOP_RIGHT:
                this.right = a.right + d,
                this.top = a.top - e;
                break;
            case c.LEFT_CENTER:
                this.left = a.left - d,
                this.centerY = a.centerY + e;
                break;
            case c.CENTER:
                this.centerX = a.centerX + d,
                this.centerY = a.centerY + e;
                break;
            case c.RIGHT_CENTER:
                this.right = a.right + d,
                this.centerY = a.centerY + e;
                break;
            case c.BOTTOM_LEFT:
                this.left = a.left - d,
                this.bottom = a.bottom + e;
                break;
            case c.BOTTOM_CENTER:
                this.centerX = a.centerX + d,
                this.bottom = a.bottom + e;
                break;
            case c.BOTTOM_RIGHT:
                this.right = a.right + d,
                this.bottom = a.bottom + e
            }
            return this
        },
        alignTo: function(a, b, d, e) {
            switch (void 0 === d && (d = 0), void 0 === e && (e = 0), b) {
            default:
            case c.TOP_LEFT:
                this.left = a.left - d,
                this.bottom = a.top - e;
                break;
            case c.TOP_CENTER:
                this.centerX = a.centerX + d,
                this.bottom = a.top - e;
                break;
            case c.TOP_RIGHT:
                this.right = a.right + d,
                this.bottom = a.top - e;
                break;
            case c.LEFT_TOP:
                this.right = a.left - d,
                this.top = a.top - e;
                break;
            case c.LEFT_CENTER:
                this.right = a.left - d,
                this.centerY = a.centerY + e;
                break;
            case c.LEFT_BOTTOM:
                this.right = a.left - d,
                this.bottom = a.bottom + e;
                break;
            case c.RIGHT_TOP:
                this.left = a.right + d,
                this.top = a.top - e;
                break;
            case c.RIGHT_CENTER:
                this.left = a.right + d,
                this.centerY = a.centerY + e;
                break;
            case c.RIGHT_BOTTOM:
                this.left = a.right + d,
                this.bottom = a.bottom + e;
                break;
            case c.BOTTOM_LEFT:
                this.left = a.left - d,
                this.top = a.bottom + e;
                break;
            case c.BOTTOM_CENTER:
                this.centerX = a.centerX + d,
                this.top = a.bottom + e;
                break;
            case c.BOTTOM_RIGHT:
                this.right = a.right + d,
                this.top = a.bottom + e
            }
            return this
        }
    },
    c.Group.prototype.alignIn = c.Component.Bounds.prototype.alignIn,
    c.Group.prototype.alignTo = c.Component.Bounds.prototype.alignTo,
    c.Component.BringToTop = function() {},
    c.Component.BringToTop.prototype.bringToTop = function() {
        return this.parent && this.parent.bringToTop(this), this
    },
    c.Component.BringToTop.prototype.sendToBack = function() {
        return this.parent && this.parent.sendToBack(this), this
    },
    c.Component.BringToTop.prototype.moveUp = function() {
        return this.parent && this.parent.moveUp(this), this
    },
    c.Component.BringToTop.prototype.moveDown = function() {
        return this.parent && this.parent.moveDown(this), this
    },
    c.Component.Core = function() {},
    c.Component.Core.install = function(a) {
        c.Utils.mixinPrototype(this, c.Component.Core.prototype),
        this.components = {};
        for (var b = 0; b < a.length; b++) {
            var d = a[b],
                e = !1;
            "Destroy" === d && (e = !0),
            c.Utils.mixinPrototype(this, c.Component[d].prototype, e),
            this.components[d] = !0
        }
    },
    c.Component.Core.init = function(a, b, d, e, f) {
        this.game = a,
        this.key = e,
        this.data = {},
        this.position.set(b, d),
        this.world = new c.Point(b, d),
        this.previousPosition = new c.Point(b, d),
        this.events = new c.Events(this),
        this._bounds = new c.Rectangle,
        this.components.PhysicsBody && (this.body = this.body),
        this.components.Animation && (this.animations = new c.AnimationManager(this)),
        this.components.LoadTexture && null !== e && this.loadTexture(e, f),
        this.components.FixedToCamera && (this.cameraOffset = new c.Point(b, d))
    },
    c.Component.Core.preUpdate = function() {
        if (this.pendingDestroy)
            return void this.destroy();
        if (this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, !this.exists || !this.parent.exists)
            return this.renderOrderID = -1, !1;
        this.world.setTo(this.game.camera.x + this.worldTransform.tx, this.game.camera.y + this.worldTransform.ty),
        this.visible && (this.renderOrderID = this.game.stage.currentRenderOrderID++),
        this.animations && this.animations.update(),
        this.body && this.body.preUpdate();
        for (var a = 0; a < this.children.length; a++)
            this.children[a].preUpdate();
        return !0
    },
    c.Component.Core.prototype = {
        game: null,
        name: "",
        data: {},
        components: {},
        z: 0,
        events: void 0,
        animations: void 0,
        key: "",
        world: null,
        debug: !1,
        previousPosition: null,
        previousRotation: 0,
        renderOrderID: 0,
        fresh: !0,
        pendingDestroy: !1,
        _bounds: null,
        _exists: !0,
        exists: {
            get: function() {
                return this._exists
            },
            set: function(a) {
                a ? (this._exists = !0, this.body && this.body.type === c.Physics.P2JS && this.body.addToWorld(), this.visible = !0) : (this._exists = !1, this.body && this.body.type === c.Physics.P2JS && this.body.removeFromWorld(), this.visible = !1)
            }
        },
        update: function() {},
        postUpdate: function() {
            this.customRender && this.key.render(),
            this.components.PhysicsBody && c.Component.PhysicsBody.postUpdate.call(this),
            this.components.FixedToCamera && c.Component.FixedToCamera.postUpdate.call(this);
            for (var a = 0; a < this.children.length; a++)
                this.children[a].postUpdate()
        }
    },
    c.Component.Crop = function() {},
    c.Component.Crop.prototype = {
        cropRect: null,
        _crop: null,
        crop: function(a, b) {
            void 0 === b && (b = !1),
            a ? (b && null !== this.cropRect ? this.cropRect.setTo(a.x, a.y, a.width, a.height) : b && null === this.cropRect ? this.cropRect = new c.Rectangle(a.x, a.y, a.width, a.height) : this.cropRect = a, this.updateCrop()) : (this._crop = null, this.cropRect = null, this.resetFrame())
        },
        updateCrop: function() {
            if (this.cropRect) {
                var a = this.texture.crop.x,
                    b = this.texture.crop.y,
                    d = this.texture.crop.width,
                    e = this.texture.crop.height;
                this._crop = c.Rectangle.clone(this.cropRect, this._crop),
                this._crop.x += this._frame.x,
                this._crop.y += this._frame.y;
                var f = Math.max(this._frame.x, this._crop.x),
                    g = Math.max(this._frame.y, this._crop.y),
                    h = Math.min(this._frame.right, this._crop.right) - f,
                    i = Math.min(this._frame.bottom, this._crop.bottom) - g;
                this.texture.crop.x = f,
                this.texture.crop.y = g,
                this.texture.crop.width = h,
                this.texture.crop.height = i,
                this.texture.frame.width = Math.min(h, this.cropRect.width),
                this.texture.frame.height = Math.min(i, this.cropRect.height),
                this.texture.width = this.texture.frame.width,
                this.texture.height = this.texture.frame.height,
                this.texture._updateUvs(),
                16777215 === this.tint || a === f && b === g && d === h && e === i || (this.texture.requiresReTint = !0)
            }
        }
    },
    c.Component.Delta = function() {},
    c.Component.Delta.prototype = {
        deltaX: {
            get: function() {
                return this.world.x - this.previousPosition.x
            }
        },
        deltaY: {
            get: function() {
                return this.world.y - this.previousPosition.y
            }
        },
        deltaZ: {
            get: function() {
                return this.rotation - this.previousRotation
            }
        }
    },
    c.Component.Destroy = function() {},
    c.Component.Destroy.prototype = {
        destroyPhase: !1,
        destroy: function(a, b) {
            if (null !== this.game && !this.destroyPhase) {
                void 0 === a && (a = !0),
                void 0 === b && (b = !1),
                this.destroyPhase = !0,
                this.events && this.events.onDestroy$dispatch(this),
                this.parent && (this.parent instanceof c.Group ? this.parent.remove(this) : this.parent.removeChild(this)),
                this.input && this.input.destroy(),
                this.animations && this.animations.destroy(),
                this.body && this.body.destroy(),
                this.events && this.events.destroy(),
                this.game.tweens.removeFrom(this);
                var d = this.children.length;
                if (a)
                    for (; d--;)
                        this.children[d].destroy(a);
                else
                    for (; d--;)
                        this.removeChild(this.children[d]);
                this._crop && (this._crop = null, this.cropRect = null),
                this._frame && (this._frame = null),
                c.Video && this.key instanceof c.Video && this.key.onChangeSource.remove(this.resizeFrame, this),
                c.BitmapText && this._glyphs && (this._glyphs = []),
                this.alive = !1,
                this.exists = !1,
                this.visible = !1,
                this.filters = null,
                this.mask = null,
                this.game = null,
                this.data = {},
                this.renderable = !1,
                this.transformCallback && (this.transformCallback = null, this.transformCallbackContext = null),
                this.hitArea = null,
                this.parent = null,
                this.stage = null,
                this.worldTransform = null,
                this.filterArea = null,
                this._bounds = null,
                this._currentBounds = null,
                this._mask = null,
                this._destroyCachedSprite(),
                b && this.texture.destroy(!0),
                this.destroyPhase = !1,
                this.pendingDestroy = !1
            }
        }
    },
    c.Events = function(a) {
        this.parent = a
    },
    c.Events.prototype = {
        destroy: function() {
            this._parent = null,
            this._onDestroy && this._onDestroy.dispose(),
            this._onAddedToGroup && this._onAddedToGroup.dispose(),
            this._onRemovedFromGroup && this._onRemovedFromGroup.dispose(),
            this._onRemovedFromWorld && this._onRemovedFromWorld.dispose(),
            this._onKilled && this._onKilled.dispose(),
            this._onRevived && this._onRevived.dispose(),
            this._onEnterBounds && this._onEnterBounds.dispose(),
            this._onOutOfBounds && this._onOutOfBounds.dispose(),
            this._onInputOver && this._onInputOver.dispose(),
            this._onInputOut && this._onInputOut.dispose(),
            this._onInputDown && this._onInputDown.dispose(),
            this._onInputUp && this._onInputUp.dispose(),
            this._onDragStart && this._onDragStart.dispose(),
            this._onDragUpdate && this._onDragUpdate.dispose(),
            this._onDragStop && this._onDragStop.dispose(),
            this._onAnimationStart && this._onAnimationStart.dispose(),
            this._onAnimationComplete && this._onAnimationComplete.dispose(),
            this._onAnimationLoop && this._onAnimationLoop.dispose()
        },
        onAddedToGroup: null,
        onRemovedFromGroup: null,
        onRemovedFromWorld: null,
        onDestroy: null,
        onKilled: null,
        onRevived: null,
        onOutOfBounds: null,
        onEnterBounds: null,
        onInputOver: null,
        onInputOut: null,
        onInputDown: null,
        onInputUp: null,
        onDragStart: null,
        onDragUpdate: null,
        onDragStop: null,
        onAnimationStart: null,
        onAnimationComplete: null,
        onAnimationLoop: null
    },
    c.Events.prototype.constructor = c.Events;
    for (var f in c.Events.prototype)
        c.Events.prototype.hasOwnProperty(f) && 0 === f.indexOf("on") && null === c.Events.prototype[f] && !function(a, b) {
            "use strict";
            Object.defineProperty(c.Events.prototype, a, {
                get: function() {
                    return this[b] || (this[b] = new c.Signal)
                }
            }),
            c.Events.prototype[a + "$dispatch"] = function() {
                return this[b] ? this[b].dispatch.apply(this[b], arguments) : null
            }
        }(f, "_" + f);
    c.Component.FixedToCamera = function() {},
    c.Component.FixedToCamera.postUpdate = function() {
        this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y)
    },
    c.Component.FixedToCamera.prototype = {
        _fixedToCamera: !1,
        fixedToCamera: {
            get: function() {
                return this._fixedToCamera
            },
            set: function(a) {
                a ? (this._fixedToCamera = !0, this.cameraOffset.set(this.x, this.y)) : this._fixedToCamera = !1
            }
        },
        cameraOffset: new c.Point
    },
    c.Component.Health = function() {},
    c.Component.Health.prototype = {
        health: 1,
        maxHealth: 100,
        damage: function(a) {
            return this.alive && (this.health -= a, this.health <= 0 && this.kill()), this
        },
        setHealth: function(a) {
            return this.health = a, this.health > this.maxHealth && (this.health = this.maxHealth), this
        },
        heal: function(a) {
            return this.alive && (this.health += a, this.health > this.maxHealth && (this.health = this.maxHealth)), this
        }
    },
    c.Component.InCamera = function() {},
    c.Component.InCamera.prototype = {
        inCamera: {
            get: function() {
                return this.game.world.camera.view.intersects(this._bounds)
            }
        }
    },
    c.Component.InputEnabled = function() {},
    c.Component.InputEnabled.prototype = {
        input: null,
        inputEnabled: {
            get: function() {
                return this.input && this.input.enabled
            },
            set: function(a) {
                a ? null === this.input ? (this.input = new c.InputHandler(this), this.input.start()) : this.input && !this.input.enabled && this.input.start() : this.input && this.input.enabled && this.input.stop()
            }
        }
    },
    c.Component.InWorld = function() {},
    c.Component.InWorld.preUpdate = function() {
        if (this.autoCull || this.checkWorldBounds) {
            if (this._bounds.copyFrom(this.getBounds()), this._bounds.x += this.game.camera.view.x, this._bounds.y += this.game.camera.view.y, this.autoCull)
                if (this.game.world.camera.view.intersects(this._bounds))
                    this.renderable = !0,
                    this.game.world.camera.totalInView++;
                else if (this.renderable = !1, this.outOfCameraBoundsKill)
                    return this.kill(), !1;
            if (this.checkWorldBounds)
                if (this._outOfBoundsFired && this.game.world.bounds.intersects(this._bounds))
                    this._outOfBoundsFired = !1,
                    this.events.onEnterBounds$dispatch(this);
                else if (!this._outOfBoundsFired && !this.game.world.bounds.intersects(this._bounds) && (this._outOfBoundsFired = !0, this.events.onOutOfBounds$dispatch(this), this.outOfBoundsKill))
                    return this.kill(), !1
        }
        return !0
    },
    c.Component.InWorld.prototype = {
        checkWorldBounds: !1,
        outOfBoundsKill: !1,
        outOfCameraBoundsKill: !1,
        _outOfBoundsFired: !1,
        inWorld: {
            get: function() {
                return this.game.world.bounds.intersects(this.getBounds())
            }
        }
    },
    c.Component.LifeSpan = function() {},
    c.Component.LifeSpan.preUpdate = function() {
        return !(this.lifespan > 0 && (this.lifespan -= this.game.time.physicsElapsedMS, this.lifespan <= 0)) || (this.kill(), !1)
    },
    c.Component.LifeSpan.prototype = {
        alive: !0,
        lifespan: 0,
        revive: function(a) {
            return void 0 === a && (a = 100), this.alive = !0, this.exists = !0, this.visible = !0, "function" == typeof this.setHealth && this.setHealth(a), this.events && this.events.onRevived$dispatch(this), this
        },
        kill: function() {
            return this.alive = !1, this.exists = !1, this.visible = !1, this.events && this.events.onKilled$dispatch(this), this
        }
    },
    c.Component.LoadTexture = function() {},
    c.Component.LoadTexture.prototype = {
        customRender: !1,
        _frame: null,
        loadTexture: function(a, b, d) {
            a === c.PENDING_ATLAS ? (a = b, b = 0) : b = b || 0,
            (d || void 0 === d) && this.animations && this.animations.stop(),
            this.key = a,
            this.customRender = !1;
            var e = this.game.cache,
                f = !0,
                g = !this.texture.baseTexture.scaleMode;
            if (c.RenderTexture && a instanceof c.RenderTexture)
                this.key = a.key,
                this.setTexture(a);
            else if (c.BitmapData && a instanceof c.BitmapData)
                this.customRender = !0,
                this.setTexture(a.texture),
                f = e.hasFrameData(a.key, c.Cache.BITMAPDATA) ? !this.animations.loadFrameData(e.getFrameData(a.key, c.Cache.BITMAPDATA), b) : !this.animations.loadFrameData(a.frameData, 0);
            else if (c.Video && a instanceof c.Video) {
                this.customRender = !0;
                var h = a.texture.valid;
                this.setTexture(a.texture),
                this.setFrame(a.texture.frame.clone()),
                a.onChangeSource.add(this.resizeFrame, this),
                this.texture.valid = h
            } else if (c.Tilemap && a instanceof c.TilemapLayer)
                this.setTexture(PIXI.Texture.fromCanvas(a.canvas));
            else if (a instanceof PIXI.Texture)
                this.setTexture(a);
            else {
                var i = e.getImage(a, !0);
                this.key = i.key,
                this.setTexture(new PIXI.Texture(i.base)),
                "__default" === a ? this.texture.baseTexture.skipRender = !0 : this.texture.baseTexture.skipRender = !1,
                f = !this.animations.loadFrameData(i.frameData, b)
            }
            f && (this._frame = c.Rectangle.clone(this.texture.frame)),
            g || (this.texture.baseTexture.scaleMode = 1)
        },
        setFrame: function(a) {
            this._frame = a,
            this.texture.frame.x = a.x,
            this.texture.frame.y = a.y,
            this.texture.frame.width = a.width,
            this.texture.frame.height = a.height,
            this.texture.crop.x = a.x,
            this.texture.crop.y = a.y,
            this.texture.crop.width = a.width,
            this.texture.crop.height = a.height,
            a.trimmed ? (this.texture.trim ? (this.texture.trim.x = a.spriteSourceSizeX, this.texture.trim.y = a.spriteSourceSizeY, this.texture.trim.width = a.sourceSizeW, this.texture.trim.height = a.sourceSizeH) : this.texture.trim = {
                x: a.spriteSourceSizeX,
                y: a.spriteSourceSizeY,
                width: a.sourceSizeW,
                height: a.sourceSizeH
            }, this.texture.width = a.sourceSizeW, this.texture.height = a.sourceSizeH, this.texture.frame.width = a.sourceSizeW, this.texture.frame.height = a.sourceSizeH) : !a.trimmed && this.texture.trim && (this.texture.trim = null),
            this.cropRect && this.updateCrop(),
            this.texture.requiresReTint = !0,
            this.texture._updateUvs(),
            this.tilingTexture && (this.refreshTexture = !0)
        },
        resizeFrame: function(a, b, c) {
            this.texture.frame.resize(b, c),
            this.texture.setFrame(this.texture.frame)
        },
        resetFrame: function() {
            this._frame && this.setFrame(this._frame)
        },
        frame: {
            get: function() {
                return this.animations.frame
            },
            set: function(a) {
                this.animations.frame = a
            }
        },
        frameName: {
            get: function() {
                return this.animations.frameName
            },
            set: function(a) {
                this.animations.frameName = a
            }
        }
    },
    c.Component.Overlap = function() {},
    c.Component.Overlap.prototype = {
        overlap: function(a) {
            return c.Rectangle.intersects(this.getBounds(), a.getBounds())
        }
    },
    c.Component.PhysicsBody = function() {},
    c.Component.PhysicsBody.preUpdate = function() {
        return this.fresh && this.exists ? (this.world.setTo(this.parent.position.x + this.position.x, this.parent.position.y + this.position.y), this.worldTransform.tx = this.world.x, this.worldTransform.ty = this.world.y, this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, this.body && this.body.preUpdate(), this.fresh = !1, !1) : (this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, !(!this._exists || !this.parent.exists) || (this.renderOrderID = -1, !1))
    },
    c.Component.PhysicsBody.postUpdate = function() {
        this.exists && this.body && this.body.postUpdate()
    },
    c.Component.PhysicsBody.prototype = {
        body: null,
        x: {
            get: function() {
                return this.position.x
            },
            set: function(a) {
                this.position.x = a,
                this.body && !this.body.dirty && (this.body._reset = !0)
            }
        },
        y: {
            get: function() {
                return this.position.y
            },
            set: function(a) {
                this.position.y = a,
                this.body && !this.body.dirty && (this.body._reset = !0)
            }
        }
    },
    c.Component.Reset = function() {},
    c.Component.Reset.prototype.reset = function(a, b, c) {
        return void 0 === c && (c = 1), this.world.set(a, b), this.position.set(a, b), this.fresh = !0, this.exists = !0, this.visible = !0, this.renderable = !0, this.components.InWorld && (this._outOfBoundsFired = !1), this.components.LifeSpan && (this.alive = !0, this.health = c), this.components.PhysicsBody && this.body && this.body.reset(a, b, !1, !1), this
    },
    c.Component.ScaleMinMax = function() {},
    c.Component.ScaleMinMax.prototype = {
        transformCallback: null,
        transformCallbackContext: this,
        scaleMin: null,
        scaleMax: null,
        checkTransform: function(a) {
            this.scaleMin && (a.a < this.scaleMin.x && (a.a = this.scaleMin.x), a.d < this.scaleMin.y && (a.d = this.scaleMin.y)),
            this.scaleMax && (a.a > this.scaleMax.x && (a.a = this.scaleMax.x), a.d > this.scaleMax.y && (a.d = this.scaleMax.y))
        },
        setScaleMinMax: function(a, b, d, e) {
            void 0 === b ? b = d = e = a : void 0 === d && (d = e = b, b = a),
            null === a ? this.scaleMin = null : this.scaleMin ? this.scaleMin.set(a, b) : this.scaleMin = new c.Point(a, b),
            null === d ? this.scaleMax = null : this.scaleMax ? this.scaleMax.set(d, e) : this.scaleMax = new c.Point(d, e),
            null === this.scaleMin ? this.transformCallback = null : (this.transformCallback = this.checkTransform, this.transformCallbackContext = this)
        }
    },
    c.Component.Smoothed = function() {},
    c.Component.Smoothed.prototype = {
        smoothed: {
            get: function() {
                return !this.texture.baseTexture.scaleMode
            },
            set: function(a) {
                a ? this.texture && (this.texture.baseTexture.scaleMode = 0) : this.texture && (this.texture.baseTexture.scaleMode = 1)
            }
        }
    },
    c.GameObjectFactory = function(a) {
        this.game = a,
        this.world = this.game.world
    },
    c.GameObjectFactory.prototype = {
        existing: function(a) {
            return this.world.add(a)
        },
        weapon: function(a, b, d, e) {
            var f = this.game.plugins.add(c.Weapon);
            return f.createBullets(a, b, d, e), f
        },
        image: function(a, b, d, e, f) {
            return void 0 === f && (f = this.world), f.add(new c.Image(this.game, a, b, d, e))
        },
        sprite: function(a, b, c, d, e) {
            return void 0 === e && (e = this.world), e.create(a, b, c, d)
        },
        creature: function(a, b, d, e, f) {
            void 0 === f && (f = this.world);
            var g = new c.Creature(this.game, a, b, d, e);
            return f.add(g), g
        },
        tween: function(a) {
            return this.game.tweens.create(a)
        },
        group: function(a, b, d, e, f) {
            return new c.Group(this.game, a, b, d, e, f)
        },
        physicsGroup: function(a, b, d, e) {
            return new c.Group(this.game, b, d, e, (!0), a)
        },
        spriteBatch: function(a, b, d) {
            return void 0 === a && (a = null), void 0 === b && (b = "group"), void 0 === d && (d = !1), new c.SpriteBatch(this.game, a, b, d)
        },
        audio: function(a, b, c, d) {
            return this.game.sound.add(a, b, c, d)
        },
        sound: function(a, b, c, d) {
            return this.game.sound.add(a, b, c, d)
        },
        audioSprite: function(a) {
            return this.game.sound.addSprite(a)
        },
        tileSprite: function(a, b, d, e, f, g, h) {
            return void 0 === h && (h = this.world), h.add(new c.TileSprite(this.game, a, b, d, e, f, g))
        },
        rope: function(a, b, d, e, f, g) {
            return void 0 === g && (g = this.world), g.add(new c.Rope(this.game, a, b, d, e, f))
        },
        text: function(a, b, d, e, f) {
            return void 0 === f && (f = this.world), f.add(new c.Text(this.game, a, b, d, e))
        },
        button: function(a, b, d, e, f, g, h, i, j, k) {
            return void 0 === k && (k = this.world), k.add(new c.Button(this.game, a, b, d, e, f, g, h, i, j))
        },
        graphics: function(a, b, d) {
            return void 0 === d && (d = this.world), d.add(new c.Graphics(this.game, a, b))
        },
        emitter: function(a, b, d) {
            return this.game.particles.add(new c.Particles.Arcade.Emitter(this.game, a, b, d))
        },
        retroFont: function(a, b, d, e, f, g, h, i, j) {
            return new c.RetroFont(this.game, a, b, d, e, f, g, h, i, j)
        },
        bitmapText: function(a, b, d, e, f, g) {
            return void 0 === g && (g = this.world), g.add(new c.BitmapText(this.game, a, b, d, e, f))
        },
        tilemap: function(a, b, d, e, f) {
            return new c.Tilemap(this.game, a, b, d, e, f)
        },
        renderTexture: function(a, b, d, e) {
            void 0 !== d && "" !== d || (d = this.game.rnd.uuid()),
            void 0 === e && (e = !1);
            var f = new c.RenderTexture(this.game, a, b, d);
            return e && this.game.cache.addRenderTexture(d, f), f
        },
        video: function(a, b) {
            return new c.Video(this.game, a, b)
        },
        bitmapData: function(a, b, d, e) {
            void 0 === e && (e = !1),
            void 0 !== d && "" !== d || (d = this.game.rnd.uuid());
            var f = new c.BitmapData(this.game, d, a, b);
            return e && this.game.cache.addBitmapData(d, f), f
        },
        filter: function(a) {
            var b = Array.prototype.slice.call(arguments, 1),
                a = new c.Filter[a](this.game);
            return a.init.apply(a, b), a
        },
        plugin: function(a) {
            return this.game.plugins.add(a)
        }
    },
    c.GameObjectFactory.prototype.constructor = c.GameObjectFactory,
    c.GameObjectCreator = function(a) {
        this.game = a,
        this.world = this.game.world
    },
    c.GameObjectCreator.prototype = {
        image: function(a, b, d, e) {
            return new c.Image(this.game, a, b, d, e)
        },
        sprite: function(a, b, d, e) {
            return new c.Sprite(this.game, a, b, d, e)
        },
        tween: function(a) {
            return new c.Tween(a, this.game, this.game.tweens)
        },
        group: function(a, b, d, e, f) {
            return new c.Group(this.game, a, b, d, e, f)
        },
        spriteBatch: function(a, b, d) {
            return void 0 === b && (b = "group"), void 0 === d && (d = !1), new c.SpriteBatch(this.game, a, b, d)
        },
        audio: function(a, b, c, d) {
            return this.game.sound.add(a, b, c, d)
        },
        audioSprite: function(a) {
            return this.game.sound.addSprite(a)
        },
        sound: function(a, b, c, d) {
            return this.game.sound.add(a, b, c, d)
        },
        tileSprite: function(a, b, d, e, f, g) {
            return new c.TileSprite(this.game, a, b, d, e, f, g)
        },
        rope: function(a, b, d, e, f) {
            return new c.Rope(this.game, a, b, d, e, f)
        },
        text: function(a, b, d, e) {
            return new c.Text(this.game, a, b, d, e)
        },
        button: function(a, b, d, e, f, g, h, i, j) {
            return new c.Button(this.game, a, b, d, e, f, g, h, i, j)
        },
        graphics: function(a, b) {
            return new c.Graphics(this.game, a, b)
        },
        emitter: function(a, b, d) {
            return new c.Particles.Arcade.Emitter(this.game, a, b, d)
        },
        retroFont: function(a, b, d, e, f, g, h, i, j) {
            return new c.RetroFont(this.game, a, b, d, e, f, g, h, i, j)
        },
        bitmapText: function(a, b, d, e, f, g) {
            return new c.BitmapText(this.game, a, b, d, e, f, g)
        },
        tilemap: function(a, b, d, e, f) {
            return new c.Tilemap(this.game, a, b, d, e, f)
        },
        renderTexture: function(a, b, d, e) {
            void 0 !== d && "" !== d || (d = this.game.rnd.uuid()),
            void 0 === e && (e = !1);
            var f = new c.RenderTexture(this.game, a, b, d);
            return e && this.game.cache.addRenderTexture(d, f), f
        },
        bitmapData: function(a, b, d, e) {
            void 0 === e && (e = !1),
            void 0 !== d && "" !== d || (d = this.game.rnd.uuid());
            var f = new c.BitmapData(this.game, d, a, b);
            return e && this.game.cache.addBitmapData(d, f), f
        },
        filter: function(a) {
            var b = Array.prototype.slice.call(arguments, 1),
                a = new c.Filter[a](this.game);
            return a.init.apply(a, b), a
        }
    },
    c.GameObjectCreator.prototype.constructor = c.GameObjectCreator,
    c.Sprite = function(a, b, d, e, f) {
        b = b || 0,
        d = d || 0,
        e = e || null,
        f = f || null,
        this.type = c.SPRITE,
        this.physicsType = c.SPRITE,
        PIXI.Sprite.call(this, c.Cache.DEFAULT),
        c.Component.Core.init.call(this, a, b, d, e, f)
    },
    c.Sprite.prototype = Object.create(PIXI.Sprite.prototype),
    c.Sprite.prototype.constructor = c.Sprite,
    c.Component.Core.install.call(c.Sprite.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Delta", "Destroy", "FixedToCamera", "Health", "InCamera", "InputEnabled", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "ScaleMinMax", "Smoothed"]),
    c.Sprite.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.Sprite.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.Sprite.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Sprite.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Sprite.prototype.preUpdate = function() {
        return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
    },
    c.Image = function(a, b, d, e, f) {
        b = b || 0,
        d = d || 0,
        e = e || null,
        f = f || null,
        this.type = c.IMAGE,
        PIXI.Sprite.call(this, c.Cache.DEFAULT),
        c.Component.Core.init.call(this, a, b, d, e, f)
    },
    c.Image.prototype = Object.create(PIXI.Sprite.prototype),
    c.Image.prototype.constructor = c.Image,
    c.Component.Core.install.call(c.Image.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Destroy", "FixedToCamera", "InputEnabled", "LifeSpan", "LoadTexture", "Overlap", "Reset", "ScaleMinMax", "Smoothed"]),
    c.Image.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Image.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Image.prototype.preUpdate = function() {
        return !!this.preUpdateInWorld() && this.preUpdateCore()
    },
    c.Button = function(a, b, d, e, f, g, h, i, j, k) {
        b = b || 0,
        d = d || 0,
        e = e || null,
        f = f || null,
        g = g || this,
        c.Image.call(this, a, b, d, e, i),
        this.type = c.BUTTON,
        this.physicsType = c.SPRITE,
        this._onOverFrame = null,
        this._onOutFrame = null,
        this._onDownFrame = null,
        this._onUpFrame = null,
        this.onOverSound = null,
        this.onOutSound = null,
        this.onDownSound = null,
        this.onUpSound = null,
        this.onOverSoundMarker = "",
        this.onOutSoundMarker = "",
        this.onDownSoundMarker = "",
        this.onUpSoundMarker = "",
        this.onInputOver = new c.Signal,
        this.onInputOut = new c.Signal,
        this.onInputDown = new c.Signal,
        this.onInputUp = new c.Signal,
        this.onOverMouseOnly = !0,
        this.justReleasedPreventsOver = c.PointerMode.TOUCH,
        this.freezeFrames = !1,
        this.forceOut = !1,
        this.inputEnabled = !0,
        this.input.start(0, !0),
        this.input.useHandCursor = !0,
        this.setFrames(h, i, j, k),
        null !== f && this.onInputUp.add(f, g),
        this.events.onInputOver.add(this.onInputOverHandler, this),
        this.events.onInputOut.add(this.onInputOutHandler, this),
        this.events.onInputDown.add(this.onInputDownHandler, this),
        this.events.onInputUp.add(this.onInputUpHandler, this),
        this.events.onRemovedFromWorld.add(this.removedFromWorld, this)
    },
    c.Button.prototype = Object.create(c.Image.prototype),
    c.Button.prototype.constructor = c.Button;
    var g = "Over",
        h = "Out",
        i = "Down",
        j = "Up";
    c.Button.prototype.clearFrames = function() {
        this.setFrames(null, null, null, null)
    },
    c.Button.prototype.removedFromWorld = function() {
        this.inputEnabled = !1
    },
    c.Button.prototype.setStateFrame = function(a, b, c) {
        var d = "_on" + a + "Frame";
        null !== b ? (this[d] = b, c && this.changeStateFrame(a)) : this[d] = null
    },
    c.Button.prototype.changeStateFrame = function(a) {
        if (this.freezeFrames)
            return !1;
        var b = "_on" + a + "Frame",
            c = this[b];
        return "string" == typeof c ? (this.frameName = c, !0) : "number" == typeof c && (this.frame = c, !0)
    },
    c.Button.prototype.setFrames = function(a, b, c, d) {
        this.setStateFrame(g, a, this.input.pointerOver()),
        this.setStateFrame(h, b, !this.input.pointerOver()),
        this.setStateFrame(i, c, this.input.pointerDown()),
        this.setStateFrame(j, d, this.input.pointerUp())
    },
    c.Button.prototype.setStateSound = function(a, b, d) {
        var e = "on" + a + "Sound",
            f = "on" + a + "SoundMarker";
        b instanceof c.Sound || b instanceof c.AudioSprite ? (this[e] = b, this[f] = "string" == typeof d ? d : "") : (this[e] = null, this[f] = "")
    },
    c.Button.prototype.playStateSound = function(a) {
        var b = "on" + a + "Sound",
            c = this[b];
        if (c) {
            var d = "on" + a + "SoundMarker",
                e = this[d];
            return c.play(e), !0
        }
        return !1
    },
    c.Button.prototype.setSounds = function(a, b, c, d, e, f, k, l) {
        this.setStateSound(g, a, b),
        this.setStateSound(h, e, f),
        this.setStateSound(i, c, d),
        this.setStateSound(j, k, l)
    },
    c.Button.prototype.setOverSound = function(a, b) {
        this.setStateSound(g, a, b)
    },
    c.Button.prototype.setOutSound = function(a, b) {
        this.setStateSound(h, a, b)
    },
    c.Button.prototype.setDownSound = function(a, b) {
        this.setStateSound(i, a, b)
    },
    c.Button.prototype.setUpSound = function(a, b) {
        this.setStateSound(j, a, b)
    },
    c.Button.prototype.onInputOverHandler = function(a, b) {
        b.justReleased() && (this.justReleasedPreventsOver & b.pointerMode) === b.pointerMode || (this.changeStateFrame(g), this.onOverMouseOnly && !b.isMouse || (this.playStateSound(g), this.onInputOver && this.onInputOver.dispatch(this, b)))
    },
    c.Button.prototype.onInputOutHandler = function(a, b) {
        this.changeStateFrame(h),
        this.playStateSound(h),
        this.onInputOut && this.onInputOut.dispatch(this, b)
    },
    c.Button.prototype.onInputDownHandler = function(a, b) {
        this.changeStateFrame(i),
        this.playStateSound(i),
        this.onInputDown && this.onInputDown.dispatch(this, b)
    },
    c.Button.prototype.onInputUpHandler = function(a, b, c) {
        if (this.playStateSound(j), this.onInputUp && this.onInputUp.dispatch(this, b, c), !this.freezeFrames)
            if (this.forceOut === !0 || (this.forceOut & b.pointerMode) === b.pointerMode)
                this.changeStateFrame(h);
            else {
                var d = this.changeStateFrame(j);
                d || (c ? this.changeStateFrame(g) : this.changeStateFrame(h))
            }
    },
    c.SpriteBatch = function(a, b, d, e) {
        void 0 !== b && null !== b || (b = a.world),
        PIXI.SpriteBatch.call(this),
        c.Group.call(this, a, b, d, e),
        this.type = c.SPRITEBATCH
    },
    c.SpriteBatch.prototype = c.Utils.extend(!0, c.SpriteBatch.prototype, PIXI.SpriteBatch.prototype, c.Group.prototype),
    c.SpriteBatch.prototype.constructor = c.SpriteBatch,
    c.BitmapData = function(a, b, d, e, f) {
        void 0 !== d && 0 !== d || (d = 256),
        void 0 !== e && 0 !== e || (e = 256),
        void 0 === f && (f = !1),
        this.game = a,
        this.key = b,
        this.width = d,
        this.height = e,
        this.canvas = c.Canvas.create(this, d, e, null, f),
        this.context = this.canvas.getContext("2d", {
            alpha: !0
        }),
        this.ctx = this.context,
        this.smoothProperty = a.renderType === c.CANVAS ? a.renderer.renderSession.smoothProperty : c.Canvas.getSmoothingPrefix(this.context),
        this.imageData = this.context.getImageData(0, 0, d, e),
        this.data = null,
        this.imageData && (this.data = this.imageData.data),
        this.pixels = null,
        this.data && (this.imageData.data.buffer ? (this.buffer = this.imageData.data.buffer, this.pixels = new Uint32Array(this.buffer)) : window.ArrayBuffer ? (this.buffer = new ArrayBuffer(this.imageData.data.length), this.pixels = new Uint32Array(this.buffer)) : this.pixels = this.imageData.data),
        this.baseTexture = new PIXI.BaseTexture(this.canvas),
        this.texture = new PIXI.Texture(this.baseTexture),
        this.frameData = new c.FrameData,
        this.textureFrame = this.frameData.addFrame(new c.Frame(0, 0, 0, d, e, "bitmapData")),
        this.texture.frame = this.textureFrame,
        this.type = c.BITMAPDATA,
        this.disableTextureUpload = !1,
        this.dirty = !1,
        this.cls = this.clear,
        this._image = null,
        this._pos = new c.Point,
        this._size = new c.Point,
        this._scale = new c.Point,
        this._rotate = 0,
        this._alpha = {
            prev: 1,
            current: 1
        },
        this._anchor = new c.Point,
        this._tempR = 0,
        this._tempG = 0,
        this._tempB = 0,
        this._circle = new c.Circle,
        this._swapCanvas = void 0
    },
    c.BitmapData.prototype = {
        move: function(a, b, c) {
            return 0 !== a && this.moveH(a, c), 0 !== b && this.moveV(b, c), this
        },
        moveH: function(a, b) {
            void 0 === b && (b = !0),
            void 0 === this._swapCanvas && (this._swapCanvas = PIXI.CanvasPool.create(this, this.width, this.height));
            var c = this._swapCanvas,
                d = c.getContext("2d"),
                e = this.height,
                f = this.canvas;
            if (d.clearRect(0, 0, this.width, this.height), a < 0) {
                a = Math.abs(a);
                var g = this.width - a;
                b && d.drawImage(f, 0, 0, a, e, g, 0, a, e),
                d.drawImage(f, a, 0, g, e, 0, 0, g, e)
            } else {
                var g = this.width - a;
                b && d.drawImage(f, g, 0, a, e, 0, 0, a, e),
                d.drawImage(f, 0, 0, g, e, a, 0, g, e)
            }
            return this.clear(), this.copy(this._swapCanvas)
        },
        moveV: function(a, b) {
            void 0 === b && (b = !0),
            void 0 === this._swapCanvas && (this._swapCanvas = PIXI.CanvasPool.create(this, this.width, this.height));
            var c = this._swapCanvas,
                d = c.getContext("2d"),
                e = this.width,
                f = this.canvas;
            if (d.clearRect(0, 0, this.width, this.height), a < 0) {
                a = Math.abs(a);
                var g = this.height - a;
                b && d.drawImage(f, 0, 0, e, a, 0, g, e, a),
                d.drawImage(f, 0, a, e, g, 0, 0, e, g)
            } else {
                var g = this.height - a;
                b && d.drawImage(f, 0, g, e, a, 0, 0, e, a),
                d.drawImage(f, 0, 0, e, g, 0, a, e, g)
            }
            return this.clear(), this.copy(this._swapCanvas)
        },
        add: function(a) {
            if (Array.isArray(a))
                for (var b = 0; b < a.length; b++)
                    a[b].loadTexture && a[b].loadTexture(this);
            else
                a.loadTexture(this);
            return this
        },
        load: function(a) {
            if ("string" == typeof a && (a = this.game.cache.getImage(a)), a)
                return this.resize(a.width, a.height), this.cls(), this.draw(a), this.update(), this
        },
        clear: function(a, b, c, d) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = this.width), void 0 === d && (d = this.height), this.context.clearRect(a, b, c, d), this.dirty = !0, this
        },
        fill: function(a, b, c, d) {
            return void 0 === d && (d = 1), this.context.fillStyle = "rgba(" + a + "," + b + "," + c + "," + d + ")", this.context.fillRect(0, 0, this.width, this.height), this.dirty = !0, this
        },
        generateTexture: function(a) {
            var b = new Image;
            b.src = this.canvas.toDataURL("image/png");
            var c = this.game.cache.addImage(a, "", b);
            return new PIXI.Texture(c.base)
        },
        resize: function(a, b) {
            return a === this.width && b === this.height || (this.width = a, this.height = b, this.canvas.width = a, this.canvas.height = b, void 0 !== this._swapCanvas && (this._swapCanvas.width = a, this._swapCanvas.height = b), this.baseTexture.width = a, this.baseTexture.height = b, this.textureFrame.width = a, this.textureFrame.height = b, this.texture.width = a, this.texture.height = b, this.texture.crop.width = a, this.texture.crop.height = b, this.update(), this.dirty = !0), this
        },
        update: function(a, b, c, d) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = Math.max(1, this.width)), void 0 === d && (d = Math.max(1, this.height)), this.imageData = this.context.getImageData(a, b, c, d), this.data = this.imageData.data, this.imageData.data.buffer ? (this.buffer = this.imageData.data.buffer, this.pixels = new Uint32Array(this.buffer)) : window.ArrayBuffer ? (this.buffer = new ArrayBuffer(this.imageData.data.length), this.pixels = new Uint32Array(this.buffer)) : this.pixels = this.imageData.data, this
        },
        processPixelRGB: function(a, b, d, e, f, g) {
            void 0 === d && (d = 0),
            void 0 === e && (e = 0),
            void 0 === f && (f = this.width),
            void 0 === g && (g = this.height);
            for (var h = d + f, i = e + g, j = c.Color.createColor(), k = {
                    r: 0,
                    g: 0,
                    b: 0,
                    a: 0
                }, l = !1, m = e; m < i; m++)
                for (var n = d; n < h; n++)
                    c.Color.unpackPixel(this.getPixel32(n, m), j),
                    k = a.call(b, j, n, m),
                    k !== !1 && null !== k && void 0 !== k && (this.setPixel32(n, m, k.r, k.g, k.b, k.a, !1), l = !0);
            return l && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0), this
        },
        processPixel: function(a, b, c, d, e, f) {
            void 0 === c && (c = 0),
            void 0 === d && (d = 0),
            void 0 === e && (e = this.width),
            void 0 === f && (f = this.height);
            for (var g = c + e, h = d + f, i = 0, j = 0, k = !1, l = d; l < h; l++)
                for (var m = c; m < g; m++)
                    i = this.getPixel32(m, l),
                    j = a.call(b, i, m, l),
                    j !== i && (this.pixels[l * this.width + m] = j, k = !0);
            return k && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0), this
        },
        replaceRGB: function(a, b, d, e, f, g, h, i, j) {
            var k = 0,
                l = 0,
                m = this.width,
                n = this.height,
                o = c.Color.packPixel(a, b, d, e);
            void 0 !== j && j instanceof c.Rectangle && (k = j.x, l = j.y, m = j.width, n = j.height);
            for (var p = 0; p < n; p++)
                for (var q = 0; q < m; q++)
                    this.getPixel32(k + q, l + p) === o && this.setPixel32(k + q, l + p, f, g, h, i, !1);
            return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this
        },
        setHSL: function(a, b, d, e) {
            var f = a || 0 === a,
                g = b || 0 === b,
                h = d || 0 === d;
            if (f || g || h) {
                void 0 === e && (e = new c.Rectangle(0, 0, this.width, this.height));
                for (var i = c.Color.createColor(), j = e.y; j < e.bottom; j++)
                    for (var k = e.x; k < e.right; k++)
                        c.Color.unpackPixel(this.getPixel32(k, j), i, !0),
                        f && (i.h = a),
                        g && (i.s = b),
                        h && (i.l = d),
                        c.Color.HSLtoRGB(i.h, i.s, i.l, i),
                        this.setPixel32(k, j, i.r, i.g, i.b, i.a, !1);
                return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this
            }
        },
        shiftHSL: function(a, b, d, e) {
            if (void 0 !== a && null !== a || (a = !1), void 0 !== b && null !== b || (b = !1), void 0 !== d && null !== d || (d = !1), a || b || d) {
                void 0 === e && (e = new c.Rectangle(0, 0, this.width, this.height));
                for (var f = c.Color.createColor(), g = e.y; g < e.bottom; g++)
                    for (var h = e.x; h < e.right; h++)
                        c.Color.unpackPixel(this.getPixel32(h, g), f, !0),
                        a && (f.h = this.game.math.wrap(f.h + a, 0, 1)),
                        b && (f.s = this.game.math.clamp(f.s + b, 0, 1)),
                        d && (f.l = this.game.math.clamp(f.l + d, 0, 1)),
                        c.Color.HSLtoRGB(f.h, f.s, f.l, f),
                        this.setPixel32(h, g, f.r, f.g, f.b, f.a, !1);
                return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this
            }
        },
        setPixel32: function(a, b, d, e, f, g, h) {
            return void 0 === h && (h = !0), a >= 0 && a <= this.width && b >= 0 && b <= this.height && (c.Device.LITTLE_ENDIAN ? this.pixels[b * this.width + a] = g << 24 | f << 16 | e << 8 | d : this.pixels[b * this.width + a] = d << 24 | e << 16 | f << 8 | g, h && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0)), this
        },
        setPixel: function(a, b, c, d, e, f) {
            return this.setPixel32(a, b, c, d, e, 255, f)
        },
        getPixel: function(a, b, d) {
            d || (d = c.Color.createColor());
            var e = ~~(a + b * this.width);
            return e *= 4, d.r = this.data[e], d.g = this.data[++e], d.b = this.data[++e], d.a = this.data[++e], d
        },
        getPixel32: function(a, b) {
            if (a >= 0 && a <= this.width && b >= 0 && b <= this.height)
                return this.pixels[b * this.width + a]
        },
        getPixelRGB: function(a, b, d, e, f) {
            return c.Color.unpackPixel(this.getPixel32(a, b), d, e, f)
        },
        getPixels: function(a) {
            return this.context.getImageData(a.x, a.y, a.width, a.height)
        },
        getFirstPixel: function(a) {
            void 0 === a && (a = 0);
            var b = c.Color.createColor(),
                d = 0,
                e = 0,
                f = 1,
                g = !1;
            1 === a ? (f = -1, e = this.height) : 3 === a && (f = -1, d = this.width);
            do c.Color.unpackPixel(this.getPixel32(d, e), b),
            0 === a || 1 === a ? (d++, d === this.width && (d = 0, e += f, (e >= this.height || e <= 0) && (g = !0))) : 2 !== a && 3 !== a || (e++, e === this.height && (e = 0, d += f, (d >= this.width || d <= 0) && (g = !0)));
            while (0 === b.a && !g);
            return b.x = d, b.y = e, b
        },
        getBounds: function(a) {
            return void 0 === a && (a = new c.Rectangle), a.x = this.getFirstPixel(2).x, a.x === this.width ? a.setTo(0, 0, 0, 0) : (a.y = this.getFirstPixel(0).y, a.width = this.getFirstPixel(3).x - a.x + 1, a.height = this.getFirstPixel(1).y - a.y + 1, a)
        },
        addToWorld: function(a, b, c, d, e, f) {
            e = e || 1,
            f = f || 1;
            var g = this.game.add.image(a, b, this);
            return g.anchor.set(c, d), g.scale.set(e, f), g
        },
        copy: function(a, b, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
            if (void 0 !== a && null !== a || (a = this), (a instanceof c.RenderTexture || a instanceof PIXI.RenderTexture) && (a = a.getCanvas()), this._image = a, a instanceof c.Sprite || a instanceof c.Image || a instanceof c.Text || a instanceof PIXI.Sprite)
                this._pos.set(a.texture.crop.x, a.texture.crop.y),
                this._size.set(a.texture.crop.width, a.texture.crop.height),
                this._scale.set(a.scale.x, a.scale.y),
                this._anchor.set(a.anchor.x, a.anchor.y),
                this._rotate = a.rotation,
                this._alpha.current = a.alpha,
                a.texture instanceof c.RenderTexture || a.texture instanceof PIXI.RenderTexture ? this._image = a.texture.getCanvas() : this._image = a.texture.baseTexture.source,
                void 0 !== g && null !== g || (g = a.x),
                void 0 !== h && null !== h || (h = a.y),
                a.texture.trim && (g += a.texture.trim.x - a.anchor.x * a.texture.trim.width, h += a.texture.trim.y - a.anchor.y * a.texture.trim.height),
                16777215 !== a.tint && (a.cachedTint !== a.tint && (a.cachedTint = a.tint, a.tintedTexture = PIXI.CanvasTinter.getTintedTexture(a, a.tint)), this._image = a.tintedTexture, this._pos.set(0));
            else {
                if (this._pos.set(0), this._scale.set(1), this._anchor.set(0), this._rotate = 0, this._alpha.current = 1, a instanceof c.BitmapData)
                    this._image = a.canvas;
                else if ("string" == typeof a) {
                    if (a = this.game.cache.getImage(a), null === a)
                        return;
                    this._image = a
                }
                this._size.set(this._image.width, this._image.height)
            }
            if (void 0 !== b && null !== b || (b = 0), void 0 !== d && null !== d || (d = 0), e && (this._size.x = e), f && (this._size.y = f), void 0 !== g && null !== g || (g = b), void 0 !== h && null !== h || (h = d), void 0 !== i && null !== i || (i = this._size.x), void 0 !== j && null !== j || (j = this._size.y), "number" == typeof k && (this._rotate = k), "number" == typeof l && (this._anchor.x = l), "number" == typeof m && (this._anchor.y = m), "number" == typeof n && (this._scale.x = n), "number" == typeof o && (this._scale.y = o), "number" == typeof p && (this._alpha.current = p), void 0 === q && (q = null), void 0 === r && (r = !1), !(this._alpha.current <= 0 || 0 === this._scale.x || 0 === this._scale.y || 0 === this._size.x || 0 === this._size.y)) {
                var s = this.context;
                return this._alpha.prev = s.globalAlpha, s.save(), s.globalAlpha = this._alpha.current, q && (this.op = q), r && (g |= 0, h |= 0), s.translate(g, h), s.scale(this._scale.x, this._scale.y), s.rotate(this._rotate), s.drawImage(this._image, this._pos.x + b, this._pos.y + d, this._size.x, this._size.y, -i * this._anchor.x, -j * this._anchor.y, i, j), s.restore(), s.globalAlpha = this._alpha.prev, this.dirty = !0, this
            }
        },
        copyTransform: function(a, b, d) {
            if (void 0 === b && (b = null), void 0 === d && (d = !1), !a.hasOwnProperty("worldTransform") || !a.worldVisible || 0 === a.worldAlpha)
                return this;
            var e = a.worldTransform;
            if (this._pos.set(a.texture.crop.x, a.texture.crop.y), this._size.set(a.texture.crop.width, a.texture.crop.height), 0 === e.a || 0 === e.d || 0 === this._size.x || 0 === this._size.y)
                return this;
            a.texture instanceof c.RenderTexture || a.texture instanceof PIXI.RenderTexture ? this._image = a.texture.getCanvas() : this._image = a.texture.baseTexture.source;
            var f = e.tx,
                g = e.ty;
            a.texture.trim && (f += a.texture.trim.x - a.anchor.x * a.texture.trim.width, g += a.texture.trim.y - a.anchor.y * a.texture.trim.height),
            16777215 !== a.tint && (a.cachedTint !== a.tint && (a.cachedTint = a.tint, a.tintedTexture = PIXI.CanvasTinter.getTintedTexture(a, a.tint)), this._image = a.tintedTexture, this._pos.set(0)),
            d && (f |= 0, g |= 0);
            var h = this.context;
            return this._alpha.prev = h.globalAlpha, h.save(), h.globalAlpha = this._alpha.current, b && (this.op = b), h[this.smoothProperty] = a.texture.baseTexture.scaleMode === PIXI.scaleModes.LINEAR, h.setTransform(e.a, e.b, e.c, e.d, f, g), h.drawImage(this._image, this._pos.x, this._pos.y, this._size.x, this._size.y, -this._size.x * a.anchor.x, -this._size.y * a.anchor.y, this._size.x, this._size.y), h.restore(), h.globalAlpha = this._alpha.prev, this.dirty = !0, this
        },
        copyRect: function(a, b, c, d, e, f, g) {
            return this.copy(a, b.x, b.y, b.width, b.height, c, d, b.width, b.height, 0, 0, 0, 1, 1, e, f, g)
        },
        draw: function(a, b, c, d, e, f, g) {
            return this.copy(a, null, null, null, null, b, c, d, e, null, null, null, null, null, null, f, g)
        },
        drawGroup: function(a, b, c) {
            return a.total > 0 && a.forEachExists(this.drawGroupProxy, this, b, c), this
        },
        drawGroupProxy: function(a, b, d) {
            if (a.hasOwnProperty("texture") && this.copyTransform(a, b, d), a.type === c.GROUP && a.exists)
                this.drawGroup(a, b, d);
            else if (a.hasOwnProperty("children") && a.children.length > 0)
                for (var e = 0; e < a.children.length; e++)
                    a.children[e].exists && this.copyTransform(a.children[e], b, d)
        },
        drawFull: function(a, b, d) {
            if (a.worldVisible === !1 || 0 === a.worldAlpha || a.hasOwnProperty("exists") && a.exists === !1)
                return this;
            if (a.type !== c.GROUP && a.type !== c.EMITTER && a.type !== c.BITMAPTEXT)
                if (a.type === c.GRAPHICS) {
                    var e = a.getBounds();
                    this.ctx.save(),
                    this.ctx.translate(e.x, e.y),
                    PIXI.CanvasGraphics.renderGraphics(a, this.ctx),
                    this.ctx.restore()
                } else
                    this.copy(a, null, null, null, null, a.worldPosition.x, a.worldPosition.y, null, null, a.worldRotation, null, null, a.worldScale.x, a.worldScale.y, a.worldAlpha, b, d);
            if (a.children)
                for (var f = 0; f < a.children.length; f++)
                    this.drawFull(a.children[f], b, d);
            return this
        },
        shadow: function(a, b, c, d) {
            var e = this.context;
            return void 0 === a || null === a ? e.shadowColor = "rgba(0,0,0,0)" : (e.shadowColor = a, e.shadowBlur = b || 5, e.shadowOffsetX = c || 10, e.shadowOffsetY = d || 10), this
        },
        alphaMask: function(a, b, c, d) {
            return void 0 === d || null === d ? this.draw(b).blendSourceAtop() : this.draw(b, d.x, d.y, d.width, d.height).blendSourceAtop(), void 0 === c || null === c ? this.draw(a).blendReset() : this.draw(a, c.x, c.y, c.width, c.height).blendReset(), this
        },
        extract: function(a, b, c, d, e, f, g, h, i) {
            return void 0 === e && (e = 255), void 0 === f && (f = !1), void 0 === g && (g = b), void 0 === h && (h = c), void 0 === i && (i = d), f && a.resize(this.width, this.height), this.processPixelRGB(function(f, j, k) {
                return f.r === b && f.g === c && f.b === d && a.setPixel32(j, k, g, h, i, e, !1), !1
            }, this), a.context.putImageData(a.imageData, 0, 0), a.dirty = !0, a
        },
        rect: function(a, b, c, d, e) {
            return "undefined" != typeof e && (this.context.fillStyle = e), this.context.fillRect(a, b, c, d), this
        },
        text: function(a, b, c, d, e, f) {
            void 0 === b && (b = 0),
            void 0 === c && (c = 0),
            void 0 === d && (d = "14px Courier"),
            void 0 === e && (e = "rgb(255,255,255)"),
            void 0 === f && (f = !0);
            var g = this.context,
                h = g.font;
            return g.font = d, f && (g.fillStyle = "rgb(0,0,0)", g.fillText(a, b + 1, c + 1)), g.fillStyle = e, g.fillText(a, b, c), g.font = h, this
        },
        circle: function(a, b, c, d) {
            var e = this.context;
            return void 0 !== d && (e.fillStyle = d), e.beginPath(), e.arc(a, b, c, 0, 2 * Math.PI, !1), e.closePath(), e.fill(), this
        },
        line: function(a, b, c, d, e, f) {
            void 0 === e && (e = "#fff"),
            void 0 === f && (f = 1);
            var g = this.context;
            return g.beginPath(), g.moveTo(a, b), g.lineTo(c, d), g.lineWidth = f, g.strokeStyle = e, g.stroke(), g.closePath(), this
        },
        textureLine: function(a, b, d) {
            if (void 0 === d && (d = "repeat-x"), "string" != typeof b || (b = this.game.cache.getImage(b))) {
                var e = a.length;
                "no-repeat" === d && e > b.width && (e = b.width);
                var f = this.context;
                return f.fillStyle = f.createPattern(b, d), this._circle = new c.Circle(a.start.x, a.start.y, b.height), this._circle.circumferencePoint(a.angle - 1.5707963267948966, !1, this._pos), f.save(), f.translate(this._pos.x, this._pos.y), f.rotate(a.angle), f.fillRect(0, 0, e, b.height), f.restore(), this.dirty = !0, this
            }
        },
        render: function() {
            return !this.disableTextureUpload && this.dirty && (this.baseTexture.dirty(), this.dirty = !1), this
        },
        destroy: function() {
            this.frameData.destroy(),
            this.texture.destroy(!0),
            PIXI.CanvasPool.remove(this)
        },
        blendReset: function() {
            return this.op = "source-over", this
        },
        blendSourceOver: function() {
            return this.op = "source-over", this
        },
        blendSourceIn: function() {
            return this.op = "source-in", this
        },
        blendSourceOut: function() {
            return this.op = "source-out", this
        },
        blendSourceAtop: function() {
            return this.op = "source-atop", this
        },
        blendDestinationOver: function() {
            return this.op = "destination-over", this
        },
        blendDestinationIn: function() {
            return this.op = "destination-in", this
        },
        blendDestinationOut: function() {
            return this.op = "destination-out", this
        },
        blendDestinationAtop: function() {
            return this.op = "destination-atop", this
        },
        blendXor: function() {
            return this.op = "xor", this
        },
        blendAdd: function() {
            return this.op = "lighter", this
        },
        blendMultiply: function() {
            return this.op = "multiply", this
        },
        blendScreen: function() {
            return this.op = "screen", this
        },
        blendOverlay: function() {
            return this.op = "overlay", this
        },
        blendDarken: function() {
            return this.op = "darken", this
        },
        blendLighten: function() {
            return this.op = "lighten", this
        },
        blendColorDodge: function() {
            return this.op = "color-dodge", this
        },
        blendColorBurn: function() {
            return this.op = "color-burn", this
        },
        blendHardLight: function() {
            return this.op = "hard-light", this
        },
        blendSoftLight: function() {
            return this.op = "soft-light", this
        },
        blendDifference: function() {
            return this.op = "difference", this
        },
        blendExclusion: function() {
            return this.op = "exclusion", this
        },
        blendHue: function() {
            return this.op = "hue", this
        },
        blendSaturation: function() {
            return this.op = "saturation", this
        },
        blendColor: function() {
            return this.op = "color", this
        },
        blendLuminosity: function() {
            return this.op = "luminosity", this
        }
    },
    Object.defineProperty(c.BitmapData.prototype, "smoothed", {
        get: function() {
            c.Canvas.getSmoothingEnabled(this.context)
        },
        set: function(a) {
            c.Canvas.setSmoothingEnabled(this.context, a)
        }
    }),
    Object.defineProperty(c.BitmapData.prototype, "op", {
        get: function() {
            return this.context.globalCompositeOperation
        },
        set: function(a) {
            this.context.globalCompositeOperation = a
        }
    }),
    c.BitmapData.getTransform = function(a, b, c, d, e, f) {
        return "number" != typeof a && (a = 0), "number" != typeof b && (b = 0), "number" != typeof c && (c = 1), "number" != typeof d && (d = 1), "number" != typeof e && (e = 0), "number" != typeof f && (f = 0), {
            sx: c,
            sy: d,
            scaleX: c,
            scaleY: d,
            skewX: e,
            skewY: f,
            translateX: a,
            translateY: b,
            tx: a,
            ty: b
        }
    },
    c.BitmapData.prototype.constructor = c.BitmapData,
    PIXI.Graphics = function() {
        PIXI.DisplayObjectContainer.call(this),
        this.renderable = !0,
        this.fillAlpha = 1,
        this.lineWidth = 0,
        this.lineColor = 0,
        this.graphicsData = [],
        this.tint = 16777215,
        this.blendMode = PIXI.blendModes.NORMAL,
        this.currentPath = null,
        this._webGL = [],
        this.isMask = !1,
        this.boundsPadding = 0,
        this._localBounds = new PIXI.Rectangle(0, 0, 1, 1),
        this.dirty = !0,
        this._boundsDirty = !1,
        this.webGLDirty = !1,
        this.cachedSpriteDirty = !1
    },
    PIXI.Graphics.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
    PIXI.Graphics.prototype.constructor = PIXI.Graphics,
    PIXI.Graphics.prototype.lineStyle = function(a, b, c) {
        return this.lineWidth = a || 0, this.lineColor = b || 0, this.lineAlpha = void 0 === c ? 1 : c, this.currentPath && (this.currentPath.shape.points.length ? this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2))) : (this.currentPath.lineWidth = this.lineWidth, this.currentPath.lineColor = this.lineColor, this.currentPath.lineAlpha = this.lineAlpha)), this
    },
    PIXI.Graphics.prototype.moveTo = function(a, b) {
        return this.drawShape(new PIXI.Polygon([a, b])), this
    },
    PIXI.Graphics.prototype.lineTo = function(a, b) {
        return this.currentPath || this.moveTo(0, 0), this.currentPath.shape.points.push(a, b), this.dirty = !0, this._boundsDirty = !0, this
    },
    PIXI.Graphics.prototype.quadraticCurveTo = function(a, b, c, d) {
        this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
        var e,
            f,
            g = 20,
            h = this.currentPath.shape.points;
        0 === h.length && this.moveTo(0, 0);
        for (var i = h[h.length - 2], j = h[h.length - 1], k = 0, l = 1; l <= g; ++l)
            k = l / g,
            e = i + (a - i) * k,
            f = j + (b - j) * k,
            h.push(e + (a + (c - a) * k - e) * k, f + (b + (d - b) * k - f) * k);
        return this.dirty = !0, this._boundsDirty = !0, this
    },
    PIXI.Graphics.prototype.bezierCurveTo = function(a, b, c, d, e, f) {
        this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
        for (var g, h, i, j, k, l = 20, m = this.currentPath.shape.points, n = m[m.length - 2], o = m[m.length - 1], p = 0, q = 1; q <= l; ++q)
            p = q / l,
            g = 1 - p,
            h = g * g,
            i = h * g,
            j = p * p,
            k = j * p,
            m.push(i * n + 3 * h * p * a + 3 * g * j * c + k * e, i * o + 3 * h * p * b + 3 * g * j * d + k * f);
        return this.dirty = !0, this._boundsDirty = !0, this
    },
    PIXI.Graphics.prototype.arcTo = function(a, b, c, d, e) {
        this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(a, b) : this.moveTo(a, b);
        var f = this.currentPath.shape.points,
            g = f[f.length - 2],
            h = f[f.length - 1],
            i = h - b,
            j = g - a,
            k = d - b,
            l = c - a,
            m = Math.abs(i * l - j * k);
        if (m < 1e-8 || 0 === e)
            f[f.length - 2] === a && f[f.length - 1] === b || f.push(a, b);
        else {
            var n = i * i + j * j,
                o = k * k + l * l,
                p = i * k + j * l,
                q = e * Math.sqrt(n) / m,
                r = e * Math.sqrt(o) / m,
                s = q * p / n,
                t = r * p / o,
                u = q * l + r * j,
                v = q * k + r * i,
                w = j * (r + s),
                x = i * (r + s),
                y = l * (q + t),
                z = k * (q + t),
                A = Math.atan2(x - v, w - u),
                B = Math.atan2(z - v, y - u);
            this.arc(u + a, v + b, e, A, B, j * k > l * i)
        }
        return this.dirty = !0, this._boundsDirty = !0, this
    },
    PIXI.Graphics.prototype.arc = function(a, b, c, d, e, f, g) {
        if (d === e)
            return this;
        void 0 === f && (f = !1),
        void 0 === g && (g = 40),
        !f && e <= d ? e += 2 * Math.PI : f && d <= e && (d += 2 * Math.PI);
        var h = f ? (d - e) * -1 : e - d,
            i = Math.ceil(Math.abs(h) / (2 * Math.PI)) * g;
        if (0 === h)
            return this;
        var j = a + Math.cos(d) * c,
            k = b + Math.sin(d) * c;
        f && this.filling ? this.moveTo(a, b) : this.moveTo(j, k);
        for (var l = this.currentPath.shape.points, m = h / (2 * i), n = 2 * m, o = Math.cos(m), p = Math.sin(m), q = i - 1, r = q % 1 / q, s = 0; s <= q; s++) {
            var t = s + r * s,
                u = m + d + n * t,
                v = Math.cos(u),
                w = -Math.sin(u);
            l.push((o * v + p * w) * c + a, (o * -w + p * v) * c + b)
        }
        return this.dirty = !0, this._boundsDirty = !0, this
    },
    PIXI.Graphics.prototype.beginFill = function(a, b) {
        return this.filling = !0, this.fillColor = a || 0, this.fillAlpha = void 0 === b ? 1 : b, this.currentPath && this.currentPath.shape.points.length <= 2 && (this.currentPath.fill = this.filling, this.currentPath.fillColor = this.fillColor, this.currentPath.fillAlpha = this.fillAlpha), this
    },
    PIXI.Graphics.prototype.endFill = function() {
        return this.filling = !1, this.fillColor = null, this.fillAlpha = 1, this
    },
    PIXI.Graphics.prototype.drawRect = function(a, b, c, d) {
        return this.drawShape(new PIXI.Rectangle(a, b, c, d)), this
    },
    PIXI.Graphics.prototype.drawRoundedRect = function(a, b, c, d, e) {
        return this.drawShape(new PIXI.RoundedRectangle(a, b, c, d, e)), this
    },
    PIXI.Graphics.prototype.drawCircle = function(a, b, c) {
        return this.drawShape(new PIXI.Circle(a, b, c)), this
    },
    PIXI.Graphics.prototype.drawEllipse = function(a, b, c, d) {
        return this.drawShape(new PIXI.Ellipse(a, b, c, d)), this
    },
    PIXI.Graphics.prototype.drawPolygon = function(a) {
        (a instanceof c.Polygon || a instanceof PIXI.Polygon) && (a = a.points);
        var b = a;
        if (!Array.isArray(b)) {
            b = new Array(arguments.length);
            for (var d = 0; d < b.length; ++d)
                b[d] = arguments[d]
        }
        return this.drawShape(new c.Polygon(b)), this
    },
    PIXI.Graphics.prototype.clear = function() {
        return this.lineWidth = 0, this.filling = !1, this.dirty = !0, this._boundsDirty = !0, this.clearDirty = !0, this.graphicsData = [], this.updateLocalBounds(), this
    },
    PIXI.Graphics.prototype.generateTexture = function(a, b, c) {
        void 0 === a && (a = 1),
        void 0 === b && (b = PIXI.scaleModes.DEFAULT),
        void 0 === c && (c = 0);
        var d = this.getBounds();
        d.width += c,
        d.height += c;
        var e = new PIXI.CanvasBuffer(d.width * a, d.height * a),
            f = PIXI.Texture.fromCanvas(e.canvas, b);
        return f.baseTexture.resolution = a, e.context.scale(a, a), e.context.translate(-d.x, -d.y), PIXI.CanvasGraphics.renderGraphics(this, e.context), f
    },
    PIXI.Graphics.prototype._renderWebGL = function(a) {
        if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
            if (this._cacheAsBitmap)
                return (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), this.cachedSpriteDirty = !1, this.dirty = !1), this._cachedSprite.worldAlpha = this.worldAlpha, void PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite, a);
            if (a.spriteBatch.stop(), a.blendModeManager.setBlendMode(this.blendMode), this._mask && a.maskManager.pushMask(this._mask, a), this._filters && a.filterManager.pushFilter(this._filterBlock), this.blendMode !== a.spriteBatch.currentBlendMode) {
                a.spriteBatch.currentBlendMode = this.blendMode;
                var b = PIXI.blendModesWebGL[a.spriteBatch.currentBlendMode];
                a.spriteBatch.gl.blendFunc(b[0], b[1])
            }
            if (this.webGLDirty && (this.dirty = !0, this.webGLDirty = !1), PIXI.WebGLGraphics.renderGraphics(this, a), this.children.length) {
                a.spriteBatch.start();
                for (var c = 0; c < this.children.length; c++)
                    this.children[c]._renderWebGL(a);
                a.spriteBatch.stop()
            }
            this._filters && a.filterManager.popFilter(),
            this._mask && a.maskManager.popMask(this.mask, a),
            a.drawCount++,
            a.spriteBatch.start()
        }
    },
    PIXI.Graphics.prototype._renderCanvas = function(a) {
        if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
            if (this._prevTint !== this.tint && (this.dirty = !0, this._prevTint = this.tint), this._cacheAsBitmap)
                return (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), this.cachedSpriteDirty = !1, this.dirty = !1), this._cachedSprite.alpha = this.alpha, void PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite, a);
            var b = a.context,
                c = this.worldTransform;
            this.blendMode !== a.currentBlendMode && (a.currentBlendMode = this.blendMode, b.globalCompositeOperation = PIXI.blendModesCanvas[a.currentBlendMode]),
            this._mask && a.maskManager.pushMask(this._mask, a);
            var d = a.resolution,
                e = c.tx * a.resolution + a.shakeX,
                f = c.ty * a.resolution + a.shakeY;
            b.setTransform(c.a * d, c.b * d, c.c * d, c.d * d, e, f),
            PIXI.CanvasGraphics.renderGraphics(this, b);
            for (var g = 0; g < this.children.length; g++)
                this.children[g]._renderCanvas(a);
            this._mask && a.maskManager.popMask(a)
        }
    },
    PIXI.Graphics.prototype.getBounds = function(a) {
        if (!this._currentBounds) {
            if (!this.renderable)
                return PIXI.EmptyRectangle;
            this.dirty && (this.updateLocalBounds(), this.webGLDirty = !0, this.cachedSpriteDirty = !0, this.dirty = !1);
            var b = this._localBounds,
                c = b.x,
                d = b.width + b.x,
                e = b.y,
                f = b.height + b.y,
                g = a || this.worldTransform,
                h = g.a,
                i = g.b,
                j = g.c,
                k = g.d,
                l = g.tx,
                m = g.ty,
                n = h * d + j * f + l,
                o = k * f + i * d + m,
                p = h * c + j * f + l,
                q = k * f + i * c + m,
                r = h * c + j * e + l,
                s = k * e + i * c + m,
                t = h * d + j * e + l,
                u = k * e + i * d + m,
                v = n,
                w = o,
                x = n,
                y = o;
            x = p < x ? p : x,
            x = r < x ? r : x,
            x = t < x ? t : x,
            y = q < y ? q : y,
            y = s < y ? s : y,
            y = u < y ? u : y,
            v = p > v ? p : v,
            v = r > v ? r : v,
            v = t > v ? t : v,
            w = q > w ? q : w,
            w = s > w ? s : w,
            w = u > w ? u : w,
            this._bounds.x = x,
            this._bounds.width = v - x,
            this._bounds.y = y,
            this._bounds.height = w - y,
            this._currentBounds = this._bounds
        }
        return this._currentBounds
    },
    PIXI.Graphics.prototype.getLocalBounds = function() {
        var a = this.worldTransform;
        this.worldTransform = PIXI.identityMatrix;
        for (var b = 0; b < this.children.length; b++)
            this.children[b].updateTransform();
        var c = this.getBounds();
        for (this.worldTransform = a, b = 0; b < this.children.length; b++)
            this.children[b].updateTransform();
        return c
    },
    PIXI.Graphics.prototype.containsPoint = function(a) {
        this.worldTransform.applyInverse(a, tempPoint);
        for (var b = this.graphicsData, c = 0; c < b.length; c++) {
            var d = b[c];
            if (d.fill && d.shape && d.shape.contains(tempPoint.x, tempPoint.y))
                return !0
        }
        return !1
    },
    PIXI.Graphics.prototype.updateLocalBounds = function() {
        var a = 1 / 0,
            b = -(1 / 0),
            d = 1 / 0,
            e = -(1 / 0);
        if (this.graphicsData.length)
            for (var f, g, h, i, j, k, l = 0; l < this.graphicsData.length; l++) {
                var m = this.graphicsData[l],
                    n = m.type,
                    o = m.lineWidth;
                if (f = m.shape, n === PIXI.Graphics.RECT || n === PIXI.Graphics.RREC)
                    h = f.x - o / 2,
                    i = f.y - o / 2,
                    j = f.width + o,
                    k = f.height + o,
                    a = h < a ? h : a,
                    b = h + j > b ? h + j : b,
                    d = i < d ? i : d,
                    e = i + k > e ? i + k : e;
                else if (n === PIXI.Graphics.CIRC)
                    h = f.x,
                    i = f.y,
                    j = f.radius + o / 2,
                    k = f.radius + o / 2,
                    a = h - j < a ? h - j : a,
                    b = h + j > b ? h + j : b,
                    d = i - k < d ? i - k : d,
                    e = i + k > e ? i + k : e;
                else if (n === PIXI.Graphics.ELIP)
                    h = f.x,
                    i = f.y,
                    j = f.width + o / 2,
                    k = f.height + o / 2,
                    a = h - j < a ? h - j : a,
                    b = h + j > b ? h + j : b,
                    d = i - k < d ? i - k : d,
                    e = i + k > e ? i + k : e;
                else {
                    g = f.points;
                    for (var p = 0; p < g.length; p++)
                        g[p] instanceof c.Point ? (h = g[p].x, i = g[p].y) : (h = g[p], i = g[p + 1], p < g.length - 1 && p++),
                        a = h - o < a ? h - o : a,
                        b = h + o > b ? h + o : b,
                        d = i - o < d ? i - o : d,
                        e = i + o > e ? i + o : e
                }
            }
        else
            a = 0,
            b = 0,
            d = 0,
            e = 0;
        var q = this.boundsPadding;
        this._localBounds.x = a - q,
        this._localBounds.width = b - a + 2 * q,
        this._localBounds.y = d - q,
        this._localBounds.height = e - d + 2 * q
    },
    PIXI.Graphics.prototype._generateCachedSprite = function() {
        var a = this.getLocalBounds();
        if (this._cachedSprite)
            this._cachedSprite.buffer.resize(a.width, a.height);
        else {
            var b = new PIXI.CanvasBuffer(a.width, a.height),
                c = PIXI.Texture.fromCanvas(b.canvas);
            this._cachedSprite = new PIXI.Sprite(c),
            this._cachedSprite.buffer = b,
            this._cachedSprite.worldTransform = this.worldTransform
        }
        this._cachedSprite.anchor.x = -(a.x / a.width),
        this._cachedSprite.anchor.y = -(a.y / a.height),
        this._cachedSprite.buffer.context.translate(-a.x, -a.y),
        this.worldAlpha = 1,
        PIXI.CanvasGraphics.renderGraphics(this, this._cachedSprite.buffer.context),
        this._cachedSprite.alpha = this.alpha
    },
    PIXI.Graphics.prototype.updateCachedSpriteTexture = function() {
        var a = this._cachedSprite,
            b = a.texture,
            c = a.buffer.canvas;
        b.baseTexture.width = c.width,
        b.baseTexture.height = c.height,
        b.crop.width = b.frame.width = c.width,
        b.crop.height = b.frame.height = c.height,
        a._width = c.width,
        a._height = c.height,
        b.baseTexture.dirty()
    },
    PIXI.Graphics.prototype.destroyCachedSprite = function() {
        this._cachedSprite.texture.destroy(!0),
        this._cachedSprite = null
    },
    PIXI.Graphics.prototype.drawShape = function(a) {
        this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(),
        this.currentPath = null,
        a instanceof c.Polygon && (a = a.clone(), a.flatten());
        var b = new PIXI.GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.filling, a);
        return this.graphicsData.push(b), b.type === PIXI.Graphics.POLY && (b.shape.closed = this.filling, this.currentPath = b), this.dirty = !0, this._boundsDirty = !0, b
    },
    Object.defineProperty(PIXI.Graphics.prototype, "cacheAsBitmap", {
        get: function() {
            return this._cacheAsBitmap
        },
        set: function(a) {
            this._cacheAsBitmap = a,
            this._cacheAsBitmap ? this._generateCachedSprite() : this.destroyCachedSprite(),
            this.dirty = !0,
            this.webGLDirty = !0
        }
    }),
    PIXI.GraphicsData = function(a, b, c, d, e, f, g) {
        this.lineWidth = a,
        this.lineColor = b,
        this.lineAlpha = c,
        this._lineTint = b,
        this.fillColor = d,
        this.fillAlpha = e,
        this._fillTint = d,
        this.fill = f,
        this.shape = g,
        this.type = g.type
    },
    PIXI.GraphicsData.prototype.constructor = PIXI.GraphicsData,
    PIXI.GraphicsData.prototype.clone = function() {
        return new GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.fill, this.shape)
    },
    PIXI.EarCut = {},
    PIXI.EarCut.Triangulate = function(a, b, c) {
        c = c || 2;
        var d = b && b.length,
            e = d ? b[0] * c : a.length,
            f = PIXI.EarCut.linkedList(a, 0, e, c, !0),
            g = [];
        if (!f)
            return g;
        var h,
            i,
            j,
            k,
            l,
            m,
            n;
        if (d && (f = PIXI.EarCut.eliminateHoles(a, b, f, c)), a.length > 80 * c) {
            h = j = a[0],
            i = k = a[1];
            for (var o = c; o < e; o += c)
                l = a[o],
                m = a[o + 1],
                l < h && (h = l),
                m < i && (i = m),
                l > j && (j = l),
                m > k && (k = m);
            n = Math.max(j - h, k - i)
        }
        return PIXI.EarCut.earcutLinked(f, g, c, h, i, n), g
    },
    PIXI.EarCut.linkedList = function(a, b, c, d, e) {
        var f,
            g,
            h,
            i = 0;
        for (f = b, g = c - d; f < c; f += d)
            i += (a[g] - a[f]) * (a[f + 1] + a[g + 1]),
            g = f;
        if (e === i > 0)
            for (f = b; f < c; f += d)
                h = PIXI.EarCut.insertNode(f, a[f], a[f + 1], h);
        else
            for (f = c - d; f >= b; f -= d)
                h = PIXI.EarCut.insertNode(f, a[f], a[f + 1], h);
        return h
    },
    PIXI.EarCut.filterPoints = function(a, b) {
        if (!a)
            return a;
        b || (b = a);
        var c,
            d = a;
        do if (c = !1, d.steiner || !PIXI.EarCut.equals(d, d.next) && 0 !== PIXI.EarCut.area(d.prev, d, d.next))
            d = d.next;
        else {
            if (PIXI.EarCut.removeNode(d), d = b = d.prev, d === d.next)
                return null;
            c = !0
        }
        while (c || d !== b);
        return b
    },
    PIXI.EarCut.earcutLinked = function(a, b, c, d, e, f, g) {
        if (a) {
            !g && f && PIXI.EarCut.indexCurve(a, d, e, f);
            for (var h, i, j = a; a.prev !== a.next;)
                if (h = a.prev, i = a.next, f ? PIXI.EarCut.isEarHashed(a, d, e, f) : PIXI.EarCut.isEar(a))
                    b.push(h.i / c),
                    b.push(a.i / c),
                    b.push(i.i / c),
                    PIXI.EarCut.removeNode(a),
                    a = i.next,
                    j = i.next;
                else if (a = i, a === j) {
                    g ? 1 === g ? (a = PIXI.EarCut.cureLocalIntersections(a, b, c), PIXI.EarCut.earcutLinked(a, b, c, d, e, f, 2)) : 2 === g && PIXI.EarCut.splitEarcut(a, b, c, d, e, f) : PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(a), b, c, d, e, f, 1);
                    break
                }
        }
    },
    PIXI.EarCut.isEar = function(a) {
        var b = a.prev,
            c = a,
            d = a.next;
        if (PIXI.EarCut.area(b, c, d) >= 0)
            return !1;
        for (var e = a.next.next; e !== a.prev;) {
            if (PIXI.EarCut.pointInTriangle(b.x, b.y, c.x, c.y, d.x, d.y, e.x, e.y) && PIXI.EarCut.area(e.prev, e, e.next) >= 0)
                return !1;
            e = e.next
        }
        return !0
    },
    PIXI.EarCut.isEarHashed = function(a, b, c, d) {
        var e = a.prev,
            f = a,
            g = a.next;
        if (PIXI.EarCut.area(e, f, g) >= 0)
            return !1;
        for (var h = e.x < f.x ? e.x < g.x ? e.x : g.x : f.x < g.x ? f.x : g.x, i = e.y < f.y ? e.y < g.y ? e.y : g.y : f.y < g.y ? f.y : g.y, j = e.x > f.x ? e.x > g.x ? e.x : g.x : f.x > g.x ? f.x : g.x, k = e.y > f.y ? e.y > g.y ? e.y : g.y : f.y > g.y ? f.y : g.y, l = PIXI.EarCut.zOrder(h, i, b, c, d), m = PIXI.EarCut.zOrder(j, k, b, c, d), n = a.nextZ; n && n.z <= m;) {
            if (n !== a.prev && n !== a.next && PIXI.EarCut.pointInTriangle(e.x, e.y, f.x, f.y, g.x, g.y, n.x, n.y) && PIXI.EarCut.area(n.prev, n, n.next) >= 0)
                return !1;
            n = n.nextZ
        }
        for (n = a.prevZ; n && n.z >= l;) {
            if (n !== a.prev && n !== a.next && PIXI.EarCut.pointInTriangle(e.x, e.y, f.x, f.y, g.x, g.y, n.x, n.y) && PIXI.EarCut.area(n.prev, n, n.next) >= 0)
                return !1;
            n = n.prevZ
        }
        return !0
    },
    PIXI.EarCut.cureLocalIntersections = function(a, b, c) {
        var d = a;
        do {
            var e = d.prev,
                f = d.next.next;
            PIXI.EarCut.intersects(e, d, d.next, f) && PIXI.EarCut.locallyInside(e, f) && PIXI.EarCut.locallyInside(f, e) && (b.push(e.i / c), b.push(d.i / c), b.push(f.i / c), PIXI.EarCut.removeNode(d), PIXI.EarCut.removeNode(d.next), d = a = f),
            d = d.next
        } while (d !== a);
        return d
    },
    PIXI.EarCut.splitEarcut = function(a, b, c, d, e, f) {
        var g = a;
        do {
            for (var h = g.next.next; h !== g.prev;) {
                if (g.i !== h.i && PIXI.EarCut.isValidDiagonal(g, h)) {
                    var i = PIXI.EarCut.splitPolygon(g, h);
                    return g = PIXI.EarCut.filterPoints(g, g.next), i = PIXI.EarCut.filterPoints(i, i.next), PIXI.EarCut.earcutLinked(g, b, c, d, e, f), void PIXI.EarCut.earcutLinked(i, b, c, d, e, f)
                }
                h = h.next
            }
            g = g.next
        } while (g !== a)
    },
    PIXI.EarCut.eliminateHoles = function(a, b, c, d) {
        var e,
            f,
            g,
            h,
            i,
            j = [];
        for (e = 0, f = b.length; e < f; e++)
            g = b[e] * d,
            h = e < f - 1 ? b[e + 1] * d : a.length,
            i = PIXI.EarCut.linkedList(a, g, h, d, !1),
            i === i.next && (i.steiner = !0),
            j.push(PIXI.EarCut.getLeftmost(i));
        for (j.sort(compareX), e = 0; e < j.length; e++)
            PIXI.EarCut.eliminateHole(j[e], c),
            c = PIXI.EarCut.filterPoints(c, c.next);
        return c
    },
    PIXI.EarCut.compareX = function(a, b) {
        return a.x - b.x
    },
    PIXI.EarCut.eliminateHole = function(a, b) {
        if (b = PIXI.EarCut.findHoleBridge(a, b)) {
            var c = PIXI.EarCut.splitPolygon(b, a);
            PIXI.EarCut.filterPoints(c, c.next)
        }
    },
    PIXI.EarCut.findHoleBridge = function(a, b) {
        var c,
            d = b,
            e = a.x,
            f = a.y,
            g = -(1 / 0);
        do {
            if (f <= d.y && f >= d.next.y) {
                var h = d.x + (f - d.y) * (d.next.x - d.x) / (d.next.y - d.y);
                h <= e && h > g && (g = h, c = d.x < d.next.x ? d : d.next)
            }
            d = d.next
        } while (d !== b);
        if (!c)
            return null;
        if (a.x === c.x)
            return c.prev;
        var i,
            j = c,
            k = 1 / 0;
        for (d = c.next; d !== j;)
            e >= d.x && d.x >= c.x && PIXI.EarCut.pointInTriangle(f < c.y ? e : g, f, c.x, c.y, f < c.y ? g : e, f, d.x, d.y) && (i = Math.abs(f - d.y) / (e - d.x), (i < k || i === k && d.x > c.x) && PIXI.EarCut.locallyInside(d, a) && (c = d, k = i)),
            d = d.next;
        return c
    },
    PIXI.EarCut.indexCurve = function(a, b, c, d) {
        var e = a;
        do null === e.z && (e.z = PIXI.EarCut.zOrder(e.x, e.y, b, c, d)),
        e.prevZ = e.prev,
        e.nextZ = e.next,
        e = e.next;
        while (e !== a);
        e.prevZ.nextZ = null,
        e.prevZ = null,
        PIXI.EarCut.sortLinked(e)
    },
    PIXI.EarCut.sortLinked = function(a) {
        var b,
            c,
            d,
            e,
            f,
            g,
            h,
            i,
            j = 1;
        do {
            for (c = a, a = null, f = null, g = 0; c;) {
                for (g++, d = c, h = 0, b = 0; b < j && (h++, d = d.nextZ, d); b++)
                    ;
                for (i = j; h > 0 || i > 0 && d;)
                    0 === h ? (e = d, d = d.nextZ, i--) : 0 !== i && d ? c.z <= d.z ? (e = c, c = c.nextZ, h--) : (e = d, d = d.nextZ, i--) : (e = c, c = c.nextZ, h--),
                    f ? f.nextZ = e : a = e,
                    e.prevZ = f,
                    f = e;
                c = d
            }
            f.nextZ = null,
            j *= 2
        } while (g > 1);
        return a
    },
    PIXI.EarCut.zOrder = function(a, b, c, d, e) {
        return a = 32767 * (a - c) / e, b = 32767 * (b - d) / e, a = 16711935 & (a | a << 8), a = 252645135 & (a | a << 4), a = 858993459 & (a | a << 2), a = 1431655765 & (a | a << 1), b = 16711935 & (b | b << 8), b = 252645135 & (b | b << 4), b = 858993459 & (b | b << 2), b = 1431655765 & (b | b << 1), a | b << 1
    },
    PIXI.EarCut.getLeftmost = function(a) {
        var b = a,
            c = a;
        do b.x < c.x && (c = b),
        b = b.next;
        while (b !== a);
        return c
    },
    PIXI.EarCut.pointInTriangle = function(a, b, c, d, e, f, g, h) {
        return (e - g) * (b - h) - (a - g) * (f - h) >= 0 && (a - g) * (d - h) - (c - g) * (b - h) >= 0 && (c - g) * (f - h) - (e - g) * (d - h) >= 0
    },
    PIXI.EarCut.isValidDiagonal = function(a, b) {
        return PIXI.EarCut.equals(a, b) || a.next.i !== b.i && a.prev.i !== b.i && !PIXI.EarCut.intersectsPolygon(a, b) && PIXI.EarCut.locallyInside(a, b) && PIXI.EarCut.locallyInside(b, a) && PIXI.EarCut.middleInside(a, b)
    },
    PIXI.EarCut.area = function(a, b, c) {
        return (b.y - a.y) * (c.x - b.x) - (b.x - a.x) * (c.y - b.y)
    },
    PIXI.EarCut.equals = function(a, b) {
        return a.x === b.x && a.y === b.y
    },
    PIXI.EarCut.intersects = function(a, b, c, d) {
        return PIXI.EarCut.area(a, b, c) > 0 != PIXI.EarCut.area(a, b, d) > 0 && PIXI.EarCut.area(c, d, a) > 0 != PIXI.EarCut.area(c, d, b) > 0
    },
    PIXI.EarCut.intersectsPolygon = function(a, b) {
        var c = a;
        do {
            if (c.i !== a.i && c.next.i !== a.i && c.i !== b.i && c.next.i !== b.i && PIXI.EarCut.intersects(c, c.next, a, b))
                return !0;
            c = c.next
        } while (c !== a);
        return !1
    },
    PIXI.EarCut.locallyInside = function(a, b) {
        return PIXI.EarCut.area(a.prev, a, a.next) < 0 ? PIXI.EarCut.area(a, b, a.next) >= 0 && PIXI.EarCut.area(a, a.prev, b) >= 0 : PIXI.EarCut.area(a, b, a.prev) < 0 || PIXI.EarCut.area(a, a.next, b) < 0
    },
    PIXI.EarCut.middleInside = function(a, b) {
        var c = a,
            d = !1,
            e = (a.x + b.x) / 2,
            f = (a.y + b.y) / 2;
        do c.y > f != c.next.y > f && e < (c.next.x - c.x) * (f - c.y) / (c.next.y - c.y) + c.x && (d = !d),
        c = c.next;
        while (c !== a);
        return d
    },
    PIXI.EarCut.splitPolygon = function(a, b) {
        var c = new PIXI.EarCut.Node(a.i, a.x, a.y),
            d = new PIXI.EarCut.Node(b.i, b.x, b.y),
            e = a.next,
            f = b.prev;
        return a.next = b, b.prev = a, c.next = e, e.prev = c, d.next = c, c.prev = d, f.next = d, d.prev = f, d
    },
    PIXI.EarCut.insertNode = function(a, b, c, d) {
        var e = new PIXI.EarCut.Node(a, b, c);
        return d ? (e.next = d.next, e.prev = d, d.next.prev = e, d.next = e) : (e.prev = e, e.next = e), e
    },
    PIXI.EarCut.removeNode = function(a) {
        a.next.prev = a.prev,
        a.prev.next = a.next,
        a.prevZ && (a.prevZ.nextZ = a.nextZ),
        a.nextZ && (a.nextZ.prevZ = a.prevZ)
    },
    PIXI.EarCut.Node = function(a, b, c) {
        this.i = a,
        this.x = b,
        this.y = c,
        this.prev = null,
        this.next = null,
        this.z = null,
        this.prevZ = null,
        this.nextZ = null,
        this.steiner = !1
    },
    PIXI.WebGLGraphics = function() {},
    PIXI.WebGLGraphics.stencilBufferLimit = 6,
    PIXI.WebGLGraphics.renderGraphics = function(a, b) {
        var c,
            d = b.gl,
            e = b.projection,
            f = b.offset,
            g = b.shaderManager.primitiveShader;
        a.dirty && PIXI.WebGLGraphics.updateGraphics(a, d);
        for (var h = a._webGL[d.id], i = 0; i < h.data.length; i++)
            1 === h.data[i].mode ? (c = h.data[i], b.stencilManager.pushStencil(a, c, b), d.drawElements(d.TRIANGLE_FAN, 4, d.UNSIGNED_SHORT, 2 * (c.indices.length - 4)), b.stencilManager.popStencil(a, c, b)) : (c = h.data[i], b.shaderManager.setShader(g), g = b.shaderManager.primitiveShader, d.uniformMatrix3fv(g.translationMatrix, !1, a.worldTransform.toArray(!0)), d.uniform1f(g.flipY, 1), d.uniform2f(g.projectionVector, e.x, -e.y), d.uniform2f(g.offsetVector, -f.x, -f.y), d.uniform3fv(g.tintColor, PIXI.hex2rgb(a.tint)), d.uniform1f(g.alpha, a.worldAlpha), d.bindBuffer(d.ARRAY_BUFFER, c.buffer), d.vertexAttribPointer(g.aVertexPosition, 2, d.FLOAT, !1, 24, 0), d.vertexAttribPointer(g.colorAttribute, 4, d.FLOAT, !1, 24, 8), d.bindBuffer(d.ELEMENT_ARRAY_BUFFER, c.indexBuffer), d.drawElements(d.TRIANGLE_STRIP, c.indices.length, d.UNSIGNED_SHORT, 0))
    },
    PIXI.WebGLGraphics.updateGraphics = function(a, b) {
        var c = a._webGL[b.id];
        c || (c = a._webGL[b.id] = {
            lastIndex: 0,
            data: [],
            gl: b
        }),
        a.dirty = !1;
        var d;
        if (a.clearDirty) {
            for (a.clearDirty = !1, d = 0; d < c.data.length; d++) {
                var e = c.data[d];
                e.reset(),
                PIXI.WebGLGraphics.graphicsDataPool.push(e)
            }
            c.data = [],
            c.lastIndex = 0
        }
        var f;
        for (d = c.lastIndex; d < a.graphicsData.length; d++) {
            var g = a.graphicsData[d];
            if (g.type === PIXI.Graphics.POLY) {
                if (g.points = g.shape.points.slice(), g.shape.closed && (g.points[0] === g.points[g.points.length - 2] && g.points[1] === g.points[g.points.length - 1] || g.points.push(g.points[0], g.points[1])), g.fill && g.points.length >= PIXI.WebGLGraphics.stencilBufferLimit)
                    if (g.points.length < 2 * PIXI.WebGLGraphics.stencilBufferLimit) {
                        f = PIXI.WebGLGraphics.switchMode(c, 0);
                        var h = PIXI.WebGLGraphics.buildPoly(g, f);
                        h || (f = PIXI.WebGLGraphics.switchMode(c, 1), PIXI.WebGLGraphics.buildComplexPoly(g, f))
                    } else
                        f = PIXI.WebGLGraphics.switchMode(c, 1),
                        PIXI.WebGLGraphics.buildComplexPoly(g, f);
                g.lineWidth > 0 && (f = PIXI.WebGLGraphics.switchMode(c, 0), PIXI.WebGLGraphics.buildLine(g, f))
            } else
                f = PIXI.WebGLGraphics.switchMode(c, 0),
                g.type === PIXI.Graphics.RECT ? PIXI.WebGLGraphics.buildRectangle(g, f) : g.type === PIXI.Graphics.CIRC || g.type === PIXI.Graphics.ELIP ? PIXI.WebGLGraphics.buildCircle(g, f) : g.type === PIXI.Graphics.RREC && PIXI.WebGLGraphics.buildRoundedRectangle(g, f);
            c.lastIndex++
        }
        for (d = 0; d < c.data.length; d++)
            f = c.data[d],
            f.dirty && f.upload()
    },
    PIXI.WebGLGraphics.switchMode = function(a, b) {
        var c;
        return a.data.length ? (c = a.data[a.data.length - 1], c.mode === b && 1 !== b || (c = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(a.gl), c.mode = b, a.data.push(c))) : (c = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(a.gl), c.mode = b, a.data.push(c)), c.dirty = !0, c
    },
    PIXI.WebGLGraphics.buildRectangle = function(a, b) {
        var c = a.shape,
            d = c.x,
            e = c.y,
            f = c.width,
            g = c.height;
        if (a.fill) {
            var h = PIXI.hex2rgb(a.fillColor),
                i = a.fillAlpha,
                j = h[0] * i,
                k = h[1] * i,
                l = h[2] * i,
                m = b.points,
                n = b.indices,
                o = m.length / 6;
            m.push(d, e),
            m.push(j, k, l, i),
            m.push(d + f, e),
            m.push(j, k, l, i),
            m.push(d, e + g),
            m.push(j, k, l, i),
            m.push(d + f, e + g),
            m.push(j, k, l, i),
            n.push(o, o, o + 1, o + 2, o + 3, o + 3)
        }
        if (a.lineWidth) {
            var p = a.points;
            a.points = [d, e, d + f, e, d + f, e + g, d, e + g, d, e],
            PIXI.WebGLGraphics.buildLine(a, b),
            a.points = p
        }
    },
    PIXI.WebGLGraphics.buildRoundedRectangle = function(a, b) {
        var c = a.shape,
            d = c.x,
            e = c.y,
            f = c.width,
            g = c.height,
            h = c.radius,
            i = [];
        if (i.push(d, e + h), i = i.concat(PIXI.WebGLGraphics.quadraticBezierCurve(d, e + g - h, d, e + g, d + h, e + g)), i = i.concat(PIXI.WebGLGraphics.quadraticBezierCurve(d + f - h, e + g, d + f, e + g, d + f, e + g - h)), i = i.concat(PIXI.WebGLGraphics.quadraticBezierCurve(d + f, e + h, d + f, e, d + f - h, e)), i = i.concat(PIXI.WebGLGraphics.quadraticBezierCurve(d + h, e, d, e, d, e + h)), a.fill) {
            var j = PIXI.hex2rgb(a.fillColor),
                k = a.fillAlpha,
                l = j[0] * k,
                m = j[1] * k,
                n = j[2] * k,
                o = b.points,
                p = b.indices,
                q = o.length / 6,
                r = PIXI.EarCut.Triangulate(i, null, 2),
                s = 0;
            for (s = 0; s < r.length; s += 3)
                p.push(r[s] + q),
                p.push(r[s] + q),
                p.push(r[s + 1] + q),
                p.push(r[s + 2] + q),
                p.push(r[s + 2] + q);
            for (s = 0; s < i.length; s++)
                o.push(i[s], i[++s], l, m, n, k)
        }
        if (a.lineWidth) {
            var t = a.points;
            a.points = i,
            PIXI.WebGLGraphics.buildLine(a, b),
            a.points = t
        }
    },
    PIXI.WebGLGraphics.quadraticBezierCurve = function(a, b, c, d, e, f) {
        function g(a, b, c) {
            var d = b - a;
            return a + d * c
        }
        for (var h, i, j, k, l, m, n = 20, o = [], p = 0, q = 0; q <= n; q++)
            p = q / n,
            h = g(a, c, p),
            i = g(b, d, p),
            j = g(c, e, p),
            k = g(d, f, p),
            l = g(h, j, p),
            m = g(i, k, p),
            o.push(l, m);
        return o
    },
    PIXI.WebGLGraphics.buildCircle = function(a, b) {
        var c,
            d,
            e = a.shape,
            f = e.x,
            g = e.y;
        a.type === PIXI.Graphics.CIRC ? (c = e.radius, d = e.radius) : (c = e.width, d = e.height);
        var h = 40,
            i = 2 * Math.PI / h,
            j = 0;
        if (a.fill) {
            var k = PIXI.hex2rgb(a.fillColor),
                l = a.fillAlpha,
                m = k[0] * l,
                n = k[1] * l,
                o = k[2] * l,
                p = b.points,
                q = b.indices,
                r = p.length / 6;
            for (q.push(r), j = 0; j < h + 1; j++)
                p.push(f, g, m, n, o, l),
                p.push(f + Math.sin(i * j) * c, g + Math.cos(i * j) * d, m, n, o, l),
                q.push(r++, r++);
            q.push(r - 1)
        }
        if (a.lineWidth) {
            var s = a.points;
            for (a.points = [], j = 0; j < h + 1; j++)
                a.points.push(f + Math.sin(i * j) * c, g + Math.cos(i * j) * d);
            PIXI.WebGLGraphics.buildLine(a, b),
            a.points = s
        }
    },
    PIXI.WebGLGraphics.buildLine = function(a, b) {
        var c = 0,
            d = a.points;
        if (0 !== d.length) {
            if (a.lineWidth % 2)
                for (c = 0; c < d.length; c++)
                    d[c] += .5;
            var e = new PIXI.Point(d[0], d[1]),
                f = new PIXI.Point(d[d.length - 2], d[d.length - 1]);
            if (e.x === f.x && e.y === f.y) {
                d = d.slice(),
                d.pop(),
                d.pop(),
                f = new PIXI.Point(d[d.length - 2], d[d.length - 1]);
                var g = f.x + .5 * (e.x - f.x),
                    h = f.y + .5 * (e.y - f.y);
                d.unshift(g, h),
                d.push(g, h)
            }
            var i,
                j,
                k,
                l,
                m,
                n,
                o,
                p,
                q,
                r,
                s,
                t,
                u,
                v,
                w,
                x,
                y,
                z,
                A,
                B,
                C,
                D,
                E,
                F = b.points,
                G = b.indices,
                H = d.length / 2,
                I = d.length,
                J = F.length / 6,
                K = a.lineWidth / 2,
                L = PIXI.hex2rgb(a.lineColor),
                M = a.lineAlpha,
                N = L[0] * M,
                O = L[1] * M,
                P = L[2] * M;
            for (k = d[0], l = d[1], m = d[2], n = d[3], q = -(l - n), r = k - m, E = Math.sqrt(q * q + r * r), q /= E, r /= E, q *= K, r *= K, F.push(k - q, l - r, N, O, P, M), F.push(k + q, l + r, N, O, P, M), c = 1; c < H - 1; c++)
                k = d[2 * (c - 1)],
                l = d[2 * (c - 1) + 1],
                m = d[2 * c],
                n = d[2 * c + 1],
                o = d[2 * (c + 1)],
                p = d[2 * (c + 1) + 1],
                q = -(l - n),
                r = k - m,
                E = Math.sqrt(q * q + r * r),
                q /= E,
                r /= E,
                q *= K,
                r *= K,
                s = -(n - p),
                t = m - o,
                E = Math.sqrt(s * s + t * t),
                s /= E,
                t /= E,
                s *= K,
                t *= K,
                w = -r + l - (-r + n),
                x = -q + m - (-q + k),
                y = (-q + k) * (-r + n) - (-q + m) * (-r + l),
                z = -t + p - (-t + n),
                A = -s + m - (-s + o),
                B = (-s + o) * (-t + n) - (-s + m) * (-t + p),
                C = w * A - z * x,
                Math.abs(C) < .1 ? (C += 10.1, F.push(m - q, n - r, N, O, P, M), F.push(m + q, n + r, N, O, P, M)) : (i = (x * B - A * y) / C, j = (z * y - w * B) / C, D = (i - m) * (i - m) + (j - n) + (j - n), D > 19600 ? (u = q - s, v = r - t, E = Math.sqrt(u * u + v * v), u /= E, v /= E, u *= K, v *= K, F.push(m - u, n - v), F.push(N, O, P, M), F.push(m + u, n + v), F.push(N, O, P, M), F.push(m - u, n - v), F.push(N, O, P, M), I++) : (F.push(i, j), F.push(N, O, P, M), F.push(m - (i - m), n - (j - n)), F.push(N, O, P, M)));
            for (k = d[2 * (H - 2)], l = d[2 * (H - 2) + 1], m = d[2 * (H - 1)], n = d[2 * (H - 1) + 1], q = -(l - n), r = k - m, E = Math.sqrt(q * q + r * r), q /= E, r /= E, q *= K, r *= K, F.push(m - q, n - r), F.push(N, O, P, M), F.push(m + q, n + r), F.push(N, O, P, M), G.push(J), c = 0; c < I; c++)
                G.push(J++);
            G.push(J - 1)
        }
    },
    PIXI.WebGLGraphics.buildComplexPoly = function(a, b) {
        var c = a.points.slice();
        if (!(c.length < 6)) {
            var d = b.indices;
            b.points = c,
            b.alpha = a.fillAlpha,
            b.color = PIXI.hex2rgb(a.fillColor);
            for (var e, f, g = 1 / 0, h = -(1 / 0), i = 1 / 0, j = -(1 / 0), k = 0; k < c.length; k += 2)
                e = c[k],
                f = c[k + 1],
                g = e < g ? e : g,
                h = e > h ? e : h,
                i = f < i ? f : i,
                j = f > j ? f : j;
            c.push(g, i, h, i, h, j, g, j);
            var l = c.length / 2;
            for (k = 0; k < l; k++)
                d.push(k)
        }
    },
    PIXI.WebGLGraphics.buildPoly = function(a, b) {
        var c = a.points;
        if (!(c.length < 6)) {
            var d = b.points,
                e = b.indices,
                f = c.length / 2,
                g = PIXI.hex2rgb(a.fillColor),
                h = a.fillAlpha,
                i = g[0] * h,
                j = g[1] * h,
                k = g[2] * h,
                l = PIXI.EarCut.Triangulate(c, null, 2);
            if (!l)
                return !1;
            var m = d.length / 6,
                n = 0;
            for (n = 0; n < l.length; n += 3)
                e.push(l[n] + m),
                e.push(l[n] + m),
                e.push(l[n + 1] + m),
                e.push(l[n + 2] + m),
                e.push(l[n + 2] + m);
            for (n = 0; n < f; n++)
                d.push(c[2 * n], c[2 * n + 1], i, j, k, h);
            return !0
        }
    },
    PIXI.WebGLGraphics.graphicsDataPool = [],
    PIXI.WebGLGraphicsData = function(a) {
        this.gl = a,
        this.color = [0, 0, 0],
        this.points = [],
        this.indices = [],
        this.buffer = a.createBuffer(),
        this.indexBuffer = a.createBuffer(),
        this.mode = 1,
        this.alpha = 1,
        this.dirty = !0
    },
    PIXI.WebGLGraphicsData.prototype.reset = function() {
        this.points = [],
        this.indices = []
    },
    PIXI.WebGLGraphicsData.prototype.upload = function() {
        var a = this.gl;
        this.glPoints = new PIXI.Float32Array(this.points),
        a.bindBuffer(a.ARRAY_BUFFER, this.buffer),
        a.bufferData(a.ARRAY_BUFFER, this.glPoints, a.STATIC_DRAW),
        this.glIndicies = new PIXI.Uint16Array(this.indices),
        a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
        a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.glIndicies, a.STATIC_DRAW),
        this.dirty = !1
    },
    PIXI.CanvasGraphics = function() {},
    PIXI.CanvasGraphics.renderGraphics = function(a, b) {
        var c = a.worldAlpha;
        a.dirty && (this.updateGraphicsTint(a), a.dirty = !1);
        for (var d = 0; d < a.graphicsData.length; d++) {
            var e = a.graphicsData[d],
                f = e.shape,
                g = e._fillTint,
                h = e._lineTint;
            if (b.lineWidth = e.lineWidth, e.type === PIXI.Graphics.POLY) {
                b.beginPath();
                var i = f.points;
                b.moveTo(i[0], i[1]);
                for (var j = 1; j < i.length / 2; j++)
                    b.lineTo(i[2 * j], i[2 * j + 1]);
                f.closed && b.lineTo(i[0], i[1]),
                i[0] === i[i.length - 2] && i[1] === i[i.length - 1] && b.closePath(),
                e.fill && (b.globalAlpha = e.fillAlpha * c, b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6), b.fill()),
                e.lineWidth && (b.globalAlpha = e.lineAlpha * c, b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6), b.stroke())
            } else if (e.type === PIXI.Graphics.RECT)
                (e.fillColor || 0 === e.fillColor) && (b.globalAlpha = e.fillAlpha * c, b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6), b.fillRect(f.x, f.y, f.width, f.height)),
                e.lineWidth && (b.globalAlpha = e.lineAlpha * c, b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6), b.strokeRect(f.x, f.y, f.width, f.height));
            else if (e.type === PIXI.Graphics.CIRC)
                b.beginPath(),
                b.arc(f.x, f.y, f.radius, 0, 2 * Math.PI),
                b.closePath(),
                e.fill && (b.globalAlpha = e.fillAlpha * c, b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6), b.fill()),
                e.lineWidth && (b.globalAlpha = e.lineAlpha * c, b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6), b.stroke());
            else if (e.type === PIXI.Graphics.ELIP) {
                var k = 2 * f.width,
                    l = 2 * f.height,
                    m = f.x - k / 2,
                    n = f.y - l / 2;
                b.beginPath();
                var o = .5522848,
                    p = k / 2 * o,
                    q = l / 2 * o,
                    r = m + k,
                    s = n + l,
                    t = m + k / 2,
                    u = n + l / 2;
                b.moveTo(m, u),
                b.bezierCurveTo(m, u - q, t - p, n, t, n),
                b.bezierCurveTo(t + p, n, r, u - q, r, u),
                b.bezierCurveTo(r, u + q, t + p, s, t, s),
                b.bezierCurveTo(t - p, s, m, u + q, m, u),
                b.closePath(),
                e.fill && (b.globalAlpha = e.fillAlpha * c, b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6), b.fill()),
                e.lineWidth && (b.globalAlpha = e.lineAlpha * c, b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6), b.stroke())
            } else if (e.type === PIXI.Graphics.RREC) {
                var v = f.x,
                    w = f.y,
                    x = f.width,
                    y = f.height,
                    z = f.radius,
                    A = Math.min(x, y) / 2 | 0;
                z = z > A ? A : z,
                b.beginPath(),
                b.moveTo(v, w + z),
                b.lineTo(v, w + y - z),
                b.quadraticCurveTo(v, w + y, v + z, w + y),
                b.lineTo(v + x - z, w + y),
                b.quadraticCurveTo(v + x, w + y, v + x, w + y - z),
                b.lineTo(v + x, w + z),
                b.quadraticCurveTo(v + x, w, v + x - z, w),
                b.lineTo(v + z, w),
                b.quadraticCurveTo(v, w, v, w + z),
                b.closePath(),
                (e.fillColor || 0 === e.fillColor) && (b.globalAlpha = e.fillAlpha * c, b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6), b.fill()),
                e.lineWidth && (b.globalAlpha = e.lineAlpha * c, b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6), b.stroke())
            }
        }
    },
    PIXI.CanvasGraphics.renderGraphicsMask = function(a, b) {
        var c = a.graphicsData.length;
        if (0 !== c) {
            b.beginPath();
            for (var d = 0; d < c; d++) {
                var e = a.graphicsData[d],
                    f = e.shape;
                if (e.type === PIXI.Graphics.POLY) {
                    var g = f.points;
                    b.moveTo(g[0], g[1]);
                    for (var h = 1; h < g.length / 2; h++)
                        b.lineTo(g[2 * h], g[2 * h + 1]);
                    g[0] === g[g.length - 2] && g[1] === g[g.length - 1] && b.closePath()
                } else if (e.type === PIXI.Graphics.RECT)
                    b.rect(f.x, f.y, f.width, f.height),
                    b.closePath();
                else if (e.type === PIXI.Graphics.CIRC)
                    b.arc(f.x, f.y, f.radius, 0, 2 * Math.PI),
                    b.closePath();
                else if (e.type === PIXI.Graphics.ELIP) {
                    var i = 2 * f.width,
                        j = 2 * f.height,
                        k = f.x - i / 2,
                        l = f.y - j / 2,
                        m = .5522848,
                        n = i / 2 * m,
                        o = j / 2 * m,
                        p = k + i,
                        q = l + j,
                        r = k + i / 2,
                        s = l + j / 2;
                    b.moveTo(k, s),
                    b.bezierCurveTo(k, s - o, r - n, l, r, l),
                    b.bezierCurveTo(r + n, l, p, s - o, p, s),
                    b.bezierCurveTo(p, s + o, r + n, q, r, q),
                    b.bezierCurveTo(r - n, q, k, s + o, k, s),
                    b.closePath()
                } else if (e.type === PIXI.Graphics.RREC) {
                    var t = f.x,
                        u = f.y,
                        v = f.width,
                        w = f.height,
                        x = f.radius,
                        y = Math.min(v, w) / 2 | 0;
                    x = x > y ? y : x,
                    b.moveTo(t, u + x),
                    b.lineTo(t, u + w - x),
                    b.quadraticCurveTo(t, u + w, t + x, u + w),
                    b.lineTo(t + v - x, u + w),
                    b.quadraticCurveTo(t + v, u + w, t + v, u + w - x),
                    b.lineTo(t + v, u + x),
                    b.quadraticCurveTo(t + v, u, t + v - x, u),
                    b.lineTo(t + x, u),
                    b.quadraticCurveTo(t, u, t, u + x),
                    b.closePath()
                }
            }
        }
    },
    PIXI.CanvasGraphics.updateGraphicsTint = function(a) {
        if (16777215 !== a.tint)
            for (var b = (a.tint >> 16 & 255) / 255, c = (a.tint >> 8 & 255) / 255, d = (255 & a.tint) / 255, e = 0; e < a.graphicsData.length; e++) {
                var f = a.graphicsData[e],
                    g = 0 | f.fillColor,
                    h = 0 | f.lineColor;
                f._fillTint = ((g >> 16 & 255) / 255 * b * 255 << 16) + ((g >> 8 & 255) / 255 * c * 255 << 8) + (255 & g) / 255 * d * 255,
                f._lineTint = ((h >> 16 & 255) / 255 * b * 255 << 16) + ((h >> 8 & 255) / 255 * c * 255 << 8) + (255 & h) / 255 * d * 255
            }
    },
    c.Graphics = function(a, b, d) {
        void 0 === b && (b = 0),
        void 0 === d && (d = 0),
        this.type = c.GRAPHICS,
        this.physicsType = c.SPRITE,
        this.anchor = new c.Point,
        PIXI.Graphics.call(this),
        c.Component.Core.init.call(this, a, b, d, "", null)
    },
    c.Graphics.prototype = Object.create(PIXI.Graphics.prototype),
    c.Graphics.prototype.constructor = c.Graphics,
    c.Component.Core.install.call(c.Graphics.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]),
    c.Graphics.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.Graphics.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.Graphics.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Graphics.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Graphics.prototype.preUpdate = function() {
        return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
    },
    c.Graphics.prototype.postUpdate = function() {
        c.Component.PhysicsBody.postUpdate.call(this),
        c.Component.FixedToCamera.postUpdate.call(this),
        this._boundsDirty && (this.updateLocalBounds(), this._boundsDirty = !1);
        for (var a = 0; a < this.children.length; a++)
            this.children[a].postUpdate()
    },
    c.Graphics.prototype.destroy = function(a) {
        this.clear(),
        c.Component.Destroy.prototype.destroy.call(this, a)
    },
    c.Graphics.prototype.drawTriangle = function(a, b) {
        void 0 === b && (b = !1);
        var d = new c.Polygon(a);
        if (b) {
            var e = new c.Point(this.game.camera.x - a[0].x, this.game.camera.y - a[0].y),
                f = new c.Point(a[1].x - a[0].x, a[1].y - a[0].y),
                g = new c.Point(a[1].x - a[2].x, a[1].y - a[2].y),
                h = g.cross(f);
            e.dot(h) > 0 && this.drawPolygon(d)
        } else
            this.drawPolygon(d)
    },
    c.Graphics.prototype.drawTriangles = function(a, b, d) {
        void 0 === d && (d = !1);
        var e,
            f = new c.Point,
            g = new c.Point,
            h = new c.Point,
            i = [];
        if (b)
            if (a[0] instanceof c.Point)
                for (e = 0; e < b.length / 3; e++)
                    i.push(a[b[3 * e]]),
                    i.push(a[b[3 * e + 1]]),
                    i.push(a[b[3 * e + 2]]),
                    3 === i.length && (this.drawTriangle(i, d), i = []);
            else
                for (e = 0; e < b.length; e++)
                    f.x = a[2 * b[e]],
                    f.y = a[2 * b[e] + 1],
                    i.push(f.copyTo({})),
                    3 === i.length && (this.drawTriangle(i, d), i = []);
        else if (a[0] instanceof c.Point)
            for (e = 0; e < a.length / 3; e++)
                this.drawTriangle([a[3 * e], a[3 * e + 1], a[3 * e + 2]], d);
        else
            for (e = 0; e < a.length / 6; e++)
                f.x = a[6 * e + 0],
                f.y = a[6 * e + 1],
                g.x = a[6 * e + 2],
                g.y = a[6 * e + 3],
                h.x = a[6 * e + 4],
                h.y = a[6 * e + 5],
                this.drawTriangle([f, g, h], d)
    },
    c.RenderTexture = function(a, b, d, e, f, g) {
        void 0 === e && (e = ""),
        void 0 === f && (f = c.scaleModes.DEFAULT),
        void 0 === g && (g = 1),
        this.game = a,
        this.key = e,
        this.type = c.RENDERTEXTURE,
        this._tempMatrix = new PIXI.Matrix,
        PIXI.RenderTexture.call(this, b, d, this.game.renderer, f, g),
        this.render = c.RenderTexture.prototype.render
    },
    c.RenderTexture.prototype = Object.create(PIXI.RenderTexture.prototype),
    c.RenderTexture.prototype.constructor = c.RenderTexture,
    c.RenderTexture.prototype.renderXY = function(a, b, c, d) {
        a.updateTransform(),
        this._tempMatrix.copyFrom(a.worldTransform),
        this._tempMatrix.tx = b,
        this._tempMatrix.ty = c,
        this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(a, this._tempMatrix, d) : this.renderCanvas(a, this._tempMatrix, d)
    },
    c.RenderTexture.prototype.renderRawXY = function(a, b, c, d) {
        this._tempMatrix.identity().translate(b, c),
        this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(a, this._tempMatrix, d) : this.renderCanvas(a, this._tempMatrix, d)
    },
    c.RenderTexture.prototype.render = function(a, b, c) {
        void 0 === b || null === b ? this._tempMatrix.copyFrom(a.worldTransform) : this._tempMatrix.copyFrom(b),
        this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(a, this._tempMatrix, c) : this.renderCanvas(a, this._tempMatrix, c)
    },
    c.Text = function(a, b, d, e, f) {
        b = b || 0,
        d = d || 0,
        e = void 0 === e || null === e ? "" : e.toString(),
        f = c.Utils.extend({}, f),
        this.type = c.TEXT,
        this.physicsType = c.SPRITE,
        this.padding = new c.Point,
        this.textBounds = null,
        this.canvas = PIXI.CanvasPool.create(this),
        this.context = this.canvas.getContext("2d"),
        this.colors = [],
        this.strokeColors = [],
        this.fontStyles = [],
        this.fontWeights = [],
        this.autoRound = !1,
        this.useAdvancedWrap = !1,
        this._res = a.renderer.resolution,
        this._text = e,
        this._fontComponents = null,
        this._lineSpacing = 0,
        this._charCount = 0,
        this._width = 0,
        this._height = 0,
        c.Sprite.call(this, a, b, d, PIXI.Texture.fromCanvas(this.canvas)),
        this.setStyle(f),
        "" !== e && this.updateText()
    },
    c.Text.prototype = Object.create(c.Sprite.prototype),
    c.Text.prototype.constructor = c.Text,
    c.Text.prototype.preUpdate = function() {
        return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
    },
    c.Text.prototype.update = function() {},
    c.Text.prototype.destroy = function(a) {
        this.texture.destroy(!0),
        c.Component.Destroy.prototype.destroy.call(this, a)
    },
    c.Text.prototype.setShadow = function(a, b, c, d, e, f) {
        return void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = "rgba(0, 0, 0, 1)"), void 0 === d && (d = 0), void 0 === e && (e = !0), void 0 === f && (f = !0), this.style.shadowOffsetX = a, this.style.shadowOffsetY = b, this.style.shadowColor = c, this.style.shadowBlur = d, this.style.shadowStroke = e, this.style.shadowFill = f, this.dirty = !0, this
    },
    c.Text.prototype.setStyle = function(a, b) {
        void 0 === b && (b = !1),
        a = a || {},
        a.font = a.font || "bold 20pt Arial",
        a.backgroundColor = a.backgroundColor || null,
        a.fill = a.fill || "black",
        a.align = a.align || "left",
        a.boundsAlignH = a.boundsAlignH || "left",
        a.boundsAlignV = a.boundsAlignV || "top",
        a.stroke = a.stroke || "black",
        a.strokeThickness = a.strokeThickness || 0,
        a.wordWrap = a.wordWrap || !1,
        a.wordWrapWidth = a.wordWrapWidth || 100,
        a.maxLines = a.maxLines || 0,
        a.shadowOffsetX = a.shadowOffsetX || 0,
        a.shadowOffsetY = a.shadowOffsetY || 0,
        a.shadowColor = a.shadowColor || "rgba(0,0,0,0)",
        a.shadowBlur = a.shadowBlur || 0,
        a.tabs = a.tabs || 0;
        var c = this.fontToComponents(a.font);
        return a.fontStyle && (c.fontStyle = a.fontStyle), a.fontVariant && (c.fontVariant = a.fontVariant), a.fontWeight && (c.fontWeight = a.fontWeight), a.fontSize && ("number" == typeof a.fontSize && (a.fontSize = a.fontSize + "px"), c.fontSize = a.fontSize), this._fontComponents = c, a.font = this.componentsToFont(this._fontComponents), this.style = a, this.dirty = !0, b && this.updateText(), this
    },
    c.Text.prototype.updateText = function() {
        this.texture.baseTexture.resolution = this._res,
        this.context.font = this.style.font;
        var a = this.text;
        this.style.wordWrap && (a = this.runWordWrap(this.text));
        var b = a.split(/(?:\r\n|\r|\n)/),
            c = this.style.tabs,
            d = [],
            e = 0,
            f = this.determineFontProperties(this.style.font),
            g = b.length;
        this.style.maxLines > 0 && this.style.maxLines < b.length && (g = this.style.maxLines),
        this._charCount = 0;
        for (var h = 0; h < g; h++) {
            if (0 === c) {
                var i = this.style.strokeThickness + this.padding.x;
                i += this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? this.measureLine(b[h]) : this.context.measureText(b[h]).width,
                this.style.wordWrap && (i -= this.context.measureText(" ").width)
            } else {
                var j = b[h].split(/(?:\t)/),
                    i = this.padding.x + this.style.strokeThickness;
                if (Array.isArray(c))
                    for (var k = 0, l = 0; l < j.length; l++) {
                        var m = 0;
                        m = this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? this.measureLine(j[l]) : Math.ceil(this.context.measureText(j[l]).width),
                        l > 0 && (k += c[l - 1]),
                        i = k + m
                    }
                else
                    for (var l = 0; l < j.length; l++) {
                        i += this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? this.measureLine(j[l]) : Math.ceil(this.context.measureText(j[l]).width);
                        var n = this.game.math.snapToCeil(i, c) - i;
                        i += n
                    }
            }
            d[h] = Math.ceil(i),
            e = Math.max(e, d[h])
        }
        this.canvas.width = e * this._res;
        var o = f.fontSize + this.style.strokeThickness + this.padding.y,
            p = o * g,
            q = this._lineSpacing;
        q < 0 && Math.abs(q) > o && (q = -o),
        0 !== q && (p += q > 0 ? q * b.length : q * (b.length - 1)),
        this.canvas.height = p * this._res,
        this.context.scale(this._res, this._res),
        navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height),
        this.style.backgroundColor && (this.context.fillStyle = this.style.backgroundColor, this.context.fillRect(0, 0, this.canvas.width, this.canvas.height)),
        this.context.fillStyle = this.style.fill,
        this.context.font = this.style.font,
        this.context.strokeStyle = this.style.stroke,
        this.context.textBaseline = "alphabetic",
        this.context.lineWidth = this.style.strokeThickness,
        this.context.lineCap = "round",
        this.context.lineJoin = "round";
        var r,
            s;
        for (this._charCount = 0, h = 0; h < g; h++)
            r = this.style.strokeThickness / 2,
            s = this.style.strokeThickness / 2 + h * o + f.ascent,
            h > 0 && (s += q * h),
            "right" === this.style.align ? r += e - d[h] : "center" === this.style.align && (r += (e - d[h]) / 2),
            this.autoRound && (r = Math.round(r), s = Math.round(s)),
            this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? this.updateLine(b[h], r, s) : (this.style.stroke && this.style.strokeThickness && (this.updateShadow(this.style.shadowStroke), 0 === c ? this.context.strokeText(b[h], r, s) : this.renderTabLine(b[h], r, s, !1)), this.style.fill && (this.updateShadow(this.style.shadowFill), 0 === c ? this.context.fillText(b[h], r, s) : this.renderTabLine(b[h], r, s, !0)));
        this.updateTexture(),
        this.dirty = !1
    },
    c.Text.prototype.renderTabLine = function(a, b, c, d) {
        var e = a.split(/(?:\t)/),
            f = this.style.tabs,
            g = 0;
        if (Array.isArray(f))
            for (var h = 0, i = 0; i < e.length; i++)
                i > 0 && (h += f[i - 1]),
                g = b + h,
                d ? this.context.fillText(e[i], g, c) : this.context.strokeText(e[i], g, c);
        else
            for (var i = 0; i < e.length; i++) {
                var j = Math.ceil(this.context.measureText(e[i]).width);
                g = this.game.math.snapToCeil(b, f),
                d ? this.context.fillText(e[i], g, c) : this.context.strokeText(e[i], g, c),
                b = g + j
            }
    },
    c.Text.prototype.updateShadow = function(a) {
        a ? (this.context.shadowOffsetX = this.style.shadowOffsetX, this.context.shadowOffsetY = this.style.shadowOffsetY, this.context.shadowColor = this.style.shadowColor, this.context.shadowBlur = this.style.shadowBlur) : (this.context.shadowOffsetX = 0, this.context.shadowOffsetY = 0, this.context.shadowColor = 0, this.context.shadowBlur = 0)
    },
    c.Text.prototype.measureLine = function(a) {
        for (var b = 0, c = 0; c < a.length; c++) {
            var d = a[c];
            if (this.fontWeights.length > 0 || this.fontStyles.length > 0) {
                var e = this.fontToComponents(this.context.font);
                this.fontStyles[this._charCount] && (e.fontStyle = this.fontStyles[this._charCount]),
                this.fontWeights[this._charCount] && (e.fontWeight = this.fontWeights[this._charCount]),
                this.context.font = this.componentsToFont(e)
            }
            this.style.stroke && this.style.strokeThickness && (this.strokeColors[this._charCount] && (this.context.strokeStyle = this.strokeColors[this._charCount]), this.updateShadow(this.style.shadowStroke)),
            this.style.fill && (this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount]), this.updateShadow(this.style.shadowFill)),
            b += this.context.measureText(d).width,
            this._charCount++
        }
        return Math.ceil(b)
    },
    c.Text.prototype.updateLine = function(a, b, c) {
        for (var d = 0; d < a.length; d++) {
            var e = a[d];
            if (this.fontWeights.length > 0 || this.fontStyles.length > 0) {
                var f = this.fontToComponents(this.context.font);
                this.fontStyles[this._charCount] && (f.fontStyle = this.fontStyles[this._charCount]),
                this.fontWeights[this._charCount] && (f.fontWeight = this.fontWeights[this._charCount]),
                this.context.font = this.componentsToFont(f)
            }
            this.style.stroke && this.style.strokeThickness && (this.strokeColors[this._charCount] && (this.context.strokeStyle = this.strokeColors[this._charCount]), this.updateShadow(this.style.shadowStroke), this.context.strokeText(e, b, c)),
            this.style.fill && (this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount]), this.updateShadow(this.style.shadowFill), this.context.fillText(e, b, c)),
            b += this.context.measureText(e).width,
            this._charCount++
        }
    },
    c.Text.prototype.clearColors = function() {
        return this.colors = [], this.strokeColors = [], this.dirty = !0, this
    },
    c.Text.prototype.clearFontValues = function() {
        return this.fontStyles = [], this.fontWeights = [], this.dirty = !0, this
    },
    c.Text.prototype.addColor = function(a, b) {
        return this.colors[b] = a, this.dirty = !0, this
    },
    c.Text.prototype.addStrokeColor = function(a, b) {
        return this.strokeColors[b] = a, this.dirty = !0, this
    },
    c.Text.prototype.addFontStyle = function(a, b) {
        return this.fontStyles[b] = a, this.dirty = !0, this
    },
    c.Text.prototype.addFontWeight = function(a, b) {
        return this.fontWeights[b] = a, this.dirty = !0, this
    },
    c.Text.prototype.precalculateWordWrap = function(a) {
        this.texture.baseTexture.resolution = this._res,
        this.context.font = this.style.font;
        var b = this.runWordWrap(a);
        return b.split(/(?:\r\n|\r|\n)/)
    },
    c.Text.prototype.runWordWrap = function(a) {
        return this.useAdvancedWrap ? this.advancedWordWrap(a) : this.basicWordWrap(a)
    },
    c.Text.prototype.advancedWordWrap = function(a) {
        for (var b = this.context, c = this.style.wordWrapWidth, d = "", e = a.replace(/ +/gi, " ").split(/\r?\n/gi), f = e.length, g = 0; g < f; g++) {
            var h = e[g],
                i = "";
            h = h.replace(/^ *|\s*$/gi, "");
            var j = b.measureText(h).width;
            if (j < c)
                d += h + "\n";
            else {
                for (var k = c, l = h.split(" "), m = 0; m < l.length; m++) {
                    var n = l[m],
                        o = n + " ",
                        p = b.measureText(o).width;
                    if (p > k) {
                        if (0 === m) {
                            for (var q = o; q.length && (q = q.slice(0, -1), p = b.measureText(q).width, !(p <= k));)
                                ;
                            if (!q.length)
                                throw new Error("This text's wordWrapWidth setting is less than a single character!");
                            var r = n.substr(q.length);
                            l[m] = r,
                            i += q
                        }
                        var s = l[m].length ? m : m + 1,
                            t = l.slice(s).join(" ").replace(/[ \n]*$/gi, "");
                        e[g + 1] = t + " " + (e[g + 1] || ""),
                        f = e.length;
                        break
                    }
                    i += o,
                    k -= p
                }
                d += i.replace(/[ \n]*$/gi, "") + "\n"
            }
        }
        return d = d.replace(/[\s|\n]*$/gi, "")
    },
    c.Text.prototype.basicWordWrap = function(a) {
        for (var b = "", c = a.split("\n"), d = 0; d < c.length; d++) {
            for (var e = this.style.wordWrapWidth, f = c[d].split(" "), g = 0; g < f.length; g++) {
                var h = this.context.measureText(f[g]).width,
                    i = h + this.context.measureText(" ").width;
                i > e ? (g > 0 && (b += "\n"), b += f[g] + " ", e = this.style.wordWrapWidth - h) : (e -= i, b += f[g] + " ")
            }
            d < c.length - 1 && (b += "\n")
        }
        return b
    },
    c.Text.prototype.updateFont = function(a) {
        var b = this.componentsToFont(a);
        this.style.font !== b && (this.style.font = b, this.dirty = !0, this.parent && this.updateTransform())
    },
    c.Text.prototype.fontToComponents = function(a) {
        var b = a.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/);
        if (b) {
            var c = b[5].trim();
            return /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(c) || /['",]/.exec(c) || (c = "'" + c + "'"), {
                font: a,
                fontStyle: b[1] || "normal",
                fontVariant: b[2] || "normal",
                fontWeight: b[3] || "normal",
                fontSize: b[4] || "medium",
                fontFamily: c
            }
        }
        return console.warn("Phaser.Text - unparsable CSS font: " + a), {
            font: a
        }
    },
    c.Text.prototype.componentsToFont = function(a) {
        var b,
            c = [];
        return b = a.fontStyle, b && "normal" !== b && c.push(b), b = a.fontVariant, b && "normal" !== b && c.push(b), b = a.fontWeight, b && "normal" !== b && c.push(b), b = a.fontSize, b && "medium" !== b && c.push(b), b = a.fontFamily, b && c.push(b), c.length || c.push(a.font), c.join(" ")
    },
    c.Text.prototype.setText = function(a, b) {
        return void 0 === b && (b = !1), this.text = a.toString() || "", b ? this.updateText() : this.dirty = !0, this
    },
    c.Text.prototype.parseList = function(a) {
        if (!Array.isArray(a))
            return this;
        for (var b = "", c = 0; c < a.length; c++)
            Array.isArray(a[c]) ? (b += a[c].join("\t"), c < a.length - 1 && (b += "\n")) : (b += a[c], c < a.length - 1 && (b += "\t"));
        return this.text = b, this.dirty = !0, this
    },
    c.Text.prototype.setTextBounds = function(a, b, d, e) {
        return void 0 === a ? this.textBounds = null : (this.textBounds ? this.textBounds.setTo(a, b, d, e) : this.textBounds = new c.Rectangle(a, b, d, e), this.style.wordWrapWidth > d && (this.style.wordWrapWidth = d)), this.updateTexture(), this
    },
    c.Text.prototype.updateTexture = function() {
        var a = this.texture.baseTexture,
            b = this.texture.crop,
            c = this.texture.frame,
            d = this.canvas.width,
            e = this.canvas.height;
        if (a.width = d, a.height = e, b.width = d, b.height = e, c.width = d, c.height = e, this.texture.width = d, this.texture.height = e, this._width = d, this._height = e, this.textBounds) {
            var f = this.textBounds.x,
                g = this.textBounds.y;
            "right" === this.style.boundsAlignH ? f += this.textBounds.width - this.canvas.width / this.resolution : "center" === this.style.boundsAlignH && (f += this.textBounds.halfWidth - this.canvas.width / this.resolution / 2),
            "bottom" === this.style.boundsAlignV ? g += this.textBounds.height - this.canvas.height / this.resolution : "middle" === this.style.boundsAlignV && (g += this.textBounds.halfHeight - this.canvas.height / this.resolution / 2),
            this.pivot.x = -f,
            this.pivot.y = -g
        }
        this.renderable = 0 !== d && 0 !== e,
        this.texture.requiresReTint = !0,
        this.texture.baseTexture.dirty()
    },
    c.Text.prototype._renderWebGL = function(a) {
        this.dirty && (this.updateText(), this.dirty = !1),
        PIXI.Sprite.prototype._renderWebGL.call(this, a)
    },
    c.Text.prototype._renderCanvas = function(a) {
        this.dirty && (this.updateText(), this.dirty = !1),
        PIXI.Sprite.prototype._renderCanvas.call(this, a)
    },
    c.Text.prototype.determineFontProperties = function(a) {
        var b = c.Text.fontPropertiesCache[a];
        if (!b) {
            b = {};
            var d = c.Text.fontPropertiesCanvas,
                e = c.Text.fontPropertiesContext;
            e.font = a;
            var f = Math.ceil(e.measureText("|MÉq").width),
                g = Math.ceil(e.measureText("|MÉq").width),
                h = 2 * g;
            if (g = 1.4 * g | 0, d.width = f, d.height = h, e.fillStyle = "#f00", e.fillRect(0, 0, f, h), e.font = a, e.textBaseline = "alphabetic", e.fillStyle = "#000", e.fillText("|MÉq", 0, g), !e.getImageData(0, 0, f, h))
                return b.ascent = g, b.descent = g + 6, b.fontSize = b.ascent + b.descent, c.Text.fontPropertiesCache[a] = b, b;
            var i,
                j,
                k = e.getImageData(0, 0, f, h).data,
                l = k.length,
                m = 4 * f,
                n = 0,
                o = !1;
            for (i = 0; i < g; i++) {
                for (j = 0; j < m; j += 4)
                    if (255 !== k[n + j]) {
                        o = !0;
                        break
                    }
                if (o)
                    break;
                n += m
            }
            for (b.ascent = g - i, n = l - m, o = !1, i = h; i > g; i--) {
                for (j = 0; j < m; j += 4)
                    if (255 !== k[n + j]) {
                        o = !0;
                        break
                    }
                if (o)
                    break;
                n -= m
            }
            b.descent = i - g,
            b.descent += 6,
            b.fontSize = b.ascent + b.descent,
            c.Text.fontPropertiesCache[a] = b
        }
        return b
    },
    c.Text.prototype.getBounds = function(a) {
        return this.dirty && (this.updateText(), this.dirty = !1), PIXI.Sprite.prototype.getBounds.call(this, a)
    },
    Object.defineProperty(c.Text.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(a) {
            a !== this._text && (this._text = a.toString() || "", this.dirty = !0, this.parent && this.updateTransform())
        }
    }),
    Object.defineProperty(c.Text.prototype, "cssFont", {
        get: function() {
            return this.componentsToFont(this._fontComponents)
        },
        set: function(a) {
            a = a || "bold 20pt Arial",
            this._fontComponents = this.fontToComponents(a),
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "font", {
        get: function() {
            return this._fontComponents.fontFamily
        },
        set: function(a) {
            a = a || "Arial",
            a = a.trim(),
            /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(a) || /['",]/.exec(a) || (a = "'" + a + "'"),
            this._fontComponents.fontFamily = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fontSize", {
        get: function() {
            var a = this._fontComponents.fontSize;
            return a && /(?:^0$|px$)/.exec(a) ? parseInt(a, 10) : a
        },
        set: function(a) {
            a = a || "0",
            "number" == typeof a && (a += "px"),
            this._fontComponents.fontSize = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fontWeight", {
        get: function() {
            return this._fontComponents.fontWeight || "normal"
        },
        set: function(a) {
            a = a || "normal",
            this._fontComponents.fontWeight = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fontStyle", {
        get: function() {
            return this._fontComponents.fontStyle || "normal"
        },
        set: function(a) {
            a = a || "normal",
            this._fontComponents.fontStyle = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fontVariant", {
        get: function() {
            return this._fontComponents.fontVariant || "normal"
        },
        set: function(a) {
            a = a || "normal",
            this._fontComponents.fontVariant = a,
            this.updateFont(this._fontComponents)
        }
    }),
    Object.defineProperty(c.Text.prototype, "fill", {
        get: function() {
            return this.style.fill
        },
        set: function(a) {
            a !== this.style.fill && (this.style.fill = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "align", {
        get: function() {
            return this.style.align
        },
        set: function(a) {
            a !== this.style.align && (this.style.align = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "resolution", {
        get: function() {
            return this._res
        },
        set: function(a) {
            a !== this._res && (this._res = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "tabs", {
        get: function() {
            return this.style.tabs
        },
        set: function(a) {
            a !== this.style.tabs && (this.style.tabs = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "boundsAlignH", {
        get: function() {
            return this.style.boundsAlignH
        },
        set: function(a) {
            a !== this.style.boundsAlignH && (this.style.boundsAlignH = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "boundsAlignV", {
        get: function() {
            return this.style.boundsAlignV
        },
        set: function(a) {
            a !== this.style.boundsAlignV && (this.style.boundsAlignV = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "stroke", {
        get: function() {
            return this.style.stroke
        },
        set: function(a) {
            a !== this.style.stroke && (this.style.stroke = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "strokeThickness", {
        get: function() {
            return this.style.strokeThickness
        },
        set: function(a) {
            a !== this.style.strokeThickness && (this.style.strokeThickness = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "wordWrap", {
        get: function() {
            return this.style.wordWrap
        },
        set: function(a) {
            a !== this.style.wordWrap && (this.style.wordWrap = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "wordWrapWidth", {
        get: function() {
            return this.style.wordWrapWidth
        },
        set: function(a) {
            a !== this.style.wordWrapWidth && (this.style.wordWrapWidth = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "lineSpacing", {
        get: function() {
            return this._lineSpacing
        },
        set: function(a) {
            a !== this._lineSpacing && (this._lineSpacing = parseFloat(a), this.dirty = !0, this.parent && this.updateTransform())
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowOffsetX", {
        get: function() {
            return this.style.shadowOffsetX
        },
        set: function(a) {
            a !== this.style.shadowOffsetX && (this.style.shadowOffsetX = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowOffsetY", {
        get: function() {
            return this.style.shadowOffsetY
        },
        set: function(a) {
            a !== this.style.shadowOffsetY && (this.style.shadowOffsetY = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowColor", {
        get: function() {
            return this.style.shadowColor
        },
        set: function(a) {
            a !== this.style.shadowColor && (this.style.shadowColor = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowBlur", {
        get: function() {
            return this.style.shadowBlur
        },
        set: function(a) {
            a !== this.style.shadowBlur && (this.style.shadowBlur = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowStroke", {
        get: function() {
            return this.style.shadowStroke
        },
        set: function(a) {
            a !== this.style.shadowStroke && (this.style.shadowStroke = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "shadowFill", {
        get: function() {
            return this.style.shadowFill
        },
        set: function(a) {
            a !== this.style.shadowFill && (this.style.shadowFill = a, this.dirty = !0)
        }
    }),
    Object.defineProperty(c.Text.prototype, "width", {
        get: function() {
            return this.dirty && (this.updateText(), this.dirty = !1), this.scale.x * this.texture.frame.width
        },
        set: function(a) {
            this.scale.x = a / this.texture.frame.width,
            this._width = a
        }
    }),
    Object.defineProperty(c.Text.prototype, "height", {
        get: function() {
            return this.dirty && (this.updateText(), this.dirty = !1), this.scale.y * this.texture.frame.height
        },
        set: function(a) {
            this.scale.y = a / this.texture.frame.height,
            this._height = a
        }
    }),
    c.Text.fontPropertiesCache = {},
    c.Text.fontPropertiesCanvas = document.createElement("canvas"),
    c.Text.fontPropertiesContext = c.Text.fontPropertiesCanvas.getContext("2d"),
    c.BitmapText = function(a, b, d, e, f, g, h) {
        b = b || 0,
        d = d || 0,
        e = e || "",
        f = f || "",
        g = g || 32,
        h = h || "left",
        PIXI.DisplayObjectContainer.call(this),
        this.type = c.BITMAPTEXT,
        this.physicsType = c.SPRITE,
        this.textWidth = 0,
        this.textHeight = 0,
        this.anchor = new c.Point,
        this._prevAnchor = new c.Point,
        this._glyphs = [],
        this._maxWidth = 0,
        this._text = f.toString() || "",
        this._data = a.cache.getBitmapFont(e),
        this._font = e,
        this._fontSize = g,
        this._align = h,
        this._tint = 16777215,
        this.updateText(),
        this.dirty = !1,
        c.Component.Core.init.call(this, a, b, d, "", null)
    },
    c.BitmapText.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
    c.BitmapText.prototype.constructor = c.BitmapText,
    c.Component.Core.install.call(c.BitmapText.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]),
    c.BitmapText.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.BitmapText.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.BitmapText.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.BitmapText.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.BitmapText.prototype.preUpdate = function() {
        return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
    },
    c.BitmapText.prototype.postUpdate = function() {
        c.Component.PhysicsBody.postUpdate.call(this),
        c.Component.FixedToCamera.postUpdate.call(this),
        this.body && this.body.type === c.Physics.ARCADE && (this.textWidth === this.body.sourceWidth && this.textHeight === this.body.sourceHeight || this.body.setSize(this.textWidth, this.textHeight))
    },
    c.BitmapText.prototype.setText = function(a) {
        this.text = a
    };
    c.BitmapText.prototype.scanLine = function(a, b, c) {
        for (var d = 0, e = 0, f = -1, g = 0, h = null, i = this._maxWidth > 0 ? this._maxWidth : null, j = [], k = 0; k < c.length; k++) {
            var l = k === c.length - 1;
            if (/(?:\r\n|\r|\n)/.test(c.charAt(k)))
                return {
                    width: e,
                    text: c.substr(0, k),
                    end: l,
                    chars: j
                };
            var m = c.charCodeAt(k),
                n = a.chars[m],
                o = 0;
            void 0 === n && (m = 32, n = a.chars[m]);
            var p = h && n.kerning[h] ? n.kerning[h] : 0;
            if (/(\s)/.test(c.charAt(k)) && (f = k, g = e), o = (p + n.texture.width + n.xOffset) * b, i && e + o >= i && f > -1)
                return {
                    width: g || e,
                    text: c.substr(0, k - (k - f)),
                    end: l,
                    chars: j
                };
            e += (n.xAdvance + p) * b,
            j.push(d + (n.xOffset + p) * b),
            d += (n.xAdvance + p) * b,
            h = m
        }
        return {
            width: e,
            text: c,
            end: l,
            chars: j
        }
    };
    c.BitmapText.prototype.cleanText = function(a, b) {
        void 0 === b && (b = "");
        var c = this._data.font;
        if (!c)
            return "";
        for (var d = /\r\n|\n\r|\n|\r/g, e = a.replace(d, "\n").split("\n"), f = 0; f < e.length; f++) {
            for (var g = "", h = e[f], i = 0; i < h.length; i++)
                g = c.chars[h.charCodeAt(i)] ? g.concat(h[i]) : g.concat(b);
            e[f] = g
        }
        return e.join("\n")
    },
    c.BitmapText.prototype.updateText = function() {
        var a = this._data.font;
        if (a) {
            var b = this.text,
                c = this._fontSize / a.size,
                d = [],
                e = 0;
            this.textWidth = 0;
            do {
                var f = this.scanLine(a, c, b);
                f.y = e,
                d.push(f),
                f.width > this.textWidth && (this.textWidth = f.width),
                e += a.lineHeight * c,
                b = b.substr(f.text.length + 1)
            } while (f.end === !1);
            this.textHeight = e;
            for (var g = 0, h = 0, i = this.textWidth * this.anchor.x, j = this.textHeight * this.anchor.y, k = 0; k < d.length; k++) {
                var f = d[k];
                "right" === this._align ? h = this.textWidth - f.width : "center" === this._align && (h = (this.textWidth - f.width) / 2);
                for (var l = 0; l < f.text.length; l++) {
                    var m = f.text.charCodeAt(l),
                        n = a.chars[m];
                    void 0 === n && (m = 32, n = a.chars[m]);
                    var o = this._glyphs[g];
                    o ? o.texture = n.texture : (o = new PIXI.Sprite(n.texture), o.name = f.text[l], this._glyphs.push(o)),
                    o.position.x = f.chars[l] + h - i,
                    o.position.y = f.y + n.yOffset * c - j,
                    o.scale.set(c),
                    o.tint = this.tint,
                    o.texture.requiresReTint = !0,
                    o.parent || this.addChild(o),
                    g++
                }
            }
            for (k = g; k < this._glyphs.length; k++)
                this.removeChild(this._glyphs[k])
        }
    },
    c.BitmapText.prototype.purgeGlyphs = function() {
        for (var a = this._glyphs.length, b = [], c = 0; c < this._glyphs.length; c++)
            this._glyphs[c].parent !== this ? this._glyphs[c].destroy() : b.push(this._glyphs[c]);
        return this._glyphs = [], this._glyphs = b, this.updateText(), a - b.length
    },
    c.BitmapText.prototype.updateTransform = function() {
        !this.dirty && this.anchor.equals(this._prevAnchor) || (this.updateText(), this.dirty = !1, this._prevAnchor.copyFrom(this.anchor)),
        PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)
    },
    Object.defineProperty(c.BitmapText.prototype, "align", {
        get: function() {
            return this._align
        },
        set: function(a) {
            a === this._align || "left" !== a && "center" !== a && "right" !== a || (this._align = a, this.updateText())
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(a) {
            a !== this._tint && (this._tint = a, this.updateText())
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "font", {
        get: function() {
            return this._font
        },
        set: function(a) {
            a !== this._font && (this._font = a.trim(), this._data = this.game.cache.getBitmapFont(this._font), this.updateText())
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "fontSize", {
        get: function() {
            return this._fontSize
        },
        set: function(a) {
            a = parseInt(a, 10),
            a !== this._fontSize && a > 0 && (this._fontSize = a, this.updateText())
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(a) {
            a !== this._text && (this._text = a.toString() || "", this.updateText())
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "maxWidth", {
        get: function() {
            return this._maxWidth
        },
        set: function(a) {
            a !== this._maxWidth && (this._maxWidth = a, this.updateText())
        }
    }),
    Object.defineProperty(c.BitmapText.prototype, "smoothed", {
        get: function() {
            return !this._data.base.scaleMode
        },
        set: function(a) {
            a ? this._data.base.scaleMode = 0 : this._data.base.scaleMode = 1
        }
    }),
    c.RetroFont = function(a, b, d, e, f, g, h, i, j, k) {
        if (!a.cache.checkImageKey(b))
            return !1;
        void 0 !== g && null !== g || (g = a.cache.getImage(b).width / d),
        this.characterWidth = d,
        this.characterHeight = e,
        this.characterSpacingX = h || 0,
        this.characterSpacingY = i || 0,
        this.characterPerRow = g,
        this.offsetX = j || 0,
        this.offsetY = k || 0,
        this.align = "left",
        this.multiLine = !1,
        this.autoUpperCase = !0,
        this.customSpacingX = 0,
        this.customSpacingY = 0,
        this.fixedWidth = 0,
        this.fontSet = a.cache.getImage(b),
        this._text = "",
        this.grabData = [],
        this.frameData = new c.FrameData;
        for (var l = this.offsetX, m = this.offsetY, n = 0, o = 0; o < f.length; o++) {
            var p = this.frameData.addFrame(new c.Frame(o, l, m, this.characterWidth, this.characterHeight));
            this.grabData[f.charCodeAt(o)] = p.index,
            n++,
            n === this.characterPerRow ? (n = 0, l = this.offsetX, m += this.characterHeight + this.characterSpacingY) : l += this.characterWidth + this.characterSpacingX
        }
        a.cache.updateFrameData(b, this.frameData),
        this.stamp = new c.Image(a, 0, 0, b, 0),
        c.RenderTexture.call(this, a, 100, 100, "", c.scaleModes.NEAREST),
        this.type = c.RETROFONT
    },
    c.RetroFont.prototype = Object.create(c.RenderTexture.prototype),
    c.RetroFont.prototype.constructor = c.RetroFont,
    c.RetroFont.ALIGN_LEFT = "left",
    c.RetroFont.ALIGN_RIGHT = "right",
    c.RetroFont.ALIGN_CENTER = "center",
    c.RetroFont.TEXT_SET1 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",
    c.RetroFont.TEXT_SET2 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",
    c.RetroFont.TEXT_SET3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",
    c.RetroFont.TEXT_SET4 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",
    c.RetroFont.TEXT_SET5 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",
    c.RetroFont.TEXT_SET6 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",
    c.RetroFont.TEXT_SET7 = "AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",
    c.RetroFont.TEXT_SET8 = "0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",
    c.RetroFont.TEXT_SET9 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",
    c.RetroFont.TEXT_SET10 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
    c.RetroFont.TEXT_SET11 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",
    c.RetroFont.prototype.setFixedWidth = function(a, b) {
        void 0 === b && (b = "left"),
        this.fixedWidth = a,
        this.align = b
    },
    c.RetroFont.prototype.setText = function(a, b, c, d, e, f) {
        this.multiLine = b || !1,
        this.customSpacingX = c || 0,
        this.customSpacingY = d || 0,
        this.align = e || "left",
        f ? this.autoUpperCase = !1 : this.autoUpperCase = !0,
        a.length > 0 && (this.text = a)
    },
    c.RetroFont.prototype.buildRetroFontText = function() {
        var a = 0,
            b = 0;
        if (this.clear(), this.multiLine) {
            var d = this._text.split("\n");
            this.fixedWidth > 0 ? this.resize(this.fixedWidth, d.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0) : this.resize(this.getLongestLine() * (this.characterWidth + this.customSpacingX), d.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0);
            for (var e = 0; e < d.length; e++)
                a = 0,
                this.align === c.RetroFont.ALIGN_RIGHT ? a = this.width - d[e].length * (this.characterWidth + this.customSpacingX) : this.align === c.RetroFont.ALIGN_CENTER && (a = this.width / 2 - d[e].length * (this.characterWidth + this.customSpacingX) / 2, a += this.customSpacingX / 2),
                a < 0 && (a = 0),
                this.pasteLine(d[e], a, b, this.customSpacingX),
                b += this.characterHeight + this.customSpacingY
        } else
            this.fixedWidth > 0 ? this.resize(this.fixedWidth, this.characterHeight, !0) : this.resize(this._text.length * (this.characterWidth + this.customSpacingX), this.characterHeight, !0),
            a = 0,
            this.align === c.RetroFont.ALIGN_RIGHT ? a = this.width - this._text.length * (this.characterWidth + this.customSpacingX) : this.align === c.RetroFont.ALIGN_CENTER && (a = this.width / 2 - this._text.length * (this.characterWidth + this.customSpacingX) / 2, a += this.customSpacingX / 2),
            a < 0 && (a = 0),
            this.pasteLine(this._text, a, 0, this.customSpacingX);
        this.requiresReTint = !0
    },
    c.RetroFont.prototype.pasteLine = function(a, b, c, d) {
        for (var e = 0; e < a.length; e++)
            if (" " === a.charAt(e))
                b += this.characterWidth + d;
            else if (this.grabData[a.charCodeAt(e)] >= 0 && (this.stamp.frame = this.grabData[a.charCodeAt(e)], this.renderXY(this.stamp, b, c, !1), b += this.characterWidth + d, b > this.width))
                break
    },
    c.RetroFont.prototype.getLongestLine = function() {
        var a = 0;
        if (this._text.length > 0)
            for (var b = this._text.split("\n"), c = 0; c < b.length; c++)
                b[c].length > a && (a = b[c].length);
        return a
    },
    c.RetroFont.prototype.removeUnsupportedCharacters = function(a) {
        for (var b = "", c = 0; c < this._text.length; c++) {
            var d = this._text[c],
                e = d.charCodeAt(0);
            (this.grabData[e] >= 0 || !a && "\n" === d) && (b = b.concat(d))
        }
        return b
    },
    c.RetroFont.prototype.updateOffset = function(a, b) {
        if (this.offsetX !== a || this.offsetY !== b) {
            for (var c = a - this.offsetX, d = b - this.offsetY, e = this.game.cache.getFrameData(this.stamp.key).getFrames(), f = e.length; f--;)
                e[f].x += c,
                e[f].y += d;
            this.buildRetroFontText()
        }
    },
    Object.defineProperty(c.RetroFont.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(a) {
            var b;
            b = this.autoUpperCase ? a.toUpperCase() : a,
            b !== this._text && (this._text = b, this.removeUnsupportedCharacters(this.multiLine), this.buildRetroFontText())
        }
    }),
    Object.defineProperty(c.RetroFont.prototype, "smoothed", {
        get: function() {
            return this.stamp.smoothed
        },
        set: function(a) {
            this.stamp.smoothed = a,
            this.buildRetroFontText()
        }
    }),
    c.Rope = function(a, b, d, e, f, g) {
        this.points = [],
        this.points = g,
        this._hasUpdateAnimation = !1,
        this._updateAnimationCallback = null,
        b = b || 0,
        d = d || 0,
        e = e || null,
        f = f || null,
        this.type = c.ROPE,
        PIXI.Rope.call(this, c.Cache.DEFAULT, this.points),
        c.Component.Core.init.call(this, a, b, d, e, f)
    },
    c.Rope.prototype = Object.create(PIXI.Rope.prototype),
    c.Rope.prototype.constructor = c.Rope,
    c.Component.Core.install.call(c.Rope.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Delta", "Destroy", "FixedToCamera", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "ScaleMinMax", "Smoothed"]),
    c.Rope.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.Rope.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.Rope.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.Rope.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.Rope.prototype.preUpdate = function() {
        return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
    },
    c.Rope.prototype.update = function() {
        this._hasUpdateAnimation && this.updateAnimation.call(this)
    },
    c.Rope.prototype.reset = function(a, b) {
        return c.Component.Reset.prototype.reset.call(this, a, b), this
    },
    Object.defineProperty(c.Rope.prototype, "updateAnimation", {
        get: function() {
            return this._updateAnimation
        },
        set: function(a) {
            a && "function" == typeof a ? (this._hasUpdateAnimation = !0, this._updateAnimation = a) : (this._hasUpdateAnimation = !1, this._updateAnimation = null)
        }
    }),
    Object.defineProperty(c.Rope.prototype, "segments", {
        get: function() {
            for (var a, b, d, e, f, g, h, i, j = [], k = 0; k < this.points.length; k++)
                a = 4 * k,
                b = this.vertices[a] * this.scale.x,
                d = this.vertices[a + 1] * this.scale.y,
                e = this.vertices[a + 4] * this.scale.x,
                f = this.vertices[a + 3] * this.scale.y,
                g = c.Math.difference(b, e),
                h = c.Math.difference(d, f),
                b += this.world.x,
                d += this.world.y,
                i = new c.Rectangle(b, d, g, h),
                j.push(i);
            return j
        }
    }),
    c.TileSprite = function(a, b, d, e, f, g, h) {
        b = b || 0,
        d = d || 0,
        e = e || 256,
        f = f || 256,
        g = g || null,
        h = h || null,
        this.type = c.TILESPRITE,
        this.physicsType = c.SPRITE,
        this._scroll = new c.Point;
        var i = a.cache.getImage("__default", !0);
        PIXI.TilingSprite.call(this, new PIXI.Texture(i.base), e, f),
        c.Component.Core.init.call(this, a, b, d, g, h)
    },
    c.TileSprite.prototype = Object.create(PIXI.TilingSprite.prototype),
    c.TileSprite.prototype.constructor = c.TileSprite,
    c.Component.Core.install.call(c.TileSprite.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Destroy", "FixedToCamera", "Health", "InCamera", "InputEnabled", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "Smoothed"]),
    c.TileSprite.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate,
    c.TileSprite.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate,
    c.TileSprite.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate,
    c.TileSprite.prototype.preUpdateCore = c.Component.Core.preUpdate,
    c.TileSprite.prototype.preUpdate = function() {
        return 0 !== this._scroll.x && (this.tilePosition.x += this._scroll.x * this.game.time.physicsElapsed), 0 !== this._scroll.y && (this.tilePosition.y += this._scroll.y * this.game.time.physicsElapsed), !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
    },
    c.TileSprite.prototype.autoScroll = function(a, b) {
        this._scroll.set(a, b)
    },
    c.TileSprite.prototype.stopScroll = function() {
        this._scroll.set(0, 0)
    },
    c.TileSprite.prototype.destroy = function(a) {
        c.Component.Destroy.prototype.destroy.call(this, a),
        PIXI.TilingSprite.prototype.destroy.call(this)
    },
    c.TileSprite.prototype.reset = function(a, b) {
        return c.Component.Reset.prototype.reset.call(this, a, b), this.tilePosition.x = 0, this.tilePosition.y = 0, this
    },
    c.Device = function() {
        this.deviceReadyAt = 0,
        this.initialized = !1,
        this.desktop = !1,
        this.iOS = !1,
        this.iOSVersion = 0,
        this.cocoonJS = !1,
        this.cocoonJSApp = !1,
        this.cordova = !1,
        this.node = !1,
        this.nodeWebkit = !1,
        this.electron = !1,
        this.ejecta = !1,
        this.crosswalk = !1,
        this.android = !1,
        this.chromeOS = !1,
        this.linux = !1,
        this.macOS = !1,
        this.windows = !1,
        this.windowsPhone = !1,
        this.canvas = !1,
        this.canvasBitBltShift = null,
        this.webGL = !1,
        this.file = !1,
        this.fileSystem = !1,
        this.localStorage = !1,
        this.worker = !1,
        this.css3D = !1,
        this.pointerLock = !1,
        this.typedArray = !1,
        this.vibration = !1,
        this.getUserMedia = !0,
        this.quirksMode = !1,
        this.touch = !1,
        this.mspointer = !1,
        this.wheelEvent = null,
        this.arora = !1,
        this.chrome = !1,
        this.chromeVersion = 0,
        this.epiphany = !1,
        this.firefox = !1,
        this.firefoxVersion = 0,
        this.ie = !1,
        this.ieVersion = 0,
        this.trident = !1,
        this.tridentVersion = 0,
        this.edge = !1,
        this.mobileSafari = !1,
        this.midori = !1,
        this.opera = !1,
        this.safari = !1,
        this.safariVersion = 0,
        this.webApp = !1,
        this.silk = !1,
        this.audioData = !1,
        this.webAudio = !1,
        this.ogg = !1,
        this.opus = !1,
        this.mp3 = !1,
        this.wav = !1,
        this.m4a = !1,
        this.webm = !1,
        this.dolby = !1,
        this.oggVideo = !1,
        this.h264Video = !1,
        this.mp4Video = !1,
        this.webmVideo = !1,
        this.vp9Video = !1,
        this.hlsVideo = !1,
        this.iPhone = !1,
        this.iPhone4 = !1,
        this.iPad = !1,
        this.pixelRatio = 0,
        this.littleEndian = !1,
        this.LITTLE_ENDIAN = !1,
        this.support32bit = !1,
        this.fullscreen = !1,
        this.requestFullscreen = "",
        this.cancelFullscreen = "",
        this.fullscreenKeyboard = !1
    },
    c.Device = new c.Device,
    c.Device.onInitialized = new c.Signal,
    c.Device.whenReady = function(a, b, c) {
        var d = this._readyCheck;
        if (this.deviceReadyAt || !d)
            a.call(b, this);
        else if (d._monitor || c)
            d._queue = d._queue || [],
            d._queue.push([a, b]);
        else {
            d._monitor = d.bind(this),
            d._queue = d._queue || [],
            d._queue.push([a, b]);
            var e = "undefined" != typeof window.cordova,
                f = navigator.isCocoonJS;
            "complete" === document.readyState || "interactive" === document.readyState ? window.setTimeout(d._monitor, 0) : e && !f ? document.addEventListener("deviceready", d._monitor, !1) : (document.addEventListener("DOMContentLoaded", d._monitor, !1), window.addEventListener("load", d._monitor, !1))
        }
    },
    c.Device._readyCheck = function() {
        var a = this._readyCheck;
        if (document.body) {
            if (!this.deviceReadyAt) {
                this.deviceReadyAt = Date.now(),
                document.removeEventListener("deviceready", a._monitor),
                document.removeEventListener("DOMContentLoaded", a._monitor),
                window.removeEventListener("load", a._monitor),
                this._initialize(),
                this.initialized = !0,
                this.onInitialized.dispatch(this);
                for (var b; b = a._queue.shift();) {
                    var c = b[0],
                        d = b[1];
                    c.call(d, this)
                }
                this._readyCheck = null,
                this._initialize = null,
                this.onInitialized = null
            }
        } else
            window.setTimeout(a._monitor, 20)
    },
    c.Device._initialize = function() {
        function a() {
            var a = navigator.userAgent;
            /Playstation Vita/.test(a) ? l.vita = !0 : /Kindle/.test(a) || /\bKF[A-Z][A-Z]+/.test(a) || /Silk.*Mobile Safari/.test(a) ? l.kindle = !0 : /Android/.test(a) ? l.android = !0 : /CrOS/.test(a) ? l.chromeOS = !0 : /iP[ao]d|iPhone/i.test(a) ? (l.iOS = !0, navigator.appVersion.match(/OS (\d+)/), l.iOSVersion = parseInt(RegExp.$1, 10)) : /Linux/.test(a) ? l.linux = !0 : /Mac OS/.test(a) ? l.macOS = !0 : /Windows/.test(a) && (l.windows = !0),
            (/Windows Phone/i.test(a) || /IEMobile/i.test(a)) && (l.android = !1, l.iOS = !1, l.macOS = !1, l.windows = !0, l.windowsPhone = !0);
            var b = /Silk/.test(a);
            (l.windows || l.macOS || l.linux && !b || l.chromeOS) && (l.desktop = !0),
            (l.windowsPhone || /Windows NT/i.test(a) && /Touch/i.test(a)) && (l.desktop = !1)
        }
        function b() {
            l.canvas = !!window.CanvasRenderingContext2D || l.cocoonJS;
            try {
                l.localStorage = !!localStorage.getItem
            } catch (a) {
                l.localStorage = !1
            }
            l.file = !!(window.File && window.FileReader && window.FileList && window.Blob),
            l.fileSystem = !!window.requestFileSystem,
            l.webGL = function() {
                try {
                    var a = document.createElement("canvas");
                    return a.screencanvas = !1, !!window.WebGLRenderingContext && (a.getContext("webgl") || a.getContext("experimental-webgl"))
                } catch (a) {
                    return !1
                }
            }(),
            l.webGL = !!l.webGL,
            l.worker = !!window.Worker,
            l.pointerLock = "pointerLockElement" in document || "mozPointerLockElement" in document || "webkitPointerLockElement" in document,
            l.quirksMode = "CSS1Compat" !== document.compatMode,
            navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia,
            window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL,
            l.getUserMedia = l.getUserMedia && !!navigator.getUserMedia && !!window.URL,
            l.firefox && l.firefoxVersion < 21 && (l.getUserMedia = !1),
            !l.iOS && (l.ie || l.firefox || l.chrome) && (l.canvasBitBltShift = !0),
            (l.safari || l.mobileSafari) && (l.canvasBitBltShift = !1)
        }
        function c() {
            ("ontouchstart" in document.documentElement || window.navigator.maxTouchPoints && window.navigator.maxTouchPoints >= 1) && (l.touch = !0),
            (window.navigator.msPointerEnabled || window.navigator.pointerEnabled) && (l.mspointer = !0),
            l.cocoonJS || ("onwheel" in window || l.ie && "WheelEvent" in window ? l.wheelEvent = "wheel" : "onmousewheel" in window ? l.wheelEvent = "mousewheel" : l.firefox && "MouseScrollEvent" in window && (l.wheelEvent = "DOMMouseScroll"))
        }
        function d() {
            for (var a = ["requestFullscreen", "requestFullScreen", "webkitRequestFullscreen", "webkitRequestFullScreen", "msRequestFullscreen", "msRequestFullScreen", "mozRequestFullScreen", "mozRequestFullscreen"], b = document.createElement("div"), c = 0; c < a.length; c++)
                if (b[a[c]]) {
                    l.fullscreen = !0,
                    l.requestFullscreen = a[c];
                    break
                }
            var d = ["cancelFullScreen", "exitFullscreen", "webkitCancelFullScreen", "webkitExitFullscreen", "msCancelFullScreen", "msExitFullscreen", "mozCancelFullScreen", "mozExitFullscreen"];
            if (l.fullscreen)
                for (var c = 0; c < d.length; c++)
                    if (document[d[c]]) {
                        l.cancelFullscreen = d[c];
                        break
                    }
            window.Element && Element.ALLOW_KEYBOARD_INPUT && (l.fullscreenKeyboard = !0)
        }
        function e() {
            var a = navigator.userAgent;
            if (/Arora/.test(a) ? l.arora = !0 : /Edge\/\d+/.test(a) ? l.edge = !0 : /Chrome\/(\d+)/.test(a) && !l.windowsPhone ? (l.chrome = !0, l.chromeVersion = parseInt(RegExp.$1, 10)) : /Epiphany/.test(a) ? l.epiphany = !0 : /Firefox\D+(\d+)/.test(a) ? (l.firefox = !0, l.firefoxVersion = parseInt(RegExp.$1, 10)) : /AppleWebKit/.test(a) && l.iOS ? l.mobileSafari = !0 : /MSIE (\d+\.\d+);/.test(a) ? (l.ie = !0, l.ieVersion = parseInt(RegExp.$1, 10)) : /Midori/.test(a) ? l.midori = !0 : /Opera/.test(a) ? l.opera = !0 : /Safari\/(\d+)/.test(a) && !l.windowsPhone ? (l.safari = !0, /Version\/(\d+)\./.test(a) && (l.safariVersion = parseInt(RegExp.$1, 10))) : /Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a) && (l.ie = !0, l.trident = !0, l.tridentVersion = parseInt(RegExp.$1, 10), l.ieVersion = parseInt(RegExp.$3, 10)), /Silk/.test(a) && (l.silk = !0), navigator.standalone && (l.webApp = !0), "undefined" != typeof window.cordova && (l.cordova = !0), "undefined" != typeof process && "undefined" != typeof require && (l.node = !0), l.node && "object" == typeof process.versions && (l.nodeWebkit = !!process.versions["node-webkit"], l.electron = !!process.versions.electron), navigator.isCocoonJS && (l.cocoonJS = !0), l.cocoonJS)
                try {
                    l.cocoonJSApp = "undefined" != typeof CocoonJS
                } catch (a) {
                    l.cocoonJSApp = !1
                }
            "undefined" != typeof window.ejecta && (l.ejecta = !0),
            /Crosswalk/.test(a) && (l.crosswalk = !0)
        }
        function f() {
            var a = document.createElement("video"),
                b = !1;
            try {
                (b = !!a.canPlayType) && (a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, "") && (l.oggVideo = !0), a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, "") && (l.h264Video = !0, l.mp4Video = !0), a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, "") && (l.webmVideo = !0), a.canPlayType('video/webm; codecs="vp9"').replace(/^no$/, "") && (l.vp9Video = !0), a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/, "") && (l.hlsVideo = !0))
            } catch (a) {}
        }
        function g() {
            l.audioData = !!window.Audio,
            l.webAudio = !(!window.AudioContext && !window.webkitAudioContext);
            var a = document.createElement("audio"),
                b = !1;
            try {
                if ((b = !!a.canPlayType) && (a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, "") && (l.ogg = !0), (a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, "") || a.canPlayType("audio/opus;").replace(/^no$/, "")) && (l.opus = !0), a.canPlayType("audio/mpeg;").replace(/^no$/, "") && (l.mp3 = !0), a.canPlayType('audio/wav; codecs="1"').replace(/^no$/, "") && (l.wav = !0), (a.canPlayType("audio/x-m4a;") || a.canPlayType("audio/aac;").replace(/^no$/, "")) && (l.m4a = !0), a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "") && (l.webm = !0), "" !== a.canPlayType('audio/mp4;codecs="ec-3"')))
                    if (l.edge)
                        l.dolby = !0;
                    else if (l.safari && l.safariVersion >= 9 && /Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)) {
                        var c = parseInt(RegExp.$1, 10),
                            d = parseInt(RegExp.$2, 10);
                        (10 === c && d >= 11 || c > 10) && (l.dolby = !0)
                    }
            } catch (a) {}
        }
        function h() {
            var a = new ArrayBuffer(4),
                b = new Uint8Array(a),
                c = new Uint32Array(a);
            return b[0] = 161, b[1] = 178, b[2] = 195, b[3] = 212, 3569595041 === c[0] || 2712847316 !== c[0] && null
        }
        function i() {
            if (void 0 === Uint8ClampedArray)
                return !1;
            var a = PIXI.CanvasPool.create(this, 1, 1),
                b = a.getContext("2d");
            if (!b)
                return !1;
            var c = b.createImageData(1, 1);
            return PIXI.CanvasPool.remove(this), c.data instanceof Uint8ClampedArray
        }
        function j() {
            l.pixelRatio = window.devicePixelRatio || 1,
            l.iPhone = navigator.userAgent.toLowerCase().indexOf("iphone") !== -1,
            l.iPhone4 = 2 === l.pixelRatio && l.iPhone,
            l.iPad = navigator.userAgent.toLowerCase().indexOf("ipad") !== -1,
            "undefined" != typeof Int8Array ? l.typedArray = !0 : l.typedArray = !1,
            "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array && "undefined" != typeof Uint32Array && (l.littleEndian = h(), l.LITTLE_ENDIAN = l.littleEndian),
            l.support32bit = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8ClampedArray && "undefined" != typeof Int32Array && null !== l.littleEndian && i(),
            navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate,
            navigator.vibrate && (l.vibration = !0)
        }
        function k() {
            var a,
                b = document.createElement("p"),
                c = {
                    webkitTransform: "-webkit-transform",
                    OTransform: "-o-transform",
                    msTransform: "-ms-transform",
                    MozTransform: "-moz-transform",
                    transform: "transform"
                };
            document.body.insertBefore(b, null);
            for (var d in c)
                void 0 !== b.style[d] && (b.style[d] = "translate3d(1px,1px,1px)", a = window.getComputedStyle(b).getPropertyValue(c[d]));
            document.body.removeChild(b),
            l.css3D = void 0 !== a && a.length > 0 && "none" !== a
        }
        var l = this;
        a(),
        e(),
        g(),
        f(),
        k(),
        j(),
        b(),
        d(),
        c()
    },
    c.Device.canPlayAudio = function(a) {
        return !("mp3" !== a || !this.mp3) || (!("ogg" !== a || !this.ogg && !this.opus) || (!("m4a" !== a || !this.m4a) || (!("opus" !== a || !this.opus) || (!("wav" !== a || !this.wav) || (!("webm" !== a || !this.webm) || !("mp4" !== a || !this.dolby))))))
    },
    c.Device.canPlayVideo = function(a) {
        return !("webm" !== a || !this.webmVideo && !this.vp9Video) || (!("mp4" !== a || !this.mp4Video && !this.h264Video) || (!("ogg" !== a && "ogv" !== a || !this.oggVideo) || !("mpeg" !== a || !this.hlsVideo)))
    },
    c.Device.isConsoleOpen = function() {
        return !(!window.console || !window.console.firebug) || !(!window.console || (console.profile(), console.profileEnd(), console.clear && console.clear(), !console.profiles)) && console.profiles.length > 0
    },
    c.Device.isAndroidStockBrowser = function() {
        var a = window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);
        return a && a[1] < 537
    },
    c.Canvas = {
        create: function(a, b, c, d, e) {
            b = b || 256,
            c = c || 256;
            var f = e ? document.createElement("canvas") : PIXI.CanvasPool.create(a, b, c);
            return "string" == typeof d && "" !== d && (f.id = d), f.width = b, f.height = c, f.style.display = "block", f
        },
        setBackgroundColor: function(a, b) {
            return b = b || "rgb(0,0,0)", a.style.backgroundColor = b, a
        },
        setTouchAction: function(a, b) {
            return b = b || "none", a.style.msTouchAction = b, a.style["ms-touch-action"] = b, a.style["touch-action"] = b, a
        },
        setUserSelect: function(a, b) {
            return b = b || "none", a.style["-webkit-touch-callout"] = b, a.style["-webkit-user-select"] = b, a.style["-khtml-user-select"] = b, a.style["-moz-user-select"] = b, a.style["-ms-user-select"] = b, a.style["user-select"] = b, a.style["-webkit-tap-highlight-color"] = "rgba(0, 0, 0, 0)", a
        },
        addToDOM: function(a, b, c) {
            var d;
            return void 0 === c && (c = !0), b && ("string" == typeof b ? d = document.getElementById(b) : "object" == typeof b && 1 === b.nodeType && (d = b)), d || (d = document.body), c && d.style && (d.style.overflow = "hidden"), d.appendChild(a), a
        },
        removeFromDOM: function(a) {
            a.parentNode && a.parentNode.removeChild(a)
        },
        setTransform: function(a, b, c, d, e, f, g) {
            return a.setTransform(d, f, g, e, b, c), a
        },
        setSmoothingEnabled: function(a, b) {
            var d = c.Canvas.getSmoothingPrefix(a);
            return d && (a[d] = b), a
        },
        getSmoothingPrefix: function(a) {
            var b = ["i", "webkitI", "msI", "mozI", "oI"];
            for (var c in b) {
                var d = b[c] + "mageSmoothingEnabled";
                if (d in a)
                    return d
            }
            return null
        },
        getSmoothingEnabled: function(a) {
            var b = c.Canvas.getSmoothingPrefix(a);
            if (b)
                return a[b]
        },
        setImageRenderingCrisp: function(a) {
            for (var b = ["optimizeSpeed", "crisp-edges", "-moz-crisp-edges", "-webkit-optimize-contrast", "optimize-contrast", "pixelated"], c = 0; c < b.length; c++)
                a.style["image-rendering"] = b[c];
            return a.style.msInterpolationMode = "nearest-neighbor", a
        },
        setImageRenderingBicubic: function(a) {
            return a.style["image-rendering"] = "auto", a.style.msInterpolationMode = "bicubic", a
        }
    },
    c.RequestAnimationFrame = function(a, b) {
        void 0 === b && (b = !1),
        this.game = a,
        this.isRunning = !1,
        this.forceSetTimeOut = b;
        for (var c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; d++)
            window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"],
            window.cancelAnimationFrame = window[c[d] + "CancelAnimationFrame"];
        this._isSetTimeOut = !1,
        this._onLoop = null,
        this._timeOutID = null
    },
    c.RequestAnimationFrame.prototype = {
        start: function() {
            this.isRunning = !0;
            var a = this;
            !window.requestAnimationFrame || this.forceSetTimeOut ? (this._isSetTimeOut = !0, this._onLoop = function() {
                return a.updateSetTimeout()
            }, this._timeOutID = window.setTimeout(this._onLoop, 0)) : (this._isSetTimeOut = !1, this._onLoop = function(b) {
                return a.updateRAF(b)
            }, this._timeOutID = window.requestAnimationFrame(this._onLoop))
        },
        updateRAF: function(a) {
            this.isRunning && (this.game.update(Math.floor(a)), this._timeOutID = window.requestAnimationFrame(this._onLoop))
        },
        updateSetTimeout: function() {
            this.isRunning && (this.game.update(Date.now()), this._timeOutID = window.setTimeout(this._onLoop, this.game.time.timeToCall))
        },
        stop: function() {
            this._isSetTimeOut ? clearTimeout(this._timeOutID) : window.cancelAnimationFrame(this._timeOutID),
            this.isRunning = !1
        },
        isSetTimeOut: function() {
            return this._isSetTimeOut
        },
        isRAF: function() {
            return this._isSetTimeOut === !1
        }
    },
    c.RequestAnimationFrame.prototype.constructor = c.RequestAnimationFrame,
    c.Math = {
        PI2: 2 * Math.PI,
        between: function(a, b) {
            return Math.floor(Math.random() * (b - a + 1) + a)
        },
        fuzzyEqual: function(a, b, c) {
            return void 0 === c && (c = 1e-4), Math.abs(a - b) < c
        },
        fuzzyLessThan: function(a, b, c) {
            return void 0 === c && (c = 1e-4), a < b + c
        },
        fuzzyGreaterThan: function(a, b, c) {
            return void 0 === c && (c = 1e-4), a > b - c
        },
        fuzzyCeil: function(a, b) {
            return void 0 === b && (b = 1e-4), Math.ceil(a - b)
        },
        fuzzyFloor: function(a, b) {
            return void 0 === b && (b = 1e-4), Math.floor(a + b)
        },
        average: function() {
            for (var a = 0, b = arguments.length, c = 0; c < b; c++)
                a += +arguments[c];
            return a / b
        },
        shear: function(a) {
            return a % 1
        },
        snapTo: function(a, b, c) {
            return void 0 === c && (c = 0), 0 === b ? a : (a -= c, a = b * Math.round(a / b), c + a)
        },
        snapToFloor: function(a, b, c) {
            return void 0 === c && (c = 0), 0 === b ? a : (a -= c, a = b * Math.floor(a / b), c + a)
        },
        snapToCeil: function(a, b, c) {
            return void 0 === c && (c = 0), 0 === b ? a : (a -= c, a = b * Math.ceil(a / b), c + a)
        },
        roundTo: function(a, b, c) {
            void 0 === b && (b = 0),
            void 0 === c && (c = 10);
            var d = Math.pow(c, -b);
            return Math.round(a * d) / d
        },
        floorTo: function(a, b, c) {
            void 0 === b && (b = 0),
            void 0 === c && (c = 10);
            var d = Math.pow(c, -b);
            return Math.floor(a * d) / d
        },
        ceilTo: function(a, b, c) {
            void 0 === b && (b = 0),
            void 0 === c && (c = 10);
            var d = Math.pow(c, -b);
            return Math.ceil(a * d) / d
        },
        rotateToAngle: function(a, b, d) {
            return void 0 === d && (d = .05), a === b ? a : (Math.abs(b - a) <= d || Math.abs(b - a) >= c.Math.PI2 - d ? a = b : (Math.abs(b - a) > Math.PI && (b < a ? b += c.Math.PI2 : b -= c.Math.PI2), b > a ? a += d : b < a && (a -= d)), a)
        },
        getShortestAngle: function(a, b) {
            var c = b - a;
            if (0 === c)
                return 0;
            var d = Math.floor((c - -180) / 360);
            return c - 360 * d
        },
        angleBetween: function(a, b, c, d) {
            return Math.atan2(d - b, c - a)
        },
        angleBetweenY: function(a, b, c, d) {
            return Math.atan2(c - a, d - b)
        },
        angleBetweenPoints: function(a, b) {
            return Math.atan2(b.y - a.y, b.x - a.x)
        },
        angleBetweenPointsY: function(a, b) {
            return Math.atan2(b.x - a.x, b.y - a.y)
        },
        reverseAngle: function(a) {
            return this.normalizeAngle(a + Math.PI, !0)
        },
        normalizeAngle: function(a) {
            return a %= 2 * Math.PI, a >= 0 ? a : a + 2 * Math.PI
        },
        maxAdd: function(a, b, c) {
            return Math.min(a + b, c)
        },
        minSub: function(a, b, c) {
            return Math.max(a - b, c)
        },
        wrap: function(a, b, c) {
            var d = c - b;
            if (d <= 0)
                return 0;
            var e = (a - b) % d;
            return e < 0 && (e += d), e + b
        },
        wrapValue: function(a, b, c) {
            var d;
            return a = Math.abs(a), b = Math.abs(b), c = Math.abs(c), d = (a + b) % c
        },
        isOdd: function(a) {
            return !!(1 & a)
        },
        isEven: function(a) {
            return !(1 & a)
        },
        min: function() {
            if (1 === arguments.length && "object" == typeof arguments[0])
                var a = arguments[0];
            else
                var a = arguments;
            for (var b = 1, c = 0, d = a.length; b < d; b++)
                a[b] < a[c] && (c = b);
            return a[c]
        },
        max: function() {
            if (1 === arguments.length && "object" == typeof arguments[0])
                var a = arguments[0];
            else
                var a = arguments;
            for (var b = 1, c = 0, d = a.length; b < d; b++)
                a[b] > a[c] && (c = b);
            return a[c]
        },
        minProperty: function(a) {
            if (2 === arguments.length && "object" == typeof arguments[1])
                var b = arguments[1];
            else
                var b = arguments.slice(1);
            for (var c = 1, d = 0, e = b.length; c < e; c++)
                b[c][a] < b[d][a] && (d = c);
            return b[d][a]
        },
        maxProperty: function(a) {
            if (2 === arguments.length && "object" == typeof arguments[1])
                var b = arguments[1];
            else
                var b = arguments.slice(1);
            for (var c = 1, d = 0, e = b.length; c < e; c++)
                b[c][a] > b[d][a] && (d = c);
            return b[d][a]
        },
        wrapAngle: function(a, b) {
            return b ? this.wrap(a, -Math.PI, Math.PI) : this.wrap(a, -180, 180)
        },
        linearInterpolation: function(a, b) {
            var c = a.length - 1,
                d = c * b,
                e = Math.floor(d);
            return b < 0 ? this.linear(a[0], a[1], d) : b > 1 ? this.linear(a[c], a[c - 1], c - d) : this.linear(a[e], a[e + 1 > c ? c : e + 1], d - e)
        },
        bezierInterpolation: function(a, b) {
            for (var c = 0, d = a.length - 1, e = 0; e <= d; e++)
                c += Math.pow(1 - b, d - e) * Math.pow(b, e) * a[e] * this.bernstein(d, e);
            return c
        },
        catmullRomInterpolation: function(a, b) {
            var c = a.length - 1,
                d = c * b,
                e = Math.floor(d);
            return a[0] === a[c] ? (b < 0 && (e = Math.floor(d = c * (1 + b))), this.catmullRom(a[(e - 1 + c) % c], a[e], a[(e + 1) % c], a[(e + 2) % c], d - e)) : b < 0 ? a[0] - (this.catmullRom(a[0], a[0], a[1], a[1], -d) - a[0]) : b > 1 ? a[c] - (this.catmullRom(a[c], a[c], a[c - 1], a[c - 1], d - c) - a[c]) : this.catmullRom(a[e ? e - 1 : 0], a[e], a[c < e + 1 ? c : e + 1], a[c < e + 2 ? c : e + 2], d - e)
        },
        linear: function(a, b, c) {
            return (b - a) * c + a
        },
        bernstein: function(a, b) {
            return this.factorial(a) / this.factorial(b) / this.factorial(a - b)
        },
        factorial: function(a) {
            if (0 === a)
                return 1;
            for (var b = a; --a;)
                b *= a;
            return b
        },
        catmullRom: function(a, b, c, d, e) {
            var f = .5 * (c - a),
                g = .5 * (d - b),
                h = e * e,
                i = e * h;
            return (2 * b - 2 * c + f + g) * i + (-3 * b + 3 * c - 2 * f - g) * h + f * e + b
        },
        difference: function(a, b) {
            return Math.abs(a - b)
        },
        roundAwayFromZero: function(a) {
            return a > 0 ? Math.ceil(a) : Math.floor(a)
        },
        sinCosGenerator: function(a, b, c, d) {
            void 0 === b && (b = 1),
            void 0 === c && (c = 1),
            void 0 === d && (d = 1);
            for (var e = b, f = c, g = d * Math.PI / a, h = [], i = [], j = 0; j < a; j++)
                f -= e * g,
                e += f * g,
                h[j] = f,
                i[j] = e;
            return {
                sin: i,
                cos: h,
                length: a
            }
        },
        distance: function(a, b, c, d) {
            var e = a - c,
                f = b - d;
            return Math.sqrt(e * e + f * f)
        },
        distanceSq: function(a, b, c, d) {
            var e = a - c,
                f = b - d;
            return e * e + f * f
        },
        distancePow: function(a, b, c, d, e) {
            return void 0 === e && (e = 2), Math.sqrt(Math.pow(c - a, e) + Math.pow(d - b, e))
        },
        clamp: function(a, b, c) {
            return a < b ? b : c < a ? c : a
        },
        clampBottom: function(a, b) {
            return a < b ? b : a
        },
        within: function(a, b, c) {
            return Math.abs(a - b) <= c
        },
        mapLinear: function(a, b, c, d, e) {
            return d + (a - b) * (e - d) / (c - b)
        },
        smoothstep: function(a, b, c) {
            return a = Math.max(0, Math.min(1, (a - b) / (c - b))), a * a * (3 - 2 * a)
        },
        smootherstep: function(a, b, c) {
            return a = Math.max(0, Math.min(1, (a - b) / (c - b))), a * a * a * (a * (6 * a - 15) + 10)
        },
        sign: function(a) {
            return a < 0 ? -1 : a > 0 ? 1 : 0
        },
        percent: function(a, b, c) {
            return void 0 === c && (c = 0), a > b || c > b ? 1 : a < c || c > a ? 0 : (a - c) / b
        }
    };
    var k = Math.PI / 180,
        l = 180 / Math.PI;
    return c.Math.degToRad = function(a) {
        return a * k
    }, c.Math.radToDeg = function(a) {
        return a * l
    }, c.RandomDataGenerator = function(a) {
        void 0 === a && (a = []),
        this.c = 1,
        this.s0 = 0,
        this.s1 = 0,
        this.s2 = 0,
        "string" == typeof a ? this.state(a) : this.sow(a)
    }, c.RandomDataGenerator.prototype = {
        rnd: function() {
            var a = 2091639 * this.s0 + 2.3283064365386963e-10 * this.c;
            return this.c = 0 | a, this.s0 = this.s1, this.s1 = this.s2, this.s2 = a - this.c, this.s2
        },
        sow: function(a) {
            if (this.s0 = this.hash(" "), this.s1 = this.hash(this.s0), this.s2 = this.hash(this.s1), this.c = 1, a)
                for (var b = 0; b < a.length && null != a[b]; b++) {
                    var c = a[b];
                    this.s0 -= this.hash(c),
                    this.s0 += ~~(this.s0 < 0),
                    this.s1 -= this.hash(c),
                    this.s1 += ~~(this.s1 < 0),
                    this.s2 -= this.hash(c),
                    this.s2 += ~~(this.s2 < 0)
                }
        },
        hash: function(a) {
            var b,
                c,
                d;
            for (d = 4022871197, a = a.toString(), c = 0; c < a.length; c++)
                d += a.charCodeAt(c),
                b = .02519603282416938 * d,
                d = b >>> 0,
                b -= d,
                b *= d,
                d = b >>> 0,
                b -= d,
                d += 4294967296 * b;
            return 2.3283064365386963e-10 * (d >>> 0)
        },
        integer: function() {
            return 4294967296 * this.rnd.apply(this)
        },
        frac: function() {
            return this.rnd.apply(this) + 1.1102230246251565e-16 * (2097152 * this.rnd.apply(this) | 0)
        },
        real: function() {
            return this.integer() + this.frac()
        },
        integerInRange: function(a, b) {
            return Math.floor(this.realInRange(0, b - a + 1) + a)
        },
        between: function(a, b) {
            return this.integerInRange(a, b)
        },
        realInRange: function(a, b) {
            return this.frac() * (b - a) + a
        },
        normal: function() {
            return 1 - 2 * this.frac()
        },
        uuid: function() {
            var a = "",
                b = "";
            for (b = a = ""; a++ < 36; b += ~a % 5 | 3 * a & 4 ? (15 ^ a ? 8 ^ this.frac() * (20 ^ a ? 16 : 4) : 4).toString(16) : "-")
                ;
            return b
        },
        pick: function(a) {
            return a[this.integerInRange(0, a.length - 1)]
        },
        sign: function() {
            return this.pick([-1, 1])
        },
        weightedPick: function(a) {
            return a[~~(Math.pow(this.frac(), 2) * (a.length - 1) + .5)]
        },
        timestamp: function(a, b) {
            return this.realInRange(a || 9466848e5, b || 1577862e6)
        },
        angle: function() {
            return this.integerInRange(-180, 180)
        },
        state: function(a) {
            return "string" == typeof a && a.match(/^!rnd/) && (a = a.split(","), this.c = parseFloat(a[1]), this.s0 = parseFloat(a[2]), this.s1 = parseFloat(a[3]), this.s2 = parseFloat(a[4])), ["!rnd", this.c, this.s0, this.s1, this.s2].join(",")
        }
    }, c.RandomDataGenerator.prototype.constructor = c.RandomDataGenerator, c.QuadTree = function(a, b, c, d, e, f, g) {
        this.maxObjects = 10,
        this.maxLevels = 4,
        this.level = 0,
        this.bounds = {},
        this.objects = [],
        this.nodes = [],
        this._empty = [],
        this.reset(a, b, c, d, e, f, g)
    }, c.QuadTree.prototype = {
        reset: function(a, b, c, d, e, f, g) {
            this.maxObjects = e || 10,
            this.maxLevels = f || 4,
            this.level = g || 0,
            this.bounds = {
                x: Math.round(a),
                y: Math.round(b),
                width: c,
                height: d,
                subWidth: Math.floor(c / 2),
                subHeight: Math.floor(d / 2),
                right: Math.round(a) + Math.floor(c / 2),
                bottom: Math.round(b) + Math.floor(d / 2)
            },
            this.objects.length = 0,
            this.nodes.length = 0
        },
        populate: function(a) {
            a.forEach(this.populateHandler, this, !0)
        },
        populateHandler: function(a) {
            a.body && a.exists && this.insert(a.body)
        },
        split: function() {
            this.nodes[0] = new c.QuadTree(this.bounds.right, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1),
            this.nodes[1] = new c.QuadTree(this.bounds.x, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1),
            this.nodes[2] = new c.QuadTree(this.bounds.x, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1),
            this.nodes[3] = new c.QuadTree(this.bounds.right, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1)
        },
        insert: function(a) {
            var b,
                c = 0;
            if (null != this.nodes[0] && (b = this.getIndex(a), b !== -1))
                return void this.nodes[b].insert(a);
            if (this.objects.push(a), this.objects.length > this.maxObjects && this.level < this.maxLevels)
                for (null == this.nodes[0] && this.split(); c < this.objects.length;)
                    b = this.getIndex(this.objects[c]),
                    b !== -1 ? this.nodes[b].insert(this.objects.splice(c, 1)[0]) : c++
        },
        getIndex: function(a) {
            var b = -1;
            return a.x < this.bounds.right && a.right < this.bounds.right ? a.y < this.bounds.bottom && a.bottom < this.bounds.bottom ? b = 1 : a.y > this.bounds.bottom && (b = 2) : a.x > this.bounds.right && (a.y < this.bounds.bottom && a.bottom < this.bounds.bottom ? b = 0 : a.y > this.bounds.bottom && (b = 3)), b
        },
        retrieve: function(a) {
            if (a instanceof c.Rectangle)
                var b = this.objects,
                    d = this.getIndex(a);
            else {
                if (!a.body)
                    return this._empty;
                var b = this.objects,
                    d = this.getIndex(a.body)
            }
            return this.nodes[0] && (d !== -1 ? b = b.concat(this.nodes[d].retrieve(a)) : (b = b.concat(this.nodes[0].retrieve(a)), b = b.concat(this.nodes[1].retrieve(a)), b = b.concat(this.nodes[2].retrieve(a)), b = b.concat(this.nodes[3].retrieve(a)))), b
        },
        clear: function() {
            this.objects.length = 0;
            for (var a = this.nodes.length; a--;)
                this.nodes[a].clear(),
                this.nodes.splice(a, 1);
            this.nodes.length = 0
        }
    }, c.QuadTree.prototype.constructor = c.QuadTree, c.Net = function(a) {
        this.game = a
    }, c.Net.prototype = {
        getHostName: function() {
            return window.location && window.location.hostname ? window.location.hostname : null
        },
        checkDomainName: function(a) {
            return window.location.hostname.indexOf(a) !== -1
        },
        updateQueryString: function(a, b, c, d) {
            void 0 === c && (c = !1),
            void 0 !== d && "" !== d || (d = window.location.href);
            var e = "",
                f = new RegExp("([?|&])" + a + "=.*?(&|#|$)(.*)", "gi");
            if (f.test(d))
                e = "undefined" != typeof b && null !== b ? d.replace(f, "$1" + a + "=" + b + "$2$3") : d.replace(f, "$1$3").replace(/(&|\?)$/, "");
            else if ("undefined" != typeof b && null !== b) {
                var g = d.indexOf("?") !== -1 ? "&" : "?",
                    h = d.split("#");
                d = h[0] + g + a + "=" + b,
                h[1] && (d += "#" + h[1]),
                e = d
            } else
                e = d;
            return c ? void (window.location.href = e) : e
        },
        getQueryString: function(a) {
            void 0 === a && (a = "");
            var b = {},
                c = location.search.substring(1).split("&");
            for (var d in c) {
                var e = c[d].split("=");
                if (e.length > 1) {
                    if (a && a === this.decodeURI(e[0]))
                        return this.decodeURI(e[1]);
                    b[this.decodeURI(e[0])] = this.decodeURI(e[1])
                }
            }
            return b
        },
        decodeURI: function(a) {
            return decodeURIComponent(a.replace(/\+/g, " "))
        }
    }, c.Net.prototype.constructor = c.Net, c.TweenManager = function(a) {
        this.game = a,
        this.frameBased = !1,
        this._tweens = [],
        this._add = [],
        this.easeMap = {
            Power0: c.Easing.Power0,
            Power1: c.Easing.Power1,
            Power2: c.Easing.Power2,
            Power3: c.Easing.Power3,
            Power4: c.Easing.Power4,
            Linear: c.Easing.Linear.None,
            Quad: c.Easing.Quadratic.Out,
            Cubic: c.Easing.Cubic.Out,
            Quart: c.Easing.Quartic.Out,
            Quint: c.Easing.Quintic.Out,
            Sine: c.Easing.Sinusoidal.Out,
            Expo: c.Easing.Exponential.Out,
            Circ: c.Easing.Circular.Out,
            Elastic: c.Easing.Elastic.Out,
            Back: c.Easing.Back.Out,
            Bounce: c.Easing.Bounce.Out,
            "Quad.easeIn": c.Easing.Quadratic.In,
            "Cubic.easeIn": c.Easing.Cubic.In,
            "Quart.easeIn": c.Easing.Quartic.In,
            "Quint.easeIn": c.Easing.Quintic.In,
            "Sine.easeIn": c.Easing.Sinusoidal.In,
            "Expo.easeIn": c.Easing.Exponential.In,
            "Circ.easeIn": c.Easing.Circular.In,
            "Elastic.easeIn": c.Easing.Elastic.In,
            "Back.easeIn": c.Easing.Back.In,
            "Bounce.easeIn": c.Easing.Bounce.In,
            "Quad.easeOut": c.Easing.Quadratic.Out,
            "Cubic.easeOut": c.Easing.Cubic.Out,
            "Quart.easeOut": c.Easing.Quartic.Out,
            "Quint.easeOut": c.Easing.Quintic.Out,
            "Sine.easeOut": c.Easing.Sinusoidal.Out,
            "Expo.easeOut": c.Easing.Exponential.Out,
            "Circ.easeOut": c.Easing.Circular.Out,
            "Elastic.easeOut": c.Easing.Elastic.Out,
            "Back.easeOut": c.Easing.Back.Out,
            "Bounce.easeOut": c.Easing.Bounce.Out,
            "Quad.easeInOut": c.Easing.Quadratic.InOut,
            "Cubic.easeInOut": c.Easing.Cubic.InOut,
            "Quart.easeInOut": c.Easing.Quartic.InOut,
            "Quint.easeInOut": c.Easing.Quintic.InOut,
            "Sine.easeInOut": c.Easing.Sinusoidal.InOut,
            "Expo.easeInOut": c.Easing.Exponential.InOut,
            "Circ.easeInOut": c.Easing.Circular.InOut,
            "Elastic.easeInOut": c.Easing.Elastic.InOut,
            "Back.easeInOut": c.Easing.Back.InOut,
            "Bounce.easeInOut": c.Easing.Bounce.InOut
        },
        this.game.onPause.add(this._pauseAll, this),
        this.game.onResume.add(this._resumeAll, this)
    }, c.TweenManager.prototype = {
        getAll: function() {
            return this._tweens
        },
        removeAll: function() {
            for (var a = 0; a < this._tweens.length; a++)
                this._tweens[a].pendingDelete = !0;
            this._add = []
        },
        removeFrom: function(a, b) {
            void 0 === b && (b = !0);
            var d,
                e;
            if (Array.isArray(a))
                for (d = 0, e = a.length; d < e; d++)
                    this.removeFrom(a[d]);
            else if (a.type === c.GROUP && b)
                for (var d = 0, e = a.children.length; d < e; d++)
                    this.removeFrom(a.children[d]);
            else {
                for (d = 0, e = this._tweens.length; d < e; d++)
                    a === this._tweens[d].target && this.remove(this._tweens[d]);
                for (d = 0, e = this._add.length; d < e; d++)
                    a === this._add[d].target && this.remove(this._add[d])
            }
        },
        add: function(a) {
            a._manager = this,
            this._add.push(a)
        },
        create: function(a) {
            return new c.Tween(a, this.game, this)
        },
        remove: function(a) {
            var b = this._tweens.indexOf(a);
            b !== -1 ? this._tweens[b].pendingDelete = !0 : (b = this._add.indexOf(a), b !== -1 && (this._add[b].pendingDelete = !0))
        },
        update: function() {
            var a = this._add.length,
                b = this._tweens.length;
            if (0 === b && 0 === a)
                return !1;
            for (var c = 0; c < b;)
                this._tweens[c].update(this.game.time.time) ? c++ : (this._tweens.splice(c, 1), b--);
            return a > 0 && (this._tweens = this._tweens.concat(this._add), this._add.length = 0), !0
        },
        isTweening: function(a) {
            return this._tweens.some(function(b) {
                return b.target === a
            })
        },
        _pauseAll: function() {
            for (var a = this._tweens.length - 1; a >= 0; a--)
                this._tweens[a]._pause()
        },
        _resumeAll: function() {
            for (var a = this._tweens.length - 1; a >= 0; a--)
                this._tweens[a]._resume()
        },
        pauseAll: function() {
            for (var a = this._tweens.length - 1; a >= 0; a--)
                this._tweens[a].pause()
        },
        resumeAll: function() {
            for (var a = this._tweens.length - 1; a >= 0; a--)
                this._tweens[a].resume(!0)
        }
    }, c.TweenManager.prototype.constructor = c.TweenManager, c.Tween = function(a, b, d) {
        this.game = b,
        this.target = a,
        this.manager = d,
        this.timeline = [],
        this.reverse = !1,
        this.timeScale = 1,
        this.repeatCounter = 0,
        this.pendingDelete = !1,
        this.onStart = new c.Signal,
        this.onLoop = new c.Signal,
        this.onRepeat = new c.Signal,
        this.onChildComplete = new c.Signal,
        this.onComplete = new c.Signal,
        this.isRunning = !1,
        this.current = 0,
        this.properties = {},
        this.chainedTween = null,
        this.isPaused = !1,
        this.frameBased = d.frameBased,
        this._onUpdateCallback = null,
        this._onUpdateCallbackContext = null,
        this._pausedTime = 0,
        this._codePaused = !1,
        this._hasStarted = !1
    }, c.Tween.prototype = {
        to: function(a, b, d, e, f, g, h) {
            return (void 0 === b || b <= 0) && (b = 1e3), void 0 !== d && null !== d || (d = c.Easing.Default), void 0 === e && (e = !1), void 0 === f && (f = 0), void 0 === g && (g = 0), void 0 === h && (h = !1), "string" == typeof d && this.manager.easeMap[d] && (d = this.manager.easeMap[d]), this.isRunning ? (console.warn("Phaser.Tween.to cannot be called after Tween.start"), this) : (this.timeline.push(new c.TweenData(this).to(a, b, d, f, g, h)), e && this.start(), this)
        },
        from: function(a, b, d, e, f, g, h) {
            return void 0 === b && (b = 1e3), void 0 !== d && null !== d || (d = c.Easing.Default), void 0 === e && (e = !1), void 0 === f && (f = 0), void 0 === g && (g = 0), void 0 === h && (h = !1), "string" == typeof d && this.manager.easeMap[d] && (d = this.manager.easeMap[d]), this.isRunning ? (console.warn("Phaser.Tween.from cannot be called after Tween.start"), this) : (this.timeline.push(new c.TweenData(this).from(a, b, d, f, g, h)), e && this.start(), this)
        },
        start: function(a) {
            if (void 0 === a && (a = 0), null === this.game || null === this.target || 0 === this.timeline.length || this.isRunning)
                return this;
            for (var b = 0; b < this.timeline.length; b++)
                for (var c in this.timeline[b].vEnd)
                    this.properties[c] = this.target[c] || 0,
                    Array.isArray(this.properties[c]) || (this.properties[c] *= 1);
            for (var b = 0; b < this.timeline.length; b++)
                this.timeline[b].loadValues();
            return this.manager.add(this), this.isRunning = !0, (a < 0 || a > this.timeline.length - 1) && (a = 0), this.current = a, this.timeline[this.current].start(), this
        },
        stop: function(a) {
            return void 0 === a && (a = !1), this.isRunning = !1, this._onUpdateCallback = null, this._onUpdateCallbackContext = null, a && (this.onComplete.dispatch(this.target, this), this._hasStarted = !1, this.chainedTween && this.chainedTween.start()), this.manager.remove(this), this
        },
        updateTweenData: function(a, b, c) {
            if (0 === this.timeline.length)
                return this;
            if (void 0 === c && (c = 0), c === -1)
                for (var d = 0; d < this.timeline.length; d++)
                    this.timeline[d][a] = b;
            else
                this.timeline[c][a] = b;
            return this
        },
        delay: function(a, b) {
            return this.updateTweenData("delay", a, b)
        },
        repeat: function(a, b, c) {
            return void 0 === b && (b = 0), this.updateTweenData("repeatCounter", a, c), this.updateTweenData("repeatDelay", b, c)
        },
        repeatDelay: function(a, b) {
            return this.updateTweenData("repeatDelay", a, b)
        },
        yoyo: function(a, b, c) {
            return void 0 === b && (b = 0), this.updateTweenData("yoyo", a, c), this.updateTweenData("yoyoDelay", b, c)
        },
        yoyoDelay: function(a, b) {
            return this.updateTweenData("yoyoDelay", a, b)
        },
        easing: function(a, b) {
            return "string" == typeof a && this.manager.easeMap[a] && (a = this.manager.easeMap[a]), this.updateTweenData("easingFunction", a, b)
        },
        interpolation: function(a, b, d) {
            return void 0 === b && (b = c.Math), this.updateTweenData("interpolationFunction", a, d), this.updateTweenData("interpolationContext", b, d)
        },
        repeatAll: function(a) {
            return void 0 === a && (a = 0), this.repeatCounter = a, this
        },
        chain: function() {
            for (var a = arguments.length; a--;)
                a > 0 ? arguments[a - 1].chainedTween = arguments[a] : this.chainedTween = arguments[a];
            return this
        },
        loop: function(a) {
            return void 0 === a && (a = !0), this.repeatCounter = a ? -1 : 0, this
        },
        onUpdateCallback: function(a, b) {
            return this._onUpdateCallback = a, this._onUpdateCallbackContext = b, this
        },
        pause: function() {
            this.isPaused = !0,
            this._codePaused = !0,
            this._pausedTime = this.game.time.time
        },
        _pause: function() {
            this._codePaused || (this.isPaused = !0, this._pausedTime = this.game.time.time)
        },
        resume: function() {
            if (this.isPaused) {
                this.isPaused = !1,
                this._codePaused = !1;
                for (var a = 0; a < this.timeline.length; a++)
                    this.timeline[a].isRunning || (this.timeline[a].startTime += this.game.time.time - this._pausedTime)
            }
        },
        _resume: function() {
            this._codePaused || this.resume()
        },
        update: function(a) {
            if (this.pendingDelete || !this.target)
                return !1;
            if (this.isPaused)
                return !0;
            var b = this.timeline[this.current].update(a);
            if (b === c.TweenData.PENDING)
                return !0;
            if (b === c.TweenData.RUNNING)
                return this._hasStarted || (this.onStart.dispatch(this.target, this), this._hasStarted = !0), null !== this._onUpdateCallback && this._onUpdateCallback.call(this._onUpdateCallbackContext, this, this.timeline[this.current].value, this.timeline[this.current]), this.isRunning;
            if (b === c.TweenData.LOOPED)
                return this.timeline[this.current].repeatCounter === -1 ? this.onLoop.dispatch(this.target, this) : this.onRepeat.dispatch(this.target, this), !0;
            if (b === c.TweenData.COMPLETE) {
                var d = !1;
                return this.reverse ? (this.current--, this.current < 0 && (this.current = this.timeline.length - 1, d = !0)) : (this.current++, this.current === this.timeline.length && (this.current = 0, d = !0)), d ? this.repeatCounter === -1 ? (this.timeline[this.current].start(), this.onLoop.dispatch(this.target, this), !0) : this.repeatCounter > 0 ? (this.repeatCounter--, this.timeline[this.current].start(), this.onRepeat.dispatch(this.target, this), !0) : (this.isRunning = !1, this.onComplete.dispatch(this.target, this), this._hasStarted = !1, this.chainedTween && this.chainedTween.start(), !1) : (this.onChildComplete.dispatch(this.target, this), this.timeline[this.current].start(), !0)
            }
        },
        generateData: function(a, b) {
            if (null === this.game || null === this.target)
                return null;
            void 0 === a && (a = 60),
            void 0 === b && (b = []);
            for (var c = 0; c < this.timeline.length; c++)
                for (var d in this.timeline[c].vEnd)
                    this.properties[d] = this.target[d] || 0,
                    Array.isArray(this.properties[d]) || (this.properties[d] *= 1);
            for (var c = 0; c < this.timeline.length; c++)
                this.timeline[c].loadValues();
            for (var c = 0; c < this.timeline.length; c++)
                b = b.concat(this.timeline[c].generateData(a));
            return b
        }
    }, Object.defineProperty(c.Tween.prototype, "totalDuration", {
        get: function() {
            for (var a = 0, b = 0; b < this.timeline.length; b++)
                a += this.timeline[b].duration;
            return a
        }
    }), c.Tween.prototype.constructor = c.Tween, c.TweenData = function(a) {
        this.parent = a,
        this.game = a.game,
        this.vStart = {},
        this.vStartCache = {},
        this.vEnd = {},
        this.vEndCache = {},
        this.duration = 1e3,
        this.percent = 0,
        this.value = 0,
        this.repeatCounter = 0,
        this.repeatDelay = 0,
        this.repeatTotal = 0,
        this.interpolate = !1,
        this.yoyo = !1,
        this.yoyoDelay = 0,
        this.inReverse = !1,
        this.delay = 0,
        this.dt = 0,
        this.startTime = null,
        this.easingFunction = c.Easing.Default,
        this.interpolationFunction = c.Math.linearInterpolation,
        this.interpolationContext = c.Math,
        this.isRunning = !1,
        this.isFrom = !1
    }, c.TweenData.PENDING = 0, c.TweenData.RUNNING = 1, c.TweenData.LOOPED = 2, c.TweenData.COMPLETE = 3, c.TweenData.prototype = {
        to: function(a, b, c, d, e, f) {
            return this.vEnd = a, this.duration = b, this.easingFunction = c, this.delay = d, this.repeatTotal = e, this.yoyo = f, this.isFrom = !1, this
        },
        from: function(a, b, c, d, e, f) {
            return this.vEnd = a, this.duration = b, this.easingFunction = c, this.delay = d, this.repeatTotal = e, this.yoyo = f, this.isFrom = !0, this
        },
        start: function() {
            if (this.startTime = this.game.time.time + this.delay, this.parent.reverse ? this.dt = this.duration : this.dt = 0, this.delay > 0 ? this.isRunning = !1 : this.isRunning = !0, this.isFrom)
                for (var a in this.vStartCache)
                    this.vStart[a] = this.vEndCache[a],
                    this.vEnd[a] = this.vStartCache[a],
                    this.parent.target[a] = this.vStart[a];
            return this.value = 0, this.yoyoCounter = 0, this.repeatCounter = this.repeatTotal, this
        },
        loadValues: function() {
            for (var a in this.parent.properties) {
                if (this.vStart[a] = this.parent.properties[a], Array.isArray(this.vEnd[a])) {
                    if (0 === this.vEnd[a].length)
                        continue;
                    0 === this.percent && (this.vEnd[a] = [this.vStart[a]].concat(this.vEnd[a]))
                }
                "undefined" != typeof this.vEnd[a] ? ("string" == typeof this.vEnd[a] && (this.vEnd[a] = this.vStart[a] + parseFloat(this.vEnd[a], 10)), this.parent.properties[a] = this.vEnd[a]) : this.vEnd[a] = this.vStart[a],
                this.vStartCache[a] = this.vStart[a],
                this.vEndCache[a] = this.vEnd[a]
            }
            return this
        },
        update: function(a) {
            if (this.isRunning) {
                if (a < this.startTime)
                    return c.TweenData.RUNNING
            } else {
                if (!(a >= this.startTime))
                    return c.TweenData.PENDING;
                this.isRunning = !0
            }
            var b = this.parent.frameBased ? this.game.time.physicsElapsedMS : this.game.time.elapsedMS;
            this.parent.reverse ? (this.dt -= b * this.parent.timeScale, this.dt = Math.max(this.dt, 0)) : (this.dt += b * this.parent.timeScale, this.dt = Math.min(this.dt, this.duration)),
            this.percent = this.dt / this.duration,
            this.value = this.easingFunction(this.percent);
            for (var d in this.vEnd) {
                var e = this.vStart[d],
                    f = this.vEnd[d];
                Array.isArray(f) ? this.parent.target[d] = this.interpolationFunction.call(this.interpolationContext, f, this.value) : this.parent.target[d] = e + (f - e) * this.value
            }
            return !this.parent.reverse && 1 === this.percent || this.parent.reverse && 0 === this.percent ? this.repeat() : c.TweenData.RUNNING
        },
        generateData: function(a) {
            this.parent.reverse ? this.dt = this.duration : this.dt = 0;
            var b = [],
                c = !1,
                d = 1 / a * 1e3;
            do {
                this.parent.reverse ? (this.dt -= d, this.dt = Math.max(this.dt, 0)) : (this.dt += d, this.dt = Math.min(this.dt, this.duration)),
                this.percent = this.dt / this.duration,
                this.value = this.easingFunction(this.percent);
                var e = {};
                for (var f in this.vEnd) {
                    var g = this.vStart[f],
                        h = this.vEnd[f];
                    Array.isArray(h) ? e[f] = this.interpolationFunction(h, this.value) : e[f] = g + (h - g) * this.value
                }
                b.push(e),
                (!this.parent.reverse && 1 === this.percent || this.parent.reverse && 0 === this.percent) && (c = !0)
            } while (!c);
            if (this.yoyo) {
                var i = b.slice();
                i.reverse(),
                b = b.concat(i)
            }
            return b
        },
        repeat: function() {
            if (this.yoyo) {
                if (this.inReverse && 0 === this.repeatCounter) {
                    for (var a in this.vStartCache)
                        this.vStart[a] = this.vStartCache[a],
                        this.vEnd[a] = this.vEndCache[a];
                    return this.inReverse = !1, c.TweenData.COMPLETE
                }
                this.inReverse = !this.inReverse
            } else if (0 === this.repeatCounter)
                return c.TweenData.COMPLETE;
            if (this.inReverse)
                for (var a in this.vStartCache)
                    this.vStart[a] = this.vEndCache[a],
                    this.vEnd[a] = this.vStartCache[a];
            else {
                for (var a in this.vStartCache)
                    this.vStart[a] = this.vStartCache[a],
                    this.vEnd[a] = this.vEndCache[a];
                this.repeatCounter > 0 && this.repeatCounter--
            }
            return this.startTime = this.game.time.time, this.yoyo && this.inReverse ? this.startTime += this.yoyoDelay : this.inReverse || (this.startTime += this.repeatDelay), this.parent.reverse ? this.dt = this.duration : this.dt = 0, c.TweenData.LOOPED
        }
    }, c.TweenData.prototype.constructor = c.TweenData, c.Easing = {
        Linear: {
            None: function(a) {
                return a
            }
        },
        Quadratic: {
            In: function(a) {
                return a * a
            },
            Out: function(a) {
                return a * (2 - a)
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? .5 * a * a : -.5 * (--a * (a - 2) - 1)
            }
        },
        Cubic: {
            In: function(a) {
                return a * a * a
            },
            Out: function(a) {
                return --a * a * a + 1
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? .5 * a * a * a : .5 * ((a -= 2) * a * a + 2)
            }
        },
        Quartic: {
            In: function(a) {
                return a * a * a * a
            },
            Out: function(a) {
                return 1 - --a * a * a * a
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? .5 * a * a * a * a : -.5 * ((a -= 2) * a * a * a - 2)
            }
        },
        Quintic: {
            In: function(a) {
                return a * a * a * a * a
            },
            Out: function(a) {
                return --a * a * a * a * a + 1
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? .5 * a * a * a * a * a : .5 * ((a -= 2) * a * a * a * a + 2)
            }
        },
        Sinusoidal: {
            In: function(a) {
                return 0 === a ? 0 : 1 === a ? 1 : 1 - Math.cos(a * Math.PI / 2)
            },
            Out: function(a) {
                return 0 === a ? 0 : 1 === a ? 1 : Math.sin(a * Math.PI / 2)
            },
            InOut: function(a) {
                return 0 === a ? 0 : 1 === a ? 1 : .5 * (1 - Math.cos(Math.PI * a))
            }
        },
        Exponential: {
            In: function(a) {
                return 0 === a ? 0 : Math.pow(1024, a - 1)
            },
            Out: function(a) {
                return 1 === a ? 1 : 1 - Math.pow(2, -10 * a)
            },
            InOut: function(a) {
                return 0 === a ? 0 : 1 === a ? 1 : (a *= 2) < 1 ? .5 * Math.pow(1024, a - 1) : .5 * (-Math.pow(2, -10 * (a - 1)) + 2)
            }
        },
        Circular: {
            In: function(a) {
                return 1 - Math.sqrt(1 - a * a)
            },
            Out: function(a) {
                return Math.sqrt(1 - --a * a)
            },
            InOut: function(a) {
                return (a *= 2) < 1 ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1)
            }
        },
        Elastic: {
            In: function(a) {
                var b,
                    c = .1,
                    d = .4;
                return 0 === a ? 0 : 1 === a ? 1 : (!c || c < 1 ? (c = 1, b = d / 4) : b = d * Math.asin(1 / c) / (2 * Math.PI), -(c * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - b) * (2 * Math.PI) / d)))
            },
            Out: function(a) {
                var b,
                    c = .1,
                    d = .4;
                return 0 === a ? 0 : 1 === a ? 1 : (!c || c < 1 ? (c = 1, b = d / 4) : b = d * Math.asin(1 / c) / (2 * Math.PI), c * Math.pow(2, -10 * a) * Math.sin((a - b) * (2 * Math.PI) / d) + 1)
            },
            InOut: function(a) {
                var b,
                    c = .1,
                    d = .4;
                return 0 === a ? 0 : 1 === a ? 1 : (!c || c < 1 ? (c = 1, b = d / 4) : b = d * Math.asin(1 / c) / (2 * Math.PI), (a *= 2) < 1 ? -.5 * (c * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - b) * (2 * Math.PI) / d)) : c * Math.pow(2, -10 * (a -= 1)) * Math.sin((a - b) * (2 * Math.PI) / d) * .5 + 1)
            }
        },
        Back: {
            In: function(a) {
                var b = 1.70158;
                return a * a * ((b + 1) * a - b)
            },
            Out: function(a) {
                var b = 1.70158;
                return --a * a * ((b + 1) * a + b) + 1
            },
            InOut: function(a) {
                var b = 2.5949095;
                return (a *= 2) < 1 ? .5 * (a * a * ((b + 1) * a - b)) : .5 * ((a -= 2) * a * ((b + 1) * a + b) + 2)
            }
        },
        Bounce: {
            In: function(a) {
                return 1 - c.Easing.Bounce.Out(1 - a)
            },
            Out: function(a) {
                return a < 1 / 2.75 ? 7.5625 * a * a : a < 2 / 2.75 ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : a < 2.5 / 2.75 ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375
            },
            InOut: function(a) {
                return a < .5 ? .5 * c.Easing.Bounce.In(2 * a) : .5 * c.Easing.Bounce.Out(2 * a - 1) + .5
            }
        }
    }, c.Easing.Default = c.Easing.Linear.None, c.Easing.Power0 = c.Easing.Linear.None, c.Easing.Power1 = c.Easing.Quadratic.Out, c.Easing.Power2 = c.Easing.Cubic.Out, c.Easing.Power3 = c.Easing.Quartic.Out, c.Easing.Power4 = c.Easing.Quintic.Out, c.Time = function(a) {
        this.game = a,
        this.time = 0,
        this.prevTime = 0,
        this.now = 0,
        this.elapsed = 0,
        this.elapsedMS = 0,
        this.physicsElapsed = 1 / 60,
        this.physicsElapsedMS = 1 / 60 * 1e3,
        this.desiredFpsMult = 1 / 60,
        this._desiredFps = 60,
        this.suggestedFps = this.desiredFps,
        this.slowMotion = 1,
        this.advancedTiming = !1,
        this.frames = 0,
        this.fps = 0,
        this.fpsMin = 1e3,
        this.fpsMax = 0,
        this.msMin = 1e3,
        this.msMax = 0,
        this.pauseDuration = 0,
        this.timeToCall = 0,
        this.timeExpected = 0,
        this.events = new c.Timer(this.game, (!1)),
        this._frameCount = 0,
        this._elapsedAccumulator = 0,
        this._started = 0,
        this._timeLastSecond = 0,
        this._pauseStarted = 0,
        this._justResumed = !1,
        this._timers = []
    }, c.Time.prototype = {
        boot: function() {
            this._started = Date.now(),
            this.time = Date.now(),
            this.events.start(),
            this.timeExpected = this.time
        },
        add: function(a) {
            return this._timers.push(a), a
        },
        create: function(a) {
            void 0 === a && (a = !0);
            var b = new c.Timer(this.game, a);
            return this._timers.push(b), b
        },
        removeAll: function() {
            for (var a = 0; a < this._timers.length; a++)
                this._timers[a].destroy();
            this._timers = [],
            this.events.removeAll()
        },
        refresh: function() {
            var a = this.time;
            this.time = Date.now(),
            this.elapsedMS = this.time - a
        },
        update: function(a) {
            var b = this.time;
            this.time = Date.now(),
            this.elapsedMS = this.time - b,
            this.prevTime = this.now,
            this.now = a,
            this.elapsed = this.now - this.prevTime,
            this.game.raf._isSetTimeOut && (this.timeToCall = Math.floor(Math.max(0, 1e3 / this._desiredFps - (this.timeExpected - a))), this.timeExpected = a + this.timeToCall),
            this.advancedTiming && this.updateAdvancedTiming(),
            this.game.paused || (this.events.update(this.time), this._timers.length && this.updateTimers())
        },
        updateTimers: function() {
            for (var a = 0, b = this._timers.length; a < b;)
                this._timers[a].update(this.time) ? a++ : (this._timers.splice(a, 1), b--)
        },
        updateAdvancedTiming: function() {
            this._frameCount++,
            this._elapsedAccumulator += this.elapsed,
            this._frameCount >= 2 * this._desiredFps && (this.suggestedFps = 5 * Math.floor(200 / (this._elapsedAccumulator / this._frameCount)), this._frameCount = 0, this._elapsedAccumulator = 0),
            this.msMin = Math.min(this.msMin, this.elapsed),
            this.msMax = Math.max(this.msMax, this.elapsed),
            this.frames++,
            this.now > this._timeLastSecond + 1e3 && (this.fps = Math.round(1e3 * this.frames / (this.now - this._timeLastSecond)), this.fpsMin = Math.min(this.fpsMin, this.fps), this.fpsMax = Math.max(this.fpsMax, this.fps), this._timeLastSecond = this.now, this.frames = 0)
        },
        gamePaused: function() {
            this._pauseStarted = Date.now(),
            this.events.pause();
            for (var a = this._timers.length; a--;)
                this._timers[a]._pause()
        },
        gameResumed: function() {
            this.time = Date.now(),
            this.pauseDuration = this.time - this._pauseStarted,
            this.events.resume();
            for (var a = this._timers.length; a--;)
                this._timers[a]._resume()
        },
        totalElapsedSeconds: function() {
            return .001 * (this.time - this._started)
        },
        elapsedSince: function(a) {
            return this.time - a
        },
        elapsedSecondsSince: function(a) {
            return .001 * (this.time - a)
        },
        reset: function() {
            this._started = this.time,
            this.removeAll()
        }
    }, Object.defineProperty(c.Time.prototype, "desiredFps", {
        get: function() {
            return this._desiredFps
        },
        set: function(a) {
            this._desiredFps = a,
            this.physicsElapsed = 1 / a,
            this.physicsElapsedMS = 1e3 * this.physicsElapsed,
            this.desiredFpsMult = 1 / a
        }
    }), c.Time.prototype.constructor = c.Time, c.Timer = function(a, b) {
        void 0 === b && (b = !0),
        this.game = a,
        this.running = !1,
        this.autoDestroy = b,
        this.expired = !1,
        this.elapsed = 0,
        this.events = [],
        this.onComplete = new c.Signal,
        this.nextTick = 0,
        this.timeCap = 1e3,
        this.paused = !1,
        this._codePaused = !1,
        this._started = 0,
        this._pauseStarted = 0,
        this._pauseTotal = 0,
        this._now = Date.now(),
        this._len = 0,
        this._marked = 0,
        this._i = 0,
        this._diff = 0,
        this._newTick = 0
    }, c.Timer.MINUTE = 6e4, c.Timer.SECOND = 1e3, c.Timer.HALF = 500, c.Timer.QUARTER = 250, c.Timer.prototype = {
        create: function(a, b, d, e, f, g) {
            a = Math.round(a);
            var h = a;
            h += 0 === this._now ? this.game.time.time : this._now;
            var i = new c.TimerEvent(this, a, h, d, b, e, f, g);
            return this.events.push(i), this.order(), this.expired = !1, i
        },
        add: function(a, b, c) {
            return this.create(a, !1, 0, b, c, Array.prototype.slice.call(arguments, 3))
        },
        repeat: function(a, b, c, d) {
            return this.create(a, !1, b, c, d, Array.prototype.slice.call(arguments, 4))
        },
        loop: function(a, b, c) {
            return this.create(a, !0, 0, b, c, Array.prototype.slice.call(arguments, 3))
        },
        start: function(a) {
            if (!this.running) {
                this._started = this.game.time.time + (a || 0),
                this.running = !0;
                for (var b = 0; b < this.events.length; b++)
                    this.events[b].tick = this.events[b].delay + this._started
            }
        },
        stop: function(a) {
            this.running = !1,
            void 0 === a && (a = !0),
            a && (this.events.length = 0)
        },
        remove: function(a) {
            for (var b = 0; b < this.events.length; b++)
                if (this.events[b] === a)
                    return this.events[b].pendingDelete = !0, !0;
            return !1
        },
        order: function() {
            this.events.length > 0 && (this.events.sort(this.sortHandler), this.nextTick = this.events[0].tick)
        },
        sortHandler: function(a, b) {
            return a.tick < b.tick ? -1 : a.tick > b.tick ? 1 : 0
        },
        clearPendingEvents: function() {
            for (this._i = this.events.length; this._i--;)
                this.events[this._i].pendingDelete && this.events.splice(this._i, 1);
            this._len = this.events.length,
            this._i = 0
        },
        update: function(a) {
            if (this.paused)
                return !0;
            if (this.elapsed = a - this._now, this._now = a, this.elapsed > this.timeCap && this.adjustEvents(a - this.elapsed), this._marked = 0, this.clearPendingEvents(), this.running && this._now >= this.nextTick && this._len > 0) {
                for (; this._i < this._len && this.running && this._now >= this.events[this._i].tick && !this.events[this._i].pendingDelete;)
                    this._newTick = this._now + this.events[this._i].delay - (this._now - this.events[this._i].tick),
                    this._newTick < 0 && (this._newTick = this._now + this.events[this._i].delay),
                    this.events[this._i].loop === !0 ? (this.events[this._i].tick = this._newTick, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)) : this.events[this._i].repeatCount > 0 ? (this.events[this._i].repeatCount--, this.events[this._i].tick = this._newTick, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)) : (this._marked++, this.events[this._i].pendingDelete = !0, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)),
                    this._i++;
                this.events.length > this._marked ? this.order() : (this.expired = !0, this.onComplete.dispatch(this))
            }
            return !this.expired || !this.autoDestroy
        },
        pause: function() {
            this.running && (this._codePaused = !0, this.paused || (this._pauseStarted = this.game.time.time, this.paused = !0))
        },
        _pause: function() {
            !this.paused && this.running && (this._pauseStarted = this.game.time.time, this.paused = !0)
        },
        adjustEvents: function(a) {
            for (var b = 0; b < this.events.length; b++)
                if (!this.events[b].pendingDelete) {
                    var c = this.events[b].tick - a;
                    c < 0 && (c = 0),
                    this.events[b].tick = this._now + c
                }
            var d = this.nextTick - a;
            d < 0 ? this.nextTick = this._now : this.nextTick = this._now + d
        },
        resume: function() {
            if (this.paused) {
                var a = this.game.time.time;
                this._pauseTotal += a - this._now,
                this._now = a,
                this.adjustEvents(this._pauseStarted),
                this.paused = !1,
                this._codePaused = !1
            }
        },
        _resume: function() {
            this._codePaused || this.resume()
        },
        removeAll: function() {
            this.onComplete.removeAll(),
            this.events.length = 0,
            this._len = 0,
            this._i = 0
        },
        destroy: function() {
            this.onComplete.removeAll(),
            this.running = !1,
            this.events = [],
            this._len = 0,
            this._i = 0
        }
    }, Object.defineProperty(c.Timer.prototype, "next", {
        get: function() {
            return this.nextTick
        }
    }), Object.defineProperty(c.Timer.prototype, "duration", {
        get: function() {
            return this.running && this.nextTick > this._now ? this.nextTick - this._now : 0
        }
    }), Object.defineProperty(c.Timer.prototype, "length", {
        get: function() {
            return this.events.length
        }
    }), Object.defineProperty(c.Timer.prototype, "ms", {
        get: function() {
            return this.running ? this._now - this._started - this._pauseTotal : 0
        }
    }), Object.defineProperty(c.Timer.prototype, "seconds", {
        get: function() {
            return this.running ? .001 * this.ms : 0
        }
    }), c.Timer.prototype.constructor = c.Timer, c.TimerEvent = function(a, b, c, d, e, f, g, h) {
        this.timer = a,
        this.delay = b,
        this.tick = c,
        this.repeatCount = d - 1,
        this.loop = e,
        this.callback = f,
        this.callbackContext = g,
        this.args = h,
        this.pendingDelete = !1
    }, c.TimerEvent.prototype.constructor = c.TimerEvent, c.AnimationManager = function(a) {
        this.sprite = a,
        this.game = a.game,
        this.currentFrame = null,
        this.currentAnim = null,
        this.updateIfVisible = !0,
        this.isLoaded = !1,
        this._frameData = null,
        this._anims = {},
        this._outputFrames = []
    }, c.AnimationManager.prototype = {
        loadFrameData: function(a, b) {
            if (void 0 === a)
                return !1;
            if (this.isLoaded)
                for (var c in this._anims)
                    this._anims[c].updateFrameData(a);
            return this._frameData = a, void 0 === b || null === b ? this.frame = 0 : "string" == typeof b ? this.frameName = b : this.frame = b, this.isLoaded = !0, !0
        },
        copyFrameData: function(a, b) {
            if (this._frameData = a.clone(), this.isLoaded)
                for (var c in this._anims)
                    this._anims[c].updateFrameData(this._frameData);
            return void 0 === b || null === b ? this.frame = 0 : "string" == typeof b ? this.frameName = b : this.frame = b, this.isLoaded = !0, !0
        },
        add: function(a, b, d, e, f) {
            return b = b || [], d = d || 60, void 0 === e && (e = !1), void 0 === f && (f = !(!b || "number" != typeof b[0])), this._outputFrames = [], this._frameData.getFrameIndexes(b, f, this._outputFrames), this._anims[a] = new c.Animation(this.game, this.sprite, a, this._frameData, this._outputFrames, d, e), this.currentAnim = this._anims[a], this.sprite.tilingTexture && (this.sprite.refreshTexture = !0), this._anims[a]
        },
        validateFrames: function(a, b) {
            void 0 === b && (b = !0);
            for (var c = 0; c < a.length; c++)
                if (b === !0) {
                    if (a[c] > this._frameData.total)
                        return !1
                } else if (this._frameData.checkFrameName(a[c]) === !1)
                    return !1;
            return !0
        },
        play: function(a, b, c, d) {
            if (this._anims[a])
                return this.currentAnim === this._anims[a] ? this.currentAnim.isPlaying === !1 ? (this.currentAnim.paused = !1, this.currentAnim.play(b, c, d)) : this.currentAnim : (this.currentAnim && this.currentAnim.isPlaying && this.currentAnim.stop(), this.currentAnim = this._anims[a], this.currentAnim.paused = !1, this.currentFrame = this.currentAnim.currentFrame, this.currentAnim.play(b, c, d))
        },
        stop: function(a, b) {
            void 0 === b && (b = !1),
            !this.currentAnim || "string" == typeof a && a !== this.currentAnim.name || this.currentAnim.stop(b)
        },
        update: function() {
            return !(this.updateIfVisible && !this.sprite.visible) && (!(!this.currentAnim || !this.currentAnim.update()) && (this.currentFrame = this.currentAnim.currentFrame, !0))
        },
        next: function(a) {
            this.currentAnim && (this.currentAnim.next(a), this.currentFrame = this.currentAnim.currentFrame)
        },
        previous: function(a) {
            this.currentAnim && (this.currentAnim.previous(a), this.currentFrame = this.currentAnim.currentFrame)
        },
        getAnimation: function(a) {
            return "string" == typeof a && this._anims[a] ? this._anims[a] : null
        },
        refreshFrame: function() {},
        destroy: function() {
            var a = null;
            for (var a in this._anims)
                this._anims.hasOwnProperty(a) && this._anims[a].destroy();
            this._anims = {},
            this._outputFrames = [],
            this._frameData = null,
            this.currentAnim = null,
            this.currentFrame = null,
            this.sprite = null,
            this.game = null
        }
    }, c.AnimationManager.prototype.constructor = c.AnimationManager, Object.defineProperty(c.AnimationManager.prototype, "frameData", {
        get: function() {
            return this._frameData
        }
    }), Object.defineProperty(c.AnimationManager.prototype, "frameTotal", {
        get: function() {
            return this._frameData.total
        }
    }), Object.defineProperty(c.AnimationManager.prototype, "paused", {
        get: function() {
            return this.currentAnim.isPaused
        },
        set: function(a) {
            this.currentAnim.paused = a
        }
    }), Object.defineProperty(c.AnimationManager.prototype, "name", {
        get: function() {
            if (this.currentAnim)
                return this.currentAnim.name
        }
    }), Object.defineProperty(c.AnimationManager.prototype, "frame", {
        get: function() {
            if (this.currentFrame)
                return this.currentFrame.index
        },
        set: function(a) {
            "number" == typeof a && this._frameData && null !== this._frameData.getFrame(a) && (this.currentFrame = this._frameData.getFrame(a), this.currentFrame && this.sprite.setFrame(this.currentFrame))
        }
    }), Object.defineProperty(c.AnimationManager.prototype, "frameName", {
        get: function() {
            if (this.currentFrame)
                return this.currentFrame.name
        },
        set: function(a) {
            "string" == typeof a && this._frameData && null !== this._frameData.getFrameByName(a) ? (this.currentFrame = this._frameData.getFrameByName(a), this.currentFrame && (this._frameIndex = this.currentFrame.index, this.sprite.setFrame(this.currentFrame))) : console.warn("Cannot set frameName: " + a)
        }
    }), c.Animation = function(a, b, d, e, f, g, h) {
        void 0 === h && (h = !1),
        this.game = a,
        this._parent = b,
        this._frameData = e,
        this.name = d,
        this._frames = [],
        this._frames = this._frames.concat(f),
        this.delay = 1e3 / g,
        this.loop = h,
        this.loopCount = 0,
        this.killOnComplete = !1,
        this.isFinished = !1,
        this.isPlaying = !1,
        this.isPaused = !1,
        this._pauseStartTime = 0,
        this._frameIndex = 0,
        this._frameDiff = 0,
        this._frameSkip = 1,
        this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]),
        this.onStart = new c.Signal,
        this.onUpdate = null,
        this.onComplete = new c.Signal,
        this.onLoop = new c.Signal,
        this.isReversed = !1,
        this.game.onPause.add(this.onPause, this),
        this.game.onResume.add(this.onResume, this)
    }, c.Animation.prototype = {
        play: function(a, b, c) {
            return "number" == typeof a && (this.delay = 1e3 / a), "boolean" == typeof b && (this.loop = b), "undefined" != typeof c && (this.killOnComplete = c), this.isPlaying = !0, this.isFinished = !1, this.paused = !1, this.loopCount = 0, this._timeLastFrame = this.game.time.time, this._timeNextFrame = this.game.time.time + this.delay, this._frameIndex = this.isReversed ? this._frames.length - 1 : 0, this.updateCurrentFrame(!1, !0), this._parent.events.onAnimationStart$dispatch(this._parent, this), this.onStart.dispatch(this._parent, this), this._parent.animations.currentAnim = this, this._parent.animations.currentFrame = this.currentFrame, this
        },
        restart: function() {
            this.isPlaying = !0,
            this.isFinished = !1,
            this.paused = !1,
            this.loopCount = 0,
            this._timeLastFrame = this.game.time.time,
            this._timeNextFrame = this.game.time.time + this.delay,
            this._frameIndex = 0,
            this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]),
            this._parent.setFrame(this.currentFrame),
            this._parent.animations.currentAnim = this,
            this._parent.animations.currentFrame = this.currentFrame,
            this.onStart.dispatch(this._parent, this)
        },
        reverse: function() {
            return this.reversed = !this.reversed, this
        },
        reverseOnce: function() {
            return this.onComplete.addOnce(this.reverse, this), this.reverse()
        },
        setFrame: function(a, b) {
            var c;
            if (void 0 === b && (b = !1), "string" == typeof a)
                for (var d = 0; d < this._frames.length; d++)
                    this._frameData.getFrame(this._frames[d]).name === a && (c = d);
            else if ("number" == typeof a)
                if (b)
                    c = a;
                else
                    for (var d = 0; d < this._frames.length; d++)
                        this._frames[d] === a && (c = d);
            c && (this._frameIndex = c - 1, this._timeNextFrame = this.game.time.time, this.update())
        },
        stop: function(a, b) {
            void 0 === a && (a = !1),
            void 0 === b && (b = !1),
            this.isPlaying = !1,
            this.isFinished = !0,
            this.paused = !1,
            a && (this.currentFrame = this._frameData.getFrame(this._frames[0]), this._parent.setFrame(this.currentFrame)),
            b && (this._parent.events.onAnimationComplete$dispatch(this._parent, this), this.onComplete.dispatch(this._parent, this))
        },
        onPause: function() {
            this.isPlaying && (this._frameDiff = this._timeNextFrame - this.game.time.time)
        },
        onResume: function() {
            this.isPlaying && (this._timeNextFrame = this.game.time.time + this._frameDiff)
        },
        update: function() {
            return !this.isPaused && (!!(this.isPlaying && this.game.time.time >= this._timeNextFrame) && (this._frameSkip = 1, this._frameDiff = this.game.time.time - this._timeNextFrame, this._timeLastFrame = this.game.time.time, this._frameDiff > this.delay && (this._frameSkip = Math.floor(this._frameDiff / this.delay), this._frameDiff -= this._frameSkip * this.delay), this._timeNextFrame = this.game.time.time + (this.delay - this._frameDiff), this.isReversed ? this._frameIndex -= this._frameSkip : this._frameIndex += this._frameSkip, !this.isReversed && this._frameIndex >= this._frames.length || this.isReversed && this._frameIndex <= -1 ? this.loop ? (this._frameIndex = Math.abs(this._frameIndex) % this._frames.length, this.isReversed && (this._frameIndex = this._frames.length - 1 - this._frameIndex), this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.currentFrame && this._parent.setFrame(this.currentFrame), this.loopCount++, this._parent.events.onAnimationLoop$dispatch(this._parent, this), this.onLoop.dispatch(this._parent, this), !this.onUpdate || (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData)) : (this.complete(), !1) : this.updateCurrentFrame(!0)))
        },
        updateCurrentFrame: function(a, b) {
            if (void 0 === b && (b = !1), !this._frameData)
                return !1;
            var c = this.currentFrame.index;
            return this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.currentFrame && (b || !b && c !== this.currentFrame.index) && this._parent.setFrame(this.currentFrame), !this.onUpdate || !a || (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData)
        },
        next: function(a) {
            void 0 === a && (a = 1);
            var b = this._frameIndex + a;
            b >= this._frames.length && (this.loop ? b %= this._frames.length : b = this._frames.length - 1),
            b !== this._frameIndex && (this._frameIndex = b, this.updateCurrentFrame(!0))
        },
        previous: function(a) {
            void 0 === a && (a = 1);
            var b = this._frameIndex - a;
            b < 0 && (this.loop ? b = this._frames.length + b : b++),
            b !== this._frameIndex && (this._frameIndex = b, this.updateCurrentFrame(!0))
        },
        updateFrameData: function(a) {
            this._frameData = a,
            this.currentFrame = this._frameData ? this._frameData.getFrame(this._frames[this._frameIndex % this._frames.length]) : null
        },
        destroy: function() {
            this._frameData && (this.game.onPause.remove(this.onPause, this), this.game.onResume.remove(this.onResume, this), this.game = null, this._parent = null, this._frames = null, this._frameData = null, this.currentFrame = null, this.isPlaying = !1, this.onStart.dispose(), this.onLoop.dispose(), this.onComplete.dispose(), this.onUpdate && this.onUpdate.dispose())
        },
        complete: function() {
            this._frameIndex = this._frames.length - 1,
            this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]),
            this.isPlaying = !1,
            this.isFinished = !0,
            this.paused = !1,
            this._parent.events.onAnimationComplete$dispatch(this._parent, this),
            this.onComplete.dispatch(this._parent, this),
            this.killOnComplete && this._parent.kill()
        }
    }, c.Animation.prototype.constructor = c.Animation, Object.defineProperty(c.Animation.prototype, "paused", {
        get: function() {
            return this.isPaused
        },
        set: function(a) {
            this.isPaused = a,
            a ? this._pauseStartTime = this.game.time.time : this.isPlaying && (this._timeNextFrame = this.game.time.time + this.delay)
        }
    }), Object.defineProperty(c.Animation.prototype, "reversed", {
        get: function() {
            return this.isReversed
        },
        set: function(a) {
            this.isReversed = a
        }
    }), Object.defineProperty(c.Animation.prototype, "frameTotal", {
        get: function() {
            return this._frames.length
        }
    }), Object.defineProperty(c.Animation.prototype, "frame", {
        get: function() {
            return null !== this.currentFrame ? this.currentFrame.index : this._frameIndex
        },
        set: function(a) {
            this.currentFrame = this._frameData.getFrame(this._frames[a]),
            null !== this.currentFrame && (this._frameIndex = a, this._parent.setFrame(this.currentFrame), this.onUpdate && this.onUpdate.dispatch(this, this.currentFrame))
        }
    }), Object.defineProperty(c.Animation.prototype, "speed", {
        get: function() {
            return 1e3 / this.delay
        },
        set: function(a) {
            a > 0 && (this.delay = 1e3 / a)
        }
    }), Object.defineProperty(c.Animation.prototype, "enableUpdate", {
        get: function() {
            return null !== this.onUpdate
        },
        set: function(a) {
            a && null === this.onUpdate ? this.onUpdate = new c.Signal : a || null === this.onUpdate || (this.onUpdate.dispose(), this.onUpdate = null)
        }
    }), c.Animation.generateFrameNames = function(a, b, d, e, f) {
        void 0 === e && (e = "");
        var g = [],
            h = "";
        if (b < d)
            for (var i = b; i <= d; i++)
                h = "number" == typeof f ? c.Utils.pad(i.toString(), f, "0", 1) : i.toString(),
                h = a + h + e,
                g.push(h);
        else
            for (var i = b; i >= d; i--)
                h = "number" == typeof f ? c.Utils.pad(i.toString(), f, "0", 1) : i.toString(),
                h = a + h + e,
                g.push(h);
        return g
    }, c.Frame = function(a, b, d, e, f, g) {
        this.index = a,
        this.x = b,
        this.y = d,
        this.width = e,
        this.height = f,
        this.name = g,
        this.centerX = Math.floor(e / 2),
        this.centerY = Math.floor(f / 2),
        this.distance = c.Math.distance(0, 0, e, f),
        this.rotated = !1,
        this.rotationDirection = "cw",
        this.trimmed = !1,
        this.sourceSizeW = e,
        this.sourceSizeH = f,
        this.spriteSourceSizeX = 0,
        this.spriteSourceSizeY = 0,
        this.spriteSourceSizeW = 0,
        this.spriteSourceSizeH = 0,
        this.right = this.x + this.width,
        this.bottom = this.y + this.height
    }, c.Frame.prototype = {
        resize: function(a, b) {
            this.width = a,
            this.height = b,
            this.centerX = Math.floor(a / 2),
            this.centerY = Math.floor(b / 2),
            this.distance = c.Math.distance(0, 0, a, b),
            this.sourceSizeW = a,
            this.sourceSizeH = b,
            this.right = this.x + a,
            this.bottom = this.y + b
        },
        setTrim: function(a, b, c, d, e, f, g) {
            this.trimmed = a,
            a && (this.sourceSizeW = b, this.sourceSizeH = c, this.centerX = Math.floor(b / 2), this.centerY = Math.floor(c / 2), this.spriteSourceSizeX = d, this.spriteSourceSizeY = e, this.spriteSourceSizeW = f, this.spriteSourceSizeH = g)
        },
        clone: function() {
            var a = new c.Frame(this.index, this.x, this.y, this.width, this.height, this.name);
            for (var b in this)
                this.hasOwnProperty(b) && (a[b] = this[b]);
            return a
        },
        getRect: function(a) {
            return void 0 === a ? a = new c.Rectangle(this.x, this.y, this.width, this.height) : a.setTo(this.x, this.y, this.width, this.height), a
        }
    }, c.Frame.prototype.constructor = c.Frame, c.FrameData = function() {
        this._frames = [],
        this._frameNames = []
    }, c.FrameData.prototype = {
        addFrame: function(a) {
            return a.index = this._frames.length, this._frames.push(a), "" !== a.name && (this._frameNames[a.name] = a.index), a
        },
        getFrame: function(a) {
            return a >= this._frames.length && (a = 0), this._frames[a]
        },
        getFrameByName: function(a) {
            return "number" == typeof this._frameNames[a] ? this._frames[this._frameNames[a]] : null
        },
        checkFrameName: function(a) {
            return null != this._frameNames[a]
        },
        clone: function() {
            for (var a = new c.FrameData, b = 0; b < this._frames.length; b++)
                a._frames.push(this._frames[b].clone());
            for (var d in this._frameNames)
                this._frameNames.hasOwnProperty(d) && a._frameNames.push(this._frameNames[d]);
            return a
        },
        getFrameRange: function(a, b, c) {
            void 0 === c && (c = []);
            for (var d = a; d <= b; d++)
                c.push(this._frames[d]);
            return c
        },
        getFrames: function(a, b, c) {
            if (void 0 === b && (b = !0), void 0 === c && (c = []), void 0 === a || 0 === a.length)
                for (var d = 0; d < this._frames.length; d++)
                    c.push(this._frames[d]);
            else
                for (var d = 0; d < a.length; d++)
                    b ? c.push(this.getFrame(a[d])) : c.push(this.getFrameByName(a[d]));
            return c
        },
        getFrameIndexes: function(a, b, c) {
            if (void 0 === b && (b = !0), void 0 === c && (c = []), void 0 === a || 0 === a.length)
                for (var d = 0; d < this._frames.length; d++)
                    c.push(this._frames[d].index);
            else
                for (var d = 0; d < a.length; d++)
                    b && this._frames[a[d]] ? c.push(this._frames[a[d]].index) : this.getFrameByName(a[d]) && c.push(this.getFrameByName(a[d]).index);
            return c
        },
        destroy: function() {
            this._frames = null,
            this._frameNames = null
        }
    }, c.FrameData.prototype.constructor = c.FrameData, Object.defineProperty(c.FrameData.prototype, "total", {
        get: function() {
            return this._frames.length
        }
    }), c.AnimationParser = {
        spriteSheet: function(a, b, d, e, f, g, h) {
            var i = b;
            if ("string" == typeof b && (i = a.cache.getImage(b)), null === i)
                return null;
            var j = i.width,
                k = i.height;
            d <= 0 && (d = Math.floor(-j / Math.min(-1, d))),
            e <= 0 && (e = Math.floor(-k / Math.min(-1, e)));
            var l = Math.floor((j - g) / (d + h)),
                m = Math.floor((k - g) / (e + h)),
                n = l * m;
            if (f !== -1 && (n = f), 0 === j || 0 === k || j < d || k < e || 0 === n)
                return console.warn("Phaser.AnimationParser.spriteSheet: '" + b + "'s width/height zero or width/height < given frameWidth/frameHeight"), null;
            for (var o = new c.FrameData, p = g, q = g, r = 0; r < n; r++)
                o.addFrame(new c.Frame(r, p, q, d, e, "")),
                p += d + h,
                p + d > j && (p = g, q += e + h);
            return o
        },
        JSONData: function(a, b) {
            if (!b.frames)
                return console.warn("Phaser.AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"), void console.log(b);
            for (var d, e = new c.FrameData, f = b.frames, g = 0; g < f.length; g++)
                d = e.addFrame(new c.Frame(g, f[g].frame.x, f[g].frame.y, f[g].frame.w, f[g].frame.h, f[g].filename)),
                f[g].trimmed && d.setTrim(f[g].trimmed, f[g].sourceSize.w, f[g].sourceSize.h, f[g].spriteSourceSize.x, f[g].spriteSourceSize.y, f[g].spriteSourceSize.w, f[g].spriteSourceSize.h);
            return e
        },
        JSONDataPyxel: function(a, b) {
            var d = ["layers", "tilewidth", "tileheight", "tileswide", "tileshigh"];
            if (d.forEach(function(a) {
                if (!b[a])
                    return console.warn('Phaser.AnimationParser.JSONDataPyxel: Invalid Pyxel Tilemap JSON given, missing "' + a + '" key.'), void console.log(b)
            }), 1 !== b.layers.length)
                return console.warn("Phaser.AnimationParser.JSONDataPyxel: Too many layers, this parser only supports flat Tilemaps."), void console.log(b);
            for (var e, f = new c.FrameData, g = b.tileheight, h = b.tilewidth, i = b.layers[0].tiles, j = 0; j < i.length; j++)
                e = f.addFrame(new c.Frame(j, i[j].x, i[j].y, h, g, "frame_" + j)),
                e.setTrim(!1);
            return f
        },
        JSONDataHash: function(a, b) {
            if (!b.frames)
                return console.warn("Phaser.AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"), void console.log(b);
            var d,
                e = new c.FrameData,
                f = b.frames,
                g = 0;
            for (var h in f)
                d = e.addFrame(new c.Frame(g, f[h].frame.x, f[h].frame.y, f[h].frame.w, f[h].frame.h, h)),
                f[h].trimmed && d.setTrim(f[h].trimmed, f[h].sourceSize.w, f[h].sourceSize.h, f[h].spriteSourceSize.x, f[h].spriteSourceSize.y, f[h].spriteSourceSize.w, f[h].spriteSourceSize.h),
                g++;
            return e
        },
        XMLData: function(a, b) {
            if (!b.getElementsByTagName("TextureAtlas"))
                return void console.warn("Phaser.AnimationParser.XMLData: Invalid Texture Atlas XML given, missing <TextureAtlas> tag");
            for (var d, e, f, g, h, i, j, k, l, m, n, o = new c.FrameData, p = b.getElementsByTagName("SubTexture"), q = 0; q < p.length; q++)
                f = p[q].attributes,
                e = f.name.value,
                g = parseInt(f.x.value, 10),
                h = parseInt(f.y.value, 10),
                i = parseInt(f.width.value, 10),
                j = parseInt(f.height.value, 10),
                k = null,
                l = null,
                f.frameX && (k = Math.abs(parseInt(f.frameX.value, 10)), l = Math.abs(parseInt(f.frameY.value, 10)), m = parseInt(f.frameWidth.value, 10), n = parseInt(f.frameHeight.value, 10)),
                d = o.addFrame(new c.Frame(q, g, h, i, j, e)),
                null === k && null === l || d.setTrim(!0, i, j, k, l, m, n);
            return o
        }
    }, c.Cache = function(a) {
        this.game = a,
        this.autoResolveURL = !1,
        this._cache = {
            canvas: {},
            image: {},
            texture: {},
            sound: {},
            video: {},
            text: {},
            json: {},
            xml: {},
            physics: {},
            tilemap: {},
            binary: {},
            bitmapData: {},
            bitmapFont: {},
            shader: {},
            renderTexture: {}
        },
        this._urlMap = {},
        this._urlResolver = new Image,
        this._urlTemp = null,
        this.onSoundUnlock = new c.Signal,
        this._cacheMap = [],
        this._cacheMap[c.Cache.CANVAS] = this._cache.canvas,
        this._cacheMap[c.Cache.IMAGE] = this._cache.image,
        this._cacheMap[c.Cache.TEXTURE] = this._cache.texture,
        this._cacheMap[c.Cache.SOUND] = this._cache.sound,
        this._cacheMap[c.Cache.TEXT] = this._cache.text,
        this._cacheMap[c.Cache.PHYSICS] = this._cache.physics,
        this._cacheMap[c.Cache.TILEMAP] = this._cache.tilemap,
        this._cacheMap[c.Cache.BINARY] = this._cache.binary,
        this._cacheMap[c.Cache.BITMAPDATA] = this._cache.bitmapData,
        this._cacheMap[c.Cache.BITMAPFONT] = this._cache.bitmapFont,
        this._cacheMap[c.Cache.JSON] = this._cache.json,
        this._cacheMap[c.Cache.XML] = this._cache.xml,
        this._cacheMap[c.Cache.VIDEO] = this._cache.video,
        this._cacheMap[c.Cache.SHADER] = this._cache.shader,
        this._cacheMap[c.Cache.RENDER_TEXTURE] = this._cache.renderTexture,
        this.addDefaultImage(),
        this.addMissingImage()
    }, c.Cache.CANVAS = 1, c.Cache.IMAGE = 2, c.Cache.TEXTURE = 3, c.Cache.SOUND = 4, c.Cache.TEXT = 5, c.Cache.PHYSICS = 6, c.Cache.TILEMAP = 7, c.Cache.BINARY = 8, c.Cache.BITMAPDATA = 9, c.Cache.BITMAPFONT = 10, c.Cache.JSON = 11, c.Cache.XML = 12, c.Cache.VIDEO = 13, c.Cache.SHADER = 14, c.Cache.RENDER_TEXTURE = 15, c.Cache.DEFAULT = null, c.Cache.MISSING = null, c.Cache.prototype = {
        addCanvas: function(a, b, c) {
            void 0 === c && (c = b.getContext("2d")),
            this._cache.canvas[a] = {
                canvas: b,
                context: c
            }
        },
        addImage: function(a, b, d) {
            this.checkImageKey(a) && this.removeImage(a);
            var e = {
                key: a,
                url: b,
                data: d,
                base: new PIXI.BaseTexture(d),
                frame: new c.Frame(0, 0, 0, d.width, d.height, a),
                frameData: new c.FrameData
            };
            return e.frameData.addFrame(new c.Frame(0, 0, 0, d.width, d.height, b)), this._cache.image[a] = e, this._resolveURL(b, e), "__default" === a ? c.Cache.DEFAULT = new PIXI.Texture(e.base) : "__missing" === a && (c.Cache.MISSING = new PIXI.Texture(e.base)), e
        },
        addDefaultImage: function() {
            var a = new Image;
            a.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==";
            var b = this.addImage("__default", null, a);
            b.base.skipRender = !0,
            c.Cache.DEFAULT = new PIXI.Texture(b.base)
        },
        addMissingImage: function() {
            var a = new Image;
            a.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==";
            var b = this.addImage("__missing", null, a);
            c.Cache.MISSING = new PIXI.Texture(b.base)
        },
        addSound: function(a, b, c, d, e) {
            void 0 === d && (d = !0, e = !1),
            void 0 === e && (d = !1, e = !0);
            var f = !1;
            e && (f = !0),
            this._cache.sound[a] = {
                url: b,
                data: c,
                isDecoding: !1,
                decoded: f,
                webAudio: d,
                audioTag: e,
                locked: this.game.sound.touchLocked
            },
            this._resolveURL(b, this._cache.sound[a])
        },
        addText: function(a, b, c) {
            this._cache.text[a] = {
                url: b,
                data: c
            },
            this._resolveURL(b, this._cache.text[a])
        },
        addPhysicsData: function(a, b, c, d) {
            this._cache.physics[a] = {
                url: b,
                data: c,
                format: d
            },
            this._resolveURL(b, this._cache.physics[a])
        },
        addTilemap: function(a, b, c, d) {
            this._cache.tilemap[a] = {
                url: b,
                data: c,
                format: d
            },
            this._resolveURL(b, this._cache.tilemap[a])
        },
        addBinary: function(a, b) {
            this._cache.binary[a] = b
        },
        addBitmapData: function(a, b, d) {
            return b.key = a, void 0 === d && (d = new c.FrameData, d.addFrame(b.textureFrame)), this._cache.bitmapData[a] = {
                data: b,
                frameData: d
            }, b
        },
        addBitmapFont: function(a, b, d, e, f, g, h) {
            var i = {
                url: b,
                data: d,
                font: null,
                base: new PIXI.BaseTexture(d)
            };
            void 0 === g && (g = 0),
            void 0 === h && (h = 0),
            "json" === f ? i.font = c.LoaderParser.jsonBitmapFont(e, i.base, g, h) : i.font = c.LoaderParser.xmlBitmapFont(e, i.base, g, h),
            this._cache.bitmapFont[a] = i,
            this._resolveURL(b, i)
        },
        addJSON: function(a, b, c) {
            this._cache.json[a] = {
                url: b,
                data: c
            },
            this._resolveURL(b, this._cache.json[a])
        },
        addXML: function(a, b, c) {
            this._cache.xml[a] = {
                url: b,
                data: c
            },
            this._resolveURL(b, this._cache.xml[a])
        },
        addVideo: function(a, b, c, d) {
            this._cache.video[a] = {
                url: b,
                data: c,
                isBlob: d,
                locked: !0
            },
            this._resolveURL(b, this._cache.video[a])
        },
        addShader: function(a, b, c) {
            this._cache.shader[a] = {
                url: b,
                data: c
            },
            this._resolveURL(b, this._cache.shader[a])
        },
        addRenderTexture: function(a, b) {
            this._cache.renderTexture[a] = {
                texture: b,
                frame: new c.Frame(0, 0, 0, b.width, b.height, "", "")
            }
        },
        addSpriteSheet: function(a, b, d, e, f, g, h, i) {
            void 0 === g && (g = -1),
            void 0 === h && (h = 0),
            void 0 === i && (i = 0);
            var j = {
                key: a,
                url: b,
                data: d,
                frameWidth: e,
                frameHeight: f,
                margin: h,
                spacing: i,
                base: new PIXI.BaseTexture(d),
                frameData: c.AnimationParser.spriteSheet(this.game, d, e, f, g, h, i)
            };
            this._cache.image[a] = j,
            this._resolveURL(b, j)
        },
        addTextureAtlas: function(a, b, d, e, f) {
            var g = {
                key: a,
                url: b,
                data: d,
                base: new PIXI.BaseTexture(d)
            };
            f === c.Loader.TEXTURE_ATLAS_XML_STARLING ? g.frameData = c.AnimationParser.XMLData(this.game, e, a) : f === c.Loader.TEXTURE_ATLAS_JSON_PYXEL ? g.frameData = c.AnimationParser.JSONDataPyxel(this.game, e, a) : Array.isArray(e.frames) ? g.frameData = c.AnimationParser.JSONData(this.game, e, a) : g.frameData = c.AnimationParser.JSONDataHash(this.game, e, a),
            this._cache.image[a] = g,
            this._resolveURL(b, g)
        },
        reloadSound: function(a) {
            var b = this,
                c = this.getSound(a);
            c && (c.data.src = c.url, c.data.addEventListener("canplaythrough", function() {
                return b.reloadSoundComplete(a)
            }, !1), c.data.load())
        },
        reloadSoundComplete: function(a) {
            var b = this.getSound(a);
            b && (b.locked = !1, this.onSoundUnlock.dispatch(a))
        },
        updateSound: function(a, b, c) {
            var d = this.getSound(a);
            d && (d[b] = c)
        },
        decodedSound: function(a, b) {
            var c = this.getSound(a);
            c.data = b,
            c.decoded = !0,
            c.isDecoding = !1
        },
        isSoundDecoded: function(a) {
            var b = this.getItem(a, c.Cache.SOUND, "isSoundDecoded");
            if (b)
                return b.decoded
        },
        isSoundReady: function(a) {
            var b = this.getItem(a, c.Cache.SOUND, "isSoundDecoded");
            if (b)
                return b.decoded && !this.game.sound.touchLocked
        },
        checkKey: function(a, b) {
            return !!this._cacheMap[a][b]
        },
        checkURL: function(a) {
            return !!this._urlMap[this._resolveURL(a)]
        },
        checkCanvasKey: function(a) {
            return this.checkKey(c.Cache.CANVAS, a)
        },
        checkImageKey: function(a) {
            return this.checkKey(c.Cache.IMAGE, a)
        },
        checkTextureKey: function(a) {
            return this.checkKey(c.Cache.TEXTURE, a)
        },
        checkSoundKey: function(a) {
            return this.checkKey(c.Cache.SOUND, a)
        },
        checkTextKey: function(a) {
            return this.checkKey(c.Cache.TEXT, a)
        },
        checkPhysicsKey: function(a) {
            return this.checkKey(c.Cache.PHYSICS, a)
        },
        checkTilemapKey: function(a) {
            return this.checkKey(c.Cache.TILEMAP, a)
        },
        checkBinaryKey: function(a) {
            return this.checkKey(c.Cache.BINARY, a)
        },
        checkBitmapDataKey: function(a) {
            return this.checkKey(c.Cache.BITMAPDATA, a)
        },
        checkBitmapFontKey: function(a) {
            return this.checkKey(c.Cache.BITMAPFONT, a)
        },
        checkJSONKey: function(a) {
            return this.checkKey(c.Cache.JSON, a)
        },
        checkXMLKey: function(a) {
            return this.checkKey(c.Cache.XML, a)
        },
        checkVideoKey: function(a) {
            return this.checkKey(c.Cache.VIDEO, a)
        },
        checkShaderKey: function(a) {
            return this.checkKey(c.Cache.SHADER, a)
        },
        checkRenderTextureKey: function(a) {
            return this.checkKey(c.Cache.RENDER_TEXTURE, a)
        },
        getItem: function(a, b, c, d) {
            return this.checkKey(b, a) ? void 0 === d ? this._cacheMap[b][a] : this._cacheMap[b][a][d] : (c && console.warn("Phaser.Cache." + c + ': Key "' + a + '" not found in Cache.'), null)
        },
        getCanvas: function(a) {
            return this.getItem(a, c.Cache.CANVAS, "getCanvas", "canvas")
        },
        getImage: function(a, b) {
            void 0 !== a && null !== a || (a = "__default"),
            void 0 === b && (b = !1);
            var d = this.getItem(a, c.Cache.IMAGE, "getImage");
            return null === d && (d = this.getItem("__missing", c.Cache.IMAGE, "getImage")), b ? d : d.data
        },
        getTextureFrame: function(a) {
            return this.getItem(a, c.Cache.TEXTURE, "getTextureFrame", "frame")
        },
        getSound: function(a) {
            return this.getItem(a, c.Cache.SOUND, "getSound")
        },
        getSoundData: function(a) {
            return this.getItem(a, c.Cache.SOUND, "getSoundData", "data")
        },
        getText: function(a) {
            return this.getItem(a, c.Cache.TEXT, "getText", "data")
        },
        getPhysicsData: function(a, b, d) {
            var e = this.getItem(a, c.Cache.PHYSICS, "getPhysicsData", "data");
            if (null === e || void 0 === b || null === b)
                return e;
            if (e[b]) {
                var f = e[b];
                if (!f || !d)
                    return f;
                for (var g in f)
                    if (g = f[g], g.fixtureKey === d)
                        return g;
                console.warn('Phaser.Cache.getPhysicsData: Could not find given fixtureKey: "' + d + " in " + a + '"')
            } else
                console.warn('Phaser.Cache.getPhysicsData: Invalid key/object: "' + a + " / " + b + '"');
            return null
        },
        getTilemapData: function(a) {
            return this.getItem(a, c.Cache.TILEMAP, "getTilemapData")
        },
        getBinary: function(a) {
            return this.getItem(a, c.Cache.BINARY, "getBinary")
        },
        getBitmapData: function(a) {
            return this.getItem(a, c.Cache.BITMAPDATA, "getBitmapData", "data")
        },
        getBitmapFont: function(a) {
            return this.getItem(a, c.Cache.BITMAPFONT, "getBitmapFont")
        },
        getJSON: function(a, b) {
            var d = this.getItem(a, c.Cache.JSON, "getJSON", "data");
            return d ? b ? c.Utils.extend(!0, Array.isArray(d) ? [] : {}, d) : d : null
        },
        getXML: function(a) {
            return this.getItem(a, c.Cache.XML, "getXML", "data")
        },
        getVideo: function(a) {
            return this.getItem(a, c.Cache.VIDEO, "getVideo")
        },
        getShader: function(a) {
            return this.getItem(a, c.Cache.SHADER, "getShader", "data")
        },
        getRenderTexture: function(a) {
            return this.getItem(a, c.Cache.RENDER_TEXTURE, "getRenderTexture")
        },
        getBaseTexture: function(a, b) {
            return void 0 === b && (b = c.Cache.IMAGE), this.getItem(a, b, "getBaseTexture", "base")
        },
        getFrame: function(a, b) {
            return void 0 === b && (b = c.Cache.IMAGE), this.getItem(a, b, "getFrame", "frame")
        },
        getFrameCount: function(a, b) {
            var c = this.getFrameData(a, b);
            return c ? c.total : 0
        },
        getFrameData: function(a, b) {
            return void 0 === b && (b = c.Cache.IMAGE), this.getItem(a, b, "getFrameData", "frameData")
        },
        hasFrameData: function(a, b) {
            return void 0 === b && (b = c.Cache.IMAGE), null !== this.getItem(a, b, "", "frameData")
        },
        updateFrameData: function(a, b, d) {
            void 0 === d && (d = c.Cache.IMAGE),
            this._cacheMap[d][a] && (this._cacheMap[d][a].frameData = b)
        },
        getFrameByIndex: function(a, b, c) {
            var d = this.getFrameData(a, c);
            return d ? d.getFrame(b) : null
        },
        getFrameByName: function(a, b, c) {
            var d = this.getFrameData(a, c);
            return d ? d.getFrameByName(b) : null
        },
        getURL: function(a) {
            var a = this._resolveURL(a);
            return a ? this._urlMap[a] : (console.warn('Phaser.Cache.getUrl: Invalid url: "' + a + '" or Cache.autoResolveURL was false'), null)
        },
        getKeys: function(a) {
            void 0 === a && (a = c.Cache.IMAGE);
            var b = [];
            if (this._cacheMap[a])
                for (var d in this._cacheMap[a])
                    "__default" !== d && "__missing" !== d && b.push(d);
            return b
        },
        removeCanvas: function(a) {
            delete this._cache.canvas[a]
        },
        removeImage: function(a, b) {
            void 0 === b && (b = !0);
            var c = this.getImage(a, !0);
            b && c.base && c.base.destroy(),
            delete this._cache.image[a]
        },
        removeSound: function(a) {
            delete this._cache.sound[a]
        },
        removeText: function(a) {
            delete this._cache.text[a]
        },
        removePhysics: function(a) {
            delete this._cache.physics[a]
        },
        removeTilemap: function(a) {
            delete this._cache.tilemap[a]
        },
        removeBinary: function(a) {
            delete this._cache.binary[a]
        },
        removeBitmapData: function(a) {
            delete this._cache.bitmapData[a]
        },
        removeBitmapFont: function(a) {
            delete this._cache.bitmapFont[a]
        },
        removeJSON: function(a) {
            delete this._cache.json[a]
        },
        removeXML: function(a) {
            delete this._cache.xml[a]
        },
        removeVideo: function(a) {
            delete this._cache.video[a]
        },
        removeShader: function(a) {
            delete this._cache.shader[a]
        },
        removeRenderTexture: function(a) {
            delete this._cache.renderTexture[a]
        },
        removeSpriteSheet: function(a) {
            delete this._cache.spriteSheet[a]
        },
        removeTextureAtlas: function(a) {
            delete this._cache.atlas[a]
        },
        clearGLTextures: function() {
            for (var a in this._cache.image)
                this._cache.image[a].base._glTextures = []
        },
        _resolveURL: function(a, b) {
            return this.autoResolveURL ? (this._urlResolver.src = this.game.load.baseURL + a, this._urlTemp = this._urlResolver.src, this._urlResolver.src = "", b && (this._urlMap[this._urlTemp] = b), this._urlTemp) : null
        },
        destroy: function() {
            for (var a = 0; a < this._cacheMap.length; a++) {
                var b = this._cacheMap[a];
                for (var c in b)
                    "__default" !== c && "__missing" !== c && (b[c].destroy && b[c].destroy(), delete b[c])
            }
            this._urlMap = null,
            this._urlResolver = null,
            this._urlTemp = null
        }
    }, c.Cache.prototype.constructor = c.Cache, c.Loader = function(a) {
        this.game = a,
        this.cache = a.cache,
        this.resetLocked = !1,
        this.isLoading = !1,
        this.hasLoaded = !1,
        this.preloadSprite = null,
        this.crossOrigin = !1,
        this.baseURL = "",
        this.path = "",
        this.headers = {
            requestedWith: !1,
            json: "application/json",
            xml: "application/xml"
        },
        this.onLoadStart = new c.Signal,
        this.onLoadComplete = new c.Signal,
        this.onPackComplete = new c.Signal,
        this.onFileStart = new c.Signal,
        this.onFileComplete = new c.Signal,
        this.onFileError = new c.Signal,
        this.useXDomainRequest = !1,
        this._warnedAboutXDomainRequest = !1,
        this.enableParallel = !0,
        this.maxParallelDownloads = 4,
        this._withSyncPointDepth = 0,
        this._fileList = [],
        this._flightQueue = [],
        this._processingHead = 0,
        this._fileLoadStarted = !1,
        this._totalPackCount = 0,
        this._totalFileCount = 0,
        this._loadedPackCount = 0,
        this._loadedFileCount = 0
    }, c.Loader.TEXTURE_ATLAS_JSON_ARRAY = 0, c.Loader.TEXTURE_ATLAS_JSON_HASH = 1, c.Loader.TEXTURE_ATLAS_XML_STARLING = 2, c.Loader.PHYSICS_LIME_CORONA_JSON = 3, c.Loader.PHYSICS_PHASER_JSON = 4, c.Loader.TEXTURE_ATLAS_JSON_PYXEL = 5, c.Loader.prototype = {
        setPreloadSprite: function(a, b) {
            b = b || 0,
            this.preloadSprite = {
                sprite: a,
                direction: b,
                width: a.width,
                height: a.height,
                rect: null
            },
            0 === b ? this.preloadSprite.rect = new c.Rectangle(0, 0, 1, a.height) : this.preloadSprite.rect = new c.Rectangle(0, 0, a.width, 1),
            a.crop(this.preloadSprite.rect),
            a.visible = !0
        },
        resize: function() {
            this.preloadSprite && this.preloadSprite.height !== this.preloadSprite.sprite.height && (this.preloadSprite.rect.height = this.preloadSprite.sprite.height)
        },
        checkKeyExists: function(a, b) {
            return this.getAssetIndex(a, b) > -1
        },
        getAssetIndex: function(a, b) {
            for (var c = -1, d = 0; d < this._fileList.length; d++) {
                var e = this._fileList[d];
                if (e.type === a && e.key === b && (c = d, !e.loaded && !e.loading))
                    break
            }
            return c
        },
        getAsset: function(a, b) {
            var c = this.getAssetIndex(a, b);
            return c > -1 && {
                    index: c,
                    file: this._fileList[c]
                }
        },
        reset: function(a, b) {
            void 0 === b && (b = !1),
            this.resetLocked || (a && (this.preloadSprite = null), this.isLoading = !1, this._processingHead = 0, this._fileList.length = 0, this._flightQueue.length = 0, this._fileLoadStarted = !1, this._totalFileCount = 0, this._totalPackCount = 0, this._loadedPackCount = 0, this._loadedFileCount = 0, b && (this.onLoadStart.removeAll(), this.onLoadComplete.removeAll(), this.onPackComplete.removeAll(), this.onFileStart.removeAll(), this.onFileComplete.removeAll(), this.onFileError.removeAll()))
        },
        addToFileList: function(a, b, c, d, e, f) {
            if (void 0 === e && (e = !1), void 0 === b || "" === b)
                return console.warn("Phaser.Loader: Invalid or no key given of type " + a), this;
            if (void 0 === c || null === c) {
                if (!f)
                    return console.warn("Phaser.Loader: No URL given for file type: " + a + " key: " + b), this;
                c = b + f
            }
            var g = {
                type: a,
                key: b,
                path: this.path,
                url: c,
                syncPoint: this._withSyncPointDepth > 0,
                data: null,
                loading: !1,
                loaded: !1,
                error: !1
            };
            if (d)
                for (var h in d)
                    g[h] = d[h];
            var i = this.getAssetIndex(a, b);
            if (e && i > -1) {
                var j = this._fileList[i];
                j.loading || j.loaded ? (this._fileList.push(g), this._totalFileCount++) : this._fileList[i] = g
            } else
                i === -1 && (this._fileList.push(g), this._totalFileCount++);
            return this
        },
        replaceInFileList: function(a, b, c, d) {
            return this.addToFileList(a, b, c, d, !0)
        },
        pack: function(a, b, c, d) {
            if (void 0 === b && (b = null), void 0 === c && (c = null), void 0 === d && (d = null), !b && !c)
                return console.warn("Phaser.Loader.pack - Both url and data are null. One must be set."), this;
            var e = {
                type: "packfile",
                key: a,
                url: b,
                path: this.path,
                syncPoint: !0,
                data: null,
                loading: !1,
                loaded: !1,
                error: !1,
                callbackContext: d
            };
            c && ("string" == typeof c && (c = JSON.parse(c)), e.data = c || {}, e.loaded = !0);
            for (var f = 0; f < this._fileList.length + 1; f++) {
                var g = this._fileList[f];
                if (!g || !g.loaded && !g.loading && "packfile" !== g.type) {
                    this._fileList.splice(f, 0, e),
                    this._totalPackCount++;
                    break
                }
            }
            return this
        },
        image: function(a, b, c) {
            return this.addToFileList("image", a, b, void 0, c, ".png")
        },
        images: function(a, b) {
            if (Array.isArray(b))
                for (var c = 0; c < a.length; c++)
                    this.image(a[c], b[c]);
            else
                for (var c = 0; c < a.length; c++)
                    this.image(a[c]);
            return this
        },
        text: function(a, b, c) {
            return this.addToFileList("text", a, b, void 0, c, ".txt")
        },
        json: function(a, b, c) {
            return this.addToFileList("json", a, b, void 0, c, ".json")
        },
        shader: function(a, b, c) {
            return this.addToFileList("shader", a, b, void 0, c, ".frag")
        },
        xml: function(a, b, c) {
            return this.addToFileList("xml", a, b, void 0, c, ".xml")
        },
        script: function(a, b, c, d) {
            return void 0 === c && (c = !1), c !== !1 && void 0 === d && (d = this), this.addToFileList("script", a, b, {
                syncPoint: !0,
                callback: c,
                callbackContext: d
            }, !1, ".js")
        },
        binary: function(a, b, c, d) {
            return void 0 === c && (c = !1), c !== !1 && void 0 === d && (d = c), this.addToFileList("binary", a, b, {
                callback: c,
                callbackContext: d
            }, !1, ".bin")
        },
        spritesheet: function(a, b, c, d, e, f, g) {
            return void 0 === e && (e = -1), void 0 === f && (f = 0), void 0 === g && (g = 0), this.addToFileList("spritesheet", a, b, {
                frameWidth: c,
                frameHeight: d,
                frameMax: e,
                margin: f,
                spacing: g
            }, !1, ".png")
        },
        audio: function(a, b, c) {
            return this.game.sound.noAudio ? this : (void 0 === c && (c = !0), "string" == typeof b && (b = [b]), this.addToFileList("audio", a, b, {
                buffer: null,
                autoDecode: c
            }))
        },
        audioSprite: function(a, b, c, d, e) {
            return this.game.sound.noAudio ? this : (void 0 === c && (c = null), void 0 === d && (d = null), void 0 === e && (e = !0), this.audio(a, b, e), c ? this.json(a + "-audioatlas", c) : d ? ("string" == typeof d && (d = JSON.parse(d)), this.cache.addJSON(a + "-audioatlas", "", d)) : console.warn("Phaser.Loader.audiosprite - You must specify either a jsonURL or provide a jsonData object"), this)
        },
        audiosprite: function(a, b, c, d, e) {
            return this.audioSprite(a, b, c, d, e)
        },
        video: function(a, b, c, d) {
            return void 0 === c && (c = this.game.device.firefox ? "loadeddata" : "canplaythrough"), void 0 === d && (d = !1), "string" == typeof b && (b = [b]), this.addToFileList("video", a, b, {
                buffer: null,
                asBlob: d,
                loadEvent: c
            })
        },
        tilemap: function(a, b, d, e) {
            if (void 0 === b && (b = null), void 0 === d && (d = null), void 0 === e && (e = c.Tilemap.CSV), b || d || (b = e === c.Tilemap.CSV ? a + ".csv" : a + ".json"), d) {
                switch (e) {
                case c.Tilemap.CSV:
                    break;
                case c.Tilemap.TILED_JSON:
                    "string" == typeof d && (d = JSON.parse(d))
                }
                this.cache.addTilemap(a, null, d, e)
            } else
                this.addToFileList("tilemap", a, b, {
                    format: e
                });
            return this
        },
        physics: function(a, b, d, e) {
            return void 0 === b && (b = null), void 0 === d && (d = null), void 0 === e && (e = c.Physics.LIME_CORONA_JSON), b || d || (b = a + ".json"), d ? ("string" == typeof d && (d = JSON.parse(d)), this.cache.addPhysicsData(a, null, d, e)) : this.addToFileList("physics", a, b, {
                format: e
            }), this
        },
        bitmapFont: function(a, b, c, d, e, f) {
            if (void 0 !== b && null !== b || (b = a + ".png"), void 0 === c && (c = null), void 0 === d && (d = null), null === c && null === d && (c = a + ".xml"), void 0 === e && (e = 0), void 0 === f && (f = 0), c)
                this.addToFileList("bitmapfont", a, b, {
                    atlasURL: c,
                    xSpacing: e,
                    ySpacing: f
                });
            else if ("string" == typeof d) {
                var g,
                    h;
                try {
                    g = JSON.parse(d)
                } catch (a) {
                    h = this.parseXml(d)
                }
                if (!h && !g)
                    throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");
                this.addToFileList("bitmapfont", a, b, {
                    atlasURL: null,
                    atlasData: g || h,
                    atlasType: g ? "json" : "xml",
                    xSpacing: e,
                    ySpacing: f
                })
            }
            return this
        },
        atlasJSONArray: function(a, b, d, e) {
            return this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_JSON_ARRAY)
        },
        atlasJSONHash: function(a, b, d, e) {
            return this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_JSON_HASH)
        },
        atlasXML: function(a, b, d, e) {
            return void 0 === d && (d = null), void 0 === e && (e = null), d || e || (d = a + ".xml"), this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_XML_STARLING)
        },
        atlas: function(a, b, d, e, f) {
            if (void 0 !== b && null !== b || (b = a + ".png"), void 0 === d && (d = null), void 0 === e && (e = null), void 0 === f && (f = c.Loader.TEXTURE_ATLAS_JSON_ARRAY), d || e || (d = f === c.Loader.TEXTURE_ATLAS_XML_STARLING ? a + ".xml" : a + ".json"), d)
                this.addToFileList("textureatlas", a, b, {
                    atlasURL: d,
                    format: f
                });
            else {
                switch (f) {
                case c.Loader.TEXTURE_ATLAS_JSON_ARRAY:
                    "string" == typeof e && (e = JSON.parse(e));
                    break;
                case c.Loader.TEXTURE_ATLAS_XML_STARLING:
                    if ("string" == typeof e) {
                        var g = this.parseXml(e);
                        if (!g)
                            throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");
                        e = g
                    }
                }
                this.addToFileList("textureatlas", a, b, {
                    atlasURL: null,
                    atlasData: e,
                    format: f
                })
            }
            return this
        },
        withSyncPoint: function(a, b) {
            this._withSyncPointDepth++;
            try {
                a.call(b || this, this)
            } finally {
                this._withSyncPointDepth--
            }
            return this
        },
        addSyncPoint: function(a, b) {
            var c = this.getAsset(a, b);
            return c && (c.file.syncPoint = !0), this
        },
        removeFile: function(a, b) {
            var c = this.getAsset(a, b);
            c && (c.loaded || c.loading || this._fileList.splice(c.index, 1))
        },
        removeAll: function() {
            this._fileList.length = 0,
            this._flightQueue.length = 0
        },
        start: function() {
            this.isLoading || (this.hasLoaded = !1, this.isLoading = !0, this.updateProgress(), this.processLoadQueue())
        },
        processLoadQueue: function() {
            if (!this.isLoading)
                return console.warn("Phaser.Loader - active loading canceled / reset"), void this.finishedLoading(!0);
            for (var a = 0; a < this._flightQueue.length; a++) {
                var b = this._flightQueue[a];
                (b.loaded || b.error) && (this._flightQueue.splice(a, 1), a--, b.loading = !1, b.requestUrl = null, b.requestObject = null, b.error && this.onFileError.dispatch(b.key, b), "packfile" !== b.type ? (this._loadedFileCount++, this.onFileComplete.dispatch(this.progress, b.key, !b.error, this._loadedFileCount, this._totalFileCount)) : "packfile" === b.type && b.error && (this._loadedPackCount++, this.onPackComplete.dispatch(b.key, !b.error, this._loadedPackCount, this._totalPackCount)))
            }
            for (var d = !1, e = this.enableParallel ? c.Math.clamp(this.maxParallelDownloads, 1, 12) : 1, a = this._processingHead; a < this._fileList.length; a++) {
                var b = this._fileList[a];
                if ("packfile" === b.type && !b.error && b.loaded && a === this._processingHead && (this.processPack(b), this._loadedPackCount++, this.onPackComplete.dispatch(b.key, !b.error, this._loadedPackCount, this._totalPackCount)), b.loaded || b.error ? a === this._processingHead && (this._processingHead = a + 1) : !b.loading && this._flightQueue.length < e && ("packfile" !== b.type || b.data ? d || (this._fileLoadStarted || (this._fileLoadStarted = !0, this.onLoadStart.dispatch()), this._flightQueue.push(b), b.loading = !0, this.onFileStart.dispatch(this.progress, b.key, b.url), this.loadFile(b)) : (this._flightQueue.push(b), b.loading = !0, this.loadFile(b))), !b.loaded && b.syncPoint && (d = !0), this._flightQueue.length >= e || d && this._loadedPackCount === this._totalPackCount)
                    break
            }
            if (this.updateProgress(), this._processingHead >= this._fileList.length)
                this.finishedLoading();
            else if (!this._flightQueue.length) {
                console.warn("Phaser.Loader - aborting: processing queue empty, loading may have stalled");
                var f = this;
                setTimeout(function() {
                    f.finishedLoading(!0)
                }, 2e3)
            }
        },
        finishedLoading: function(a) {
            this.hasLoaded || (this.hasLoaded = !0, this.isLoading = !1, a || this._fileLoadStarted || (this._fileLoadStarted = !0, this.onLoadStart.dispatch()), this.onLoadComplete.dispatch(), this.game.state.loadComplete(), this.reset())
        },
        asyncComplete: function(a, b) {
            void 0 === b && (b = ""),
            a.loaded = !0,
            a.error = !!b,
            b && (a.errorMessage = b, console.warn("Phaser.Loader - " + a.type + "[" + a.key + "]: " + b)),
            this.processLoadQueue()
        },
        processPack: function(a) {
            var b = a.data[a.key];
            if (!b)
                return void console.warn("Phaser.Loader - " + a.key + ": pack has data, but not for pack key");
            for (var d = 0; d < b.length; d++) {
                var e = b[d];
                switch (e.type) {
                case "image":
                    this.image(e.key, e.url, e.overwrite);
                    break;
                case "text":
                    this.text(e.key, e.url, e.overwrite);
                    break;
                case "json":
                    this.json(e.key, e.url, e.overwrite);
                    break;
                case "xml":
                    this.xml(e.key, e.url, e.overwrite);
                    break;
                case "script":
                    this.script(e.key, e.url, e.callback, a.callbackContext || this);
                    break;
                case "binary":
                    this.binary(e.key, e.url, e.callback, a.callbackContext || this);
                    break;
                case "spritesheet":
                    this.spritesheet(e.key, e.url, e.frameWidth, e.frameHeight, e.frameMax, e.margin, e.spacing);
                    break;
                case "video":
                    this.video(e.key, e.urls);
                    break;
                case "audio":
                    this.audio(e.key, e.urls, e.autoDecode);
                    break;
                case "audiosprite":
                    this.audiosprite(e.key, e.urls, e.jsonURL, e.jsonData, e.autoDecode);
                    break;
                case "tilemap":
                    this.tilemap(e.key, e.url, e.data, c.Tilemap[e.format]);
                    break;
                case "physics":
                    this.physics(e.key, e.url, e.data, c.Loader[e.format]);
                    break;
                case "bitmapFont":
                    this.bitmapFont(e.key, e.textureURL, e.atlasURL, e.atlasData, e.xSpacing, e.ySpacing);
                    break;
                case "atlasJSONArray":
                    this.atlasJSONArray(e.key, e.textureURL, e.atlasURL, e.atlasData);
                    break;
                case "atlasJSONHash":
                    this.atlasJSONHash(e.key, e.textureURL, e.atlasURL, e.atlasData);
                    break;
                case "atlasXML":
                    this.atlasXML(e.key, e.textureURL, e.atlasURL, e.atlasData);
                    break;
                case "atlas":
                    this.atlas(e.key, e.textureURL, e.atlasURL, e.atlasData, c.Loader[e.format]);
                    break;
                case "shader":
                    this.shader(e.key, e.url, e.overwrite)
                }
            }
        },
        transformUrl: function(a, b) {
            return !!a && (a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/) ? a : this.baseURL + b.path + a)
        },
        loadFile: function(a) {
            switch (a.type) {
            case "packfile":
                this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.fileComplete);
                break;
            case "image":
            case "spritesheet":
            case "textureatlas":
            case "bitmapfont":
                this.loadImageTag(a);
                break;
            case "audio":
                a.url = this.getAudioURL(a.url),
                a.url ? this.game.sound.usingWebAudio ? this.xhrLoad(a, this.transformUrl(a.url, a), "arraybuffer", this.fileComplete) : this.game.sound.usingAudioTag && this.loadAudioTag(a) : this.fileError(a, null, "No supported audio URL specified or device does not have audio playback support");
                break;
            case "video":
                a.url = this.getVideoURL(a.url),
                a.url ? a.asBlob ? this.xhrLoad(a, this.transformUrl(a.url, a), "blob", this.fileComplete) : this.loadVideoTag(a) : this.fileError(a, null, "No supported video URL specified or device does not have video playback support");
                break;
            case "json":
                this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.jsonLoadComplete);
                break;
            case "xml":
                this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.xmlLoadComplete);
                break;
            case "tilemap":
                a.format === c.Tilemap.TILED_JSON ? this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.jsonLoadComplete) : a.format === c.Tilemap.CSV ? this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.csvLoadComplete) : this.asyncComplete(a, "invalid Tilemap format: " + a.format);
                break;
            case "text":
            case "script":
            case "shader":
            case "physics":
                this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.fileComplete);
                break;
            case "binary":
                this.xhrLoad(a, this.transformUrl(a.url, a), "arraybuffer", this.fileComplete)
            }
        },
        loadImageTag: function(a) {
            var b = this;
            a.data = new Image,
            a.data.name = a.key,
            this.crossOrigin && (a.data.crossOrigin = this.crossOrigin),
            a.data.onload = function() {
                a.data.onload && (a.data.onload = null, a.data.onerror = null, b.fileComplete(a))
            },
            a.data.onerror = function() {
                a.data.onload && (a.data.onload = null, a.data.onerror = null, b.fileError(a))
            },
            a.data.src = this.transformUrl(a.url, a),
            a.data.complete && a.data.width && a.data.height && (a.data.onload = null, a.data.onerror = null, this.fileComplete(a))
        },
        loadVideoTag: function(a) {
            var b = this;
            a.data = document.createElement("video"),
            a.data.name = a.key,
            a.data.controls = !1,
            a.data.autoplay = !1;
            var d = function() {
                a.data.removeEventListener(a.loadEvent, d, !1),
                a.data.onerror = null,
                a.data.canplay = !0,
                c.GAMES[b.game.id].load.fileComplete(a)
            };
            a.data.onerror = function() {
                a.data.removeEventListener(a.loadEvent, d, !1),
                a.data.onerror = null,
                a.data.canplay = !1,
                b.fileError(a)
            },
            a.data.addEventListener(a.loadEvent, d, !1),
            a.data.src = this.transformUrl(a.url, a),
            a.data.load()
        },
        loadAudioTag: function(a) {
            var b = this;
            if (this.game.sound.touchLocked)
                a.data = new Audio,
                a.data.name = a.key,
                a.data.preload = "auto",
                a.data.src = this.transformUrl(a.url, a),
                this.fileComplete(a);
            else {
                a.data = new Audio,
                a.data.name = a.key;
                var c = function() {
                    a.data.removeEventListener("canplaythrough", c, !1),
                    a.data.onerror = null,
                    b.fileComplete(a)
                };
                a.data.onerror = function() {
                    a.data.removeEventListener("canplaythrough", c, !1),
                    a.data.onerror = null,
                    b.fileError(a)
                },
                a.data.preload = "auto",
                a.data.src = this.transformUrl(a.url, a),
                a.data.addEventListener("canplaythrough", c, !1),
                a.data.load()
            }
        },
        xhrLoad: function(a, b, c, d, e) {
            if (this.useXDomainRequest && window.XDomainRequest)
                return void this.xhrLoadWithXDR(a, b, c, d, e);
            var f = new XMLHttpRequest;
            f.open("GET", b, !0),
            f.responseType = c,
            this.headers.requestedWith !== !1 && f.setRequestHeader("X-Requested-With", this.headers.requestedWith),
            this.headers[a.type] && f.setRequestHeader("Accept", this.headers[a.type]),
            e = e || this.fileError;
            var g = this;
            f.onload = function() {
                try {
                    return 4 === f.readyState && f.status >= 400 && f.status <= 599 ? e.call(g, a, f) : d.call(g, a, f)
                } catch (b) {
                    g.hasLoaded ? window.console && console.error(b) : g.asyncComplete(a, b.message || "Exception")
                }
            },
            f.onerror = function() {
                try {
                    return e.call(g, a, f)
                } catch (b) {
                    g.hasLoaded ? window.console && console.error(b) : g.asyncComplete(a, b.message || "Exception")
                }
            },
            a.requestObject = f,
            a.requestUrl = b,
            f.send()
        },
        xhrLoadWithXDR: function(a, b, c, d, e) {
            this._warnedAboutXDomainRequest || this.game.device.ie && !(this.game.device.ieVersion >= 10) || (this._warnedAboutXDomainRequest = !0, console.warn("Phaser.Loader - using XDomainRequest outside of IE 9"));
            var f = new window.XDomainRequest;
            f.open("GET", b, !0),
            f.responseType = c,
            f.timeout = 3e3,
            e = e || this.fileError;
            var g = this;
            f.onerror = function() {
                try {
                    return e.call(g, a, f)
                } catch (b) {
                    g.asyncComplete(a, b.message || "Exception")
                }
            },
            f.ontimeout = function() {
                try {
                    return e.call(g, a, f)
                } catch (b) {
                    g.asyncComplete(a, b.message || "Exception")
                }
            },
            f.onprogress = function() {},
            f.onload = function() {
                try {
                    return 4 === f.readyState && f.status >= 400 && f.status <= 599 ? e.call(g, a, f) : d.call(g, a, f)
                } catch (b) {
                    g.asyncComplete(a, b.message || "Exception")
                }
            },
            a.requestObject = f,
            a.requestUrl = b,
            setTimeout(function() {
                f.send()
            }, 0)
        },
        getVideoURL: function(a) {
            for (var b = 0; b < a.length; b++) {
                var c,
                    d = a[b];
                if (d.uri) {
                    if (c = d.type, d = d.uri, this.game.device.canPlayVideo(c))
                        return d
                } else {
                    if (0 === d.indexOf("blob:") || 0 === d.indexOf("data:"))
                        return d;
                    d.indexOf("?") >= 0 && (d = d.substr(0, d.indexOf("?")));
                    var e = d.substr((Math.max(0, d.lastIndexOf(".")) || 1 / 0) + 1);
                    if (c = e.toLowerCase(), this.game.device.canPlayVideo(c))
                        return a[b]
                }
            }
            return null
        },
        getAudioURL: function(a) {
            if (this.game.sound.noAudio)
                return null;
            for (var b = 0; b < a.length; b++) {
                var c,
                    d = a[b];
                if (d.uri) {
                    if (c = d.type, d = d.uri, this.game.device.canPlayAudio(c))
                        return d
                } else {
                    if (0 === d.indexOf("blob:") || 0 === d.indexOf("data:"))
                        return d;
                    d.indexOf("?") >= 0 && (d = d.substr(0, d.indexOf("?")));
                    var e = d.substr((Math.max(0, d.lastIndexOf(".")) || 1 / 0) + 1);
                    if (c = e.toLowerCase(), this.game.device.canPlayAudio(c))
                        return a[b]
                }
            }
            return null
        },
        fileError: function(a, b, c) {
            var d = a.requestUrl || this.transformUrl(a.url, a),
                e = "error loading asset from URL " + d;
            !c && b && (c = b.status),
            c && (e = e + " (" + c + ")"),
            this.asyncComplete(a, e)
        },
        fileComplete: function(a, b) {
            var d = !0;
            switch (a.type) {
            case "packfile":
                var e = JSON.parse(b.responseText);
                a.data = e || {};
                break;
            case "image":
                this.cache.addImage(a.key, a.url, a.data);
                break;
            case "spritesheet":
                this.cache.addSpriteSheet(a.key, a.url, a.data, a.frameWidth, a.frameHeight, a.frameMax, a.margin, a.spacing);
                break;
            case "textureatlas":
                if (null == a.atlasURL)
                    this.cache.addTextureAtlas(a.key, a.url, a.data, a.atlasData, a.format);
                else if (d = !1, a.format === c.Loader.TEXTURE_ATLAS_JSON_ARRAY || a.format === c.Loader.TEXTURE_ATLAS_JSON_HASH || a.format === c.Loader.TEXTURE_ATLAS_JSON_PYXEL)
                    this.xhrLoad(a, this.transformUrl(a.atlasURL, a), "text", this.jsonLoadComplete);
                else {
                    if (a.format !== c.Loader.TEXTURE_ATLAS_XML_STARLING)
                        throw new Error("Phaser.Loader. Invalid Texture Atlas format: " + a.format);
                    this.xhrLoad(a, this.transformUrl(a.atlasURL, a), "text", this.xmlLoadComplete)
                }
                break;
            case "bitmapfont":
                a.atlasURL ? (d = !1, this.xhrLoad(a, this.transformUrl(a.atlasURL, a), "text", function(a, b) {
                    var c;
                    try {
                        c = JSON.parse(b.responseText)
                    } catch (a) {}
                    c ? (a.atlasType = "json", this.jsonLoadComplete(a, b)) : (a.atlasType = "xml", this.xmlLoadComplete(a, b))
                })) : this.cache.addBitmapFont(a.key, a.url, a.data, a.atlasData, a.atlasType, a.xSpacing, a.ySpacing);
                break;
            case "video":
                if (a.asBlob)
                    try {
                        a.data = b.response
                    } catch (b) {
                        throw new Error("Phaser.Loader. Unable to parse video file as Blob: " + a.key)
                    }
                this.cache.addVideo(a.key, a.url, a.data, a.asBlob);
                break;
            case "audio":
                this.game.sound.usingWebAudio ? (a.data = b.response, this.cache.addSound(a.key, a.url, a.data, !0, !1), a.autoDecode && this.game.sound.decode(a.key)) : this.cache.addSound(a.key, a.url, a.data, !1, !0);
                break;
            case "text":
                a.data = b.responseText,
                this.cache.addText(a.key, a.url, a.data);
                break;
            case "shader":
                a.data = b.responseText,
                this.cache.addShader(a.key, a.url, a.data);
                break;
            case "physics":
                var e = JSON.parse(b.responseText);
                this.cache.addPhysicsData(a.key, a.url, e, a.format);
                break;
            case "script":
                a.data = document.createElement("script"),
                a.data.language = "javascript",
                a.data.type = "text/javascript",
                a.data.defer = !1,
                a.data.text = b.responseText,
                document.head.appendChild(a.data),
                a.callback && (a.data = a.callback.call(a.callbackContext, a.key, b.responseText));
                break;
            case "binary":
                a.callback ? a.data = a.callback.call(a.callbackContext, a.key, b.response) : a.data = b.response,
                this.cache.addBinary(a.key, a.data)
            }
            d && this.asyncComplete(a)
        },
        jsonLoadComplete: function(a, b) {
            var c = JSON.parse(b.responseText);
            "tilemap" === a.type ? this.cache.addTilemap(a.key, a.url, c, a.format) : "bitmapfont" === a.type ? this.cache.addBitmapFont(a.key, a.url, a.data, c, a.atlasType, a.xSpacing, a.ySpacing) : "json" === a.type ? this.cache.addJSON(a.key, a.url, c) : this.cache.addTextureAtlas(a.key, a.url, a.data, c, a.format),
            this.asyncComplete(a)
        },
        csvLoadComplete: function(a, b) {
            var c = b.responseText;
            this.cache.addTilemap(a.key, a.url, c, a.format),
            this.asyncComplete(a)
        },
        xmlLoadComplete: function(a, b) {
            var c = b.responseText,
                d = this.parseXml(c);
            if (!d) {
                var e = b.responseType || b.contentType;
                return console.warn("Phaser.Loader - " + a.key + ": invalid XML (" + e + ")"), void this.asyncComplete(a, "invalid XML")
            }
            "bitmapfont" === a.type ? this.cache.addBitmapFont(a.key, a.url, a.data, d, a.atlasType, a.xSpacing, a.ySpacing) : "textureatlas" === a.type ? this.cache.addTextureAtlas(a.key, a.url, a.data, d, a.format) : "xml" === a.type && this.cache.addXML(a.key, a.url, d),
            this.asyncComplete(a)
        },
        parseXml: function(a) {
            var b;
            try {
                if (window.DOMParser) {
                    var c = new DOMParser;
                    b = c.parseFromString(a, "text/xml")
                } else
                    b = new ActiveXObject("Microsoft.XMLDOM"),
                    b.async = "false",
                    b.loadXML(a)
            } catch (a) {
                b = null
            }
            return b && b.documentElement && !b.getElementsByTagName("parsererror").length ? b : null
        },
        updateProgress: function() {
            this.preloadSprite && (0 === this.preloadSprite.direction ? this.preloadSprite.rect.width = Math.floor(this.preloadSprite.width / 100 * this.progress) : this.preloadSprite.rect.height = Math.floor(this.preloadSprite.height / 100 * this.progress), this.preloadSprite.sprite ? this.preloadSprite.sprite.updateCrop() : this.preloadSprite = null)
        },
        totalLoadedFiles: function() {
            return this._loadedFileCount
        },
        totalQueuedFiles: function() {
            return this._totalFileCount - this._loadedFileCount
        },
        totalLoadedPacks: function() {
            return this._totalPackCount
        },
        totalQueuedPacks: function() {
            return this._totalPackCount - this._loadedPackCount
        }
    }, Object.defineProperty(c.Loader.prototype, "progressFloat", {
        get: function() {
            var a = this._loadedFileCount / this._totalFileCount * 100;
            return c.Math.clamp(a || 0, 0, 100)
        }
    }), Object.defineProperty(c.Loader.prototype, "progress", {
        get: function() {
            return Math.round(this.progressFloat)
        }
    }), c.Loader.prototype.constructor = c.Loader, c.LoaderParser = {
        bitmapFont: function(a, b, c, d) {
            return this.xmlBitmapFont(a, b, c, d)
        },
        xmlBitmapFont: function(a, b, c, d) {
            var e = {},
                f = a.getElementsByTagName("info")[0],
                g = a.getElementsByTagName("common")[0];
            e.font = f.getAttribute("face"),
            e.size = parseInt(f.getAttribute("size"), 10),
            e.lineHeight = parseInt(g.getAttribute("lineHeight"), 10) + d,
            e.chars = {};
            for (var h = a.getElementsByTagName("char"), i = 0; i < h.length; i++) {
                var j = parseInt(h[i].getAttribute("id"), 10);
                e.chars[j] = {
                    x: parseInt(h[i].getAttribute("x"), 10),
                    y: parseInt(h[i].getAttribute("y"), 10),
                    width: parseInt(h[i].getAttribute("width"), 10),
                    height: parseInt(h[i].getAttribute("height"), 10),
                    xOffset: parseInt(h[i].getAttribute("xoffset"), 10),
                    yOffset: parseInt(h[i].getAttribute("yoffset"), 10),
                    xAdvance: parseInt(h[i].getAttribute("xadvance"), 10) + c,
                    kerning: {}
                }
            }
            var k = a.getElementsByTagName("kerning");
            for (i = 0; i < k.length; i++) {
                var l = parseInt(k[i].getAttribute("first"), 10),
                    m = parseInt(k[i].getAttribute("second"), 10),
                    n = parseInt(k[i].getAttribute("amount"), 10);
                e.chars[m].kerning[l] = n
            }
            return this.finalizeBitmapFont(b, e)
        },
        jsonBitmapFont: function(a, b, c, d) {
            var e = {
                font: a.font.info._face,
                size: parseInt(a.font.info._size, 10),
                lineHeight: parseInt(a.font.common._lineHeight, 10) + d,
                chars: {}
            };
            return a.font.chars.char.forEach(function(a) {
                var b = parseInt(a._id, 10);
                e.chars[b] = {
                    x: parseInt(a._x, 10),
                    y: parseInt(a._y, 10),
                    width: parseInt(a._width, 10),
                    height: parseInt(a._height, 10),
                    xOffset: parseInt(a._xoffset, 10),
                    yOffset: parseInt(a._yoffset, 10),
                    xAdvance: parseInt(a._xadvance, 10) + c,
                    kerning: {}
                }
            }), a.font.kernings && a.font.kernings.kerning && a.font.kernings.kerning.forEach(function(a) {
                e.chars[a._second].kerning[a._first] = parseInt(a._amount, 10)
            }), this.finalizeBitmapFont(b, e)
        },
        finalizeBitmapFont: function(a, b) {
            return Object.keys(b.chars).forEach(function(d) {
                var e = b.chars[d];
                e.texture = new PIXI.Texture(a, new c.Rectangle(e.x, e.y, e.width, e.height))
            }), b
        }
    }, c.AudioSprite = function(a, b) {
        this.game = a,
        this.key = b,
        this.config = this.game.cache.getJSON(b + "-audioatlas"),
        this.autoplayKey = null,
        this.autoplay = !1,
        this.sounds = {};
        for (var c in this.config.spritemap) {
            var d = this.config.spritemap[c],
                e = this.game.add.sound(this.key);
            e.addMarker(c, d.start, d.end - d.start, null, d.loop),
            this.sounds[c] = e
        }
        this.config.autoplay && (this.autoplayKey = this.config.autoplay, this.play(this.autoplayKey), this.autoplay = this.sounds[this.autoplayKey])
    }, c.AudioSprite.prototype = {
        play: function(a, b) {
            return void 0 === b && (b = 1), this.sounds[a].play(a, null, b)
        },
        stop: function(a) {
            if (a)
                this.sounds[a].stop();
            else
                for (var b in this.sounds)
                    this.sounds[b].stop()
        },
        get: function(a) {
            return this.sounds[a]
        }
    }, c.AudioSprite.prototype.constructor = c.AudioSprite, c.Sound = function(a, b, d, e, f) {
        void 0 === d && (d = 1),
        void 0 === e && (e = !1),
        void 0 === f && (f = a.sound.connectToMaster),
        this.game = a,
        this.name = b,
        this.key = b,
        this.loop = e,
        this.markers = {},
        this.context = null,
        this.autoplay = !1,
        this.totalDuration = 0,
        this.startTime = 0,
        this.currentTime = 0,
        this.duration = 0,
        this.durationMS = 0,
        this.position = 0,
        this.stopTime = 0,
        this.paused = !1,
        this.pausedPosition = 0,
        this.pausedTime = 0,
        this.isPlaying = !1,
        this.currentMarker = "",
        this.fadeTween = null,
        this.pendingPlayback = !1,
        this.override = !1,
        this.allowMultiple = !1,
        this.usingWebAudio = this.game.sound.usingWebAudio,
        this.usingAudioTag = this.game.sound.usingAudioTag,
        this.externalNode = null,
        this.masterGainNode = null,
        this.gainNode = null,
        this._sound = null,
        this.usingWebAudio ? (this.context = this.game.sound.context, this.masterGainNode = this.game.sound.masterGain, void 0 === this.context.createGain ? this.gainNode = this.context.createGainNode() : this.gainNode = this.context.createGain(), this.gainNode.gain.value = d * this.game.sound.volume, f && this.gainNode.connect(this.masterGainNode)) : this.usingAudioTag && (this.game.cache.getSound(b) && this.game.cache.isSoundReady(b) ? (this._sound = this.game.cache.getSoundData(b), this.totalDuration = 0, this._sound.duration && (this.totalDuration = this._sound.duration)) : this.game.cache.onSoundUnlock.add(this.soundHasUnlocked, this)),
        this.onDecoded = new c.Signal,
        this.onPlay = new c.Signal,
        this.onPause = new c.Signal,
        this.onResume = new c.Signal,
        this.onLoop = new c.Signal,
        this.onStop = new c.Signal,
        this.onMute = new c.Signal,
        this.onMarkerComplete = new c.Signal,
        this.onFadeComplete = new c.Signal,
        this._volume = d,
        this._buffer = null,
        this._muted = !1,
        this._tempMarker = 0,
        this._tempPosition = 0,
        this._tempVolume = 0,
        this._tempPause = 0,
        this._muteVolume = 0,
        this._tempLoop = 0,
        this._paused = !1,
        this._onDecodedEventDispatched = !1
    }, c.Sound.prototype = {
        soundHasUnlocked: function(a) {
            a === this.key && (this._sound = this.game.cache.getSoundData(this.key), this.totalDuration = this._sound.duration)
        },
        addMarker: function(a, b, c, d, e) {
            void 0 !== c && null !== c || (c = 1),
            void 0 !== d && null !== d || (d = 1),
            void 0 === e && (e = !1),
            this.markers[a] = {
                name: a,
                start: b,
                stop: b + c,
                volume: d,
                duration: c,
                durationMS: 1e3 * c,
                loop: e
            }
        },
        removeMarker: function(a) {
            delete this.markers[a]
        },
        onEndedHandler: function() {
            this._sound.onended = null,
            this.isPlaying = !1,
            this.currentTime = this.durationMS,
            this.stop()
        },
        update: function() {
            return this.game.cache.checkSoundKey(this.key) ? (this.isDecoded && !this._onDecodedEventDispatched && (this.onDecoded.dispatch(this), this._onDecodedEventDispatched = !0), this.pendingPlayback && this.game.cache.isSoundReady(this.key) && (this.pendingPlayback = !1, this.play(this._tempMarker, this._tempPosition, this._tempVolume, this._tempLoop)), void (this.isPlaying && (this.currentTime = this.game.time.time - this.startTime, this.currentTime >= this.durationMS && (this.usingWebAudio ? this.loop ? (this.onLoop.dispatch(this), this.isPlaying = !1, "" === this.currentMarker ? (this.currentTime = 0, this.startTime = this.game.time.time, this.isPlaying = !0) : (this.onMarkerComplete.dispatch(this.currentMarker, this), this.play(this.currentMarker, 0, this.volume, !0, !0))) : "" !== this.currentMarker && this.stop() : this.loop ? (this.onLoop.dispatch(this), "" === this.currentMarker && (this.currentTime = 0, this.startTime = this.game.time.time), this.isPlaying = !1, this.play(this.currentMarker, 0, this.volume, !0, !0)) : this.stop())))) : void this.destroy()
        },
        loopFull: function(a) {
            return this.play(null, 0, a, !0)
        },
        play: function(a, b, c, d, e) {
            if (void 0 !== a && a !== !1 && null !== a || (a = ""), void 0 === e && (e = !0), this.isPlaying && !this.allowMultiple && !e && !this.override)
                return this;
            if (this._sound && this.isPlaying && !this.allowMultiple && (this.override || e)) {
                if (this.usingWebAudio) {
                    if (void 0 === this._sound.stop)
                        this._sound.noteOff(0);
                    else
                        try {
                            this._sound.stop(0)
                        } catch (a) {}
                    this.externalNode ? this._sound.disconnect(this.externalNode) : this.gainNode && this._sound.disconnect(this.gainNode)
                } else
                    this.usingAudioTag && (this._sound.pause(), this._sound.currentTime = 0);
                this.isPlaying = !1
            }
            if ("" === a && Object.keys(this.markers).length > 0)
                return this;
            if ("" !== a) {
                if (!this.markers[a])
                    return console.warn("Phaser.Sound.play: audio marker " + a + " doesn't exist"), this;
                this.currentMarker = a,
                this.position = this.markers[a].start,
                this.volume = this.markers[a].volume,
                this.loop = this.markers[a].loop,
                this.duration = this.markers[a].duration,
                this.durationMS = this.markers[a].durationMS,
                "undefined" != typeof c && (this.volume = c),
                "undefined" != typeof d && (this.loop = d),
                this._tempMarker = a,
                this._tempPosition = this.position,
                this._tempVolume = this.volume,
                this._tempLoop = this.loop
            } else
                b = b || 0,
                void 0 === c && (c = this._volume),
                void 0 === d && (d = this.loop),
                this.position = Math.max(0, b),
                this.volume = c,
                this.loop = d,
                this.duration = 0,
                this.durationMS = 0,
                this._tempMarker = a,
                this._tempPosition = b,
                this._tempVolume = c,
                this._tempLoop = d;
            return this.usingWebAudio ? this.game.cache.isSoundDecoded(this.key) ? (this._sound = this.context.createBufferSource(), this.externalNode ? this._sound.connect(this.externalNode) : this._sound.connect(this.gainNode), this._buffer = this.game.cache.getSoundData(this.key), this._sound.buffer = this._buffer, this.loop && "" === a && (this._sound.loop = !0), this.loop || "" !== a || (this._sound.onended = this.onEndedHandler.bind(this)), this.totalDuration = this._sound.buffer.duration, 0 === this.duration && (this.duration = this.totalDuration, this.durationMS = Math.ceil(1e3 * this.totalDuration)), void 0 === this._sound.start ? this._sound.noteGrainOn(0, this.position, this.duration) : this.loop && "" === a ? this._sound.start(0, 0) : this._sound.start(0, this.position, this.duration), this.isPlaying = !0, this.startTime = this.game.time.time, this.currentTime = 0, this.stopTime = this.startTime + this.durationMS, this.onPlay.dispatch(this)) : (this.pendingPlayback = !0, this.game.cache.getSound(this.key) && this.game.cache.getSound(this.key).isDecoding === !1 && this.game.sound.decode(this.key, this)) : this.game.cache.getSound(this.key) && this.game.cache.getSound(this.key).locked ? (this.game.cache.reloadSound(this.key), this.pendingPlayback = !0) : this._sound && (this.game.device.cocoonJS || 4 === this._sound.readyState) ? (this._sound.play(), this.totalDuration = this._sound.duration, 0 === this.duration && (this.duration = this.totalDuration, this.durationMS = 1e3 * this.totalDuration), this._sound.currentTime = this.position, this._sound.muted = this._muted, this._muted || this.game.sound.mute ? this._sound.volume = 0 : this._sound.volume = this._volume, this.isPlaying = !0, this.startTime = this.game.time.time, this.currentTime = 0, this.stopTime = this.startTime + this.durationMS, this.onPlay.dispatch(this)) : this.pendingPlayback = !0, this
        },
        restart: function(a, b, c, d) {
            a = a || "",
            b = b || 0,
            c = c || 1,
            void 0 === d && (d = !1),
            this.play(a, b, c, d, !0)
        },
        pause: function() {
            this.isPlaying && this._sound && (this.paused = !0, this.pausedPosition = this.currentTime, this.pausedTime = this.game.time.time, this._tempPause = this._sound.currentTime, this.onPause.dispatch(this), this.stop())
        },
        resume: function() {
            if (this.paused && this._sound) {
                if (this.usingWebAudio) {
                    var a = Math.max(0, this.position + this.pausedPosition / 1e3);
                    this._sound = this.context.createBufferSource(),
                    this._sound.buffer = this._buffer,
                    this.externalNode ? this._sound.connect(this.externalNode) : this._sound.connect(this.gainNode),
                    this.loop && (this._sound.loop = !0),
                    this.loop || "" !== this.currentMarker || (this._sound.onended = this.onEndedHandler.bind(this));
                    var b = this.duration - this.pausedPosition / 1e3;
                    void 0 === this._sound.start ? this._sound.noteGrainOn(0, a, b) : this.loop && this.game.device.chrome ? 42 === this.game.device.chromeVersion ? this._sound.start(0) : this._sound.start(0, a) : this._sound.start(0, a, b)
                } else
                    this._sound.currentTime = this._tempPause,
                    this._sound.play();
                this.isPlaying = !0,
                this.paused = !1,
                this.startTime += this.game.time.time - this.pausedTime,
                this.onResume.dispatch(this)
            }
        },
        stop: function() {
            if (this.isPlaying && this._sound)
                if (this.usingWebAudio) {
                    if (void 0 === this._sound.stop)
                        this._sound.noteOff(0);
                    else
                        try {
                            this._sound.stop(0)
                        } catch (a) {}
                    this.externalNode ? this._sound.disconnect(this.externalNode) : this.gainNode && this._sound.disconnect(this.gainNode)
                } else
                    this.usingAudioTag && (this._sound.pause(), this._sound.currentTime = 0);
            if (this.pendingPlayback = !1, this.isPlaying = !1, !this.paused) {
                var a = this.currentMarker;
                "" !== this.currentMarker && this.onMarkerComplete.dispatch(this.currentMarker, this),
                this.currentMarker = "",
                null !== this.fadeTween && this.fadeTween.stop(),
                this.onStop.dispatch(this, a)
            }
        },
        fadeIn: function(a, b, c) {
            void 0 === b && (b = !1),
            void 0 === c && (c = this.currentMarker),
            this.paused || (this.play(c, 0, 0, b), this.fadeTo(a, 1))
        },
        fadeOut: function(a) {
            this.fadeTo(a, 0)
        },
        fadeTo: function(a, b) {
            if (this.isPlaying && !this.paused && b !== this.volume) {
                if (void 0 === a && (a = 1e3), void 0 === b)
                    return void console.warn("Phaser.Sound.fadeTo: No Volume Specified.");
                this.fadeTween = this.game.add.tween(this).to({
                    volume: b
                }, a, c.Easing.Linear.None, !0),
                this.fadeTween.onComplete.add(this.fadeComplete, this)
            }
        },
        fadeComplete: function() {
            this.onFadeComplete.dispatch(this, this.volume),
            0 === this.volume && this.stop()
        },
        updateGlobalVolume: function(a) {
            this.usingAudioTag && this._sound && (this._sound.volume = a * this._volume)
        },
        destroy: function(a) {
            void 0 === a && (a = !0),
            this.stop(),
            a ? this.game.sound.remove(this) : (this.markers = {}, this.context = null, this._buffer = null, this.externalNode = null, this.onDecoded.dispose(), this.onPlay.dispose(), this.onPause.dispose(), this.onResume.dispose(), this.onLoop.dispose(), this.onStop.dispose(), this.onMute.dispose(), this.onMarkerComplete.dispose())
        }
    }, c.Sound.prototype.constructor = c.Sound, Object.defineProperty(c.Sound.prototype, "isDecoding", {
        get: function() {
            return this.game.cache.getSound(this.key).isDecoding
        }
    }), Object.defineProperty(c.Sound.prototype, "isDecoded", {
        get: function() {
            return this.game.cache.isSoundDecoded(this.key)
        }
    }), Object.defineProperty(c.Sound.prototype, "mute", {
        get: function() {
            return this._muted || this.game.sound.mute
        },
        set: function(a) {
            a = a || !1,
            a !== this._muted && (a ? (this._muted = !0, this._muteVolume = this._tempVolume, this.usingWebAudio ? this.gainNode.gain.value = 0 : this.usingAudioTag && this._sound && (this._sound.volume = 0)) : (this._muted = !1, this.usingWebAudio ? this.gainNode.gain.value = this._muteVolume : this.usingAudioTag && this._sound && (this._sound.volume = this._muteVolume)), this.onMute.dispatch(this))
        }
    }), Object.defineProperty(c.Sound.prototype, "volume", {
        get: function() {
            return this._volume
        },
        set: function(a) {
            return this.game.device.firefox && this.usingAudioTag && (a = this.game.math.clamp(a, 0, 1)), this._muted ? void (this._muteVolume = a) : (this._tempVolume = a, this._volume = a, void (this.usingWebAudio ? this.gainNode.gain.value = a : this.usingAudioTag && this._sound && (this._sound.volume = a)))
        }
    }), c.SoundManager = function(a) {
        this.game = a,
        this.onSoundDecode = new c.Signal,
        this.onVolumeChange = new c.Signal,
        this.onMute = new c.Signal,
        this.onUnMute = new c.Signal,
        this.context = null,
        this.usingWebAudio = !1,
        this.usingAudioTag = !1,
        this.noAudio = !1,
        this.connectToMaster = !0,
        this.touchLocked = !1,
        this.channels = 32,
        this.muteOnPause = !0,
        this._codeMuted = !1,
        this._muted = !1,
        this._unlockSource = null,
        this._volume = 1,
        this._sounds = [],
        this._watchList = new c.ArraySet,
        this._watching = !1,
        this._watchCallback = null,
        this._watchContext = null
    }, c.SoundManager.prototype = {
        boot: function() {
            if (this.game.device.iOS && this.game.device.webAudio === !1 && (this.channels = 1), window.PhaserGlobal) {
                if (window.PhaserGlobal.disableAudio === !0)
                    return this.noAudio = !0, void (this.touchLocked = !1);
                if (window.PhaserGlobal.disableWebAudio === !0)
                    return this.usingAudioTag = !0, void (this.touchLocked = !1)
            }
            if (window.PhaserGlobal && window.PhaserGlobal.audioContext)
                this.context = window.PhaserGlobal.audioContext;
            else if (window.AudioContext)
                try {
                    this.context = new window.AudioContext
                } catch (a) {
                    this.context = null,
                    this.usingWebAudio = !1,
                    this.touchLocked = !1
                }
            else if (window.webkitAudioContext)
                try {
                    this.context = new window.webkitAudioContext
                } catch (a) {
                    this.context = null,
                    this.usingWebAudio = !1,
                    this.touchLocked = !1
                }
            if (null === this.context) {
                if (void 0 === window.Audio)
                    return void (this.noAudio = !0);
                this.usingAudioTag = !0
            } else
                this.usingWebAudio = !0,
                void 0 === this.context.createGain ? this.masterGain = this.context.createGainNode() : this.masterGain = this.context.createGain(),
                this.masterGain.gain.value = 1,
                this.masterGain.connect(this.context.destination);
            this.noAudio || (!this.game.device.cocoonJS && this.game.device.iOS || window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock) && this.setTouchLock()
        },
        setTouchLock: function() {
            this.noAudio || window.PhaserGlobal && window.PhaserGlobal.disableAudio === !0 || (this.game.device.iOSVersion > 8 ? this.game.input.touch.addTouchLockCallback(this.unlock, this, !0) : this.game.input.touch.addTouchLockCallback(this.unlock, this), this.touchLocked = !0)
        },
        unlock: function() {
            if (this.noAudio || !this.touchLocked || null !== this._unlockSource)
                return !0;
            if (this.usingAudioTag)
                this.touchLocked = !1,
                this._unlockSource = null;
            else if (this.usingWebAudio) {
                var a = this.context.createBuffer(1, 1, 22050);
                this._unlockSource = this.context.createBufferSource(),
                this._unlockSource.buffer = a,
                this._unlockSource.connect(this.context.destination),
                void 0 === this._unlockSource.start ? this._unlockSource.noteOn(0) : this._unlockSource.start(0)
            }
            return !0
        },
        stopAll: function() {
            if (!this.noAudio)
                for (var a = 0; a < this._sounds.length; a++)
                    this._sounds[a] && this._sounds[a].stop()
        },
        pauseAll: function() {
            if (!this.noAudio)
                for (var a = 0; a < this._sounds.length; a++)
                    this._sounds[a] && this._sounds[a].pause()
        },
        resumeAll: function() {
            if (!this.noAudio)
                for (var a = 0; a < this._sounds.length; a++)
                    this._sounds[a] && this._sounds[a].resume()
        },
        decode: function(a, b) {
            b = b || null;
            var c = this.game.cache.getSoundData(a);
            if (c && this.game.cache.isSoundDecoded(a) === !1) {
                this.game.cache.updateSound(a, "isDecoding", !0);
                var d = this;
                try {
                    this.context.decodeAudioData(c, function(c) {
                        c && (d.game.cache.decodedSound(a, c), d.onSoundDecode.dispatch(a, b))
                    })
                } catch (a) {}
            }
        },
        setDecodedCallback: function(a, b, d) {
            "string" == typeof a && (a = [a]),
            this._watchList.reset();
            for (var e = 0; e < a.length; e++)
                a[e] instanceof c.Sound ? this.game.cache.isSoundDecoded(a[e].key) || this._watchList.add(a[e].key) : this.game.cache.isSoundDecoded(a[e]) || this._watchList.add(a[e]);
            0 === this._watchList.total ? (this._watching = !1, b.call(d)) : (this._watching = !0, this._watchCallback = b, this._watchContext = d)
        },
        update: function() {
            if (!this.noAudio) {
                !this.touchLocked || null === this._unlockSource || this._unlockSource.playbackState !== this._unlockSource.PLAYING_STATE && this._unlockSource.playbackState !== this._unlockSource.FINISHED_STATE || (this.touchLocked = !1, this._unlockSource = null);
                for (var a = 0; a < this._sounds.length; a++)
                    this._sounds[a].update();
                if (this._watching) {
                    for (var b = this._watchList.first; b;)
                        this.game.cache.isSoundDecoded(b) && this._watchList.remove(b),
                        b = this._watchList.next;
                    0 === this._watchList.total && (this._watching = !1, this._watchCallback.call(this._watchContext))
                }
            }
        },
        add: function(a, b, d, e) {
            void 0 === b && (b = 1),
            void 0 === d && (d = !1),
            void 0 === e && (e = this.connectToMaster);
            var f = new c.Sound(this.game, a, b, d, e);
            return this._sounds.push(f), f
        },
        addSprite: function(a) {
            var b = new c.AudioSprite(this.game, a);
            return b
        },
        remove: function(a) {
            for (var b = this._sounds.length; b--;)
                if (this._sounds[b] === a)
                    return this._sounds[b].destroy(!1), this._sounds.splice(b, 1), !0;
            return !1
        },
        removeByKey: function(a) {
            for (var b = this._sounds.length, c = 0; b--;)
                this._sounds[b].key === a && (this._sounds[b].destroy(!1), this._sounds.splice(b, 1), c++);
            return c
        },
        play: function(a, b, c) {
            if (!this.noAudio) {
                var d = this.add(a, b, c);
                return d.play(), d
            }
        },
        setMute: function() {
            if (!this._muted) {
                this._muted = !0,
                this.usingWebAudio && (this._muteVolume = this.masterGain.gain.value, this.masterGain.gain.value = 0);
                for (var a = 0; a < this._sounds.length; a++)
                    this._sounds[a].usingAudioTag && (this._sounds[a].mute = !0);
                this.onMute.dispatch()
            }
        },
        unsetMute: function() {
            if (this._muted && !this._codeMuted) {
                this._muted = !1,
                this.usingWebAudio && (this.masterGain.gain.value = this._muteVolume);
                for (var a = 0; a < this._sounds.length; a++)
                    this._sounds[a].usingAudioTag && (this._sounds[a].mute = !1);
                this.onUnMute.dispatch()
            }
        },
        destroy: function() {
            this.stopAll();
            for (var a = 0; a < this._sounds.length; a++)
                this._sounds[a] && this._sounds[a].destroy();
            this._sounds = [],
            this.onSoundDecode.dispose(),
            this.context && (window.PhaserGlobal ? window.PhaserGlobal.audioContext = this.context : this.context.close && this.context.close())
        }
    }, c.SoundManager.prototype.constructor = c.SoundManager, Object.defineProperty(c.SoundManager.prototype, "mute", {
        get: function() {
            return this._muted
        },
        set: function(a) {
            if (a = a || !1) {
                if (this._muted)
                    return;
                this._codeMuted = !0,
                this.setMute()
            } else {
                if (!this._muted)
                    return;
                this._codeMuted = !1,
                this.unsetMute()
            }
        }
    }), Object.defineProperty(c.SoundManager.prototype, "volume", {
        get: function() {
            return this._volume
        },
        set: function(a) {
            if (a < 0 ? a = 0 : a > 1 && (a = 1), this._volume !== a) {
                if (this._volume = a, this.usingWebAudio)
                    this.masterGain.gain.value = a;
                else
                    for (var b = 0; b < this._sounds.length; b++)
                        this._sounds[b].usingAudioTag && this._sounds[b].updateGlobalVolume(a);
                this.onVolumeChange.dispatch(a)
            }
        }
    }), c.ScaleManager = function(a, b, d) {
        this.game = a,
        this.dom = c.DOM,
        this.grid = null,
        this.width = 0,
        this.height = 0,
        this.minWidth = null,
        this.maxWidth = null,
        this.minHeight = null,
        this.maxHeight = null,
        this.offset = new c.Point,
        this.forceLandscape = !1,
        this.forcePortrait = !1,
        this.incorrectOrientation = !1,
        this._pageAlignHorizontally = !1,
        this._pageAlignVertically = !1,
        this.onOrientationChange = new c.Signal,
        this.enterIncorrectOrientation = new c.Signal,
        this.leaveIncorrectOrientation = new c.Signal,
        this.hasPhaserSetFullScreen = !1,
        this.fullScreenTarget = null,
        this._createdFullScreenTarget = null,
        this.onFullScreenInit = new c.Signal,
        this.onFullScreenChange = new c.Signal,
        this.onFullScreenError = new c.Signal,
        this.screenOrientation = this.dom.getScreenOrientation(),
        this.scaleFactor = new c.Point(1, 1),
        this.scaleFactorInversed = new c.Point(1, 1),
        this.margin = {
            left: 0,
            top: 0,
            right: 0,
            bottom: 0,
            x: 0,
            y: 0
        },
        this.bounds = new c.Rectangle,
        this.aspectRatio = 0,
        this.sourceAspectRatio = 0,
        this.event = null,
        this.windowConstraints = {
            right: "layout",
            bottom: ""
        },
        this.compatibility = {
            supportsFullScreen: !1,
            orientationFallback: null,
            noMargins: !1,
            scrollTo: null,
            forceMinimumDocumentHeight: !1,
            canExpandParent: !0,
            clickTrampoline: ""
        },
        this._scaleMode = c.ScaleManager.NO_SCALE,
        this._fullScreenScaleMode = c.ScaleManager.NO_SCALE,
        this.parentIsWindow = !1,
        this.parentNode = null,
        this.parentScaleFactor = new c.Point(1, 1),
        this.trackParentInterval = 2e3,
        this.onSizeChange = new c.Signal,
        this.onResize = null,
        this.onResizeContext = null,
        this._pendingScaleMode = null,
        this._fullScreenRestore = null,
        this._gameSize = new c.Rectangle,
        this._userScaleFactor = new c.Point(1, 1),
        this._userScaleTrim = new c.Point(0, 0),
        this._lastUpdate = 0,
        this._updateThrottle = 0,
        this._updateThrottleReset = 100,
        this._parentBounds = new c.Rectangle,
        this._tempBounds = new c.Rectangle,
        this._lastReportedCanvasSize = new c.Rectangle,
        this._lastReportedGameSize = new c.Rectangle,
        this._booted = !1,
        a.config && this.parseConfig(a.config),
        this.setupScale(b, d)
    }, c.ScaleManager.EXACT_FIT = 0, c.ScaleManager.NO_SCALE = 1, c.ScaleManager.SHOW_ALL = 2, c.ScaleManager.RESIZE = 3, c.ScaleManager.USER_SCALE = 4, c.ScaleManager.prototype = {
        boot: function() {
            var a = this.compatibility;
            a.supportsFullScreen = this.game.device.fullscreen && !this.game.device.cocoonJS,
            this.game.device.iPad || this.game.device.webApp || this.game.device.desktop || (this.game.device.android && !this.game.device.chrome ? a.scrollTo = new c.Point(0, 1) : a.scrollTo = new c.Point(0, 0)),
            this.game.device.desktop ? (a.orientationFallback = "screen", a.clickTrampoline = "when-not-mouse") : (a.orientationFallback = "", a.clickTrampoline = "");
            var b = this;
            this._orientationChange = function(a) {
                return b.orientationChange(a)
            },
            this._windowResize = function(a) {
                return b.windowResize(a)
            },
            window.addEventListener("orientationchange", this._orientationChange, !1),
            window.addEventListener("resize", this._windowResize, !1),
            this.compatibility.supportsFullScreen && (this._fullScreenChange = function(a) {
                return b.fullScreenChange(a)
            }, this._fullScreenError = function(a) {
                return b.fullScreenError(a)
            }, document.addEventListener("webkitfullscreenchange", this._fullScreenChange, !1), document.addEventListener("mozfullscreenchange", this._fullScreenChange, !1), document.addEventListener("MSFullscreenChange", this._fullScreenChange, !1), document.addEventListener("fullscreenchange", this._fullScreenChange, !1), document.addEventListener("webkitfullscreenerror", this._fullScreenError, !1), document.addEventListener("mozfullscreenerror", this._fullScreenError, !1), document.addEventListener("MSFullscreenError", this._fullScreenError, !1), document.addEventListener("fullscreenerror", this._fullScreenError, !1)),
            this.game.onResume.add(this._gameResumed, this),
            this.dom.getOffset(this.game.canvas, this.offset),
            this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height),
            this.setGameSize(this.game.width, this.game.height),
            this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback),
            c.FlexGrid && (this.grid = new c.FlexGrid(this, this.width, this.height)),
            this._booted = !0,
            null !== this._pendingScaleMode && (this.scaleMode = this._pendingScaleMode, this._pendingScaleMode = null)
        },
        parseConfig: function(a) {
            void 0 !== a.scaleMode && (this._booted ? this.scaleMode = a.scaleMode : this._pendingScaleMode = a.scaleMode),
            void 0 !== a.fullScreenScaleMode && (this.fullScreenScaleMode = a.fullScreenScaleMode),
            a.fullScreenTarget && (this.fullScreenTarget = a.fullScreenTarget)
        },
        setupScale: function(a, b) {
            var d,
                e = new c.Rectangle;
            "" !== this.game.parent && ("string" == typeof this.game.parent ? d = document.getElementById(this.game.parent) : this.game.parent && 1 === this.game.parent.nodeType && (d = this.game.parent)),
            d ? (this.parentNode = d, this.parentIsWindow = !1, this.getParentBounds(this._parentBounds), e.width = this._parentBounds.width, e.height = this._parentBounds.height, this.offset.set(this._parentBounds.x, this._parentBounds.y)) : (this.parentNode = null, this.parentIsWindow = !0, e.width = this.dom.visualBounds.width, e.height = this.dom.visualBounds.height, this.offset.set(0, 0));
            var f = 0,
                g = 0;
            "number" == typeof a ? f = a : (this.parentScaleFactor.x = parseInt(a, 10) / 100, f = e.width * this.parentScaleFactor.x),
            "number" == typeof b ? g = b : (this.parentScaleFactor.y = parseInt(b, 10) / 100, g = e.height * this.parentScaleFactor.y),
            f = Math.floor(f),
            g = Math.floor(g),
            this._gameSize.setTo(0, 0, f, g),
            this.updateDimensions(f, g, !1)
        },
        _gameResumed: function() {
            this.queueUpdate(!0)
        },
        setGameSize: function(a, b) {
            this._gameSize.setTo(0, 0, a, b),
            this.currentScaleMode !== c.ScaleManager.RESIZE && this.updateDimensions(a, b, !0),
            this.queueUpdate(!0)
        },
        setUserScale: function(a, b, c, d) {
            this._userScaleFactor.setTo(a, b),
            this._userScaleTrim.setTo(0 | c, 0 | d),
            this.queueUpdate(!0)
        },
        setResizeCallback: function(a, b) {
            this.onResize = a,
            this.onResizeContext = b
        },
        signalSizeChange: function() {
            if (!c.Rectangle.sameDimensions(this, this._lastReportedCanvasSize) || !c.Rectangle.sameDimensions(this.game, this._lastReportedGameSize)) {
                var a = this.width,
                    b = this.height;
                this._lastReportedCanvasSize.setTo(0, 0, a, b),
                this._lastReportedGameSize.setTo(0, 0, this.game.width, this.game.height),
                this.grid && this.grid.onResize(a, b),
                this.onSizeChange.dispatch(this, a, b),
                this.currentScaleMode === c.ScaleManager.RESIZE && (this.game.state.resize(a, b), this.game.load.resize(a, b))
            }
        },
        setMinMax: function(a, b, c, d) {
            this.minWidth = a,
            this.minHeight = b,
            "undefined" != typeof c && (this.maxWidth = c),
            "undefined" != typeof d && (this.maxHeight = d)
        },
        preUpdate: function() {
            if (!(this.game.time.time < this._lastUpdate + this._updateThrottle)) {
                var a = this._updateThrottle;
                this._updateThrottleReset = a >= 400 ? 0 : 100,
                this.dom.getOffset(this.game.canvas, this.offset);
                var b = this._parentBounds.width,
                    d = this._parentBounds.height,
                    e = this.getParentBounds(this._parentBounds),
                    f = e.width !== b || e.height !== d,
                    g = this.updateOrientationState();
                (f || g) && (this.onResize && this.onResize.call(this.onResizeContext, this, e), this.updateLayout(), this.signalSizeChange());
                var h = 2 * this._updateThrottle;
                this._updateThrottle < a && (h = Math.min(a, this._updateThrottleReset)),
                this._updateThrottle = c.Math.clamp(h, 25, this.trackParentInterval),
                this._lastUpdate = this.game.time.time
            }
        },
        pauseUpdate: function() {
            this.preUpdate(),
            this._updateThrottle = this.trackParentInterval
        },
        updateDimensions: function(a, b, c) {
            this.width = a * this.parentScaleFactor.x,
            this.height = b * this.parentScaleFactor.y,
            this.game.width = this.width,
            this.game.height = this.height,
            this.sourceAspectRatio = this.width / this.height,
            this.updateScalingAndBounds(),
            c && (this.game.renderer.resize(this.width, this.height), this.game.camera.setSize(this.width, this.height), this.game.world.resize(this.width, this.height))
        },
        updateScalingAndBounds: function() {
            this.scaleFactor.x = this.game.width / this.width,
            this.scaleFactor.y = this.game.height / this.height,
            this.scaleFactorInversed.x = this.width / this.game.width,
            this.scaleFactorInversed.y = this.height / this.game.height,
            this.aspectRatio = this.width / this.height,
            this.game.canvas && this.dom.getOffset(this.game.canvas, this.offset),
            this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height),
            this.game.input && this.game.input.scale && this.game.input.scale.setTo(this.scaleFactor.x, this.scaleFactor.y)
        },
        forceOrientation: function(a, b) {
            void 0 === b && (b = !1),
            this.forceLandscape = a,
            this.forcePortrait = b,
            this.queueUpdate(!0)
        },
        classifyOrientation: function(a) {
            return "portrait-primary" === a || "portrait-secondary" === a ? "portrait" : "landscape-primary" === a || "landscape-secondary" === a ? "landscape" : null
        },
        updateOrientationState: function() {
            var a = this.screenOrientation,
                b = this.incorrectOrientation;
            this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback),
            this.incorrectOrientation = this.forceLandscape && !this.isLandscape || this.forcePortrait && !this.isPortrait;
            var c = a !== this.screenOrientation,
                d = b !== this.incorrectOrientation;
            return d && (this.incorrectOrientation ? this.enterIncorrectOrientation.dispatch() : this.leaveIncorrectOrientation.dispatch()), (c || d) && this.onOrientationChange.dispatch(this, a, b), c || d
        },
        orientationChange: function(a) {
            this.event = a,
            this.queueUpdate(!0)
        },
        windowResize: function(a) {
            this.event = a,
            this.queueUpdate(!0)
        },
        scrollTop: function() {
            var a = this.compatibility.scrollTo;
            a && window.scrollTo(a.x, a.y)
        },
        refresh: function() {
            this.scrollTop(),
            this.queueUpdate(!0)
        },
        updateLayout: function() {
            var a = this.currentScaleMode;
            if (a === c.ScaleManager.RESIZE)
                return void this.reflowGame();
            if (this.scrollTop(), this.compatibility.forceMinimumDocumentHeight && (document.documentElement.style.minHeight = window.innerHeight + "px"), this.incorrectOrientation ? this.setMaximum() : a === c.ScaleManager.EXACT_FIT ? this.setExactFit() : a === c.ScaleManager.SHOW_ALL ? !this.isFullScreen && this.boundingParent && this.compatibility.canExpandParent ? (this.setShowAll(!0), this.resetCanvas(), this.setShowAll()) : this.setShowAll() : a === c.ScaleManager.NO_SCALE ? (this.width = this.game.width, this.height = this.game.height) : a === c.ScaleManager.USER_SCALE && (this.width = this.game.width * this._userScaleFactor.x - this._userScaleTrim.x, this.height = this.game.height * this._userScaleFactor.y - this._userScaleTrim.y), !this.compatibility.canExpandParent && (a === c.ScaleManager.SHOW_ALL || a === c.ScaleManager.USER_SCALE)) {
                var b = this.getParentBounds(this._tempBounds);
                this.width = Math.min(this.width, b.width),
                this.height = Math.min(this.height, b.height)
            }
            this.width = 0 | this.width,
            this.height = 0 | this.height,
            this.reflowCanvas()
        },
        getParentBounds: function(a) {
            var b = a || new c.Rectangle,
                d = this.boundingParent,
                e = this.dom.visualBounds,
                f = this.dom.layoutBounds;
            if (d) {
                var g = d.getBoundingClientRect(),
                    h = d.offsetParent ? d.offsetParent.getBoundingClientRect() : d.getBoundingClientRect();
                b.setTo(g.left - h.left, g.top - h.top, g.width, g.height);
                var i = this.windowConstraints;
                if (i.right) {
                    var j = "layout" === i.right ? f : e;
                    b.right = Math.min(b.right, j.width)
                }
                if (i.bottom) {
                    var j = "layout" === i.bottom ? f : e;
                    b.bottom = Math.min(b.bottom, j.height)
                }
            } else
                b.setTo(0, 0, e.width, e.height);
            return b.setTo(Math.round(b.x), Math.round(b.y), Math.round(b.width), Math.round(b.height)), b
        },
        alignCanvas: function(a, b) {
            var c = this.getParentBounds(this._tempBounds),
                d = this.game.canvas,
                e = this.margin;
            if (a) {
                e.left = e.right = 0;
                var f = d.getBoundingClientRect();
                if (this.width < c.width && !this.incorrectOrientation) {
                    var g = f.left - c.x,
                        h = c.width / 2 - this.width / 2;
                    h = Math.max(h, 0);
                    var i = h - g;
                    e.left = Math.round(i)
                }
                d.style.marginLeft = e.left + "px",
                0 !== e.left && (e.right = -(c.width - f.width - e.left), d.style.marginRight = e.right + "px")
            }
            if (b) {
                e.top = e.bottom = 0;
                var f = d.getBoundingClientRect();
                if (this.height < c.height && !this.incorrectOrientation) {
                    var g = f.top - c.y,
                        h = c.height / 2 - this.height / 2;
                    h = Math.max(h, 0);
                    var i = h - g;
                    e.top = Math.round(i)
                }
                d.style.marginTop = e.top + "px",
                0 !== e.top && (e.bottom = -(c.height - f.height - e.top), d.style.marginBottom = e.bottom + "px")
            }
            e.x = e.left,
            e.y = e.top
        },
        reflowGame: function() {
            this.resetCanvas("", "");
            var a = this.getParentBounds(this._tempBounds);
            this.updateDimensions(a.width, a.height, !0)
        },
        reflowCanvas: function() {
            this.incorrectOrientation || (this.width = c.Math.clamp(this.width, this.minWidth || 0, this.maxWidth || this.width), this.height = c.Math.clamp(this.height, this.minHeight || 0, this.maxHeight || this.height)),
            this.resetCanvas(),
            this.compatibility.noMargins || (this.isFullScreen && this._createdFullScreenTarget ? this.alignCanvas(!0, !0) : this.alignCanvas(this.pageAlignHorizontally, this.pageAlignVertically)),
            this.updateScalingAndBounds()
        },
        resetCanvas: function(a, b) {
            void 0 === a && (a = this.width + "px"),
            void 0 === b && (b = this.height + "px");
            var c = this.game.canvas;
            this.compatibility.noMargins || (c.style.marginLeft = "", c.style.marginTop = "", c.style.marginRight = "", c.style.marginBottom = ""),
            c.style.width = a,
            c.style.height = b
        },
        queueUpdate: function(a) {
            a && (this._parentBounds.width = 0, this._parentBounds.height = 0),
            this._updateThrottle = this._updateThrottleReset
        },
        reset: function(a) {
            a && this.grid && this.grid.reset()
        },
        setMaximum: function() {
            this.width = this.dom.visualBounds.width,
            this.height = this.dom.visualBounds.height
        },
        setShowAll: function(a) {
            var b,
                c = this.getParentBounds(this._tempBounds),
                d = c.width,
                e = c.height;
            b = a ? Math.max(e / this.game.height, d / this.game.width) : Math.min(e / this.game.height, d / this.game.width),
            this.width = Math.round(this.game.width * b),
            this.height = Math.round(this.game.height * b)
        },
        setExactFit: function() {
            var a = this.getParentBounds(this._tempBounds);
            this.width = a.width,
            this.height = a.height,
            this.isFullScreen || (this.maxWidth && (this.width = Math.min(this.width, this.maxWidth)), this.maxHeight && (this.height = Math.min(this.height, this.maxHeight)))
        },
        createFullScreenTarget: function() {
            var a = document.createElement("div");
            return a.style.margin = "0", a.style.padding = "0", a.style.background = "#000", a
        },
        startFullScreen: function(a, b) {
            if (this.isFullScreen)
                return !1;
            if (!this.compatibility.supportsFullScreen) {
                var d = this;
                return void setTimeout(function() {
                    d.fullScreenError()
                }, 10)
            }
            if ("when-not-mouse" === this.compatibility.clickTrampoline) {
                var e = this.game.input;
                if (e.activePointer && e.activePointer !== e.mousePointer && (b || b !== !1))
                    return void e.activePointer.addClickTrampoline("startFullScreen", this.startFullScreen, this, [a, !1])
            }
            void 0 !== a && this.game.renderType === c.CANVAS && (this.game.stage.smoothed = a);
            var f = this.fullScreenTarget;
            f || (this.cleanupCreatedTarget(), this._createdFullScreenTarget = this.createFullScreenTarget(), f = this._createdFullScreenTarget);
            var g = {
                targetElement: f
            };
            if (this.hasPhaserSetFullScreen = !0, this.onFullScreenInit.dispatch(this, g), this._createdFullScreenTarget) {
                var h = this.game.canvas,
                    i = h.parentNode;
                i.insertBefore(f, h),
                f.appendChild(h)
            }
            return this.game.device.fullscreenKeyboard ? f[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT) : f[this.game.device.requestFullscreen](), !0
        },
        stopFullScreen: function() {
            return !(!this.isFullScreen || !this.compatibility.supportsFullScreen) && (this.hasPhaserSetFullScreen = !1, document[this.game.device.cancelFullscreen](), !0)
        },
        cleanupCreatedTarget: function() {
            var a = this._createdFullScreenTarget;
            if (a && a.parentNode) {
                var b = a.parentNode;
                b.insertBefore(this.game.canvas, a),
                b.removeChild(a)
            }
            this._createdFullScreenTarget = null
        },
        prepScreenMode: function(a) {
            var b = !!this._createdFullScreenTarget,
                d = this._createdFullScreenTarget || this.fullScreenTarget;
            a ? (b || this.fullScreenScaleMode === c.ScaleManager.EXACT_FIT) && d !== this.game.canvas && (this._fullScreenRestore = {
                targetWidth: d.style.width,
                targetHeight: d.style.height
            }, d.style.width = "100%", d.style.height = "100%") : (this._fullScreenRestore && (d.style.width = this._fullScreenRestore.targetWidth, d.style.height = this._fullScreenRestore.targetHeight, this._fullScreenRestore = null), this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.resetCanvas())
        },
        fullScreenChange: function(a) {
            this.event = a,
            this.isFullScreen ? (this.prepScreenMode(!0), this.updateLayout(), this.queueUpdate(!0)) : (this.prepScreenMode(!1), this.cleanupCreatedTarget(), this.updateLayout(), this.queueUpdate(!0)),
            this.onFullScreenChange.dispatch(this, this.width, this.height)
        },
        fullScreenError: function(a) {
            this.event = a,
            this.cleanupCreatedTarget(),
            console.warn("Phaser.ScaleManager: requestFullscreen failed or device does not support the Fullscreen API"),
            this.onFullScreenError.dispatch(this)
        },
        scaleSprite: function(a, b, c, d) {
            if (void 0 === b && (b = this.width), void 0 === c && (c = this.height), void 0 === d && (d = !1), !a || !a.scale)
                return a;
            if (a.scale.x = 1, a.scale.y = 1, a.width <= 0 || a.height <= 0 || b <= 0 || c <= 0)
                return a;
            var e = b,
                f = a.height * b / a.width,
                g = a.width * c / a.height,
                h = c,
                i = g > b;
            return i = i ? d : !d, i ? (a.width = Math.floor(e), a.height = Math.floor(f)) : (a.width = Math.floor(g), a.height = Math.floor(h)), a
        },
        destroy: function() {
            this.game.onResume.remove(this._gameResumed, this),
            window.removeEventListener("orientationchange", this._orientationChange, !1),
            window.removeEventListener("resize", this._windowResize, !1),
            this.compatibility.supportsFullScreen && (document.removeEventListener("webkitfullscreenchange", this._fullScreenChange, !1), document.removeEventListener("mozfullscreenchange", this._fullScreenChange, !1), document.removeEventListener("MSFullscreenChange", this._fullScreenChange, !1), document.removeEventListener("fullscreenchange", this._fullScreenChange, !1), document.removeEventListener("webkitfullscreenerror", this._fullScreenError, !1), document.removeEventListener("mozfullscreenerror", this._fullScreenError, !1), document.removeEventListener("MSFullscreenError", this._fullScreenError, !1), document.removeEventListener("fullscreenerror", this._fullScreenError, !1))
        }
    }, c.ScaleManager.prototype.constructor = c.ScaleManager, Object.defineProperty(c.ScaleManager.prototype, "boundingParent", {
        get: function() {
            if (this.parentIsWindow || this.isFullScreen && this.hasPhaserSetFullScreen && !this._createdFullScreenTarget)
                return null;
            var a = this.game.canvas && this.game.canvas.parentNode;
            return a || null
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "scaleMode", {
        get: function() {
            return this._scaleMode
        },
        set: function(a) {
            return a !== this._scaleMode && (this.isFullScreen || (this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.queueUpdate(!0)), this._scaleMode = a), this._scaleMode
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "fullScreenScaleMode", {
        get: function() {
            return this._fullScreenScaleMode
        },
        set: function(a) {
            return a !== this._fullScreenScaleMode && (this.isFullScreen ? (this.prepScreenMode(!1), this._fullScreenScaleMode = a, this.prepScreenMode(!0), this.queueUpdate(!0)) : this._fullScreenScaleMode = a), this._fullScreenScaleMode
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "currentScaleMode", {
        get: function() {
            return this.isFullScreen ? this._fullScreenScaleMode : this._scaleMode
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "pageAlignHorizontally", {
        get: function() {
            return this._pageAlignHorizontally
        },
        set: function(a) {
            a !== this._pageAlignHorizontally && (this._pageAlignHorizontally = a, this.queueUpdate(!0))
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "pageAlignVertically", {
        get: function() {
            return this._pageAlignVertically
        },
        set: function(a) {
            a !== this._pageAlignVertically && (this._pageAlignVertically = a, this.queueUpdate(!0))
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "isFullScreen", {
        get: function() {
            return !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "isPortrait", {
        get: function() {
            return "portrait" === this.classifyOrientation(this.screenOrientation)
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "isLandscape", {
        get: function() {
            return "landscape" === this.classifyOrientation(this.screenOrientation)
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "isGamePortrait", {
        get: function() {
            return this.height > this.width
        }
    }), Object.defineProperty(c.ScaleManager.prototype, "isGameLandscape", {
        get: function() {
            return this.width > this.height
        }
    }), c.Utils.Debug = function(a) {
        this.game = a,
        this.sprite = null,
        this.bmd = null,
        this.canvas = null,
        this.context = null,
        this.font = "14px Courier",
        this.columnWidth = 100,
        this.lineHeight = 16,
        this.renderShadow = !0,
        this.currentX = 0,
        this.currentY = 0,
        this.currentAlpha = 1,
        this.dirty = !1
    }, c.Utils.Debug.prototype = {
        boot: function() {
            this.game.renderType === c.CANVAS ? this.context = this.game.context : (this.bmd = new c.BitmapData(this.game, "__DEBUG", this.game.width, this.game.height, (!0)), this.sprite = this.game.make.image(0, 0, this.bmd), this.game.stage.addChild(this.sprite), this.game.scale.onSizeChange.add(this.resize, this), this.canvas = PIXI.CanvasPool.create(this, this.game.width, this.game.height), this.context = this.canvas.getContext("2d"))
        },
        resize: function(a, b, c) {
            this.bmd.resize(b, c),
            this.canvas.width = b,
            this.canvas.height = c
        },
        preUpdate: function() {
            this.dirty && this.sprite && (this.bmd.clear(), this.bmd.draw(this.canvas, 0, 0), this.context.clearRect(0, 0, this.game.width, this.game.height), this.dirty = !1)
        },
        reset: function() {
            this.context && this.context.clearRect(0, 0, this.game.width, this.game.height),
            this.sprite && this.bmd.clear()
        },
        start: function(a, b, c, d) {
            "number" != typeof a && (a = 0),
            "number" != typeof b && (b = 0),
            c = c || "rgb(255,255,255)",
            void 0 === d && (d = 0),
            this.currentX = a,
            this.currentY = b,
            this.currentColor = c,
            this.columnWidth = d,
            this.dirty = !0,
            this.context.save(),
            this.context.setTransform(1, 0, 0, 1, 0, 0),
            this.context.strokeStyle = c,
            this.context.fillStyle = c,
            this.context.font = this.font,
            this.context.globalAlpha = this.currentAlpha
        },
        stop: function() {
            this.context.restore()
        },
        line: function() {
            for (var a = this.currentX, b = 0; b < arguments.length; b++)
                this.renderShadow && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(arguments[b], a + 1, this.currentY + 1), this.context.fillStyle = this.currentColor),
                this.context.fillText(arguments[b], a, this.currentY),
                a += this.columnWidth;
            this.currentY += this.lineHeight
        },
        soundInfo: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Sound: " + a.key + " Locked: " + a.game.sound.touchLocked),
            this.line("Is Ready?: " + this.game.cache.isSoundReady(a.key) + " Pending Playback: " + a.pendingPlayback),
            this.line("Decoded: " + a.isDecoded + " Decoding: " + a.isDecoding),
            this.line("Total Duration: " + a.totalDuration + " Playing: " + a.isPlaying),
            this.line("Time: " + a.currentTime),
            this.line("Volume: " + a.volume + " Muted: " + a.mute),
            this.line("WebAudio: " + a.usingWebAudio + " Audio: " + a.usingAudioTag),
            "" !== a.currentMarker && (this.line("Marker: " + a.currentMarker + " Duration: " + a.duration + " (ms: " + a.durationMS + ")"), this.line("Start: " + a.markers[a.currentMarker].start + " Stop: " + a.markers[a.currentMarker].stop), this.line("Position: " + a.position)),
            this.stop()
        },
        cameraInfo: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Camera (" + a.width + " x " + a.height + ")"),
            this.line("X: " + a.x + " Y: " + a.y),
            a.bounds && this.line("Bounds x: " + a.bounds.x + " Y: " + a.bounds.y + " w: " + a.bounds.width + " h: " + a.bounds.height),
            this.line("View x: " + a.view.x + " Y: " + a.view.y + " w: " + a.view.width + " h: " + a.view.height),
            this.line("Total in view: " + a.totalInView),
            this.stop()
        },
        timer: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Timer (running: " + a.running + " expired: " + a.expired + ")"),
            this.line("Next Tick: " + a.next + " Duration: " + a.duration),
            this.line("Paused: " + a.paused + " Length: " + a.length),
            this.stop()
        },
        pointer: function(a, b, c, d, e) {
            null != a && (void 0 === b && (b = !1), c = c || "rgba(0,255,0,0.5)", d = d || "rgba(255,0,0,0.5)", b === !0 && a.isUp === !0 || (this.start(a.x, a.y - 100, e), this.context.beginPath(), this.context.arc(a.x, a.y, a.circle.radius, 0, 2 * Math.PI), a.active ? this.context.fillStyle = c : this.context.fillStyle = d, this.context.fill(), this.context.closePath(), this.context.beginPath(), this.context.moveTo(a.positionDown.x, a.positionDown.y), this.context.lineTo(a.position.x, a.position.y), this.context.lineWidth = 2, this.context.stroke(), this.context.closePath(), this.line("ID: " + a.id + " Active: " + a.active), this.line("World X: " + a.worldX + " World Y: " + a.worldY), this.line("Screen X: " + a.x + " Screen Y: " + a.y + " In: " + a.withinGame), this.line("Duration: " + a.duration + " ms"), this.line("is Down: " + a.isDown + " is Up: " + a.isUp), this.stop()))
        },
        spriteInputInfo: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Sprite Input: (" + a.width + " x " + a.height + ")"),
            this.line("x: " + a.input.pointerX().toFixed(1) + " y: " + a.input.pointerY().toFixed(1)),
            this.line("over: " + a.input.pointerOver() + " duration: " + a.input.overDuration().toFixed(0)),
            this.line("down: " + a.input.pointerDown() + " duration: " + a.input.downDuration().toFixed(0)),
            this.line("just over: " + a.input.justOver() + " just out: " + a.input.justOut()),
            this.stop()
        },
        key: function(a, b, c, d) {
            this.start(b, c, d, 150),
            this.line("Key:", a.keyCode, "isDown:", a.isDown),
            this.line("justDown:", a.justDown, "justUp:", a.justUp),
            this.line("Time Down:", a.timeDown.toFixed(0), "duration:", a.duration.toFixed(0)),
            this.stop()
        },
        inputInfo: function(a, b, c) {
            this.start(a, b, c),
            this.line("Input"),
            this.line("X: " + this.game.input.x + " Y: " + this.game.input.y),
            this.line("World X: " + this.game.input.worldX + " World Y: " + this.game.input.worldY),
            this.line("Scale X: " + this.game.input.scale.x.toFixed(1) + " Scale Y: " + this.game.input.scale.x.toFixed(1)),
            this.line("Screen X: " + this.game.input.activePointer.screenX + " Screen Y: " + this.game.input.activePointer.screenY),
            this.stop()
        },
        spriteBounds: function(a, b, c) {
            var d = a.getBounds();
            d.x += this.game.camera.x,
            d.y += this.game.camera.y,
            this.rectangle(d, b, c)
        },
        ropeSegments: function(a, b, c) {
            var d = a.segments,
                e = this;
            d.forEach(function(a) {
                e.rectangle(a, b, c)
            }, this)
        },
        spriteInfo: function(a, b, c, d) {
            this.start(b, c, d),
            this.line("Sprite:  (" + a.width + " x " + a.height + ") anchor: " + a.anchor.x + " x " + a.anchor.y),
            this.line("x: " + a.x.toFixed(1) + " y: " + a.y.toFixed(1)),
            this.line("angle: " + a.angle.toFixed(1) + " rotation: " + a.rotation.toFixed(1)),
            this.line("visible: " + a.visible + " in camera: " + a.inCamera),
            this.line("bounds x: " + a._bounds.x.toFixed(1) + " y: " + a._bounds.y.toFixed(1) + " w: " + a._bounds.width.toFixed(1) + " h: " + a._bounds.height.toFixed(1)),
            this.stop()
        },
        spriteCoords: function(a, b, c, d) {
            this.start(b, c, d, 100),
            a.name && this.line(a.name),
            this.line("x:", a.x.toFixed(2), "y:", a.y.toFixed(2)),
            this.line("pos x:", a.position.x.toFixed(2), "pos y:", a.position.y.toFixed(2)),
            this.line("world x:", a.world.x.toFixed(2), "world y:", a.world.y.toFixed(2)),
            this.stop()
        },
        lineInfo: function(a, b, c, d) {
            this.start(b, c, d, 80),
            this.line("start.x:", a.start.x.toFixed(2), "start.y:", a.start.y.toFixed(2)),
            this.line("end.x:", a.end.x.toFixed(2), "end.y:", a.end.y.toFixed(2)),
            this.line("length:", a.length.toFixed(2), "angle:", a.angle),
            this.stop()
        },
        pixel: function(a, b, c, d) {
            d = d || 2,
            this.start(),
            this.context.fillStyle = c,
            this.context.fillRect(a, b, d, d),
            this.stop()
        },
        geom: function(a, b, d, e) {
            void 0 === d && (d = !0),
            void 0 === e && (e = 0),
            b = b || "rgba(0,255,0,0.4)",
            this.start(),
            this.context.fillStyle = b,
            this.context.strokeStyle = b,
            a instanceof c.Rectangle || 1 === e ? d ? this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height) : this.context.strokeRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height) : a instanceof c.Circle || 2 === e ? (this.context.beginPath(), this.context.arc(a.x - this.game.camera.x, a.y - this.game.camera.y, a.radius, 0, 2 * Math.PI, !1), this.context.closePath(), d ? this.context.fill() : this.context.stroke()) : a instanceof c.Point || 3 === e ? this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, 4, 4) : (a instanceof c.Line || 4 === e) && (this.context.lineWidth = 1, this.context.beginPath(), this.context.moveTo(a.start.x + .5 - this.game.camera.x, a.start.y + .5 - this.game.camera.y), this.context.lineTo(a.end.x + .5 - this.game.camera.x, a.end.y + .5 - this.game.camera.y), this.context.closePath(), this.context.stroke()),
            this.stop()
        },
        rectangle: function(a, b, c) {
            void 0 === c && (c = !0),
            b = b || "rgba(0, 255, 0, 0.4)",
            this.start(),
            c ? (this.context.fillStyle = b, this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height)) : (this.context.strokeStyle = b, this.context.strokeRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height)),
            this.stop()
        },
        text: function(a, b, c, d, e) {
            d = d || "rgb(255,255,255)",
            e = e || "16px Courier",
            this.start(),
            this.context.font = e,
            this.renderShadow && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(a, b + 1, c + 1)),
            this.context.fillStyle = d,
            this.context.fillText(a, b, c),
            this.stop()
        },
        quadTree: function(a, b) {
            b = b || "rgba(255,0,0,0.3)",
            this.start();
            var c = a.bounds;
            if (0 === a.nodes.length) {
                this.context.strokeStyle = b,
                this.context.strokeRect(c.x, c.y, c.width, c.height),
                this.text("size: " + a.objects.length, c.x + 4, c.y + 16, "rgb(0,200,0)", "12px Courier"),
                this.context.strokeStyle = "rgb(0,255,0)";
                for (var d = 0; d < a.objects.length; d++)
                    this.context.strokeRect(a.objects[d].x, a.objects[d].y, a.objects[d].width, a.objects[d].height)
            } else
                for (var d = 0; d < a.nodes.length; d++)
                    this.quadTree(a.nodes[d]);
            this.stop()
        },
        body: function(a, b, d) {
            a.body && (this.start(), a.body.type === c.Physics.ARCADE ? c.Physics.Arcade.Body.render(this.context, a.body, b, d) : a.body.type === c.Physics.NINJA ? c.Physics.Ninja.Body.render(this.context, a.body, b, d) : a.body.type === c.Physics.BOX2D && c.Physics.Box2D.renderBody(this.context, a.body, b), this.stop())
        },
        bodyInfo: function(a, b, d, e) {
            a.body && (this.start(b, d, e, 210), a.body.type === c.Physics.ARCADE ? c.Physics.Arcade.Body.renderBodyInfo(this, a.body) : a.body.type === c.Physics.BOX2D && this.game.physics.box2d.renderBodyInfo(this, a.body), this.stop())
        },
        box2dWorld: function() {
            this.start(),
            this.context.translate(-this.game.camera.view.x, -this.game.camera.view.y, 0),
            this.game.physics.box2d.renderDebugDraw(this.context),
            this.stop()
        },
        box2dBody: function(a, b) {
            this.start(),
            c.Physics.Box2D.renderBody(this.context, a, b),
            this.stop()
        },
        displayList: function(a) {
            if (void 0 === a && (a = this.game.world), a.hasOwnProperty("renderOrderID") ? console.log("[" + a.renderOrderID + "]", a) : console.log("[]", a), a.children && a.children.length > 0)
                for (var b = 0; b < a.children.length; b++)
                    this.game.debug.displayList(a.children[b])
        },
        destroy: function() {
            PIXI.CanvasPool.remove(this)
        }
    }, c.Utils.Debug.prototype.constructor = c.Utils.Debug, c.DOM = {
        getOffset: function(a, b) {
            b = b || new c.Point;
            var d = a.getBoundingClientRect(),
                e = c.DOM.scrollY,
                f = c.DOM.scrollX,
                g = document.documentElement.clientTop,
                h = document.documentElement.clientLeft;
            return b.x = d.left + f - h, b.y = d.top + e - g, b
        },
        getBounds: function(a, b) {
            return void 0 === b && (b = 0), a = a && !a.nodeType ? a[0] : a, !(!a || 1 !== a.nodeType) && this.calibrate(a.getBoundingClientRect(), b)
        },
        calibrate: function(a, b) {
            b = +b || 0;
            var c = {
                width: 0,
                height: 0,
                left: 0,
                right: 0,
                top: 0,
                bottom: 0
            };
            return c.width = (c.right = a.right + b) - (c.left = a.left - b), c.height = (c.bottom = a.bottom + b) - (c.top = a.top - b), c
        },
        getAspectRatio: function(a) {
            a = null == a ? this.visualBounds : 1 === a.nodeType ? this.getBounds(a) : a;
            var b = a.width,
                c = a.height;
            return "function" == typeof b && (b = b.call(a)), "function" == typeof c && (c = c.call(a)), b / c
        },
        inLayoutViewport: function(a, b) {
            var c = this.getBounds(a, b);
            return !!c && c.bottom >= 0 && c.right >= 0 && c.top <= this.layoutBounds.width && c.left <= this.layoutBounds.height
        },
        getScreenOrientation: function(a) {
            var b = window.screen,
                c = b.orientation || b.mozOrientation || b.msOrientation;
            if (c && "string" == typeof c.type)
                return c.type;
            if ("string" == typeof c)
                return c;
            var d = "portrait-primary",
                e = "landscape-primary";
            if ("screen" === a)
                return b.height > b.width ? d : e;
            if ("viewport" === a)
                return this.visualBounds.height > this.visualBounds.width ? d : e;
            if ("window.orientation" === a && "number" == typeof window.orientation)
                return 0 === window.orientation || 180 === window.orientation ? d : e;
            if (window.matchMedia) {
                if (window.matchMedia("(orientation: portrait)").matches)
                    return d;
                if (window.matchMedia("(orientation: landscape)").matches)
                    return e
            }
            return this.visualBounds.height > this.visualBounds.width ? d : e
        },
        visualBounds: new c.Rectangle,
        layoutBounds: new c.Rectangle,
        documentBounds: new c.Rectangle
    }, c.Device.whenReady(function(a) {
        var b = window && "pageXOffset" in window ? function() {
                return window.pageXOffset
            } : function() {
                return document.documentElement.scrollLeft
            },
            d = window && "pageYOffset" in window ? function() {
                return window.pageYOffset
            } : function() {
                return document.documentElement.scrollTop
            };
        Object.defineProperty(c.DOM, "scrollX", {
            get: b
        }),
        Object.defineProperty(c.DOM, "scrollY", {
            get: d
        }),
        Object.defineProperty(c.DOM.visualBounds, "x", {
            get: b
        }),
        Object.defineProperty(c.DOM.visualBounds, "y", {
            get: d
        }),
        Object.defineProperty(c.DOM.layoutBounds, "x", {
            value: 0
        }),
        Object.defineProperty(c.DOM.layoutBounds, "y", {
            value: 0
        });
        var e = a.desktop && document.documentElement.clientWidth <= window.innerWidth && document.documentElement.clientHeight <= window.innerHeight;
        if (e) {
            var f = function() {
                    return Math.max(window.innerWidth, document.documentElement.clientWidth)
                },
                g = function() {
                    return Math.max(window.innerHeight, document.documentElement.clientHeight)
                };
            Object.defineProperty(c.DOM.visualBounds, "width", {
                get: f
            }),
            Object.defineProperty(c.DOM.visualBounds, "height", {
                get: g
            }),
            Object.defineProperty(c.DOM.layoutBounds, "width", {
                get: f
            }),
            Object.defineProperty(c.DOM.layoutBounds, "height", {
                get: g
            })
        } else
            Object.defineProperty(c.DOM.visualBounds, "width", {
                get: function() {
                    return window.innerWidth
                }
            }),
            Object.defineProperty(c.DOM.visualBounds, "height", {
                get: function() {
                    return window.innerHeight
                }
            }),
            Object.defineProperty(c.DOM.layoutBounds, "width", {
                get: function() {
                    var a = document.documentElement.clientWidth,
                        b = window.innerWidth;
                    return a < b ? b : a
                }
            }),
            Object.defineProperty(c.DOM.layoutBounds, "height", {
                get: function() {
                    var a = document.documentElement.clientHeight,
                        b = window.innerHeight;
                    return a < b ? b : a
                }
            });
        Object.defineProperty(c.DOM.documentBounds, "x", {
            value: 0
        }),
        Object.defineProperty(c.DOM.documentBounds, "y", {
            value: 0
        }),
        Object.defineProperty(c.DOM.documentBounds, "width", {
            get: function() {
                var a = document.documentElement;
                return Math.max(a.clientWidth, a.offsetWidth, a.scrollWidth)
            }
        }),
        Object.defineProperty(c.DOM.documentBounds, "height", {
            get: function() {
                var a = document.documentElement;
                return Math.max(a.clientHeight, a.offsetHeight, a.scrollHeight)
            }
        })
    }, null, !0), c.ArraySet = function(a) {
        this.position = 0,
        this.list = a || []
    }, c.ArraySet.prototype = {
        add: function(a) {
            return this.exists(a) || this.list.push(a), a
        },
        getIndex: function(a) {
            return this.list.indexOf(a)
        },
        getByKey: function(a, b) {
            for (var c = this.list.length; c--;)
                if (this.list[c][a] === b)
                    return this.list[c];
            return null
        },
        exists: function(a) {
            return this.list.indexOf(a) > -1
        },
        reset: function() {
            this.list.length = 0
        },
        remove: function(a) {
            var b = this.list.indexOf(a);
            if (b > -1)
                return this.list.splice(b, 1), a
        },
        setAll: function(a, b) {
            for (var c = this.list.length; c--;)
                this.list[c] && (this.list[c][a] = b)
        },
        callAll: function(a) {
            for (var b = Array.prototype.slice.call(arguments, 1), c = this.list.length; c--;)
                this.list[c] && this.list[c][a] && this.list[c][a].apply(this.list[c], b)
        },
        removeAll: function(a) {
            void 0 === a && (a = !1);
            for (var b = this.list.length; b--;)
                if (this.list[b]) {
                    var c = this.remove(this.list[b]);
                    a && c.destroy()
                }
            this.position = 0,
            this.list = []
        }
    }, Object.defineProperty(c.ArraySet.prototype, "total", {
        get: function() {
            return this.list.length
        }
    }), Object.defineProperty(c.ArraySet.prototype, "first", {
        get: function() {
            return this.position = 0, this.list.length > 0 ? this.list[0] : null
        }
    }), Object.defineProperty(c.ArraySet.prototype, "next", {
        get: function() {
            return this.position < this.list.length ? (this.position++, this.list[this.position]) : null
        }
    }), c.ArraySet.prototype.constructor = c.ArraySet, c.ArrayUtils = {
        getRandomItem: function(a, b, c) {
            if (null === a)
                return null;
            void 0 === b && (b = 0),
            void 0 === c && (c = a.length);
            var d = b + Math.floor(Math.random() * c);
            return void 0 === a[d] ? null : a[d]
        },
        removeRandomItem: function(a, b, c) {
            if (null == a)
                return null;
            void 0 === b && (b = 0),
            void 0 === c && (c = a.length);
            var d = b + Math.floor(Math.random() * c);
            if (d < a.length) {
                var e = a.splice(d, 1);
                return void 0 === e[0] ? null : e[0]
            }
            return null
        },
        shuffle: function(a) {
            for (var b = a.length - 1; b > 0; b--) {
                var c = Math.floor(Math.random() * (b + 1)),
                    d = a[b];
                a[b] = a[c],
                a[c] = d
            }
            return a
        },
        transposeMatrix: function(a) {
            for (var b = a.length, c = a[0].length, d = new Array(c), e = 0; e < c; e++) {
                d[e] = new Array(b);
                for (var f = b - 1; f > -1; f--)
                    d[e][f] = a[f][e]
            }
            return d
        },
        rotateMatrix: function(a, b) {
            if ("string" != typeof b && (b = (b % 360 + 360) % 360), 90 === b || b === -270 || "rotateLeft" === b)
                a = c.ArrayUtils.transposeMatrix(a),
                a = a.reverse();
            else if (b === -90 || 270 === b || "rotateRight" === b)
                a = a.reverse(),
                a = c.ArrayUtils.transposeMatrix(a);
            else if (180 === Math.abs(b) || "rotate180" === b) {
                for (var d = 0; d < a.length; d++)
                    a[d].reverse();
                a = a.reverse()
            }
            return a
        },
        findClosest: function(a, b) {
            if (!b.length)
                return NaN;
            if (1 === b.length || a < b[0])
                return b[0];
            for (var c = 1; b[c] < a;)
                c++;
            var d = b[c - 1],
                e = c < b.length ? b[c] : Number.POSITIVE_INFINITY;
            return e - a <= a - d ? e : d
        },
        rotateRight: function(a) {
            var b = a.pop();
            return a.unshift(b), b
        },
        rotateLeft: function(a) {
            var b = a.shift();
            return a.push(b), b
        },
        rotate: function(a) {
            var b = a.shift();
            return a.push(b), b
        },
        numberArray: function(a, b) {
            for (var c = [], d = a; d <= b; d++)
                c.push(d);
            return c
        },
        numberArrayStep: function(a, b, d) {
            void 0 !== a && null !== a || (a = 0),
            void 0 !== b && null !== b || (b = a, a = 0),
            void 0 === d && (d = 1);
            for (var e = [], f = Math.max(c.Math.roundAwayFromZero((b - a) / (d || 1)), 0), g = 0; g < f; g++)
                e.push(a),
                a += d;
            return e
        }
    }, c.LinkedList = function() {
        this.next = null,
        this.prev = null,
        this.first = null,
        this.last = null,
        this.total = 0
    }, c.LinkedList.prototype = {
        add: function(a) {
            return 0 === this.total && null === this.first && null === this.last ? (this.first = a, this.last = a, this.next = a, a.prev = this, this.total++, a) : (this.last.next = a, a.prev = this.last, this.last = a, this.total++, a)
        },
        reset: function() {
            this.first = null,
            this.last = null,
            this.next = null,
            this.prev = null,
            this.total = 0
        },
        remove: function(a) {
            return 1 === this.total ? (this.reset(), void (a.next = a.prev = null)) : (a === this.first ? this.first = this.first.next : a === this.last && (this.last = this.last.prev), a.prev && (a.prev.next = a.next), a.next && (a.next.prev = a.prev), a.next = a.prev = null, null === this.first && (this.last = null), void this.total--)
        },
        callAll: function(a) {
            if (this.first && this.last) {
                var b = this.first;
                do b && b[a] && b[a].call(b),
                b = b.next;
                while (b !== this.last.next)
            }
        }
    }, c.LinkedList.prototype.constructor = c.LinkedList, c.Create = function(a) {
        this.game = a,
        this.bmd = null,
        this.canvas = null,
        this.ctx = null,
        this.palettes = [{
            0: "#000",
            1: "#9D9D9D",
            2: "#FFF",
            3: "#BE2633",
            4: "#E06F8B",
            5: "#493C2B",
            6: "#A46422",
            7: "#EB8931",
            8: "#F7E26B",
            9: "#2F484E",
            A: "#44891A",
            B: "#A3CE27",
            C: "#1B2632",
            D: "#005784",
            E: "#31A2F2",
            F: "#B2DCEF"
        }, {
            0: "#000",
            1: "#191028",
            2: "#46af45",
            3: "#a1d685",
            4: "#453e78",
            5: "#7664fe",
            6: "#833129",
            7: "#9ec2e8",
            8: "#dc534b",
            9: "#e18d79",
            A: "#d6b97b",
            B: "#e9d8a1",
            C: "#216c4b",
            D: "#d365c8",
            E: "#afaab9",
            F: "#f5f4eb"
        }, {
            0: "#000",
            1: "#2234d1",
            2: "#0c7e45",
            3: "#44aacc",
            4: "#8a3622",
            5: "#5c2e78",
            6: "#aa5c3d",
            7: "#b5b5b5",
            8: "#5e606e",
            9: "#4c81fb",
            A: "#6cd947",
            B: "#7be2f9",
            C: "#eb8a60",
            D: "#e23d69",
            E: "#ffd93f",
            F: "#fff"
        }, {
            0: "#000",
            1: "#fff",
            2: "#8b4131",
            3: "#7bbdc5",
            4: "#8b41ac",
            5: "#6aac41",
            6: "#3931a4",
            7: "#d5de73",
            8: "#945a20",
            9: "#5a4100",
            A: "#bd736a",
            B: "#525252",
            C: "#838383",
            D: "#acee8b",
            E: "#7b73de",
            F: "#acacac"
        }, {
            0: "#000",
            1: "#191028",
            2: "#46af45",
            3: "#a1d685",
            4: "#453e78",
            5: "#7664fe",
            6: "#833129",
            7: "#9ec2e8",
            8: "#dc534b",
            9: "#e18d79",
            A: "#d6b97b",
            B: "#e9d8a1",
            C: "#216c4b",
            D: "#d365c8",
            E: "#afaab9",
            F: "#fff"
        }]
    }, c.Create.PALETTE_ARNE = 0, c.Create.PALETTE_JMP = 1, c.Create.PALETTE_CGA = 2, c.Create.PALETTE_C64 = 3, c.Create.PALETTE_JAPANESE_MACHINE = 4, c.Create.prototype = {
        texture: function(a, b, c, d, e) {
            void 0 === c && (c = 8),
            void 0 === d && (d = c),
            void 0 === e && (e = 0);
            var f = b[0].length * c,
                g = b.length * d;
            null === this.bmd && (this.bmd = this.game.make.bitmapData(), this.canvas = this.bmd.canvas, this.ctx = this.bmd.context),
            this.bmd.resize(f, g),
            this.bmd.clear();
            for (var h = 0; h < b.length; h++)
                for (var i = b[h], j = 0; j < i.length; j++) {
                    var k = i[j];
                    "." !== k && " " !== k && (this.ctx.fillStyle = this.palettes[e][k], this.ctx.fillRect(j * c, h * d, c, d))
                }
            return this.bmd.generateTexture(a)
        },
        grid: function(a, b, c, d, e, f) {
            null === this.bmd && (this.bmd = this.game.make.bitmapData(), this.canvas = this.bmd.canvas, this.ctx = this.bmd.context),
            this.bmd.resize(b, c),
            this.ctx.fillStyle = f;
            for (var g = 0; g < c; g += e)
                this.ctx.fillRect(0, g, b, 1);
            for (var h = 0; h < b; h += d)
                this.ctx.fillRect(h, 0, 1, c);
            return this.bmd.generateTexture(a)
        }
    }, c.Create.prototype.constructor = c.Create, c.FlexGrid = function(a, b, d) {
        this.game = a.game,
        this.manager = a,
        this.width = b,
        this.height = d,
        this.boundsCustom = new c.Rectangle(0, 0, b, d),
        this.boundsFluid = new c.Rectangle(0, 0, b, d),
        this.boundsFull = new c.Rectangle(0, 0, b, d),
        this.boundsNone = new c.Rectangle(0, 0, b, d),
        this.positionCustom = new c.Point(0, 0),
        this.positionFluid = new c.Point(0, 0),
        this.positionFull = new c.Point(0, 0),
        this.positionNone = new c.Point(0, 0),
        this.scaleCustom = new c.Point(1, 1),
        this.scaleFluid = new c.Point(1, 1),
        this.scaleFluidInversed = new c.Point(1, 1),
        this.scaleFull = new c.Point(1, 1),
        this.scaleNone = new c.Point(1, 1),
        this.customWidth = 0,
        this.customHeight = 0,
        this.customOffsetX = 0,
        this.customOffsetY = 0,
        this.ratioH = b / d,
        this.ratioV = d / b,
        this.multiplier = 0,
        this.layers = []
    }, c.FlexGrid.prototype = {
        setSize: function(a, b) {
            this.width = a,
            this.height = b,
            this.ratioH = a / b,
            this.ratioV = b / a,
            this.scaleNone = new c.Point(1, 1),
            this.boundsNone.width = this.width,
            this.boundsNone.height = this.height,
            this.refresh()
        },
        createCustomLayer: function(a, b, d, e) {
            void 0 === e && (e = !0),
            this.customWidth = a,
            this.customHeight = b,
            this.boundsCustom.width = a,
            this.boundsCustom.height = b;
            var f = new c.FlexLayer(this, this.positionCustom, this.boundsCustom, this.scaleCustom);
            return e && this.game.world.add(f), this.layers.push(f), "undefined" != typeof d && null !== typeof d && f.addMultiple(d), f
        },
        createFluidLayer: function(a, b) {
            void 0 === b && (b = !0);
            var d = new c.FlexLayer(this, this.positionFluid, this.boundsFluid, this.scaleFluid);
            return b && this.game.world.add(d), this.layers.push(d), "undefined" != typeof a && null !== typeof a && d.addMultiple(a), d
        },
        createFullLayer: function(a) {
            var b = new c.FlexLayer(this, this.positionFull, this.boundsFull, this.scaleFluid);
            return this.game.world.add(b), this.layers.push(b), "undefined" != typeof a && b.addMultiple(a), b
        },
        createFixedLayer: function(a) {
            var b = new c.FlexLayer(this, this.positionNone, this.boundsNone, this.scaleNone);
            return this.game.world.add(b), this.layers.push(b), "undefined" != typeof a && b.addMultiple(a), b
        },
        reset: function() {
            for (var a = this.layers.length; a--;)
                this.layers[a].persist || (this.layers[a].position = null, this.layers[a].scale = null, this.layers.slice(a, 1))
        },
        onResize: function(a, b) {
            this.ratioH = a / b,
            this.ratioV = b / a,
            this.refresh(a, b)
        },
        refresh: function() {
            this.multiplier = Math.min(this.manager.height / this.height, this.manager.width / this.width),
            this.boundsFluid.width = Math.round(this.width * this.multiplier),
            this.boundsFluid.height = Math.round(this.height * this.multiplier),
            this.scaleFluid.set(this.boundsFluid.width / this.width, this.boundsFluid.height / this.height),
            this.scaleFluidInversed.set(this.width / this.boundsFluid.width, this.height / this.boundsFluid.height),
            this.scaleFull.set(this.boundsFull.width / this.width, this.boundsFull.height / this.height),
            this.boundsFull.width = Math.round(this.manager.width * this.scaleFluidInversed.x),
            this.boundsFull.height = Math.round(this.manager.height * this.scaleFluidInversed.y),
            this.boundsFluid.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY),
            this.boundsNone.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY),
            this.positionFluid.set(this.boundsFluid.x, this.boundsFluid.y),
            this.positionNone.set(this.boundsNone.x, this.boundsNone.y)
        },
        fitSprite: function(a) {
            this.manager.scaleSprite(a),
            a.x = this.manager.bounds.centerX,
            a.y = this.manager.bounds.centerY
        },
        debug: function() {
            this.game.debug.text(this.boundsFluid.width + " x " + this.boundsFluid.height, this.boundsFluid.x + 4, this.boundsFluid.y + 16),
            this.game.debug.geom(this.boundsFluid, "rgba(255,0,0,0.9", !1)
        }
    }, c.FlexGrid.prototype.constructor = c.FlexGrid, c.FlexLayer = function(a, b, d, e) {
        c.Group.call(this, a.game, null, "__flexLayer" + a.game.rnd.uuid(), !1),
        this.manager = a.manager,
        this.grid = a,
        this.persist = !1,
        this.position = b,
        this.bounds = d,
        this.scale = e,
        this.topLeft = d.topLeft,
        this.topMiddle = new c.Point(d.halfWidth, 0),
        this.topRight = d.topRight,
        this.bottomLeft = d.bottomLeft,
        this.bottomMiddle = new c.Point(d.halfWidth, d.bottom),
        this.bottomRight = d.bottomRight
    }, c.FlexLayer.prototype = Object.create(c.Group.prototype), c.FlexLayer.prototype.constructor = c.FlexLayer, c.FlexLayer.prototype.resize = function() {}, c.FlexLayer.prototype.debug = function() {
        this.game.debug.text(this.bounds.width + " x " + this.bounds.height, this.bounds.x + 4, this.bounds.y + 16),
        this.game.debug.geom(this.bounds, "rgba(0,0,255,0.9", !1),
        this.game.debug.geom(this.topLeft, "rgba(255,255,255,0.9"),
        this.game.debug.geom(this.topMiddle, "rgba(255,255,255,0.9"),
        this.game.debug.geom(this.topRight, "rgba(255,255,255,0.9")
    }, c.Color = {
        packPixel: function(a, b, d, e) {
            return c.Device.LITTLE_ENDIAN ? (e << 24 | d << 16 | b << 8 | a) >>> 0 : (a << 24 | b << 16 | d << 8 | e) >>> 0
        },
        unpackPixel: function(a, b, d, e) {
            return void 0 !== b && null !== b || (b = c.Color.createColor()), void 0 !== d && null !== d || (d = !1), void 0 !== e && null !== e || (e = !1), c.Device.LITTLE_ENDIAN ? (b.a = (4278190080 & a) >>> 24, b.b = (16711680 & a) >>> 16, b.g = (65280 & a) >>> 8, b.r = 255 & a) : (b.r = (4278190080 & a) >>> 24, b.g = (16711680 & a) >>> 16, b.b = (65280 & a) >>> 8, b.a = 255 & a), b.color = a, b.rgba = "rgba(" + b.r + "," + b.g + "," + b.b + "," + b.a / 255 + ")", d && c.Color.RGBtoHSL(b.r, b.g, b.b, b), e && c.Color.RGBtoHSV(b.r, b.g, b.b, b), b
        },
        fromRGBA: function(a, b) {
            return b || (b = c.Color.createColor()), b.r = (4278190080 & a) >>> 24, b.g = (16711680 & a) >>> 16, b.b = (65280 & a) >>> 8, b.a = 255 & a, b.rgba = "rgba(" + b.r + "," + b.g + "," + b.b + "," + b.a + ")", b
        },
        toRGBA: function(a, b, c, d) {
            return a << 24 | b << 16 | c << 8 | d
        },
        toABGR: function(a, b, c, d) {
            return (d << 24 | c << 16 | b << 8 | a) >>> 0
        },
        RGBtoHSL: function(a, b, d, e) {
            e || (e = c.Color.createColor(a, b, d, 1)),
            a /= 255,
            b /= 255,
            d /= 255;
            var f = Math.min(a, b, d),
                g = Math.max(a, b, d);
            if (e.h = 0, e.s = 0, e.l = (g + f) / 2, g !== f) {
                var h = g - f;
                e.s = e.l > .5 ? h / (2 - g - f) : h / (g + f),
                g === a ? e.h = (b - d) / h + (b < d ? 6 : 0) : g === b ? e.h = (d - a) / h + 2 : g === d && (e.h = (a - b) / h + 4),
                e.h /= 6
            }
            return e
        },
        HSLtoRGB: function(a, b, d, e) {
            if (e ? (e.r = d, e.g = d, e.b = d) : e = c.Color.createColor(d, d, d), 0 !== b) {
                var f = d < .5 ? d * (1 + b) : d + b - d * b,
                    g = 2 * d - f;
                e.r = c.Color.hueToColor(g, f, a + 1 / 3),
                e.g = c.Color.hueToColor(g, f, a),
                e.b = c.Color.hueToColor(g, f, a - 1 / 3)
            }
            return e.r = Math.floor(255 * e.r | 0), e.g = Math.floor(255 * e.g | 0), e.b = Math.floor(255 * e.b | 0), c.Color.updateColor(e), e
        },
        RGBtoHSV: function(a, b, d, e) {
            e || (e = c.Color.createColor(a, b, d, 255)),
            a /= 255,
            b /= 255,
            d /= 255;
            var f = Math.min(a, b, d),
                g = Math.max(a, b, d),
                h = g - f;
            return e.h = 0, e.s = 0 === g ? 0 : h / g, e.v = g, g !== f && (g === a ? e.h = (b - d) / h + (b < d ? 6 : 0) : g === b ? e.h = (d - a) / h + 2 : g === d && (e.h = (a - b) / h + 4), e.h /= 6), e
        },
        HSVtoRGB: function(a, b, d, e) {
            void 0 === e && (e = c.Color.createColor(0, 0, 0, 1, a, b, 0, d));
            var f,
                g,
                h,
                i = Math.floor(6 * a),
                j = 6 * a - i,
                k = d * (1 - b),
                l = d * (1 - j * b),
                m = d * (1 - (1 - j) * b);
            switch (i % 6) {
            case 0:
                f = d,
                g = m,
                h = k;
                break;
            case 1:
                f = l,
                g = d,
                h = k;
                break;
            case 2:
                f = k,
                g = d,
                h = m;
                break;
            case 3:
                f = k,
                g = l,
                h = d;
                break;
            case 4:
                f = m,
                g = k,
                h = d;
                break;
            case 5:
                f = d,
                g = k,
                h = l
            }
            return e.r = Math.floor(255 * f), e.g = Math.floor(255 * g), e.b = Math.floor(255 * h), c.Color.updateColor(e), e
        },
        hueToColor: function(a, b, c) {
            return c < 0 && (c += 1), c > 1 && (c -= 1), c < 1 / 6 ? a + 6 * (b - a) * c : c < .5 ? b : c < 2 / 3 ? a + (b - a) * (2 / 3 - c) * 6 : a
        },
        createColor: function(a, b, d, e, f, g, h, i) {
            var j = {
                r: a || 0,
                g: b || 0,
                b: d || 0,
                a: e || 1,
                h: f || 0,
                s: g || 0,
                l: h || 0,
                v: i || 0,
                color: 0,
                color32: 0,
                rgba: ""
            };
            return c.Color.updateColor(j)
        },
        updateColor: function(a) {
            return a.rgba = "rgba(" + a.r.toString() + "," + a.g.toString() + "," + a.b.toString() + "," + a.a.toString() + ")", a.color = c.Color.getColor(a.r, a.g, a.b), a.color32 = c.Color.getColor32(255 * a.a, a.r, a.g, a.b), a
        },
        getColor32: function(a, b, c, d) {
            return a << 24 | b << 16 | c << 8 | d
        },
        getColor: function(a, b, c) {
            return a << 16 | b << 8 | c
        },
        RGBtoString: function(a, b, d, e, f) {
            return void 0 === e && (e = 255), void 0 === f && (f = "#"), "#" === f ? "#" + ((1 << 24) + (a << 16) + (b << 8) + d).toString(16).slice(1) : "0x" + c.Color.componentToHex(e) + c.Color.componentToHex(a) + c.Color.componentToHex(b) + c.Color.componentToHex(d)
        },
        hexToRGB: function(a) {
            var b = c.Color.hexToColor(a);
            if (b)
                return c.Color.getColor32(b.a, b.r, b.g, b.b)
        },
        hexToColor: function(a, b) {
            a = a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i, function(a, b, c, d) {
                return b + b + c + c + d + d
            });
            var d = /^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
            if (d) {
                var e = parseInt(d[1], 16),
                    f = parseInt(d[2], 16),
                    g = parseInt(d[3], 16);
                b ? (b.r = e, b.g = f, b.b = g) : b = c.Color.createColor(e, f, g)
            }
            return b
        },
        webToColor: function(a, b) {
            b || (b = c.Color.createColor());
            var d = /^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a);
            return d && (b.r = parseInt(d[1], 10), b.g = parseInt(d[2], 10), b.b = parseInt(d[3], 10), b.a = void 0 !== d[4] ? parseFloat(d[4]) : 1, c.Color.updateColor(b)), b
        },
        valueToColor: function(a, b) {
            if (b || (b = c.Color.createColor()), "string" == typeof a)
                return 0 === a.indexOf("rgb") ? c.Color.webToColor(a, b) : (b.a = 1, c.Color.hexToColor(a, b));
            if ("number" == typeof a) {
                var d = c.Color.getRGB(a);
                return b.r = d.r, b.g = d.g, b.b = d.b, b.a = d.a / 255, b
            }
            return b
        },
        componentToHex: function(a) {
            var b = a.toString(16);
            return 1 === b.length ? "0" + b : b
        },
        HSVColorWheel: function(a, b) {
            void 0 === a && (a = 1),
            void 0 === b && (b = 1);
            for (var d = [], e = 0; e <= 359; e++)
                d.push(c.Color.HSVtoRGB(e / 359, a, b));
            return d
        },
        HSLColorWheel: function(a, b) {
            void 0 === a && (a = .5),
            void 0 === b && (b = .5);
            for (var d = [], e = 0; e <= 359; e++)
                d.push(c.Color.HSLtoRGB(e / 359, a, b));
            return d
        },
        interpolateColor: function(a, b, d, e, f) {
            void 0 === f && (f = 255);
            var g = c.Color.getRGB(a),
                h = c.Color.getRGB(b),
                i = (h.red - g.red) * e / d + g.red,
                j = (h.green - g.green) * e / d + g.green,
                k = (h.blue - g.blue) * e / d + g.blue;
            return c.Color.getColor32(f, i, j, k)
        },
        interpolateColorWithRGB: function(a, b, d, e, f, g) {
            var h = c.Color.getRGB(a),
                i = (b - h.red) * g / f + h.red,
                j = (d - h.green) * g / f + h.green,
                k = (e - h.blue) * g / f + h.blue;
            return c.Color.getColor(i, j, k)
        },
        interpolateRGB: function(a, b, d, e, f, g, h, i) {
            var j = (e - a) * i / h + a,
                k = (f - b) * i / h + b,
                l = (g - d) * i / h + d;
            return c.Color.getColor(j, k, l)
        },
        getRandomColor: function(a, b, d) {
            if (void 0 === a && (a = 0), void 0 === b && (b = 255), void 0 === d && (d = 255), b > 255 || a > b)
                return c.Color.getColor(255, 255, 255);
            var e = a + Math.round(Math.random() * (b - a)),
                f = a + Math.round(Math.random() * (b - a)),
                g = a + Math.round(Math.random() * (b - a));
            return c.Color.getColor32(d, e, f, g)
        },
        getRGB: function(a) {
            return a > 16777215 ? {
                alpha: a >>> 24,
                red: a >> 16 & 255,
                green: a >> 8 & 255,
                blue: 255 & a,
                a: a >>> 24,
                r: a >> 16 & 255,
                g: a >> 8 & 255,
                b: 255 & a
            } : {
                alpha: 255,
                red: a >> 16 & 255,
                green: a >> 8 & 255,
                blue: 255 & a,
                a: 255,
                r: a >> 16 & 255,
                g: a >> 8 & 255,
                b: 255 & a
            }
        },
        getWebRGB: function(a) {
            if ("object" == typeof a)
                return "rgba(" + a.r.toString() + "," + a.g.toString() + "," + a.b.toString() + "," + (a.a / 255).toString() + ")";
            var b = c.Color.getRGB(a);
            return "rgba(" + b.r.toString() + "," + b.g.toString() + "," + b.b.toString() + "," + (b.a / 255).toString() + ")"
        },
        getAlpha: function(a) {
            return a >>> 24
        },
        getAlphaFloat: function(a) {
            return (a >>> 24) / 255
        },
        getRed: function(a) {
            return a >> 16 & 255
        },
        getGreen: function(a) {
            return a >> 8 & 255
        },
        getBlue: function(a) {
            return 255 & a
        },
        blendNormal: function(a) {
            return a
        },
        blendLighten: function(a, b) {
            return b > a ? b : a
        },
        blendDarken: function(a, b) {
            return b > a ? a : b
        },
        blendMultiply: function(a, b) {
            return a * b / 255
        },
        blendAverage: function(a, b) {
            return (a + b) / 2
        },
        blendAdd: function(a, b) {
            return Math.min(255, a + b)
        },
        blendSubtract: function(a, b) {
            return Math.max(0, a + b - 255)
        },
        blendDifference: function(a, b) {
            return Math.abs(a - b)
        },
        blendNegation: function(a, b) {
            return 255 - Math.abs(255 - a - b)
        },
        blendScreen: function(a, b) {
            return 255 - ((255 - a) * (255 - b) >> 8)
        },
        blendExclusion: function(a, b) {
            return a + b - 2 * a * b / 255
        },
        blendOverlay: function(a, b) {
            return b < 128 ? 2 * a * b / 255 : 255 - 2 * (255 - a) * (255 - b) / 255
        },
        blendSoftLight: function(a, b) {
            return b < 128 ? 2 * ((a >> 1) + 64) * (b / 255) : 255 - 2 * (255 - ((a >> 1) + 64)) * (255 - b) / 255
        },
        blendHardLight: function(a, b) {
            return c.Color.blendOverlay(b, a)
        },
        blendColorDodge: function(a, b) {
            return 255 === b ? b : Math.min(255, (a << 8) / (255 - b))
        },
        blendColorBurn: function(a, b) {
            return 0 === b ? b : Math.max(0, 255 - (255 - a << 8) / b)
        },
        blendLinearDodge: function(a, b) {
            return c.Color.blendAdd(a, b)
        },
        blendLinearBurn: function(a, b) {
            return c.Color.blendSubtract(a, b)
        },
        blendLinearLight: function(a, b) {
            return b < 128 ? c.Color.blendLinearBurn(a, 2 * b) : c.Color.blendLinearDodge(a, 2 * (b - 128))
        },
        blendVividLight: function(a, b) {
            return b < 128 ? c.Color.blendColorBurn(a, 2 * b) : c.Color.blendColorDodge(a, 2 * (b - 128))
        },
        blendPinLight: function(a, b) {
            return b < 128 ? c.Color.blendDarken(a, 2 * b) : c.Color.blendLighten(a, 2 * (b - 128))
        },
        blendHardMix: function(a, b) {
            return c.Color.blendVividLight(a, b) < 128 ? 0 : 255
        },
        blendReflect: function(a, b) {
            return 255 === b ? b : Math.min(255, a * a / (255 - b))
        },
        blendGlow: function(a, b) {
            return c.Color.blendReflect(b, a)
        },
        blendPhoenix: function(a, b) {
            return Math.min(a, b) - Math.max(a, b) + 255
        }
    }, c.Physics = function(a, b) {
        b = b || {},
        this.game = a,
        this.config = b,
        this.arcade = null,
        this.p2 = null,
        this.ninja = null,
        this.box2d = null,
        this.chipmunk = null,
        this.matter = null,
        this.parseConfig()
    }, c.Physics.ARCADE = 0, c.Physics.P2JS = 1, c.Physics.NINJA = 2, c.Physics.BOX2D = 3, c.Physics.CHIPMUNK = 4, c.Physics.MATTERJS = 5, c.Physics.prototype = {
        parseConfig: function() {
            this.config.hasOwnProperty("arcade") && this.config.arcade !== !0 || !c.Physics.hasOwnProperty("Arcade") || (this.arcade = new c.Physics.Arcade(this.game)),
            this.config.hasOwnProperty("ninja") && this.config.ninja === !0 && c.Physics.hasOwnProperty("Ninja") && (this.ninja = new c.Physics.Ninja(this.game)),
            this.config.hasOwnProperty("p2") && this.config.p2 === !0 && c.Physics.hasOwnProperty("P2") && (this.p2 = new c.Physics.P2(this.game, this.config)),
            this.config.hasOwnProperty("box2d") && this.config.box2d === !0 && c.Physics.hasOwnProperty("BOX2D") && (this.box2d = new c.Physics.BOX2D(this.game, this.config)),
            this.config.hasOwnProperty("matter") && this.config.matter === !0 && c.Physics.hasOwnProperty("Matter") && (this.matter = new c.Physics.Matter(this.game, this.config))
        },
        startSystem: function(a) {
            a === c.Physics.ARCADE ? this.arcade = new c.Physics.Arcade(this.game) : a === c.Physics.P2JS ? null === this.p2 ? this.p2 = new c.Physics.P2(this.game, this.config) : this.p2.reset() : a === c.Physics.NINJA ? this.ninja = new c.Physics.Ninja(this.game) : a === c.Physics.BOX2D ? null === this.box2d ? this.box2d = new c.Physics.Box2D(this.game, this.config) : this.box2d.reset() : a === c.Physics.MATTERJS && (null === this.matter ? this.matter = new c.Physics.Matter(this.game, this.config) : this.matter.reset())
        },
        enable: function(a, b, d) {
            void 0 === b && (b = c.Physics.ARCADE),
            void 0 === d && (d = !1),
            b === c.Physics.ARCADE ? this.arcade.enable(a) : b === c.Physics.P2JS && this.p2 ? this.p2.enable(a, d) : b === c.Physics.NINJA && this.ninja ? this.ninja.enableAABB(a) : b === c.Physics.BOX2D && this.box2d ? this.box2d.enable(a) : b === c.Physics.MATTERJS && this.matter ? this.matter.enable(a) : console.warn(a.key + " is attempting to enable a physics body using an unknown physics system.")
        },
        preUpdate: function() {
            this.p2 && this.p2.preUpdate(),
            this.box2d && this.box2d.preUpdate(),
            this.matter && this.matter.preUpdate()
        },
        update: function() {
            this.p2 && this.p2.update(),
            this.box2d && this.box2d.update(),
            this.matter && this.matter.update()
        },
        setBoundsToWorld: function() {
            this.arcade && this.arcade.setBoundsToWorld(),
            this.ninja && this.ninja.setBoundsToWorld(),
            this.p2 && this.p2.setBoundsToWorld(),
            this.box2d && this.box2d.setBoundsToWorld(),
            this.matter && this.matter.setBoundsToWorld()
        },
        clear: function() {
            this.p2 && this.p2.clear(),
            this.box2d && this.box2d.clear(),
            this.matter && this.matter.clear()
        },
        reset: function() {
            this.p2 && this.p2.reset(),
            this.box2d && this.box2d.reset(),
            this.matter && this.matter.reset()
        },
        destroy: function() {
            this.p2 && this.p2.destroy(),
            this.box2d && this.box2d.destroy(),
            this.matter && this.matter.destroy(),
            this.arcade = null,
            this.ninja = null,
            this.p2 = null,
            this.box2d = null,
            this.matter = null
        }
    }, c.Physics.prototype.constructor = c.Physics, c.Particles = function(a) {
        this.game = a,
        this.emitters = {},
        this.ID = 0
    }, c.Particles.prototype = {
        add: function(a) {
            return this.emitters[a.name] = a, a
        },
        remove: function(a) {
            delete this.emitters[a.name]
        },
        update: function() {
            for (var a in this.emitters)
                this.emitters[a].exists && this.emitters[a].update()
        }
    }, c.Particles.prototype.constructor = c.Particles, c.Video = function(a, b, d) {
        if (void 0 === b && (b = null), void 0 === d && (d = null), this.game = a, this.key = b, this.width = 0, this.height = 0, this.type = c.VIDEO, this.disableTextureUpload = !1, this.touchLocked = !1, this.onPlay = new c.Signal, this.onChangeSource = new c.Signal, this.onComplete = new c.Signal, this.onAccess = new c.Signal, this.onError = new c.Signal, this.onTimeout = new c.Signal, this.timeout = 15e3, this._timeOutID = null, this.video = null, this.videoStream = null, this.isStreaming = !1, this.retryLimit = 20, this.retry = 0, this.retryInterval = 500, this._retryID = null, this._codeMuted = !1, this._muted = !1, this._codePaused = !1, this._paused = !1, this._pending = !1, this._autoplay = !1, this._endCallback = null, this._playCallback = null, b && this.game.cache.checkVideoKey(b)) {
            var e = this.game.cache.getVideo(b);
            e.isBlob ? this.createVideoFromBlob(e.data) : this.video = e.data,
            this.width = this.video.videoWidth,
            this.height = this.video.videoHeight
        } else
            d && this.createVideoFromURL(d, !1);
        this.video && !d ? (this.baseTexture = new PIXI.BaseTexture(this.video), this.baseTexture.forceLoaded(this.width, this.height)) : (this.baseTexture = new PIXI.BaseTexture(c.Cache.DEFAULT.baseTexture.source), this.baseTexture.forceLoaded(this.width, this.height)),
        this.texture = new PIXI.Texture(this.baseTexture),
        this.textureFrame = new c.Frame(0, 0, 0, this.width, this.height, "video"),
        this.texture.setFrame(this.textureFrame),
        this.texture.valid = !1,
        null !== b && this.video && (this.texture.valid = this.video.canplay),
        this.snapshot = null,
        c.BitmapData && (this.snapshot = new c.BitmapData(this.game, "", this.width, this.height)),
        !this.game.device.cocoonJS && (this.game.device.iOS || this.game.device.android) || window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock ? this.setTouchLock() : e && (e.locked = !1)
    }, c.Video.prototype = {
        connectToMediaStream: function(a, b) {
            return a && b && (this.video = a, this.videoStream = b, this.isStreaming = !0, this.baseTexture.source = this.video, this.updateTexture(null, this.video.videoWidth, this.video.videoHeight), this.onAccess.dispatch(this)), this
        },
        startMediaStream: function(a, b, c) {
            if (void 0 === a && (a = !1), void 0 === b && (b = null), void 0 === c && (c = null), !this.game.device.getUserMedia)
                return this.onError.dispatch(this, "No getUserMedia"), !1;
            null !== this.videoStream && (this.videoStream.active ? this.videoStream.active = !1 : this.videoStream.stop()),
            this.removeVideoElement(),
            this.video = document.createElement("video"),
            this.video.setAttribute("autoplay", "autoplay"),
            null !== b && (this.video.width = b),
            null !== c && (this.video.height = c),
            this._timeOutID = window.setTimeout(this.getUserMediaTimeout.bind(this), this.timeout);
            try {
                navigator.getUserMedia({
                    audio: a,
                    video: !0
                }, this.getUserMediaSuccess.bind(this), this.getUserMediaError.bind(this))
            } catch (a) {
                this.getUserMediaError(a)
            }
            return this
        },
        getUserMediaTimeout: function() {
            clearTimeout(this._timeOutID),
            this.onTimeout.dispatch(this)
        },
        getUserMediaError: function(a) {
            clearTimeout(this._timeOutID),
            this.onError.dispatch(this, a)
        },
        getUserMediaSuccess: function(a) {
            clearTimeout(this._timeOutID),
            this.videoStream = a,
            void 0 !== this.video.mozSrcObject ? this.video.mozSrcObject = a : this.video.src = window.URL && window.URL.createObjectURL(a) || a;
            var b = this;
            this.video.onloadeddata = function() {
                function a() {
                    if (c > 0)
                        if (b.video.videoWidth > 0) {
                            var d = b.video.videoWidth,
                                e = b.video.videoHeight;
                            isNaN(b.video.videoHeight) && (e = d / (4 / 3)),
                            b.video.play(),
                            b.isStreaming = !0,
                            b.baseTexture.source = b.video,
                            b.updateTexture(null, d, e),
                            b.onAccess.dispatch(b)
                        } else
                            window.setTimeout(a, 500);
                    else
                        console.warn("Unable to connect to video stream. Webcam error?");
                    c--
                }
                var c = 10;
                a()
            }
        },
        createVideoFromBlob: function(a) {
            var b = this;
            return this.video = document.createElement("video"), this.video.controls = !1, this.video.setAttribute("autoplay", "autoplay"), this.video.addEventListener("loadeddata", function(a) {
                b.updateTexture(a)
            }, !0), this.video.src = window.URL.createObjectURL(a), this.video.canplay = !0, this
        },
        createVideoFromURL: function(a, b) {
            return void 0 === b && (b = !1), this.texture && (this.texture.valid = !1), this.video = document.createElement("video"), this.video.controls = !1, b && this.video.setAttribute("autoplay", "autoplay"), this.video.src = a, this.video.canplay = !0, this.video.load(), this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval), this.key = a, this
        },
        updateTexture: function(a, b, c) {
            var d = !1;
            void 0 !== b && null !== b || (b = this.video.videoWidth, d = !0),
            void 0 !== c && null !== c || (c = this.video.videoHeight),
            this.width = b,
            this.height = c,
            this.baseTexture.source !== this.video && (this.baseTexture.source = this.video),
            this.baseTexture.forceLoaded(b, c),
            this.texture.frame.resize(b, c),
            this.texture.width = b,
            this.texture.height = c,
            this.texture.valid = !0,
            this.snapshot && this.snapshot.resize(b, c),
            d && null !== this.key && (this.onChangeSource.dispatch(this, b, c), this._autoplay && (this.video.play(), this.onPlay.dispatch(this, this.loop, this.playbackRate)))
        },
        complete: function() {
            this.onComplete.dispatch(this)
        },
        play: function(a, b) {
            return void 0 === a && (a = !1), void 0 === b && (b = 1), this.game.sound.onMute && (this.game.sound.onMute.add(this.setMute, this), this.game.sound.onUnMute.add(this.unsetMute, this), this.game.sound.mute && this.setMute()), this.game.onPause.add(this.setPause, this), this.game.onResume.add(this.setResume, this), this._endCallback = this.complete.bind(this), this.video.addEventListener("ended", this._endCallback, !0), this.video.addEventListener("webkitendfullscreen", this._endCallback, !0), a ? this.video.loop = "loop" : this.video.loop = "", this.video.playbackRate = b, this.touchLocked ? this._pending = !0 : (this._pending = !1, null !== this.key && (4 !== this.video.readyState ? (this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval)) : (this._playCallback = this.playHandler.bind(this), this.video.addEventListener("playing", this._playCallback, !0))), this.video.play(), this.onPlay.dispatch(this, a, b)), this
        },
        playHandler: function() {
            this.video.removeEventListener("playing", this._playCallback, !0),
            this.updateTexture()
        },
        stop: function() {
            return this.game.sound.onMute && (this.game.sound.onMute.remove(this.setMute, this), this.game.sound.onUnMute.remove(this.unsetMute, this)), this.game.onPause.remove(this.setPause, this), this.game.onResume.remove(this.setResume, this), this.isStreaming ? (this.video.mozSrcObject ? (this.video.mozSrcObject.stop(), this.video.src = null) : (this.video.src = "", this.videoStream.active ? this.videoStream.active = !1 : this.videoStream.getTracks ? this.videoStream.getTracks().forEach(function(a) {
                a.stop()
            }) : this.videoStream.stop()), this.videoStream = null, this.isStreaming = !1) : (this.video.removeEventListener("ended", this._endCallback, !0), this.video.removeEventListener("webkitendfullscreen", this._endCallback, !0), this.video.removeEventListener("playing", this._playCallback, !0), this.touchLocked ? this._pending = !1 : this.video.pause()), this
        },
        add: function(a) {
            if (Array.isArray(a))
                for (var b = 0; b < a.length; b++)
                    a[b].loadTexture && a[b].loadTexture(this);
            else
                a.loadTexture(this);
            return this
        },
        addToWorld: function(a, b, c, d, e, f) {
            e = e || 1,
            f = f || 1;
            var g = this.game.add.image(a, b, this);
            return g.anchor.set(c, d), g.scale.set(e, f), g
        },
        render: function() {
            !this.disableTextureUpload && this.playing && this.baseTexture.dirty()
        },
        setMute: function() {
            this._muted || (this._muted = !0, this.video.muted = !0)
        },
        unsetMute: function() {
            this._muted && !this._codeMuted && (this._muted = !1, this.video.muted = !1)
        },
        setPause: function() {
            this._paused || this.touchLocked || (this._paused = !0, this.video.pause())
        },
        setResume: function() {
            !this._paused || this._codePaused || this.touchLocked || (this._paused = !1, this.video.ended || this.video.play())
        },
        changeSource: function(a, b) {
            return void 0 === b && (b = !0), this.texture.valid = !1, this.video.pause(), this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval), this.video.src = a, this.video.load(), this._autoplay = b, b || (this.paused = !0), this
        },
        checkVideoProgress: function() {
            4 === this.video.readyState ? this.updateTexture() : (this.retry--, this.retry > 0 ? this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval) : console.warn("Phaser.Video: Unable to start downloading video in time", this.isStreaming))
        },
        setTouchLock: function() {
            this.game.input.touch.addTouchLockCallback(this.unlock, this),
            this.touchLocked = !0
        },
        unlock: function() {
            if (this.touchLocked = !1, this.video.play(), this.onPlay.dispatch(this, this.loop, this.playbackRate), this.key) {
                var a = this.game.cache.getVideo(this.key);
                a && !a.isBlob && (a.locked = !1)
            }
            return !0
        },
        grab: function(a, b, c) {
            return void 0 === a && (a = !1), void 0 === b && (b = 1), void 0 === c && (c = null), null === this.snapshot ? void console.warn("Video.grab cannot run because Phaser.BitmapData is unavailable") : (a && this.snapshot.cls(), this.snapshot.copy(this.video, 0, 0, this.width, this.height, 0, 0, this.width, this.height, 0, 0, 0, 1, 1, b, c), this.snapshot)
        },
        removeVideoElement: function() {
            if (this.video) {
                for (this.video.parentNode && this.video.parentNode.removeChild(this.video); this.video.hasChildNodes();)
                    this.video.removeChild(this.video.firstChild);
                this.video.removeAttribute("autoplay"),
                this.video.removeAttribute("src"),
                this.video = null
            }
        },
        destroy: function() {
            this.stop(),
            this.removeVideoElement(),
            this.touchLocked && this.game.input.touch.removeTouchLockCallback(this.unlock, this),
            this._retryID && window.clearTimeout(this._retryID)
        }
    }, Object.defineProperty(c.Video.prototype, "currentTime", {
        get: function() {
            return this.video ? this.video.currentTime : 0
        },
        set: function(a) {
            this.video.currentTime = a
        }
    }), Object.defineProperty(c.Video.prototype, "duration", {
        get: function() {
            return this.video ? this.video.duration : 0
        }
    }), Object.defineProperty(c.Video.prototype, "progress", {
        get: function() {
            return this.video ? this.video.currentTime / this.video.duration : 0
        }
    }), Object.defineProperty(c.Video.prototype, "mute", {
        get: function() {
            return this._muted
        },
        set: function(a) {
            if (a = a || null) {
                if (this._muted)
                    return;
                this._codeMuted = !0,
                this.setMute()
            } else {
                if (!this._muted)
                    return;
                this._codeMuted = !1,
                this.unsetMute()
            }
        }
    }), Object.defineProperty(c.Video.prototype, "paused", {
        get: function() {
            return this._paused
        },
        set: function(a) {
            if (a = a || null, !this.touchLocked)
                if (a) {
                    if (this._paused)
                        return;
                    this._codePaused = !0,
                    this.setPause()
                } else {
                    if (!this._paused)
                        return;
                    this._codePaused = !1,
                    this.setResume()
                }
        }
    }), Object.defineProperty(c.Video.prototype, "volume", {
        get: function() {
            return this.video ? this.video.volume : 1
        },
        set: function(a) {
            a < 0 ? a = 0 : a > 1 && (a = 1),
            this.video && (this.video.volume = a)
        }
    }), Object.defineProperty(c.Video.prototype, "playbackRate", {
        get: function() {
            return this.video ? this.video.playbackRate : 1
        },
        set: function(a) {
            this.video && (this.video.playbackRate = a)
        }
    }), Object.defineProperty(c.Video.prototype, "loop", {
        get: function() {
            return !!this.video && this.video.loop
        },
        set: function(a) {
            a && this.video ? this.video.loop = "loop" : this.video && (this.video.loop = "")
        }
    }), Object.defineProperty(c.Video.prototype, "playing", {
        get: function() {
            return !(this.video.paused && this.video.ended)
        }
    }), c.Video.prototype.constructor = c.Video, void 0 === PIXI.blendModes && (PIXI.blendModes = c.blendModes), void 0 === PIXI.scaleModes && (PIXI.scaleModes = c.scaleModes), void 0 === PIXI.Texture.emptyTexture && (PIXI.Texture.emptyTexture = new PIXI.Texture(new PIXI.BaseTexture)), void 0 === PIXI.DisplayObject._tempMatrix && (PIXI.DisplayObject._tempMatrix = new PIXI.Matrix), void 0 === PIXI.RenderTexture.tempMatrix && (PIXI.RenderTexture.tempMatrix = new PIXI.Matrix), PIXI.Graphics && void 0 === PIXI.Graphics.POLY && (PIXI.Graphics.POLY = c.POLYGON, PIXI.Graphics.RECT = c.RECTANGLE, PIXI.Graphics.CIRC = c.CIRCLE, PIXI.Graphics.ELIP = c.ELLIPSE, PIXI.Graphics.RREC = c.ROUNDEDRECTANGLE), PIXI.TextureSilentFail = !0, "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = c), exports.Phaser = c) : "undefined" != typeof define && define.amd ? define("Phaser", function() {
        return b.Phaser = c
    }()) : b.Phaser = c, c
}.call(this);
;
/* ../js/praia.js */
var CLAZZ,
    SUPER,
    slice = Array.prototype.slice;
var logContainer = null;
function __debugArgs(args) {
    var buf = "";
    for (var i = 0; i < args.length; i++) {
        var s = args[i];
        if (s === undefined)
            buf += "undefined";
        else if (s === null)
            buf += "null";
        else if (typeof s == "object")
            buf += "[object " + (s.constructor && (s.constructor.NAME || s.constructor.name)) + "]";
        else if (typeof s == "function")
            buf += "[function " + (s.NAME || s.name) + "]";
        else if (s && typeof s.toString == "function")
            buf += s.toString();
        else
            buf += s;
        buf += " ";
    }
    return buf;
}
function showLog() {
    document.body.appendChild(logContainer);
}
function __debugAppend(e) {
    if (!logContainer) {
        logContainer = document.createElement("div");
        logContainer.style.position = "absolute";
        logContainer.style.top = 0;
        logContainer.style.backgroundColor = "white";
    }
    if (!logContainer.parentNode && location.origin == "http://localhost") {}
    var max = (document.body.innerHeight || document.body.clientHeight || 500) / 2;
    var lineHeight = 16;
    logContainer.appendChild(e);
    while (logContainer.children.length * lineHeight > max)
        logContainer.removeChild(logContainer.children[0]);
}
function LOG(txt) {
    var fulltext = __debugArgs(arguments);
    console.log(fulltext);
    var e = document.createElement("div");
    e.innerHTML = fulltext;
    __debugAppend(e);
}
function ERROR(txt) {
    var fulltext = __debugArgs(arguments);
    console.warn(fulltext);
    if (document.body) {
        var e = document.createElement("div");
        e.innerHTML = "<span style='color: red'>ERROR:</span>" + fulltext;
        __debugAppend(e);
    }
}
window.onerror = function() {
    ERROR.apply(window, Array.prototype.slice.call(arguments));
};
function intToShare(i) {
    if (typeof i != "number")
        return "invalid";
    var acc = "";
    while (i) {
        var c = i % 26;
        acc = String.fromCharCode(97 + c) + acc;
        i = Math.floor(i / 26);
    }
    while (acc.length < 4)
        acc = "a" + acc;
    return acc;
}
function shareToInt(s) {
    var acc = 0;
    s = (s || "").toLowerCase();
    for (var i = 0, l = s.length; i < l; ++i) {
        var c = s.charCodeAt(i);
        if (c < 97)
            return parseInt(s, 36);
        acc += (c - 97) * Math.pow(26, l - (i + 1));
    }
    return acc;
}
(function() {
    window.AudioContext = window.AudioContext || window.webkitAudioContext;
    Math.angle = function(x1, y1, x2, y2) {
        var a2 = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);
        var b2 = x2 * x2 + y2 * y2;
        var c2 = x1 * x1 + y1 * y1;
        var a = Math.sqrt(a2),
            b = Math.sqrt(b2),
            c = Math.sqrt(c2);
        var cosa = (b2 + c2 - a2) / (2 * b * c);
        var angle = Math.acos(cosa);
        if (x1 * y2 - y1 * x2 < 0)
            angle = Math.PI * 2 - angle;
        return angle;
    };
    Math.sign = Math.sign || function(s) {
        if (s < 0)
            return -1;
        if (s == 0)
            return 0;
        return 1;
    };
    if (!Array.prototype.forEach) {
        Array.prototype.forEach = function(callback, thisArg) {
            var T,
                k;
            if (this == null) {
                throw new TypeError(' this is null or not defined');
            }
            var O = Object(this);
            var len = O.length >>> 0;
            if (typeof callback !== "function") {
                throw new TypeError(callback + ' is not a function');
            }
            if (arguments.length > 1) {
                T = thisArg;
            }
            k = 0;
            while (k < len) {
                var kValue;
                if (k in O) {
                    kValue = O[k];
                    callback.call(T, kValue, k, O);
                }
                k++;
            }
        };
    }
    window.performance = window.performance || {};
    performance.now = (function() {
        return performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow || Date.now
    })();
    var audioContext;
    try {
        if (AudioContext)
            audioContext = new AudioContext();
    } catch (e) {}
    var readyCB = [];
    window.need = function(deps, cb, url)
    {
        if (typeof deps == "string")
            deps = deps.split(" ");
        for (var i = 0; i < deps.length; ++i) {
            var dep = deps[i];
            if (typeof dep == "string") {
                deps[i] = {
                    FQCN: dep,
                    URL: dep.replace(/\./g, "/") + ".js",
                    NEEDS: null
                };
            } else if (!dep.FQCN) {
                var ext = dep.URL.match(/\.[a-zA-Z0-9]+$/);
                ext = (ext || [""])[0].toLowerCase();
                var path = dep.URL;
                if (ext != "css")
                    path = path.replace(/\.[a-zA-Z0-9]+$/, '');
                dep.FQCN = path.replace(/[\\/]+/g, '.');
            }
        }
        readyCB.push({
            deps: deps,
            cb: cb,
            url: url
        });
    };
    function resolveNeeds() {
        var tryAgain = true;
        while (readyCB.length && tryAgain) {
            tryAgain = false;
            for (var i = 0, obj; obj = readyCB[i]; ++i) {
                var fail = false;
                for (var j = 0, dep; !fail && (dep = obj.deps[j]); ++j)
                {
                    var hnd = MAR.resolve(dep.FQCN, null, false, true);
                    fail = !(hnd.obj && hnd.key in hnd.obj);
                    if (fail)
                        LOG("Failed dep: ", dep.FQCN);
                }
                if (!fail) {
                    if (obj.cb) {
                        obj.cb.call(window);
                        obj.cb = null;
                    }
                    readyCB.splice(i--, 1);
                    tryAgain = true;
                }
            }
        }
    }
    function Resolve(name, ctx) {
        this.key = name;
        var setCB = [];
        this.get = function() {
            return MAR.resolve(name, ctx);
        };
        this.set = function(v) {
            for (var i = 0, f; f = setCB[i]; ++i)
                f(v);
            return MAR.resolve(name, ctx, v);
        };
        this.onSet = function(f) {
            setCB.push(f);
            return this;
        };
    }
    function Loader()
    {
        var skip = {};
        var queueSize = 1;
        var parseQueue = [];
        var started = false;
        var THIS = this;
        this.domain = "";
        this.onload = null;
        this.register = function(name, data) {
            if (typeof name == "string") {
                if (/^url:/.test(name))
                    name = name.replace(/^url:/, "").replace(/\//g, ".").replace(/\.[a-zA-Z0-9]+$/, "");
                name = new Resolve(name);
            }
            name.set(data);
        }
        this.start = function()
        {
            if (started)
                return;
            started = true;
            popQueue();
        }
        this.getURL = getURL;
        this.load = function load(url, name)
        {
            if (!url || url in skip) {
                this.skipped = true;
                return this;
            }
            this.skipped = false;
            var THIS = this;
            queueSize++;
            url = url.replace(/\$nocache\$/i, Math.random() + "");
            if (!/^https?:/i.test(url))
                url = this.domain + url;
            if (!name)
                name = "url:" + url;
            var ext = url.match(/(\.[a-zA-Z0-9_]*)(?:$|\?)/);
            ext = (ext && ext[1]) || url;
            skip[url] = true;
            if (window.CACHE_KILL) {
                if (url.indexOf("?") != -1)
                    url += "&";
                else
                    url += "?CK=";
                url += window.CACHE_KILL;
            }
            if (ext.match(/\.js$/))
            {
                var se = document.createElement("script");
                se.addEventListener("load", popQueue.bind(null, url));
                se.addEventListener("error", function() {});
                se.src = url;
                document.head.appendChild(se);
            }
            else if (ext.match(/\.css$/))
            {
                var q = Array.prototype.slice.call(arguments, 2).join(" ");
                if (window.matchMedia(q).matches)
                {
                    se = document.createElement("link");
                    THIS.register(name, se);
                    se.addEventListener("load", popQueue.bind(null, url));
                    se.href = url;
                    se.rel = "stylesheet";
                    se.type = "text/css";
                    document.head.appendChild(se);
                }
                else
                {
                    popQueue(url);
                }
            }
            else if (ext.match(/\.woff2/))
            {
                this.getURL(url, function(src) {
                    if (!src) {
                        THIS.register(name, true);
                        popQueue(url);
                        return;
                    }
                    var s = document.createElement("style");
                    s.textContent = "@font-face{" + "font-family: '" + name.key + "';\n" + "font-style: normal;\n" + "font-weight: 400;\n" + "src: url(data:application/x-font-woff;charset=utf-8;base64," + btoa(src) + ") format('woff2');\n" + "}";
                    document.head.appendChild(s);
                    setTimeout(function() {
                        THIS.register(name, true);
                        popQueue(url);
                    }, 100);
                }, {
                    binary: true,
                    anystate: true
                });
            }
            else if (ext.match(/\.png$|\.jpg$|\.gif$/i))
            {
                var ie = document.createElement("img");
                if (window.location.hostname !== "localhost")
                    ie.crossOrigin = "anonymous";
                THIS.register(name, ie);
                ie.addEventListener("load", function() {
                    MAR.remove(ie);
                    popQueue(url);
                });
                if (location.protocol == "file:" || (this.domain && this.domain != location.domain)) {
                    if (window.URL && window.URL.createObjectURL) {
                        getURL(url, function(data) {
                            ie.src = window.URL.createObjectURL(new Blob([data], {
                                type: 'image/png'
                            }));
                        }, {
                            arraybuffer: true
                        });
                    } else {
                        getURL(url, function(data) {
                            ie.src = "data:image/png;base64," + btoa(data);
                        }, {
                            binary: true
                        });
                    }
                } else
                    ie.src = url;
                document.head.appendChild(ie);
            }
            else if (ext.match(/\.wav|\.mp3|\.ogg$/i))
            {
                function fallback() {
                    var ae = new Audio();
                    ae.preload = true;
                    var CPT = ae.canPlayType("audio/" + ext.replace(/^\./, ""));
                    var loaded = false;
                    function onLoadSound() {
                        if (loaded)
                            return;
                        loaded = true;
                        THIS.register(name, ae);
                        popQueue(url);
                        ae.removeEventListener("canplaythrough", onLoadSound);
                    }
                    ;
                    ae.addEventListener("canplaythrough", onLoadSound);
                    setTimeout(onLoadSound, 1000);
                    ae.addEventListener("error", function() {});
                    ae.src = url;
                }
                if (audioContext) {
                    this.getURL(url, function(src) {
                        if (!src)
                            return fallback();
                        audioContext.decodeAudioData(src, function(src) {
                            THIS.register(name, src);
                            popQueue(url);
                        }, function() {
                            console.log("Error decoding audio", url);
                            fallback();
                        });
                    }, {
                        arraybuffer: true
                    });
                } else {
                    fallback();
                }
            }
            else
            {
                args = arguments;
                this.getURL(url, function(data) {
                    if (Array.prototype.indexOf.call(args, "noparse") == -1)
                    {
                        if (ext.match(/.*\.(json|scon)$/) && typeof data == "string") {
                            try {
                                data = JSON.parse(data);
                            } catch (e) {
                                console.warn(e, data);
                            }
                        }
                        if (url.match(/vxl/))
                        {
                            parseQueue.push((function(name, data) {
                                THIS.register(name, new VoxelMesh(data).getMesh());
                            }).bind(null, name, data));
                        }
                    }
                    THIS.register(name, data);
                    popQueue(name);
                });
            }
        }
        function popQueue(name)
        {
            queueSize--;
            if (queueSize == 0)
            {
                parseQueue.forEach(function(f) {
                    f();
                });
                resolveNeeds();
                if (readyCB.length) {
                    var fail;
                    for (var i = 0, obj; obj = readyCB[i]; ++i) {
                        for (var j = 0, dep; dep = obj.deps[j]; ++j) {
                            var hnd = MAR.resolve(dep.FQCN, null, false, true);
                            fail = !(hnd.obj && hnd.key in hnd.obj);
                            if (fail)
                                THIS.load(dep.URL, dep.FQCN);
                        }
                    }
                    return;
                }
                started = false;
                queueSize = 1;
                if (THIS.onload)
                    THIS.onload();
            }
        }
    }
    ;
    function resolve(strpath, octx, writeValue, returnHandle)
    {
        if (!strpath.split)
            (function() {
                debugger;
            })();
        octx = octx || window;
        var ctx = octx;
        var path = strpath instanceof Array ? strpath : strpath.split(".");
        if (path[0] == "this")
            path.shift();
        path = path.map(function(s) {
            return s.replace(/\\_/g, ".");
        });
        if (writeValue === undefined && !returnHandle)
        {
            for (var i = 0; i < path.length && ctx; ++i)
                ctx = ctx[path[i]];
            if (i < path.length && octx.parentCTX)
                ctx = resolve(path, octx.parentCTX);
        }
        else
        {
            var isNew = false;
            for (var i = 0; i < path.length - 1; ++i)
            {
                if (!ctx)
                    break;
                if (!(path[i] in ctx)) {
                    isNew = true;
                    if (writeValue)
                        ctx[path[i]] = {};
                }
                ctx = ctx[path[i]];
            }
            if (returnHandle) {
                if (path.length)
                    ctx = {
                        obj: ctx,
                        key: path[i],
                        value: ctx && ctx[path[i]],
                        isNew: isNew || (path.length && (!ctx || (ctx && !(path[i] in ctx)))),
                        parentIsNew: isNew
                    };
                else {
                    ctx = {
                        obj: ctx,
                        key: "this",
                        value: ctx,
                        isNew: false,
                        parentIsNew: false
                    };
                }
            } else if (ctx)
                return ctx[path[i]] = writeValue;
        }
        return ctx;
    }
    function postURL(url, data, cb, cfg)
    {
        cfg = cfg || {};
        var xhr = new XMLHttpRequest();
        xhr.open("POST", url, true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.onreadystatechange = function()
        {
            if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status === 0 || cfg.anystate))
                cb(xhr.response || xhr.responseText, xhr.status);
        };
        var acc = "";
        for (var k in data) {
            v = data[k];
            if (typeof v != "string")
                v = JSON.stringify(v);
            acc += k + "=" + encodeURIComponent(v) + "&";
        }
        xhr.send(acc);
    }
    function postJSONURL(url, data, cb)
    {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", url, true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onreadystatechange = function()
        {
            if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status === 0))
                cb(xhr.response || xhr.responseText);
        };
        xhr.send(JSON.stringify(data));
    }
    function getURL(url, cb, cfg)
    {
        cfg = cfg || {};
        if (!("tries" in cfg))
            cfg.tries = 0;
        var nurl = url.replace(/(^|\/)[^\/]*\/\.\.\//g, '$1').replace(/(^|\/)(?:\.?\/)+/g, '$1');
        if (self.FS && self.FS.FILE && self.FS.FILE[nurl]) {
            setTimeout(function() {
                var data = self.FS.FILE[nurl];
                if (data instanceof Uint8ClampedArray) {
                    if (!cfg.arraybuffer) {
                        var b = "";
                        for (var i = 0, l = data.length; i < l; ++i)
                            b += String.fromCharCode(data[i]);
                        data = b;
                    } else
                        data = data.buffer;
                }
                cb(data);
            }, 1);
            return;
        }
        var xhr = new XMLHttpRequest();
        if (cfg.binary)
            xhr.overrideMimeType("text/plain; charset=x-user-defined");
        if (cfg.arraybuffer)
            xhr.responseType = 'arraybuffer'
        xhr.open("GET", url, true);
        xhr.onreadystatechange = function()
        {
            if (xhr.readyState != 4)
                return;
            var v,
                status = xhr.status;
            try {
                v = xhr.response || xhr.responseText;
            } catch (ex) {}
            if (status === 0 && v)
                status = 200;
            if (status === 0) {
                if (cfg.tries++ > 20) {
                    cb(null, 0);
                } else {
                    getURL(url, cb, cfg);
                    return;
                }
            }
            if (status == 200 || cfg.anystate)
            {
                if (cfg.binary && v)
                {
                    var r = '';
                    for (var i = 0; i < v.length; ++i)
                    {
                        cc = v.charCodeAt(i);
                        r += String.fromCharCode(cc & 0xFF);
                    }
                    v = r;
                }
                cb(v, status);
            }
        };
        xhr.send();
    }
    function newApply(clazz, args) {
        return new (clazz.bind.apply(clazz, [null].concat(args)));
    }
    function TEXT(txt)
    {
        var html = null,
            i,
            l;
        if (txt instanceof HTMLElement) {
            html = txt;
            txt = txt.dataset.i18n || txt.textContent;
            if (txt.trim() == "")
                return;
            var param = [];
            for (i = 0, l = arguments.length; i < l; ++i)
                param[i] = arguments[i];
            for (i = 0, l = html.childNodes.length; i < l; ++i) {
                var child = html.childNodes[i];
                if (child instanceof Text) {
                    var old = child.i18n || child.nodeValue;
                    child.i18n = old;
                    param[0] = old;
                    child.nodeValue = TEXT.apply(null, param);
                }
            }
            return html;
        }
        if (typeof txt != "string")
            return;
        var dict = TEXT.languages[TEXT.language],
            prefix = "",
            suffix = "";
        if (dict) {
            if (dict[txt])
                txt = dict[txt];
            else {
                var m = txt.match(/^([^a-z0-9]*)(.*?)([^a-z0-9]*)$/i);
                if (m && dict[m[2]]) {
                    prefix = m[1];
                    txt = dict[m[2]];
                    suffix = m[3];
                }
            }
        }
        for (i = 1; i < arguments.length; ++i)
            txt = txt.replace(new RegExp("%" + i, "g"), arguments[i]);
        var exp = /\{([a-zA-Z.]+)\}/;
        var pos = 0;
        while (m = txt.match(exp))
            txt = txt.substr(0, m.index) + DOC.resolve(m[1], DOC.TEXT.context) + txt.substr(m.index + m[0].length);
        txt = prefix + txt + suffix;
        return txt;
    }
    TEXT.context = null;
    TEXT.language = navigator.language;
    TEXT.languages = {};
    TEXT.addTexts = function(language, textObj) {
        if (!TEXT.languages[language])
            TEXT.languages[language] = {};
        if (!textObj || typeof textObj != "object")
            return;
        DOC.mergeTo(TEXT.languages[language], textObj);
    };
    TEXT.chooseLanguage = function(available) {
        if (!available)
            return;
        var ai = {};
        available.forEach(function(v) {
            var l = v.replace(/^([a-z][a-z])-.*/i, "$1");
            ai[l.toLowerCase()] = v;
            ai[v] = v;
        });
        var languages = navigator.languages || [navigator.language];
        for (var i = 0, l = languages.length; i < l; ++i) {
            if (ai[languages[i]])
                return TEXT.language = ai[languages[i]];
            var ulang = (languages[i] || "").replace(/^([a-z][a-z])-.*/i, "$1").toLowerCase();
            if (ai[ulang])
                return TEXT.language = ai[ulang];
        }
        return TEXT.language = available[0];
    };
    TEXT.i18n = function(obj) {
        if (!obj)
            return;
        for (var k in obj) {
            TEXT.addTexts(k, obj[k]);
        }
    },
    TEXT.batch = function(el) {
        if (el instanceof Element)
            TEXT(el);
        if (el.children)
            for (var i = 0, c; c = el.children[i]; ++i)
                TEXT.batch(c);
    };
    (function() {
        var nextUID = 1;
        CLAZZ = function(name, clazz) {
            "use strict";
            if (typeof name == "object")
            {
                clazz = name;
                name = null;
            }
            if (!clazz)
                return null;
            var ctor = clazz["CONSTRUCTOR"],
                desc = {
                    __uid: {
                        value: 0,
                        enumerable: false,
                        writable: false
                    }
                };
            var injects = {},
                provides = {};
            var metas = {};
            var methods = {};
            var props = {};
            var ret = function() {
                if (!this || this == self)
                    return new (ret.bind.apply(ret, [null].concat(slice.call(arguments))));
                if (nextInstanceName && nextInstanceClazz === ret) {
                    ret.singletons[nextInstanceName] = this;
                    nextInstanceName = null;
                    nextInstanceClazz = null;
                }
                var isLast = !this.__uid;
                if (isLast)
                {
                    desc.__uid.value = nextUID++;
                    Object.defineProperties(this, desc);
                    doInjections(this, injects, name);
                }
                if (ctor)
                {
                    var superBackup = SUPER;
                    SUPER = (ctor.SUPER && ctor.SUPER.bind(this));
                    ctor.apply(this, slice.call(arguments, 0));
                    SUPER = superBackup;
                }
                if (isLast && !clazz.DYNAMIC)
                    Object.seal(this);
            };
            ret.properties = props;
            ret.methods = methods;
            ret.descriptor = desc;
            function getWrapper(func) {
                return function() {
                    var args = [];
                    for (var i = 0, l = arguments.length; i < l; ++i)
                        args[i] = arguments[i];
                    var superBackup = (self || {}).SUPER;
                    var s = func.SUPER;
                    if (s.SUPER)
                        s = getWrapper(s);
                    SUPER = s.bind(this);
                    var ret = func.apply(this, args);
                    SUPER = superBackup;
                    return ret;
                };
            }
            function addMerge(dest, src) {
                for (var sk in src)
                    if (!(sk in dest))
                        dest[sk] = src[sk];
            }
            var cclazz = clazz,
                sk;
            while (cclazz) {
                var base = cclazz["EXTENDS"];
                if (typeof base == "string")
                    base = resolve(base);
                for (var k in cclazz)
                {
                    if (k == "EXTENDS" || k == "ENUMERABLE" || k in desc)
                        continue;
                    var v = cclazz[k];
                    if (k == "INJECT") {
                        if (Array.isArray(v)) {
                            for (sk = 0; sk < v.length; ++sk) {
                                if (!(v[sk] in injects))
                                    injects[v[sk]] = v[sk]
                            }
                        } else
                            addMerge(injects, v);
                        continue;
                    }
                    if (k == "PROVIDES") {
                        addMerge(provides, v);
                        continue;
                    }
                    if (k == "MIXIN") {
                        for (sk = 0; sk < v.length; ++sk) {
                            var mix = v[sk];
                            if (typeof mix == "string")
                                mix = resolve(v[sk]);
                            if (mix.descriptor)
                                addMerge(desc, mix.descriptor);
                        }
                        continue;
                    }
                    if (k == "STATIC") {
                        addMerge(ret, v);
                        continue;
                    }
                    var obj = {};
                    if (typeof v == "function")
                    {
                        if (k == "CONSTRUCTOR")
                        {
                            v.SUPER = cclazz["EXTENDS"];
                            if (typeof v.SUPER == "string")
                                v.SUPER = resolve(v.SUPER);
                            continue;
                        }
                        if (cclazz["EXTENDS"])
                        {
                            var cbase = base;
                            while (cbase && cbase.CLAZZ && !cbase.CLAZZ[k])
                            {
                                cbase = cbase.CLAZZ["EXTENDS"];
                                if (typeof cbase == "string")
                                    cbase = resolve(cbase);
                            }
                            if (cbase && cbase.CLAZZ && cbase.CLAZZ[k]) {
                                v.SUPER = cbase.CLAZZ[k];
                                v = getWrapper(v);
                            }
                        }
                        obj.writable = clazz["DYNAMIC"] == true;
                        methods[k] = v;
                    }
                    else
                    {
                        obj.writable = true;
                        props[k] = v;
                    }
                    obj.value = v;
                    desc[k] = obj;
                }
                if (cclazz["ENUMERABLE"]) {
                    for (var i = 0, k; k = cclazz["ENUMERABLE"][i]; ++i)
                        desc[k].enumerable = true;
                }
                cclazz = base && base.CLAZZ;
            }
            ret.meta = metas;
            Object.seal(metas);
            ret.instance = null;
            ret.fullName = name;
            if (!name)
                name = "$Anon" + (nextUID++);
            ret.toString = function() {
                return "[CLAZZ " + name + "]";
            };
            ret.NAME = name.split(".").pop();
            ret.CLAZZ = clazz;
            if (clazz["EXTENDS"])
            {
                base = clazz["EXTENDS"];
                if (typeof base == "string")
                    base = resolve(base);
                if (!base) {
                    console.warn(name, " could not inherit from ", clazz["EXTENDS"]);
                }
                ret.prototype = Object.create(base.prototype);
                ctor = clazz["CONSTRUCTOR"] || base;
                Object.defineProperty(ret.prototype, "constructor", {
                    value: ret
                });
            }
            setupProvides(ret, provides);
            return ret;
        }
        var dibindings = [{}],
            nextInstanceName,
            nextInstanceClazz;
        function resolve(strpath, write, ctx) {
            var path = strpath.split(".");
            var i = 0;
            if (!ctx || path[0] != "this")
                ctx = self;
            if (path[0] == "this")
                i++;
            if (write === undefined) {
                for (; ctx && i < path.length; ++i)
                    ctx = ctx[path[i]];
                return ctx;
            } else {
                for (; i < path.length - 1; ++i)
                    ctx = ctx[path[i]] || (ctx[path[i]] = {});
                ctx[path[i]] = write;
            }
        }
        function doInjections(obj, injects, name) {
            try {
                for (var k in injects)
                    obj[k] = CLAZZ.get(injects[k], null, obj, obj[k]);
            } catch (ex) {
                if (ex instanceof BindingError)
                    throw new BindingError(ex.message + " instancing clazz " + name);
                throw (ex);
            }
        }
        function setupProvides(ret, provides) {
            var bindctx = dibindings[dibindings.length - 1],
                name = ret.fullName;
            if (!ret.NEW)
                ret.NEW = function() {
                    var args = slice.call(arguments);
                    args.unshift(null);
                    return new (ret.bind.apply(ret, args));
                };
            for (var k in provides) {
                if (!bindctx[k]) {
                    CLAZZ[provides[k]](k, ret);
                    resolve(k, CLAZZ.get.bind(CLAZZ, k));
                }
            }
            if (name) {
                resolve(name, ret);
                if (!bindctx[name])
                    CLAZZ.implements(name, ret);
            }
        }
        function Injection(resolve, name, context) {
            this.resolve = resolve || name == "this";
            this.name = name;
            this.context = context;
        }
        CLAZZ.makeInjection = function(resolve, name, context) {
            return new Injection(resolve, name, context);
        };
        CLAZZ.Injection = Injection;
        self.INJECT = CLAZZ.makeInjection.bind(null, false);
        self.RESOLVE = CLAZZ.makeInjection.bind(null, true);
        CLAZZ.withContext = function(context, cb, THIS) {
            var ret;
            if (context) {
                dibindings.push({});
                for (var k in context) {
                    var v = context[k];
                    if (v && v instanceof Injection) {
                        if (v.debugger)
                            (function() {
                                debugger;
                            })();
                        if (v.resolve)
                            CLAZZ.set(k, resolve(v.name, undefined, THIS));
                        else
                            CLAZZ.set(k, CLAZZ.get(v));
                    } else if (v !== undefined)
                        CLAZZ.set(k, v);
                }
                ret = cb();
                if (dibindings.length == 1)
                    throw "Can't pop last context.";
                dibindings.pop();
            } else
                ret = cb();
            return ret;
        };
        CLAZZ.factory = function(name, clazz) {
            if (typeof clazz == "string")
                clazz = resolve(clazz);
            dibindings[dibindings.length - 1][name] = function() {
                return function(context) {
                    return CLAZZ.withContext(context, function() {
                        return new clazz()
                    }, self);
                }
            };
            return CLAZZ.factory;
        };
        CLAZZ.singleton = function(name, clazz) {
            if (typeof clazz == "string")
                clazz = resolve(clazz);
            if (!clazz.singletons)
                clazz.singletons = {};
            dibindings[dibindings.length - 1][name] = function() {
                var inst = clazz.singletons[name];
                if (inst)
                    return inst;
                nextInstanceName = name;
                nextInstanceClazz = clazz;
                return clazz.singletons[name] = new clazz();
            };
            return CLAZZ.singleton;
        };
        CLAZZ.implements = function(name, clazz) {
            if (typeof clazz == "string")
                clazz = resolve(clazz);
            dibindings[dibindings.length - 1][name] = function() {
                return new clazz();
            }
            return CLAZZ.implements;
        };
        CLAZZ.set = function(name, value) {
            dibindings[dibindings.length - 1][name] = function() {
                return value;
            }
            return CLAZZ.set;
        };
        function BindingError(msg) {
            Error.call(this, msg);
            this.message = msg;
        }
        BindingError.prototype = Object.create(Error.prototype);
        CLAZZ.get = function(m, context, THIS, def) {
            var name;
            if (typeof m == "string")
                name = m;
            else if (m instanceof Injection) {
                name = m.name;
                context = m.context;
                if (context && context.debugger)
                    (function() {
                        debugger;
                    })();
                if (m.resolve) {
                    var value = resolve(name, undefined, THIS);
                    if (value === undefined) {
                        if (def === undefined)
                            throw ("Resolve not found: " + name);
                        return def;
                    }
                    return value;
                }
            }
            var bind,
                ctxId = dibindings.length - 1;
            do {
                bind = dibindings[ctxId][name];
            } while (!bind && --ctxId > -1);
            if (!bind) {
                if (def === undefined)
                    throw new BindingError("Binding not found: " + name);
                else
                    return def;
            }
            return CLAZZ.withContext(context, bind, THIS);
        };
        CLAZZ.getUID = function() {
            return nextUID++;
        };
    })();
    function Pool()
    {
        var methods = {
            constructor: []
        };
        var silence = {
            "onTick": 1,
            "onPostTick": 1,
            "onRender": 1,
            "onPreRender": 1
        };
        var debug = null;
        var proxies = [];
        function onEvent(e)
        {
            var target = e.target;
            var names = (target.className || "").split(/\s+/).filter(function(n) {
                return n.length > 0;
            });
            var event = e.type;
            event = event.substr(0, 1).toUpperCase() + event.substr(1);
            while (target)
            {
                var id = target.id;
                if (target.onclick)
                    return;
                if (id)
                {
                    id = id.substr(0, 1).toUpperCase() + id.substr(1);
                    var i = 0,
                        name;
                    if (names.length)
                    {
                        while (name = names[i++])
                        {
                            name = name.substr(0, 1).toUpperCase() + name.substr(1);
                            $$("on" + event + id + name, target);
                        }
                    }
                    else
                    {
                        $$("on" + event + id, target);
                    }
                    break;
                }
                target = target.parentNode;
            }
        }
        this.registerEvents = function(target, args) {
            if (!args && target && MAR.typeOf(target) == "array")
            {
                args = target;
                target = null;
            }
            if (!target)
                target = document.body;
            if (!args)
            {
                args = [];
                for (var k in target)
                {
                    var m = k.match(/^on(.+)/);
                    if (!m)
                        continue;
                    args.push(m[1]);
                }
            }
            args.forEach(function(arg) {
                target.addEventListener(arg, onEvent);
            });
        };
        this.debug = function(m) {
            debug = m;
        };
        this.silence = function(m) {
            silence[m] = 1;
        };
        this.addProxy = function(obj) {
            if (obj && obj.call)
                proxies.push(obj);
        };
        this.removeProxy = function(obj) {
            var i = proxies.indexOf(obj);
            if (i == -1)
                return;
            proxies.splice(i, 1);
        };
        this.add = function(obj, enableDirectMsg)
        {
            if (!obj)
                return;
            if (debug && obj.constructor.name == debug)
                LOG("add", obj);
            if (!("__uid" in obj))
                obj.__uid = DOC.getUID();
            if (obj.constructor.methods)
            {
                var arr = obj.constructor.methods;
                if (!(obj.methods instanceof Array))
                    arr = Object.keys(obj.constructor.methods);
                var l = arr.length;
                for (var i = 0; i < l; ++i)
                {
                    var m = arr[i];
                    this.listen(obj, m, enableDirectMsg);
                }
            }
            else
            {
                for (var k in obj)
                {
                    if (typeof obj[k] != "function")
                        continue;
                    this.listen(obj, k);
                }
            }
        };
        this.remove = function(obj)
        {
            if (obj.constructor.name == debug)
                LOG("remove", obj);
            for (var k in (obj.constructor.methods || obj))
                this.mute(obj, k);
        };
        this.listen = function(obj, name, enableDirectMsg)
        {
            var method = obj[name];
            if (typeof method != "function")
                return;
            var arr = methods[name];
            if (!arr) {
                var copy = [];
                arr = methods[name] = [];
                Object.defineProperties(arr, {
                    call: {
                        value: function doPoolCall(args)
                        {
                            var ret,
                                listeners = copy,
                                length = this.length;
                            for (var count = 0; count < length; ++count)
                                listeners[count] = this[count];
                            for (count = 0; count < length; ++count)
                            {
                                var data = listeners[count];
                                var lret = data.bound.apply(data.obj, args);
                                if (lret !== undefined)
                                    ret = lret;
                            }
                            return ret;
                        }
                    }
                });
            } else
                this.mute(obj, name);
            var bound = method;
            if (bound.prototype)
                bound = bound.bind(obj);
            arr[arr.length] = {
                bound: bound,
                obj: obj
            };
        };
        var sig,
            sigfunc;
        this.reset = function() {
            methods = {};
            proxies = [];
        };
        this.mute = function(obj, name)
        {
            var listeners = methods[name];
            if (!listeners)
                return;
            for (var i = 0, l = listeners.length; i < l; ++i) {
                if (listeners[i].obj != obj)
                    continue;
                listeners.splice(i, 1);
                return;
            }
        };
        this.call = function(method)
        {
            if (method === undefined)
            {
                console.error("Undefined call");
                return;
            }
            if (!silence[method])
                console.log(method);
            var args = [];
            for (var i = 1, l = arguments.length; i < l; i++)
                args[i - 1] = arguments[i];
            for (var i = 0; i < proxies.length; ++i) {
                proxies[i].call(method, args);
            }
            var listeners = methods[method];
            if (listeners)
                return listeners.call(args);
        };
    }
    var GUIDlut = [];
    (function() {
        for (var i = 0; i < 256; i++)
            GUIDlut[i] = (i < 16 ? '0' : '') + (i).toString(16);
    })();
    var DOC = {
        Pool: Pool,
        DOM_EVENTS: ["onreadystatechange", "onpointerlockchange", "onpointerlockerror", "onbeforecopy", "onbeforecut", "onbeforepaste", "oncopy", "oncut", "onpaste", "onsearch", "onselectionchange", "onselectstart", "onwheel", "onwebkitfullscreenchange", "onwebkitfullscreenerror", "onabort", "onblur", "oncancel", "oncanplay", "oncanplaythrough", "onchange", "onclick", "onclose", "oncontextmenu", "oncuechange", "ondblclick", "ondrag", "ondragend", "ondragenter", "ondragleave", "ondragover", "ondragstart", "ondrop", "ondurationchange", "onemptied", "onended", "onerror", "onfocus", "oninput", "oninvalid", "onkeydown", "onkeypress", "onkeyup", "onload", "onloadeddata", "onloadedmetadata", "onloadstart", "onmousedown", "onmouseenter", "onmouseleave", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "onmousewheel", "onpause", "onplay", "onplaying", "onprogress", "onratechange", "onreset", "onresize", "onscroll", "onseeked", "onseeking", "onselect", "onshow", "onstalled", "onsubmit", "onsuspend", "ontimeupdate", "ontoggle", "onvolumechange", "onwaiting", "onautocomplete", "onautocompleteerror"],
        onTilt: function(cb) {
            if (window.DeviceOrientationEvent) {
                window.addEventListener("deviceorientation", function() {
                    cb(event.beta, event.gamma, event.alpha, event.absolute, event);
                }, true);
            } else
                return false;
            return true;
        },
        isPointerLocked: function() {
            return document.pointerLockElement != null;
        },
        lockPointer: function(lock, el) {
            el = el || document.documentElement;
            if (lock) {
                el.requestPointerLock = el.requestPointerLock || el.mozRequestPointerLock;
                el.requestPointerLock();
            } else {
                document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock;
                document.exitPointerLock();
            }
        },
        isFullScreen: function() {
            var doc = window.document;
            return doc.fullscreenElement || doc.mozFullScreenElement || doc.webkitFullscreenElement || doc.msFullscreenElement || false;
        },
        toggleFullScreen: function(toggle) {
            var doc = window.document;
            var docEl = doc.documentElement;
            var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
            var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;
            var state = this.isFullScreen();
            if (toggle == undefined)
                toggle = state;
            if (toggle != state)
                requestFullScreen.call(toggle);
            else
                cancelFullScreen.call(doc);
        },
        getTextWidth: function(text, font) {
            var canvas = DOC.getTextWidth.canvas || (DOC.getTextWidth.canvas = document.createElement("canvas"));
            var context = canvas.getContext("2d");
            context.font = font || "12px arial";
            var metrics = context.measureText(text);
            return metrics.width;
        },
        create: function()
        {
            var tag;
            var prop = {};
            var children;
            var parent;
            for (var i = 0; i < arguments.length; ++i)
            {
                var arg = arguments[i];
                var type = MAR.typeOf(arg, Element);
                switch (type)
                {
                case "string":
                    tag = arg;
                    break;
                case "object":
                    MAR.mergeTo(prop, arg);
                    break;
                case "array":
                    children = arg;
                    break;
                case "Element":
                    parent = arg;
                    break;
                }
            }
            parent = parent || prop.parent;
            tag = tag || prop.tag || {
                "select": "option",
                "ul": "li",
                "ol": "li",
                "table": "tr",
                "tr": "td",
            }[prop.parentTag || (parent && parent.tagName.toLowerCase())] || "span";
            children = children || [];
            if ("children" in prop)
                children = children.concat(prop.children);
            var el = document.createElement(tag);
            var f = {
                tag: function() {},
                style: MAR.mergeTo.bind(MAR, el.style),
                children: function() {},
                attr: function(a) {
                    for (k in a)
                        el.setAttribute(k, a[k]);
                },
                dataset: function(a) {
                    for (k in a)
                        el.setAttribute("data-" + k, a[k]);
                },
                html: function(s) {
                    el.innerHTML = s;
                },
                text: function(s) {
                    el.textContent = s;
                }
            };
            for (i in prop)
            {
                if (i in f)
                    f[i](prop[i]);
                else
                    el[i] = prop[i];
            }
            var before = prop.before;
            if (before)
            {
                if (typeof before == "string")
                    before = DOC.qs(before) || DOC.byId(before);
                if (before && before.parentElement)
                    parent = before.parentElement;
            }
            if (parent)
            {
                if (typeof parent == "string")
                    parent = DOC.qs(parent) || DOC.byId(parent);
                parent.insertBefore(el, before);
            }
            for (var k = 0, v; k < children.length; ++k)
            {
                v = children[k];
                if (v === undefined)
                    continue;
                type = MAR.typeOf(v, Element);
                switch (type) {
                case "Element":
                    break;
                case "string":
                    v = {
                        html: v
                    };
                case "object":
                    v = [v];
                case "array":
                    v = DOC.create.apply(DOC, v.concat({
                        parentTag: tag
                    }));
                    break;
                default:
                    console.error(type);
                    break;
                }
                if (!v.parentNode)
                    el.appendChild(v);
            }
            return el;
        },
        byId: function(id) {
            return document.getElementById(id);
        },
        qs: function(q) {
            return document.querySelector(q);
        },
        index: function(root, obj, attach, autoCfg)
        {
            obj = obj || Object.create(DOC, {});
            root = root || document.body;
            if (typeof autoCfg != "object")
                autoCfg = null;
            autoCfg = autoCfg || {
                ctx: attach
            };
            function process(c, name, obj, type) {
                var a;
                if (!c.update && !c.controller) {
                    if ((a = c.dataset.clazz || c.getAttribute("clazz"))) {
                        if (c.dataset.array) {
                            c.update = DOC.auto.bind(DOC, c);
                            c.update(autoCfg);
                        } else {
                            c.controller = CLAZZ.get(a, {
                                element: c,
                                context: autoCfg
                            });
                        }
                    } else if (c.dataset.array) {
                        c.update = function() {
                            DOC.removeChildren(c);
                            var arr = DOC.resolve(c.dataset.array, autoCfg.ctx);
                            if (Array.isArray(arr)) {
                                for (var i = 0, l = arr.length; i < l; ++i) {
                                    DOC.create(c, {
                                        text: "" + arr[i]
                                    });
                                }
                            } else if (arr) {
                                for (var k in arr) {
                                    DOC.create(c, {
                                        text: "" + arr[k],
                                        value: "" + k
                                    });
                                }
                            }
                        }
                    } else if ((a = c.dataset.resolve || c.getAttribute("resolve") || c.resolve)) {
                        c.update = function() {
                            c.textContent = DOC.TEXT("" + DOC.resolve(a, autoCfg.ctx));
                        };
                    }
                }
                if (!name || typeof name != "string")
                    return;
                name = name.trim();
                addToIndex(name);
                if (name.indexOf("-") !== -1) {
                    var parts = name.split("-");
                    name = parts[0].toLowerCase();
                    for (var p = 1, l = parts.length; p < l; ++p)
                        name += parts[p].charAt(0).toUpperCase() + parts[p].substr(1).toLowerCase();
                    addToIndex(name);
                }
                return;
                function addToIndex(name) {
                    var a = obj.hasOwnProperty(name) && obj[name];
                    if (a && (a == c || (a.indexOf && a.indexOf(c) != -1)))
                        return;
                    if (!a) {
                        obj[name] = c;
                    } else if (a.push) {
                        a.push(c);
                    } else {
                        obj[name] = [a, c];
                    }
                }
            }
            if (!obj.__ROOT__) {
                obj.__ROOT__ = root;
                process(root, root.id, obj);
                process(root, root.name, obj);
                process(root, root.className, obj, "class");
                process(root, root.tagName, obj, "tag");
                root.className.trim().split(/\s+/).forEach(function(name) {
                    process(root, name, obj, "class");
                });
            }
            if (root.children) {
                for (var i = 0, c; c = root.children[i]; ++i)
                {
                    process(c, c.id, obj);
                    process(c, c.name, obj);
                    if (c.className)
                        process(c, c.className, obj, "class");
                    process(c, c.tagName, obj, "tag");
                    if (c.className && c.className.trim)
                        c.className.trim().split(/\s+/).forEach(function(n) {
                            process(c, n, obj, "class");
                        });
                    DOC.index(c, obj, null, autoCfg);
                }
            }
            if (attach) {
                var THIS = this;
                Object.getOwnPropertyNames(obj).forEach(function(k) {
                    DOC.attach(obj[k], attach[THIS.attachPrefix + k], attach)
                });
            }
            return obj;
        },
        attachPrefix: "",
        attach: function(objk, listener, ctx) {
            if (this.__ROOT__ && arguments.length == 1) {
                var THIS = this;
                Object.getOwnPropertyNames(this).forEach(function(k) {
                    DOC.attach(THIS[k], objk[THIS.attachPrefix + k], objk)
                });
                return;
            }
            var oldStyle;
            if (objk && listener) {
                if (Array.isArray(objk)) {
                    for (var e in listener) {
                        for (var j = 0, objkj; objkj = objk[j]; ++j) {
                            oldStyle = (objkj.dataset && objkj.dataset.oldevents) || objkj.tagName == "SCRIPT";
                            if (oldStyle)
                                objkj[e] = listener[e].bind(ctx);
                            else
                                objkj.addEventListener(e, listener[e].bind(ctx));
                        }
                    }
                } else {
                    oldStyle = (objk.dataset && objk.dataset.oldevents) || objk.tagName == "SCRIPT";
                    for (var e in listener) {
                        if (oldStyle)
                            objk[e] = listener[e].bind(ctx);
                        else if (typeof listener[e] == "function")
                            objk.addEventListener(e, listener[e].bind(ctx));
                        else
                            (function() {
                                debugger;
                            })();
                    }
                }
            }
        },
        auto: function(set, cfg) {
            if (!set)
                return;
            if (Array.isArray(set)) {
                for (var i = 0, l = set.length; i < l; ++i)
                    this.auto(set[i], cfg);
                return;
            }
            cfg = cfg || {};
            var ctx = cfg.ctx || cfg.context;
            var inject = cfg.inject;
            var filter = cfg.filter;
            set.__context = ctx = ctx || set.__context;
            set.__inject = inject = inject || set.__inject;
            set.__filter = filter = filter === undefined ? set.__filter : filter;
            set.__sort = "sort" in cfg ? cfg.sort : set.__sort;
            var src = MAR.resolve(set.dataset.array, ctx);
            var clazz = set.dataset.clazz || set.getAttribute("clazz");
            if (!src || !clazz)
                return;
            var values;
            if (!Array.isArray(src))
                values = Object.sort(src, set.__sort);
            if (!Array.isArray(set.__internal)) {
                set.__external = Array.prototype.slice.call(set.children, 0);
                set.__internal = [];
                set.call = function(msg) {
                    var i,
                        l,
                        args = [];
                    for (i = 1, l = arguments.length; i < l; ++i)
                        args[i - 1] = arguments[i];
                    for (i = 0, l = set.__internal.length; i < l; ++i) {
                        var val = set.__internal[i].controller;
                        if (val && val[msg])
                            val[msg].apply(val, args);
                    }
                };
            }
            var data = set.__internal;
            MAR.removeChildren(set);
            var assoc = [],
                i,
                j,
                l = (values || src).length,
                reverse = [];
            for (i = 0; i < l; ++i) {
                var val;
                if (values)
                    val = src[values[i]];
                else
                    val = src[i];
                if (filter && filter(val, src, i) === false)
                    continue;
                for (j = 0; j < l; ++j) {
                    if (data[j] && data[j].value === val && assoc[j] === undefined) {
                        assoc[j] = i;
                        reverse[i] = j;
                        break;
                    }
                }
                if (j == l) {
                    var controller = CLAZZ.get(clazz, MAR.mergeTo({
                        parent: set,
                        context: ctx,
                        data: val,
                        source: src,
                        inIndex: i,
                        outIndex: data.length
                    }, inject), null);
                    j = data.push({
                        controller: controller,
                        value: val,
                        elements: Array.prototype.slice.call(set.children, 0)
                    }) - 1;
                    assoc[j] = i;
                    reverse[i] = j;
                    MAR.removeChildren(set);
                }
            }
            for (j = 0; j < set.__external.length; ++j)
                set.appendChild(set.__external[j]);
            var newData = [];
            for (i = 0; i < l; ++i) {
                if (reverse[i] === undefined)
                    continue;
                var desc = data[reverse[i]];
                newData.push(desc);
                for (j = 0; j < desc.elements.length; ++j)
                    set.appendChild(desc.elements[j]);
                if (typeof desc.controller.update == "function")
                    desc.controller.update(desc.value);
            }
            set.__internal = newData;
        },
        remove: function(e) {
            if (!e || !e.parentNode)
                return;
            e.parentNode.removeChild(e);
        },
        removeChildren: function(e)
        {
            while (e.lastChild)
                e.removeChild(e.lastChild);
            return e;
        },
        getStyle: function(e, rule) {
            var strValue = "";
            if (document.defaultView && document.defaultView.getComputedStyle) {
                strValue = document.defaultView.getComputedStyle(e, "").getPropertyValue(rule);
            }
            else if (e.currentStyle) {
                rule = rule.replace(/\-(\w)/g, function(strMatch, p1) {
                    return p1.toUpperCase();
                });
                strValue = e.currentStyle[rule];
            }
            return strValue;
        },
        cssTween: function(style, property, target, step) {
            var cv = parseFloat(style[property]) || 0;
            cv -= (target - cv) * step;
            style[property] = cv + "px";
        },
        getGlobalXY: function(element) {
            var rect = {
                x: 0,
                y: 0
            };
            while (element && element.getBoundingClientRect && element.tagName != "html") {
                var r = element.getBoundingClientRect();
                var y = r.top;
                var x = r.left;
                y -= parseInt(DOC.getStyle(element, "margin-top")) || 0;
                x -= parseInt(DOC.getStyle(element, "margin-left")) || 0;
                rect.x += x;
                rect.y += y;
                element = element.parentNode;
            }
            return rect;
        },
        __uid: 0,
        getUID: function() {
            return MAR.__uid++;
        },
        getUUID: function() {
            var d0 = Math.random() * 0xffffffff | 0;
            var d1 = Math.random() * 0xffffffff | 0;
            var d2 = Math.random() * 0xffffffff | 0;
            var d3 = Math.random() * 0xffffffff | 0;
            return GUIDlut[d0 & 0xff] + GUIDlut[d0 >> 8 & 0xff] + GUIDlut[d0 >> 16 & 0xff] + GUIDlut[d0 >> 24 & 0xff] + '-' +
            GUIDlut[d1 & 0xff] + GUIDlut[d1 >> 8 & 0xff] + '-' + GUIDlut[d1 >> 16 & 0x0f | 0x40] + GUIDlut[d1 >> 24 & 0xff] + '-' +
            GUIDlut[d2 & 0x3f | 0x80] + GUIDlut[d2 >> 8 & 0xff] + '-' + GUIDlut[d2 >> 16 & 0xff] + GUIDlut[d2 >> 24 & 0xff] +
            GUIDlut[d3 & 0xff] + GUIDlut[d3 >> 8 & 0xff] + GUIDlut[d3 >> 16 & 0xff] + GUIDlut[d3 >> 24 & 0xff];
        },
        seed: 0,
        rand16: function() {
            this.seed = (214013 * this.seed + 2531011) & 0x7FFFFFFF;
            return (this.seed >> 16) & 0x7FFF;
        },
        rand: function() {
            this.seed = (214013 * this.seed + 2531011) & 0x7FFFFFFF;
            return ((this.seed >> 16) & 0x7FFF) / 0x7FFF;
        },
        typeOf: function(obj, inst) {
            var ret = typeof obj;
            if (obj == "null")
                return "null";
            if (obj instanceof Array)
                return "array";
            if (inst && obj instanceof inst)
                return inst.NAME || inst.name;
            return ret;
        },
        appendFunction: function(object, name, func, pool) {
            if (!func || !object)
                return;
            if (!object[name] || typeof object[name] !== "function")
            {
                object[name] = func;
                if (object.constructor.methods)
                    object.constructor.methods[name] = object[name];
                if (pool)
                    pool.listen(object, name, false);
            }
            else if (object[name + "__proxy"])
                object[name + "__proxy"].push(func);
            else {
                var proxy = [object[name].bind(object), func];
                func = function() {
                    var args = [],
                        i,
                        c,
                        l;
                    for (i = 0, l = arguments.length; i < l; ++i)
                        args[i] = arguments[i];
                    var ret = undefined;
                    for (i = 0, c; c = proxy[i]; ++i) {
                        var altret = c.apply(null, args);
                        if (altret !== undefined)
                            ret = altret;
                    }
                    return ret;
                };
                object[name + "__proxy"] = proxy;
                object[name] = func;
                if (object.constructor.methods)
                    object.constructor.methods[name] = func;
                if (pool)
                    pool.listen(object, name, false);
            }
        },
        mergeToEx: function(r, a)
        {
            for (var i = 0; i < a.length; ++i)
            {
                var o = a[i];
                for (var k in o)
                    r[k] = o[k];
            }
            return r;
        },
        mergeToDeep: function(out, inp) {
            for (var k in inp)
            {
                var v = inp[k];
                var outk = out[k];
                if (v) {
                    var typeofv = typeof v;
                    if (v instanceof Array)
                        typeofv = "array";
                    if (typeofv == "object" && v.constructor == Object)
                    {
                        if (!outk)
                            out[k] = outk = {};
                        MAR.mergeToDeep(outk, v);
                        continue;
                    } else if (typeofv == "array") {
                        if (!(outk instanceof Array))
                            outk = null;
                        if (!outk)
                            out[k] = outk = [];
                        for (var i = 0; i < v.length; ++i)
                            outk.push(v[i]);
                        continue;
                    }
                }
                out[k] = v;
            }
            return out;
        },
        mergeTo: function(r)
        {
            return MAR.mergeToEx(r, Array.prototype.slice.call(arguments, 1));
        },
        merge: function()
        {
            return MAR.mergeToEx({}, arguments);
        },
        TEXT: TEXT,
        CLAZZ: CLAZZ,
        resolve: resolve,
        postURL: postURL,
        postJSONURL: postJSONURL,
        getURL: getURL,
        Loader: Loader,
        GET: {}
    };
    window.MAR = DOC;
    (function() {
        if (location.search && location.search[0] == "?") {
            var search = location.search.substr(1).split("&");
            for (var i = 0, l = search.length; i < l; ++i) {
                var eq = search[i].indexOf("=");
                var key,
                    value;
                if (eq == -1) {
                    key = search[i];
                    value = "";
                } else {
                    key = search[i].substr(0, eq);
                    value = decodeURIComponent(search[i].substr(eq + 1));
                }
                DOC.GET[key] = value;
            }
        }
    })();
    window.PRAIA = CLAZZ({
        DYNAMIC: true,
        __wasInit: false,
        __onLoad: [],
        init: function(cb) {
            if (this.__wasInit)
                cb();
            else
                this.__onLoad.push(cb);
        },
        __init: function() {
            if (this.__wasInit)
                return;
            this.__wasInit = true;
            __INIT_PRAIA();
            for (var i = 0, f; f = this.__onLoad[i]; ++i)
                f();
        },
        __wait: function(force) {
            if (document.readyState != "complete")
                setTimeout(PRAIA.__wait, 50);
            else if (!force && window.LED && !window.LED.init)
                setTimeout(PRAIA.__wait.bind(null, true), 500);
            else {
                if (window.FS && window.FS.init)
                    window.FS.init(function() {
                        PRAIA.__init();
                    });
                else
                    PRAIA.__init();
            }
        }
    }).NEW();
    if (window.LED)
        window.LED.onLoad = PRAIA.__wait;
    window.initSOL = PRAIA.__wait;
    PRAIA.__wait();
    function __INIT_PRAIA() {
        window.AREIA = CLAZZ({
            gainNode: null,
            audios: {},
            availableAudios: {},
            externAPI: false,
            skip: false,
            enabled: true,
            trackers: null,
            CONSTRUCTOR: function() {
                this.trackers = [];
                if (window.LED && window.LED.init) {
                    try {
                        LED.playAudio("common-audio/click.mp3", false, LED.NO_CB);
                        this.externAPI = true;
                    } catch (e) {}
                }
            },
            checkBlackList: function(onFailURL) {
                if (!this.externAPI)
                    return true;
                var valid = true;
                var blacklist = [/GT-P5210/, /GT-P3100/];
                blacklist.forEach(function(item) {
                    if (item.test(navigator.userAgent))
                        valid = false;
                });
                return valid;
            },
            addTracker: function(t) {
                this.trackers.push(t);
            },
            disableAREIA: function() {
                this.enabled = false;
            },
            loadData: function(name, callback) {
                if (this.externAPI)
                    LED.loadBlob(name + ".json", false, function(d) {
                        if (d) {
                            try {
                                d = decodeURIComponent(escape(d || ""));
                                d = JSON.parse(atob(d.trim()));
                            } catch (ex) {
                                ERROR(d, ex);
                                d = undefined;
                            }
                            callback(d);
                        } else
                            callback();
                    });
                else {
                    var data = null;
                    try {
                        data = JSON.parse(localStorage.getItem(name));
                    } catch (e) {}
                    callback(data);
                }
            },
            storeData: function(name, data) {
                data = JSON.stringify(data);
                if (this.externAPI) {
                    data = unescape(encodeURIComponent(data));
                    LED.saveBlob(btoa(data), name + ".json", LED.NO_CB);
                }
                else {
                    try {
                        localStorage.setItem(name, data);
                    } catch (e) {}
                }
            },
            playAudio: function(name, loop, cb) {
                if (!this.enabled)
                    return;
                if (SOL.assets[name])
                    name = SOL.assets[name];
                else if (this.externAPI)
                    return;
                if (!name)
                    return;
                if (this.externAPI && LED.playAudio) {
                    LED.playAudio(name, loop == true, LED.NO_CB);
                    return;
                }
                var node;
                if (window.AudioBuffer && name instanceof window.AudioBuffer) {
                    node = audioContext.createBufferSource();
                    node.buffer = name;
                    if (!this.gainNode) {
                        this.gainNode = audioContext.createGain();
                        if (this.muted)
                            this.gainNode.gain.value = 0;
                        else
                            this.gainNode.gain.value = 1;
                        this.gainNode.connect(audioContext.destination);
                    }
                    if (cb)
                        node.onended = cb;
                    node.connect(this.gainNode);
                    node.start(0);
                }
                else if (name.src) {
                    if (!this.availableAudios[name.src]) {
                        this.availableAudios[name.src] = [];
                        node = name;
                    } else if (this.availableAudios[name.src].length)
                        node = this.availableAudios[name.src].pop();
                    else if (name.cloneNode)
                        node = name.cloneNode();
                    node.play();
                    if (this.muted)
                        node.volume = 0;
                }
                if (node) {
                    if (!node.__uid) {
                        node.__uid = MAR.getUID();
                        node.addEventListener("ended", this.__stopAudio.bind(this, node));
                    }
                    this.audios[node.__uid] = node;
                    node.loop = loop || false;
                }
            },
            __stopAudio: function(node) {
                if (node instanceof Audio) {
                    node.pause();
                    node.currentTime = 0;
                    this.availableAudios[node.src] = this.availableAudios[node.src] || [];
                    this.availableAudios[node.src].push(node);
                }
                delete this.audios[node.__uid];
            },
            killAllSounds: function() {
                if (this.externAPI) {
                    LED.killAllSounds(LED.NO_CB);
                    for (var k in this.audios) {
                        const audio = this.audios[k];
                        if (audio instanceof AudioBufferSourceNode){
                            audio.disconnect();
                            delete this.audios[k];
                        }
                    }
                } else {
                    for (var k in this.audios) {
                        var audio = this.audios[k];
                        if (audio.pause)
                            audio.pause();
                        else if (audio.disconnect)
                            audio.disconnect();
                    }
                    this.audios = {};
                }
            },
            muted: false,
            disableAllSounds: function() {
                this.muted = true;
                if (this.externAPI)
                    LED.disableAllSounds(LED.NO_CB);
                else {
                    if (this.gainNode)
                        this.gainNode.gain.value = 0;
                    else
                        for (var k in this.audios)
                            this.audios[k].volume = 0;
                }
                this.__btnMute.alpha = 0.5;
            },
            enableAllSounds: function() {
                if (!this.enabled)
                    return;
                CALL("playAudio", "__hud_click_sound");
                this.muted = false;
                if (this.externAPI)
                    LED.enableAllSounds(LED.NO_CB);
                else {
                    if (this.gainNode)
                        this.gainNode.gain.value = 1;
                    else
                        for (var k in this.audios)
                            this.audios[k].volume = 1;
                }
                this.__btnMute.alpha = 1;
            },
            toggleSounds: function() {
                if (!this.enabled)
                    return;
                CALL("playAudio", "__hud_click_sound");
                if (this.muted)
                    this.enableAllSounds();
                else
                    this.disableAllSounds();
            },
            closeWidget: function() {
                if (!this.enabled)
                    return;
                CALL("playAudio", "__hud_click_sound");
                if (this.externAPI)
                    LED.closeWidget(LED.NO_CB);
                else {
                    if (this.isFullscreen)
                        this.callFullscreen();
                    window.close();
                    location.reload();
                }
            },
            reloadWidget: function() {
                if (!this.enabled)
                    return;
                if (this.externAPI)
                    LED.reloadWidget(LED.NO_CB);
                else {
                    if (this.isFullscreen)
                        this.callFullscreen();
                    location.reload();
                }
            },
            callBrowser: function(url) {
                url = (url || "").trim();
                if (!this.enabled || !url)
                    return;
                if (!/^(ftps?:|https?:|mailto:)/i.test(url))
                    url = location.protocol + "//" + url;
                if (this.externAPI)
                    LED.callBrowser(url, LED.NO_CB);
                else
                    window.open(url);
            },
            getLEDId: function(cb) {
                if (!this.externAPI)
                    return;
                LOG("calling getUserId");
                LED.getUserId(cb);
            },
            __hud: null,
            show: null,
            hide: null,
            __blackBg: null,
            __btnMute: null,
            __btnFullscreen: null,
            __bgTargetAlpha: 0,
            pauseButtons: [],
            onCreateScreen: function(screen, screenData) {
                var spacing = 30;
                for (var i = 0, tracker; tracker = this.trackers[i]; ++i) {
                    screen.__pool.add(tracker);
                    if (typeof tracker.onCreateScreen == "function")
                        tracker.onCreateScreen(screen);
                }
                this.pauseButtons = [];
                if (!screenData.logo)
                {
                    this.__hud = null;
                    return;
                }
                this.__hud = game.add.group();
                var bg = game.add.sprite(screen.gameWidth - 10, 0, '__hud_bg');
                bg.anchor.setTo(1, 0);
                this.__blackBg = game.add.sprite(0, 0, '__hud_black');
                this.__blackBg.scale.x = screen.gameWidth / this.__blackBg.width;
                this.__blackBg.scale.y = (screen.gameHeight + bg.height) / this.__blackBg.height;
                this.__blackBg.visible = false;
                this.__hud.add(this.__blackBg)
                this.__hud.add(bg);
                var show = this.show = game.add.sprite(screen.gameWidth, bg.height - 5, '__hud_btn_show');
                show.anchor.setTo(1.1, 0);
                show.scale.setTo(1.2, 1.2);
                this.__hud.add(show);
                show.inputEnabled = true;
                show.events.onInputDown.add(this.showHUD.bind(this));
                var hide = this.hide = game.add.sprite(screen.gameWidth, bg.height - 5, '__hud_btn_hide');
                hide.anchor.setTo(1.1, 0);
                hide.scale.setTo(1.2, 1.2);
                this.__hud.add(hide);
                this.pauseButtons.push({
                    sprite: hide,
                    cb: this.hideHUD.bind(this)
                });
                var x = screen.gameWidth - 80;
                if (this.externAPI) {
                    var btn = game.add.sprite(x, bg.height / 2, '__hud_close')
                    this.__hud.add(btn);
                    btn.anchor.setTo(1, 0.5);
                    this.pauseButtons.push({
                        sprite: btn,
                        cb: CALL.bind(null, "closeWidget")
                    });
                    x -= btn.width + spacing;
                } else
                    x -= 50;
                btn = game.add.sprite(x, bg.height / 2, '__hud_home')
                this.__hud.add(btn);
                btn.anchor.setTo(1, 0.5);
                this.pauseButtons.push({
                    sprite: btn,
                    cb: CALL.bind(null, "reloadWidget")
                });
                x -= btn.width + spacing;
                if (!this.externAPI) {
                    this.__btnFullscreen = btn = game.add.sprite(x, bg.height / 2, '__hud_fullscreen')
                    this.__hud.add(btn);
                    btn.anchor.setTo(1, 0.5);
                    x -= btn.width + spacing;
                    this.pauseButtons.push({
                        sprite: btn,
                        cb: CALL.bind(null, "callFullscreen")
                    });
                }
                this.__btnMute = btn = game.add.sprite(x, bg.height / 2, '__hud_mute')
                this.__hud.add(btn);
                btn.anchor.setTo(1, 0.5);
                x -= btn.width + spacing;
                this.pauseButtons.push({
                    sprite: btn,
                    cb: CALL.bind(null, "toggleSounds")
                });
                btn = game.add.sprite(x, bg.height / 2, '__hud_mute');
                btn.alpha = 0;
                this.__hud.add(btn);
                btn.anchor.setTo(1, 0.5);
                var clickCount = 0;
                var firstClick = 0;
                this.pauseButtons.push({
                    sprite: btn,
                    cb: function() {
                        if (!clickCount)
                            firstClick = performance.now();
                        clickCount += 1;
                        var time = performance.now() - firstClick;
                        if (time >= 5000)
                            clickCount = 0;
                        if (clickCount == 10)
                            showLog();
                    }
                });
                var text = game.add.text(screen.gameWidth - 1024 + 60, bg.height / 2, SOL.screens.projectName || "");
                text.anchor.setTo(0, 0.5);
                this.__hud.add(text);
                text.setStyle({
                    font: SOL.defaultFont,
                    fontSize: 25,
                    fill: this.color || "#fff",
                    stroke: this.stroke || "#6093cf",
                    strokeThickness: 5,
                    wordWrap: true,
                    wordWrapWidth: 700
                });
                var THIS = this;
                game.input.onDown.add(function(evt) {
                    for (var i = 0, obj; obj = THIS.pauseButtons[i]; ++i) {
                        var bounds = obj.sprite.getBounds();
                        if (bounds.left <= evt.x && bounds.right >= evt.x && bounds.top <= evt.y && bounds.bottom >= evt.y)
                            obj.cb();
                    }
                });
                this.hiddenY = this.targetY = -bg.height;
                this.__hud.y = this.targetY;
                this.hide.visible = false;
                if (screenData.video && location.search.indexOf('&A11Y=2') != -1) {
                    this.callBrowser(screenData.video);
                }
            },
            hiddenY: 0,
            targetY: 0,
            onTick: function() {
                if (!this.__hud)
                    return;
                this.__blackBg.alpha -= (this.__blackBg.alpha - this.__bgTargetAlpha) * 0.1;
                if (this.__blackBg.alpha < 0.1 && this.__bgTargetAlpha == 0)
                    this.__blackBg.visible = false;
                this.__hud.y -= (this.__hud.y - this.targetY) * 0.1;
                this.__hud.parent.bringToTop(this.__hud);
                if (Math.abs(this.__hud.y - this.targetY) < 1 && this.hide.visible)
                    game.paused = true;
            },
            isFullscreen: false,
            callFullscreen: function() {
                this.isFullscreen = this.isFullscreen == false ? true : false;
                if (window.parent && window.parent != window)
                    window.parent.postMessage({
                        fullscreen: this.isFullscreen
                    }, location.origin);
            },
            showHUD: function() {
                this.targetY = 0;
                this.show.visible = false;
                var THIS = this;
                setTimeout(function() {
                    THIS.hide.visible = true;
                }, 20);
                CALL("playAudio", "__hud_show_sound");
                this.__bgTargetAlpha = 1;
                this.__blackBg.visible = true;
            },
            hideHUD: function() {
                this.targetY = this.hiddenY;
                var THIS = this;
                setTimeout(function() {
                    THIS.show.visible = true;
                }, 20);
                this.hide.visible = false;
                game.paused = false;
                this.__bgTargetAlpha = 0;
            },
            __extra: {
                __hud_bg: 'imgs-widget/bg.png',
                __hud_black: 'common-imgs/blackdot.png',
                __hud_btn_show: 'imgs-widget/btn_aba02.png',
                __hud_btn_hide: 'imgs-widget/btn_aba01.png',
                __hud_home: 'imgs-widget/btn_home.png',
                __hud_close: 'imgs-widget/btn_close.png',
                __hud_mute: 'imgs-widget/btn_sound.png',
                __hud_fullscreen: 'imgs-widget/btn_fullscreen.png',
                __hud_show_sound: 'common-audio/pause.mp3',
                __hud_click_sound: 'common-audio/click.mp3',
                "Raleway-Regular": 'css/fonts/Raleway-Regular.woff2'
            },
            onRequestExtraAssets: function(out, screenData) {
                if (!this.skip && screenData.logo)
                    MAR.mergeTo(out, this.__extra);
            }
        }).NEW();
        (function() {
            var pool = new MAR.Pool();
            pool.add(AREIA);
            window.CALL = pool.call;
        })();
        window.SOL = CLAZZ({
            ldr: null,
            screens: {},
            mods: [],
            plugins: [],
            prefixPluginCount: 0,
            extraAssets: {},
            execDisabled: false,
            defaultFont: 'Raleway-Regular',
            loadingInProgress: false,
            screen: null,
            prevScreen: null,
            prevScreenName: "",
            currentScreenIndex: 0,
            controllers: {},
            screenIndex: {},
            cache: {},
            assets: {},
            vars: {
                persist: {}
            },
            allScriptsPreLoaded: false,
            CONSTRUCTOR: function() {
                if (readyCB.length)
                    this.allScriptsPreLoaded = true;
                resolveNeeds();
                this.ldr = new Loader();
                var url;
                if (window.screensURL) {
                    url = window.screensURL;
                    if (window.screenOrder)
                        this.currentScreenIndex = window.screenOrder;
                } else {
                    url = "SOL/screens.json";
                    var m = location.search.match(/[?&]screens=([^?&]+)/);
                    if (m) {
                        url = m[1];
                    }
                    var m = location.search.match(/[?&]order=([^?&]+)/);
                    if (m) {
                        this.currentScreenIndex = (parseInt(m[1]) || 0);
                    }
                }
                window.screenOrder = this.currentScreenIndex;
                if (!/\.json$/.test(url))
                    url += "&fmt=.json";
                this.ldr.load(url, "SOL.screens");
                this.ldr.onload = this.__onloadMeta.bind(this);
                this.ldr.start();
            },
            genCBID: 0,
            compile: function(cmds, ctx) {
                var src = "",
                    head = "";
                var args = [];
                var hs = {};
                function rslv(path, write) {
                    if (path in ctx)
                        return "this." + path;
                    if (path in window && isNaN(path))
                        return "window." + path;
                    if (path.match(/^(this|window|true|debugger|false|[^a-zA-Z_$]).*/))
                        return path;
                    var hnd;
                    try {
                        hnd = resolve(path, ctx, false, true);
                    } catch (e) {
                        return "this." + path;
                    }
                    var ohnd = hnd;
                    if (hnd.isNew && hnd.parentIsNew) {
                        hnd = resolve(path, null, false, true);
                        if (hnd.parentIsNew || (hnd.isNew && hnd.obj == window)) {
                            if (write)
                                hnd = resolve(path, ctx, true, true);
                            return "this." + path;
                        }
                        return "window." + path;
                    }
                    return "this." + path;
                }
                if (typeof cmds == "string")
                    cmds = [cmds];
                for (var i = 0; i < cmds.length; ++i)
                {
                    var str = cmds[i];
                    if (!str || !str.length)
                        continue;
                    str = str.trim();
                    if (str == "()")
                        continue;
                    var parts = str.match(/^(\s*\*?[A-Z0-9a-z\.\[\]"'\s]+)\s*(?:(?:\(\s*(.*)\s*\))|(?:(:|[+-|&*/]?=)\s*(.*)))?\s*;?\s*$/);
                    if (!parts)
                    {
                        LOG("Invalid SOL.exec: ", str);
                        continue;
                    }
                    var lhs = parts[1].trim();
                    var hnd = "";
                    if (lhs && lhs[0] == "*")
                        hnd = "CALL(\"" + lhs.substr(1) + "\"";
                    else if (lhs != "void")
                        hnd = rslv(lhs, true);
                    if (!hnd && lhs != "void")
                    {
                        ERROR("Invalid SOL.exec (lhs not found): ", str);
                        return;
                    }
                    if (!parts[3]) {
                        if (lhs != "debugger") {
                            var params = "";
                            if (parts[2])
                                params = parts[2];
                            if (lhs[0] != "*")
                                hnd += "(";
                            else if (params)
                                hnd += ",";
                            hnd += params.replace(/\$CONTINUE/, function() {
                                if (i == cmds.length - 1)
                                    return "null";
                                SOL.genCBID++;
                                SOL.screen.cbs[SOL.genCBID] = SOL.compile(cmds.slice(i + 1, cmds.length), ctx);
                                i = cmds.length - 1;
                                return "SOL.screen.cbs[" + SOL.genCBID + "]";
                            }) + ")";
                        }
                        src += hnd + ";\n";
                    } else {
                        var val = parts[4];
                        var m = val.match(/^[a-zA-Z0-9_$.]+$/);
                        if (m) {
                            val = rslv(val, false);
                        } else {
                            if (val[0] == "*") {
                                var args = val.substr(val.indexOf("(") + 1).trim();
                                if (args[0] != ")")
                                    args = "this, " + args;
                                val = "CALL.bind(null, \"" + val.substr(1, val.indexOf("(") - 1) + "\").call( " + args;
                            }
                        }
                        if (parts[3] == ':') {
                            switch (lhs.toLowerCase()) {
                            case "if":
                                src += 'if( ' + val + ' )\n\t';
                                break;
                            case "repeat":
                                var it = '_i' + MAR.getUID();
                                var code = "for( var it=0, ite=val, itBackup=window.$loop; ((window.$loop=it)<ite ? true : ((window.$loop=itBackup),false)); ++it )";
                                src += code.replace(/it/g, it).replace(/val/g, val);
                                break;
                            case "return":
                                src += 'return ' + val + ';\n';
                                break;
                            case "while":
                                src += 'while (' + val + ')\n\t';
                                break;
                            }
                        } else {
                            if (hnd)
                                src += hnd + parts[3];
                            src += val;
                            src += ";\n";
                        }
                    }
                }
                if (src.match(/.*(^|[^a-zA-Z0-9_$])this($|[^a-zA-Z0-9_$]).*/)) {
                    src = src.replace(/(^|[^a-zA-Z0-9_$])this($|[^a-zA-Z0-9_$])/g, '$1THIS$2');
                }
                src = head + "return function( ){\n" + src + "};";
                try {
                    var shell = new Function("THIS", src);
                    var ret = shell(ctx);
                } catch (e) {
                    ERROR("Could not compile script.", src, e);
                }
                return ret;
            },
            exec: function(cmds, ctx) {
                if (!cmds || this.execDisabled)
                    return;
                return this.editorExec.apply(this, arguments);
            },
            editorExec: function(cmds, ctx) {
                if (!cmds)
                    return;
                if (typeof cmds == "string")
                    cmds = [cmds];
                for (var i = 0; i < cmds.length; ++i)
                {
                    var str = cmds[i].trim();
                    var parts = str.match(/^(\s*\*?[A-Z0-9a-z\.]+)\s*(?:(?:\(\s*(.*)\s*\))|(?:(:|[+-|&*/]?=)\s*(.*)))?\s*;?\s*$/);
                    if (!parts)
                    {
                        LOG("Invalid SOL.exec: ", str);
                        continue;
                    }
                    var lhs = parts[1].replace(/^this\./i, "");
                    var hnd;
                    if (lhs && lhs[0] == "*")
                        hnd = {
                            value: CALL.bind(null, lhs.substr(1))
                        };
                    else if (lhs != "void") {
                        hnd = resolve(lhs, ctx, false, true);
                        var ohnd = hnd;
                        if (hnd.isNew) {
                            hnd = resolve(lhs, null, true, true);
                            if (hnd.parentIsNew || (hnd.isNew && hnd.obj == window))
                                hnd = resolve(lhs, ctx, true, true);
                        }
                    }
                    if (!hnd && lhs != "void")
                    {
                        ERROR("Invalid SOL.exec (lhs not found): ", str);
                        return;
                    } else
                        LOG("Exec:", str);
                    if (!parts[3]) {
                        var params;
                        if (!parts[2])
                            params = [];
                        else if (!parts[2].match(/this|THIS|SOL|DOM|window|arguments|[+\-*\/()]/)) {
                            try {
                                params = JSON.parse("[" + parts[2] + "]");
                            } catch (ex) {
                                console.warn(parts[2], ex, ctx);
                                params = (new Function("var THIS=this; return [" + parts[2] + "];")).apply(ctx, Array.prototype.slice.call(arguments, 2));
                            }
                        } else {
                            try {
                                params = (new Function("var THIS=this; return [" + parts[2] + "];")).apply(ctx, Array.prototype.slice.call(arguments, 2));
                            } catch (ex) {
                                ERROR("Error parsing exec parameters.", parts[2], ex);
                            }
                        }
                        if (!hnd.value)
                            console.warn("Could not call ", str);
                        else if (params)
                            hnd.value.apply(hnd.obj, params);
                    } else {
                        var val = parts[4];
                        var m = val.match(/(^[0-9.]+$|^true$|^false$|^\".*\"$|^\[.*\]$|^{.*}$)|^([a-zA-Z0-9_$.]+)$/);
                        if (m && m[1])
                            val = JSON.parse(m[1]);
                        else if (m && m[2]) {
                            val = resolve(m[2], ctx, false, true);
                            var oval = val;
                            if (val.isNew) {
                                val = resolve(m[2], null, false, true);
                                if (val.parentIsNew || (val.isNew && val.obj == window))
                                    val = oval;
                                val = val.value;
                            } else
                                val = val.value;
                        } else {
                            if (val[0] == "*") {
                                var args = val.substr(val.indexOf("(") + 1).trim();
                                if (args[0] != ")")
                                    args = "this, " + args;
                                val = "CALL.bind(null, \"" + val.substr(1, val.indexOf("(") - 1) + "\").call( " + args;
                            }
                            if (val.indexOf("arguments") != -1)
                                console.log(val);
                            try {
                                val = (new Function("var THIS=this; return " + val)).apply(ctx, Array.prototype.slice.call(arguments, 2));
                            } catch (e) {
                                ERROR("Could not evaluate ", val, ctx);
                            }
                        }
                        if (hnd)
                            switch (parts[3]) {
                            case "=":
                                hnd.obj[hnd.key] = val;
                                break;
                            case "+=":
                                hnd.obj[hnd.key] += val;
                                break;
                            case "-=":
                                hnd.obj[hnd.key] -= val;
                                break;
                            case "*=":
                                hnd.obj[hnd.key] *= val;
                                break;
                            case "/=":
                                hnd.obj[hnd.key] /= val;
                                break;
                            case "|=":
                                hnd.obj[hnd.key] |= val;
                                break;
                            case "&=":
                                hnd.obj[hnd.key] &= val;
                                break;
                            case ":":
                                switch (lhs.toLowerCase()) {
                                case "if":
                                    if (!val)
                                        ++i;
                                    break;
                                case "return":
                                    return val;
                                case "while":
                                    if (!val) {
                                        ++i;
                                        break;
                                    }
                                    var test = new Function("return " + parts[4]);
                                    do {
                                        this.editorExec(cmds[i + 1], ctx);
                                    } while (test.call(ctx));
                                    ++i;
                                    break;
                                case "repeat":
                                    var oldLoop = window.$loop;
                                    val = val || 0;
                                    for (var valit = 0; valit < val; ++valit) {
                                        window.$loop = valit;
                                        this.editorExec(cmds[i + 1], ctx);
                                    }
                                    window.$loop = oldLoop;
                                    i++;
                                    break;
                                }
                                break;
                            }
                    }
                }
            },
            getEntityName: function(entity) {
                return (entity.$word && (entity[entity.$word] || entity.$wordDefault)) || entity.text || ((entity.sprite && this.vars.screen && this.vars.screen.JSON && this.vars.screen.JSON.assets && this.vars.screen.JSON.imgTitles[SOL.vars.screen.JSON.assets[entity.sprite]]) || (entity.sprite && this.screens.screens[this.currentScreenIndex] && this.screens.screens[this.currentScreenIndex].assets && this.vars.screen.JSON.imgTitles[this.screens.screens[this.currentScreenIndex].assets[entity.sprite]]) || entity.$label || entity.$marker || MAR.TEXT("Objeto"));
            },
            __onloadMeta: function() {
                AREIA.skip = this.screens.SKIP_AREIA;
                this.__loadPlugins();
            },
            __loadPlugins: function() {
                var i = 0;
                if (this.screens.pluginlist) {
                    for (var plugin; plugin = this.screens.pluginlist[i]; ++i) {
                        this.ldr.load('plugins/' + plugin + '.json', 'SOL.plugins.' + i);
                    }
                }
                if (!i)
                    this.__onloadPlugins();
                else {
                    this.ldr.onload = this.__onloadPlugins.bind(this);
                    this.ldr.start();
                }
            },
            __onloadPlugins: function() {
                this.plugins.sort(function(a, b) {
                    return a.priority - b.priority;
                });
                var queue = -1;
                var scriptQueue = 0;
                var THIS = this;
                function onload() {
                    scriptQueue--;
                    if (scriptQueue > 0)
                        return;
                    queue++;
                    if (queue == THIS.plugins.length)
                        return THIS.__loadMods();
                    if (!THIS.plugins[queue].scripts) {
                        onload();
                        return;
                    }
                    scriptQueue = THIS.plugins[queue].scripts.length;
                    for (var j = 0; j < scriptQueue; ++j) {
                        document.head.appendChild(MAR.create('script', {
                            src: THIS.plugins[queue].scripts[j],
                            onload: onload
                        }));
                    }
                }
                ;
                if (!this.plugins.length || this.allScriptsPreLoaded)
                    this.__loadMods();
                else
                    onload();
            },
            pluginRegistry: {},
            registerPlugin: function(name, cb) {
                this.pluginRegistry[name] = cb;
            },
            __loadMods: function() {
                var i = 0;
                this.plugins.forEach(function(plugin) {
                    if (plugin.scripts) {
                        plugin.scripts.forEach(function(script) {
                            if (this.pluginRegistry[script])
                                this.pluginRegistry[script]();
                        }, this);
                    }
                }, this);
                if (this.screens.modlist) {
                    this.mods.length = this.screens.modlist.length;
                    for (var mod; mod = this.screens.modlist[i]; ++i) {
                        this.ldr.load('mods/' + mod + '.json', 'SOL.mods.' + i);
                    }
                }
                if (!i)
                    this.__onloadMods();
                else {
                    this.ldr.onload = this.__onloadMods.bind(this);
                    this.ldr.start();
                }
            },
            __onloadMods: function() {
                var hnd;
                for (var i = 0, mod; mod = this.mods[i]; ++i) {
                    if (!(mod instanceof Array))
                        mod = [mod];
                    for (var j = 0, chunk; chunk = mod[j]; ++j)
                        for (var cmd in chunk) {
                            if (cmd == "events") {
                                for (var k in chunk.events) {
                                    hnd = MAR.resolve(k, null, true, true);
                                    MAR.appendFunction(hnd.obj, hnd.key, this.compile(chunk.events[k], hnd.obj));
                                }
                            } else {
                                hnd = MAR.resolve(cmd, null, true, true);
                                if (hnd.value && typeof hnd.value == "function")
                                    hnd.value.apply(hnd.obj, chunk[cmd]);
                                else
                                    hnd.obj[hnd.key] = chunk[cmd];
                            }
                        }
                }
                this.__loadScreens();
            },
            __loadScreens: function() {
                for (var i = 0, screenData; screenData = this.screens.screens[i]; ++i)
                {
                    if (!(screenData.CLAZZ in this.controllers))
                    {
                        var controller = resolve(screenData.CLAZZ);
                        this.controllers[screenData.CLAZZ] = controller;
                        if (!controller)
                            this.ldr.load(screenData.CLAZZ.replace(/\./g, "/") + ".js");
                    }
                    this.screenIndex["order=" + (i - SOL.prefixPluginCount)] = screenData;
                    if ("USID" in screenData)
                        this.screenIndex[screenData.USID] = screenData;
                    if ("name" in screenData)
                        this.screenIndex[screenData.name] = screenData;
                    if ("GUID" in screenData)
                        this.screenIndex[screenData.GUID] = screenData;
                    screenData.order = (i - SOL.prefixPluginCount);
                    screenData.GUID = screenData.GUID || ("order=" + (i - SOL.prefixPluginCount));
                }
                this.ldr.onload = this.__onloadScreens.bind(this);
                this.ldr.start();
            },
            __onloadScreens: function() {
                for (var screen in this.controllers)
                    this.controllers[screen] = resolve(screen);
                this.currentScreenIndex = -SOL.prefixPluginCount;
                this.loadScreen("order=" + this.currentScreenIndex);
            },
            nextScreen: function() {
                var next = this.currentScreenIndex + 1;
                if (next >= (this.screens.screens.length - SOL.prefixPluginCount)) {
                    next = 0;
                    if (AREIA)
                        AREIA.closeWidget();
                }
                this.loadScreen("order=" + next);
            },
            loadScreen: function(name) {
                if (this.loadingInProgress)
                    return;
                var data = this.screenIndex[name];
                if (!data)
                {
                    if (name)
                        LOG("Could not load screen " + name);
                    data = this.screenIndex["order=" + (this.currentScreenIndex + 1)];
                    if (!data)
                        return;
                }
                this.prevScreen = this.screen;
                if (this.screen) {
                    this.prevScreenName = this.screen.__data.name || this.screen.__data.GUID;
                    if (this.screen.deactivate)
                        this.screen.deactivate();
                }
                this.screen = null;
                name = data.GUID;
                this.currentScreenIndex = data.order;
                this.loadingInProgress = true;
                this.instanceScreen(data, (function(screen) {
                    this.screen = screen;
                    this.loadingInProgress = false;
                    if (screen.applyValues)
                        screen.applyValues();
                    if (this.prevScreen && this.prevScreen.onActivateNextScreen)
                        this.prevScreen.onActivateNextScreen(this.screen);
                    this.prevScreen = null;
                    if ("activate" in this.screen)
                        this.screen.activate();
                }).bind(this));
            },
            preloadScreen: function(data, cb) {
                if (!("loadedAssets" in data))
                {
                    this.assets = {};
                    if (!this.allScriptsPreLoaded) {
                        var clazz = resolve(data.CLAZZ);
                        while (clazz) {
                            if (clazz.requires) {
                                for (var i = 0, req; req = clazz.requires[i]; ++i) {
                                    if (!this.cache[req]) {
                                        if (!MAR.resolve(req.replace(/\//g, ".").replace(/^js\/|\.js$/g, "")))
                                            this.ldr.load(req);
                                        this.cache[req] = true;
                                    }
                                }
                            }
                            clazz = clazz.CLAZZ.EXTENDS && resolve(clazz.CLAZZ.EXTENDS);
                        }
                        var componentLists = [data.entities, data.classes, SOL.screens.classes];
                        for (var h = 0; h < componentLists.length; ++h) {
                            var obj = componentLists[h];
                            if (!obj)
                                continue;
                            for (var i in obj) {
                                var e = obj[i];
                                if (e.CLAZZ && !resolve(e.CLAZZ) && !this.cache[e.CLAZZ]) {
                                    this.ldr.load(e.CLAZZ.replace(/\./g, "/") + ".js");
                                    this.cache[e.CLAZZ] = true;
                                }
                                if (e.components) {
                                    for (var j = 0, c; c = e.components[j]; ++j) {
                                        if (!resolve(c.CLAZZ) && !this.cache[c.CLAZZ]) {
                                            this.ldr.load(c.CLAZZ.replace(/\./g, "/") + ".js");
                                            this.cache[c.CLAZZ] = true;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    data.assets = data.assets || {};
                    MAR.mergeTo(data.assets, this.extraAssets);
                    CALL("onRequestExtraAssets", data.assets, data);
                    this.__queueAssets(data);
                    this.ldr.onload = this.__onloadAssets.bind(this, data, cb);
                    this.ldr.start();
                }
                else
                    this.__onloadAssets(data, cb);
            },
            instanceScreen: function(data, cb) {
                this.preloadScreen(data, function(data, clazz) {
                    cb(new clazz(data));
                });
            },
            __queueAssets: function(data, assets) {
                var assets = assets || data.assets;
                data.loadedAssets = data.loadedAssets || {};
                for (var k in assets)
                {
                    if (k[0] == "@")
                        continue;
                    var v = assets[k];
                    if (v instanceof Array)
                        v = v[1];
                    if (v == "")
                        data.loadedAssets[k] = "";
                    else if (AREIA && AREIA.externAPI && LED.playAudio && /\.mp3$/i.test(v))
                        data.loadedAssets[k] = v;
                    else if (v.match(/\.js$/i))
                        this.ldr.load(v);
                    else if (this.cache[v])
                        data.loadedAssets[k] = this.cache[v];
                    else if (v.match(/\.css$/i))
                        this.ldr.load(v, (new Resolve(k, data.loadedAssets)).onSet((function(v, data) {
                            this.cache[v] = data;
                        }).bind(this, v)), k);
                    else {
                        this.ldr.load(v, (new Resolve(k, data.loadedAssets)).onSet((function(v, data) {
                            this.cache[v] = data;
                        }).bind(this, v)));
                    }
                }
            },
            __onloadAssets: function(data, cb) {
                this.__indexAssets(data.loadedAssets, data.assets);
                var clazz = resolve(data.CLAZZ);
                var preload = clazz.getPreloadList && clazz.getPreloadList(data);
                if (preload) {
                    this.__queueAssets(data, preload);
                    this.ldr.onload = this.__onScreenReady.bind(this, data, clazz, cb, preload);
                    this.ldr.start();
                } else
                    this.__onScreenReady(data, clazz, cb);
            },
            __indexAssets: function(assets, paths) {
                if (!assets)
                    return;
                for (k in paths)
                    if (!(k in assets) && paths[k] in this.cache)
                        assets[k] = this.cache[paths[k]];
                for (var k in assets)
                    resolve(k, SOL.assets, assets[k]);
            },
            __onScreenReady: function(data, clazz, cb, preload) {
                this.__indexAssets(preload, data.assets);
                var backup = data.loadedAssets;
                data.loadedAssets = null;
                var copy = JSON.parse(JSON.stringify(data));
                copy.loadedAssets = data.loadedAssets = backup;
                cb(copy, clazz);
            },
            addClass: function(name, desc) {
                this.screens.classes = this.screens.classes || {};
                this.screens.classes[name] = desc;
                return true;
            },
            getClass: function(name) {
                return (this.screens.classes || {})[name] || (this.screenIndex["order=" + (this.currentScreenIndex)].classes || {})[name];
            }
        }).NEW();
    }
    self.makeCurve = function(points, tension, count, loop, lerp) {
        tension = tension || 0.5;
        count = count || 25;
        loop = loop || false;
        var spline = interpolate(points, tension, count, loop);
        var out = [];
        var off = 0;
        for (var i = 0, l = points.length - 2; i < l; i += 2) {
            var d = Math.abs(points[i] - points[i + 2]) + Math.abs(points[i + 1] - points[i + 3]);
            if (d >= 2) {
                for (var j = 0; j < count; ++j) {
                    out[out.length] = spline[i * count + j * 2];
                    out[out.length] = spline[i * count + j * 2 + 1];
                    if (lerp)
                        out[out.length] = (i * count + j * 2) / (l * count);
                }
            }
        }
        out[out.length] = spline[spline.length - 2];
        out[out.length] = spline[spline.length - 1];
        if (lerp) {
            if (loop)
                out[out.length] = 0;
            else
                out[out.length] = 1;
        }
        return out;
        function interpolate(h, t, f, c) {
            if (typeof h === "undefined" || h.length < 2) {
                return new Float32Array(0)
            }
            t = typeof t === "number" ? t : 0.5;
            f = typeof f === "number" ? f : 25;
            var j,
                d = 1,
                e = h.length,
                n = 0,
                m = (e - 2) * f + 2 + (c ? 2 * f : 0),
                k = new Float32Array(m),
                a = new Float32Array((f + 2) << 2),
                b = 4;
            j = h.slice(0);
            if (c) {
                j.unshift(h[e - 1]);
                j.unshift(h[e - 2]);
                j.push(h[0], h[1])
            } else {
                j.unshift(h[1]);
                j.unshift(h[0]);
                j.push(h[e - 2], h[e - 1])
            }
            a[0] = 1;
            for (; d < f; d++) {
                var o = d / f,
                    p = o * o,
                    r = p * o,
                    q = r * 2,
                    s = p * 3;
                a[b++] = q - s + 1;
                a[b++] = s - q;
                a[b++] = r - 2 * p + o;
                a[b++] = r - p
            }
            a[++b] = 1;
            g(j, a, e, t);
            if (c) {
                j = [];
                j.push(h[e - 4], h[e - 3], h[e - 2], h[e - 1], h[0], h[1], h[2], h[3]);
                g(j, a, 4, t)
            }
            function g(G, z, B, M) {
                for (var A = 2, H; A < B; A += 2) {
                    var C = G[A],
                        D = G[A + 1],
                        E = G[A + 2],
                        F = G[A + 3],
                        I = (E - G[A - 2]) * M,
                        J = (F - G[A - 1]) * M,
                        K = (G[A + 4] - C) * M,
                        L = (G[A + 5] - D) * M,
                        u = 0,
                        v,
                        w,
                        x,
                        y;
                    for (H = 0; H < f; H++) {
                        v = z[u++];
                        w = z[u++];
                        x = z[u++];
                        y = z[u++];
                        k[n++] = v * C + w * E + x * I + y * K;
                        k[n++] = v * D + w * F + x * J + y * L
                    }
                }
            }
            e = c ? 0 : h.length - 2;
            k[n++] = h[e++];
            k[n] = h[e];
            return k
        }
    }
    function applyPhaserFixes() {
        Phaser.BitmapData.prototype.draw = function(source, tx, ty, newWidth, newHeight, blendMode, roundPx, rotate, anchorX, anchorY, scaleX, scaleY, alpha) {
            "use strict";
            var x,
                y,
                width,
                height,
                anchorX,
                anchorY,
                scaleX,
                scaleY,
                alpha;
            if (source === undefined || source === null) {
                source = this;
            }
            this._image = source;
            if (source instanceof Phaser.Sprite || source instanceof Phaser.Image || source instanceof Phaser.Text || source instanceof PIXI.Sprite)
            {
                this._pos.set(source.texture.crop.x, source.texture.crop.y);
                this._size.set(source.texture.crop.width, source.texture.crop.height);
                this._scale.set(source.scale.x, source.scale.y);
                this._anchor.set(source.anchor.x, source.anchor.y);
                this._rotate = source.rotation;
                this._alpha.current = source.alpha;
                this._image = source.texture.baseTexture.source;
                if (tx === undefined || tx === null) {
                    tx = source.x;
                }
                if (ty === undefined || ty === null) {
                    ty = source.y;
                }
                if (source.texture.trim)
                {
                    tx += source.texture.trim.x - source.anchor.x * source.texture.trim.width;
                    ty += source.texture.trim.y - source.anchor.y * source.texture.trim.height;
                }
                if (source.tint !== 0xFFFFFF)
                {
                    if (source.cachedTint !== source.tint)
                    {
                        source.cachedTint = source.tint;
                        source.tintedTexture = PIXI.CanvasTinter.getTintedTexture(source, source.tint);
                    }
                    this._image = source.tintedTexture;
                }
            }
            else
            {
                this._pos.set(0);
                this._scale.set(1);
                this._anchor.set(0);
                this._rotate = 0;
                this._alpha.current = 1;
                if (source instanceof Phaser.BitmapData)
                {
                    this._image = source.canvas;
                }
                else if (typeof source === 'string')
                {
                    source = this.game.cache.getImage(source);
                    if (source === null)
                    {
                        return;
                    }
                    else
                    {
                        this._image = source;
                    }
                }
                this._size.set(this._image.width, this._image.height);
            }
            if (x === undefined || x === null) {
                x = 0;
            }
            if (y === undefined || y === null) {
                y = 0;
            }
            if (width)
            {
                this._size.x = width;
            }
            if (height)
            {
                this._size.y = height;
            }
            if (tx === undefined || tx === null) {
                tx = x;
            }
            if (ty === undefined || ty === null) {
                ty = y;
            }
            if (newWidth === undefined || newWidth === null) {
                newWidth = this._size.x;
            }
            if (newHeight === undefined || newHeight === null) {
                newHeight = this._size.y;
            }
            if (typeof rotate === 'number')
            {
                this._rotate = rotate;
            }
            if (typeof anchorX === 'number')
            {
                this._anchor.x = anchorX;
            }
            if (typeof anchorY === 'number')
            {
                this._anchor.y = anchorY;
            }
            if (typeof scaleX === 'number')
            {
                this._scale.x = scaleX;
            }
            if (typeof scaleY === 'number')
            {
                this._scale.y = scaleY;
            }
            if (typeof alpha === 'number')
            {
                this._alpha.current = alpha;
            }
            if (blendMode === undefined) {
                blendMode = null;
            }
            if (roundPx === undefined) {
                roundPx = false;
            }
            if (this._alpha.current <= 0 || this._scale.x === 0 || this._scale.y === 0 || this._size.x === 0 || this._size.y === 0)
            {
                return;
            }
            var ctx = this.context;
            this._alpha.prev = ctx.globalAlpha;
            ctx.save();
            ctx.globalAlpha = this._alpha.current;
            if (blendMode)
            {
                this.op = blendMode;
            }
            if (roundPx)
            {
                tx |= 0;
                ty |= 0;
            }
            ctx.translate(tx, ty);
            ctx.rotate(this._rotate);
            ctx.scale(this._scale.x, this._scale.y);
            ctx.drawImage(this._image, this._pos.x + x, this._pos.y + y, this._size.x, this._size.y, -newWidth * this._anchor.x, -newHeight * this._anchor.y, newWidth, newHeight);
            ctx.restore();
            ctx.globalAlpha = this._alpha.prev;
            this.dirty = true;
            return this;
        }
        Phaser.DeviceButton.prototype = {
            start: function(event, value) {
                if (this.isDown)
                {
                    return;
                }
                this.isDown = true;
                this.isUp = false;
                this.timeDown = this.game.time.time;
                this.duration = 0;
                this.repeats = 0;
                this.event = event;
                this.value = value;
                if (event)
                {
                    this.altKey = event.altKey;
                    this.shiftKey = event.shiftKey;
                    this.ctrlKey = event.ctrlKey;
                }
                this.onDown.dispatch(this, value);
            },
            stop: function(event, value) {
                if (this.isUp)
                {
                    return;
                }
                this.isDown = false;
                this.isUp = true;
                this.timeUp = this.game.time.time;
                this.event = event;
                this.value = value;
                if (event)
                {
                    this.altKey = event.altKey;
                    this.shiftKey = event.shiftKey;
                    this.ctrlKey = event.ctrlKey;
                }
                this.onUp.dispatch(this, value);
            },
            padFloat: function(value) {
                this.value = value;
                this.onFloat.dispatch(this, value);
            },
            justPressed: function(duration) {
                duration = duration || 250;
                return ( this.isDown && (this.timeDown + duration) > this.game.time.time) ;
            },
            justReleased: function(duration) {
                duration = duration || 250;
                return ( this.isUp && (this.timeUp + duration) > this.game.time.time) ;
            },
            reset: function() {
                this.isDown = false;
                this.isUp = true;
                this.timeDown = this.game.time.time;
                this.duration = 0;
                this.repeats = 0;
                this.altKey = false;
                this.shiftKey = false;
                this.ctrlKey = false;
            },
            destroy: function() {
                this.onDown.dispose();
                this.onUp.dispose();
                this.onFloat.dispose();
                this.parent = null;
                this.game = null;
            }
        };
        Phaser.DeviceButton.prototype.constructor = Phaser.DeviceButton;
        Object.defineProperty(Phaser.DeviceButton.prototype, "duration", {
            set: function(e) {},
            get: function() {
                if (this.isUp)
                {
                    return -1;
                }
                return this.game.time.time - this.timeDown;
            }
        });
    }
    CLAZZ("EntityComponent", {
        id: undefined,
        state: "",
        screen: null,
        __data: null,
        prevState: undefined,
        components: null,
        events: null,
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, data, buildEvents) {
            this.screen = screen;
            this.events = {};
            this.__data = data;
            if (!data)
                return;
            var THIS = this;
            var baseClass = data["class"];
            var identifiers = {};
            identifiers[this.constructor.fullName] = 1;
            identifiers[this.constructor.NAME] = 1;
            if (data.GUID) {
                screen.entities[data.GUID] = this;
                screen.entityList[screen.entityList.length] = this;
                identifiers[data.GUID] = 1;
            }
            if (data.__class)
                identifiers[data.__class] = 1;
            while (baseClass) {
                if (typeof baseClass == "string") {
                    identifiers[baseClass] = 1;
                    baseClass = screen.getClass(baseClass);
                    if (!baseClass)
                        break;
                }
                var base = JSON.parse(JSON.stringify(baseClass));
                baseClass = base["class"];
                delete base["class"];
                data = MAR.mergeToDeep(base, data);
            }
            this.id = this.id || this.__uid;
            function stub() {}
            var stubs = {};
            for (var evt in data.events) {
                if (this.constructor.methods[evt])
                    continue;
                this.constructor.methods[evt] = stub;
                stubs[evt] = stub;
            }
            if (buildEvents && buildEvents.onMerge)
                buildEvents.onMerge.call(this, data);
            for (var evt in stubs)
                this.constructor.methods[evt] = null;
            function poll(arr) {
                if (arr)
                    arr.push(THIS);
                return arr;
            }
            ;
            function filter(clauses, acc) {
                if (clauses === undefined) {} else if (typeof clauses == "object") {
                    for (var k in clauses)
                        if (THIS[k] != clauses[k])
                            return undefined;
                } else if (typeof clauses == "function")
                    if (!clauses(THIS))
                        return undefined;
                if (acc && acc instanceof Array)
                    acc.push(THIS);
                return THIS;
            }
            Object.keys(identifiers).forEach(function(n) {
                MAR.appendFunction(THIS, "poll" + n, poll);
                MAR.appendFunction(THIS, "get" + n, filter);
            });
            function applyValues(data) {
                var pendingData = {};
                for (var k in data)
                    if (k != "CLAZZ")
                    {
                        var hnd;
                        try {
                            hnd = resolve(k, THIS, false, true);
                        } catch (e) {
                            console.log(e);
                        }
                        if (hnd && typeof hnd.value == "function")
                        {
                            if (data[k] instanceof Array)
                                hnd.value.apply(hnd.obj, data[k]);
                            else
                                hnd.value.call(hnd.obj, data[k]);
                        } else if (hnd && hnd.obj)
                            hnd.obj[hnd.key] = data[k];
                        else
                            pendingData[k] = data[k];
                    }
                return pendingData;
            }
            var pending = applyValues(data);
            for (var evt in data.events) {
                MAR.appendFunction(this, evt, SOL.compile(data.events[evt], this));
            }
            screen.entities[this.id] = this;
            if (this.components) {
                var components = this.components;
                this.components = null;
                for (var i = 0, compData; compData = components[i]; ++i)
                    this.addComponent(compData);
            }
            applyValues(pending);
            screen.__pool.add(this);
        },
        STATIC: {
            getBaseClazz: function(data, screen) {
                if (!data)
                    return null;
                var cdata = data;
                while (!cdata.CLAZZ && cdata["class"]) {
                    var base = cdata["class"];
                    if (typeof base == "string")
                        base = (screen || SOL).getClass(base);
                    if (!base) {
                        ERROR("Could not find base class ", cdata["class"]);
                        break;
                    }
                    cdata = base;
                }
                clazz = cdata.CLAZZ || screen.defaultEntityClazz;
                if (typeof clazz == "string")
                    clazz = resolve(clazz);
                return clazz;
            },
            create: function(data, screen) {
                var clazz = EntityComponent.getBaseClazz(data, screen);
                if (!clazz) {
                    ERROR("Could not resolve ", clazz);
                    return;
                }
                var ret = clazz.NEW(screen, data);
                if (typeof ret.create == "function")
                    ret.create();
                return ret;
            }
        }
    });
    CLAZZ("framework.Generic", {
        name: "",
        nextScreenName: null,
        __pool: null,
        __data: null,
        timeoutNames: null,
        timeouts: null,
        now: 0,
        timeDelta: 0,
        defaultEntityClazz: "",
        voice: "pt-BR",
        lastSayText: null,
        cbs: null,
        STATIC: {
            voices: null
        },
        CONSTRUCTOR: function(data) {
            this.cbs = {};
            this.__data = data;
            this.__pool = new MAR.Pool();
            this.name = data.name || data.GUID;
            this.nextScreenName = data.nextScreenName;
            if (!framework.Generic.voices && window.speechSynthesis)
                framework.Generic.voices = window.speechSynthesis.getVoices();
            window.CALL = this.__pool.call;
            for (var evt in data.events) {
                if (typeof data.events[evt] == "function")
                    MAR.appendFunction(this, evt, data.events[evt].bind(this));
                else
                    MAR.appendFunction(this, evt, SOL.compile(data.events[evt], this));
            }
            this.__pool.add(this);
            this.__pool.add(AREIA);
        },
        say: function(message, cb) {
            if (!message || !window.SpeechSynthesisUtterance)
                return;
            if (message == this.lastSayText) {
                if (cb)
                    cb();
                return;
            }
            this.lastSayText = message;
            var msg = new window.SpeechSynthesisUtterance(message.toLowerCase());
            if (cb)
                msg.onend = cb;
            if (this.editor)
                return;
            if (typeof this.voice == "string") {
                if (!framework.Generic.voices || !framework.Generic.voices.length)
                    framework.Generic.voices = window.speechSynthesis.getVoices();
                for (var a = 0, voice; a < framework.Generic.voices.length; ++a) {
                    if (typeof framework.Generic.voices.item == "function")
                        voice = framework.Generic.voices.item(a);
                    else
                        voice = framework.Generic.voices[a];
                    if (!voice)
                        continue;
                    if (voice.lang.indexOf(this.voice) != -1 || voice.name.indexOf(this.voice) != -1) {
                        this.voice = voice;
                        break;
                    }
                }
            }
            msg.lang = "pt";
            if (typeof this.voice == "object")
                msg.voice = this.voice;
            window.speechSynthesis.speak(msg);
        },
        activate: function() {
            CALL("onCreateScreen", this, this.__data);
            if (this.__data.speech)
                this.say(this.__data.speech);
        },
        applyValues: function() {
            var data = this.__data;
            if (data.values)
                for (var k in data.values)
                    resolve(k, {
                        screen: this,
                        SOL: SOL,
                        vars: SOL.vars,
                        parentCTX: SOL
                    }, data.values[k]);
        },
        updateTimeout: function(func, time, THIS, name) {
            this.timeoutNames = this.timeoutNames || {};
            if (this.timeoutNames[name])
                this.clearTimeout(this.timeoutNames[name]);
            this.setTimeout(func, time, THIS, name);
        },
        setTimeout: function(func, time, THIS, name) {
            if (!func)
                return;
            this.timeouts = this.timeouts || {};
            this.now = this.now || performance.now();
            var id = MAR.getUID();
            if (typeof func == "string")
                func = SOL.exec.bind(SOL, func, THIS);
            else if (THIS)
                func = func.bind(THIS);
            this.timeouts[id] = {
                func: func,
                time: time,
                name: name
            };
            if (name)
                this.timeoutNames[name] = id;
            return id;
        },
        setInterval: function(func, time, THIS) {
            this.timeouts = this.timeouts || {};
            this.now = this.now || performance.now();
            var id = MAR.getUID();
            if (typeof func == "string")
                func = SOL.exec.bind(SOL, func, THIS);
            else if (THIS)
                func = func.bind(THIS);
            this.timeouts[id] = {
                func: func,
                time: time,
                resetTime: time
            };
            return id;
        },
        clearTimeout: function(id) {
            if (!this.timeouts)
                return;
            var obj = this.timeouts[id];
            if (!obj)
                return;
            if (obj.name)
                delete this.timeoutNames[obj.name];
            delete this.timeouts[id];
        },
        clearInterval: function(id) {
            if (!this.timeouts)
                return;
            delete this.timeouts[id];
        },
        __execTimeouts: function(isPaused) {
            var now = performance.now();
            var delta = now - this.now;
            if (delta > 1000)
                delta = 0;
            this.now = now;
            this.timeDelta = delta;
            if (isPaused)
                return;
            var timeouts = this.timeouts;
            var queue = [];
            for (var k in timeouts) {
                var t = timeouts[k];
                t.time -= delta;
                if (t.time <= 0) {
                    queue.push({
                        time: t.time,
                        func: t.func
                    });
                    if (t.resetTime !== undefined)
                        t.time = t.resetTime;
                    else
                        this.clearTimeout(k);
                }
            }
            queue.sort(function(a, b) {
                return a.time - b.time;
            });
            for (var i = 0, f; f = queue[i]; ++i)
                f.func();
        },
        loadScreen: function(name, delay) {
            setTimeout(function() {
                SOL.loadScreen(name);
            }, delay || 0);
        },
        nextScreen: function() {
            if (this.nextScreenName)
                setTimeout(SOL.loadScreen.bind(SOL, this.nextScreenName), 0);
            else
                setTimeout(SOL.nextScreen.bind(SOL), 0);
        }
    })
    CLAZZ("framework.Frontend", {
        EXTENDS: "framework.Generic",
        DYNAMIC: true,
        STATIC: {
            getPreloadList: function(data) {
                if (!data.layout)
                    return {};
                return {
                    "layout": data.layout
                };
            },
            preserve: []
        },
        collections: null,
        activeContextMenu: null,
        CONSTRUCTOR: function(data) {
            SUPER(data);
            this.__onExternMessageB = this.__onExternMessage.bind(this);
            this.collections = {};
            if (data.loadedAssets.layout) {
                var layout = data.loadedAssets.layout;
                document.body.innerHTML = layout;
                MAR.TEXT.batch(document.body);
                for (var i = 0, l = framework.Frontend.preserve.length; i < l; ++i) {
                    document.body.appendChild(framework.Frontend.preserve[i]);
                }
                window.DOM = DOC.index();
            }
            var eh = this.__eventHandler = this.eventHandler.bind(this);
            MAR.DOM_EVENTS.forEach(function(k) {
                document.addEventListener(k.substr(2), eh);
            });
        },
        addPermanentElement: function(e) {
            if (!e)
                return;
            if (framework.Frontend.preserve.indexOf(e) != -1)
                return;
            framework.Frontend.preserve.push(e);
        },
        activate: function() {
            addEventListener("message", this.__onExternMessageB);
            if (typeof this.create == "function")
                this.create();
            SUPER();
            for (var k in this.__data.loadedAssets) {
                var a = this.__data.loadedAssets[k];
                if (a instanceof HTMLLinkElement && !a.parentElement)
                    document.head.appendChild(a);
            }
        },
        __onExternMessageB: null,
        __onExternMessage: function(e) {
            if (e.origin != location.origin)
                return;
            var args = e.data.args;
            if (typeof args == "string")
                args = JSON.parse(args);
            if (e.data.msg)
                this.__pool.call.apply(this.__pool, [e.data.msg].concat(args));
        },
        onActivateNextScreen: function() {
            for (var k in this.__data.loadedAssets) {
                var a = this.__data.loadedAssets[k];
                if (a instanceof HTMLLinkElement && a.parentElement)
                    MAR.remove(a);
            }
        },
        deactivate: function() {
            removeEventListener("message", this.__onExternMessageB);
            var eh = this.__eventHandler;
            MAR.DOM_EVENTS.forEach(function(k) {
                document.removeEventListener(k.substr(2), eh);
            });
        },
        __eventHandler: null,
        eventHandler: function(e) {
            var t;
            if (e.type in {
                "mousedown": 1,
                "changed": 1,
                "mouseup": 1,
                "focus": 1,
                "click": 1
            } && this.activeContextMenu) {
                t = e.target;
                while (t) {
                    if (t == this.activeContextMenu)
                        break;
                    t = t.parentNode;
                }
                if (t != this.activeContextMenu || e.type == "click")
                    this.__pool.call("hideContextMenu");
            }
            t = e.target;
            while (t) {
                if (t.id) {
                    this.__pool.call("on" + e.type + "_" + t.id, e);
                    this.__pool.silence("on" + e.type + "_" + t.id);
                    if (!(t.draggable && /^(drag|drop).*$/.test(e.type)))
                        break;
                }
                if (typeof t.className == "string") {
                    var tc = t.className.split(/\s+/);
                    for (var i = 0; i < tc.length; ++i) {
                        this.__pool.call("on" + e.type + "_" + tc[i], e);
                        this.__pool.silence("on" + e.type + "_" + tc[i]);
                    }
                }
                t = t.parentNode;
            }
            if (!t) {
                this.__pool.call("on" + e.type, e);
                this.__pool.silence("on" + e.type);
            }
        },
        hideContextMenu: function() {
            if (!this.activeContextMenu)
                return;
            MAR.remove(this.activeContextMenu);
            this.activeContextMenu = null;
        },
        createContextMenu: function(el, data, event) {
            if (!(data instanceof Element))
                data = MAR.create(data);
            var THIS = this;
            event = event || 'contextmenu';
            el.addEventListener(event, function(e) {
                THIS.__pool.call("hideContextMenu");
                var menu = data;
                document.body.appendChild(menu);
                THIS.activeContextMenu = menu;
                menu.style.top = e.pageY + "px";
                menu.style.left = e.pageX + "px";
                e.preventDefault();
                e.stopPropagation();
            });
            return data;
        },
        destroyCollection: function(name) {
            var collection = this.collections[name];
            if (!collection)
                return;
            delete this.collections[name];
            var elements = collection.elements;
            var i,
                l,
                k;
            if (elements instanceof Array) {
                for (i = 0, l = elements.length; i < l; ++i) {
                    if (typeof elements[i].controller.destroy == "function")
                        elements[i].controller.destroy();
                    MAR.remove(elements[i].element)
                }
            } else {
                for (k in elements) {
                    if (typeof elements[k].controller.destroy == "function")
                        elements[k].controller.destroy();
                    MAR.remove(elements[k].element)
                }
            }
        },
        createCollection: function(name, source, clazz, parent, ctx) {
            var collection;
            if (this.collections[name]) {
                collection = this.collections[name];
                collection.source = source;
                collection.ctx = ctx;
                collection.clazz = clazz;
            }
            else
                collection = this.collections[name] = {
                    name: name,
                    source: source,
                    clazz: clazz,
                    parent: parent,
                    elements: null,
                    ctx: ctx
                };
            this.updateCollection(name);
        },
        callCollection: function(name, func) {
            var collection = this.collections[name];
            if (!collection)
                return;
            var elements = collection.elements;
            var args = [],
                i,
                l,
                k;
            for (i = 2, l = arguments.length; i < l; ++i)
                args[i - 2] = arguments[i];
            if (elements instanceof Array) {
                for (i = 0, l = elements.length; i < l; ++i)
                    elements[i].controller[func].apply(elements[i].controller, args);
            } else {
                for (k in elements)
                    elements[k].controller[func].apply(elements[k].controller, args);
            }
        },
        updateCollection: function(name) {
            var collection = this.collections[name];
            if (!collection)
                return;
            var data = resolve(collection.source, collection.ctx);
            if (!data)
                data = [];
            var i,
                k;
            var elements = collection.elements;
            function createElement() {
                var controller;
                if (typeof collection.clazz == "function")
                    controller = new collection.clazz();
                else if (collection.clazz && collection.clazz instanceof CLAZZ.Injection)
                    controller = CLAZZ.get(collection.clazz);
                else {
                    controller = {
                        element: document.createElement(collection.clazz),
                        update: function(v) {
                            this.element.textContent = v;
                        },
                        destroy: function() {}
                    };
                }
                collection.parent.appendChild(controller.element);
                return {
                    value: undefined,
                    controller: controller,
                    element: controller.element
                };
            }
            if (data instanceof Array) {
                if (!elements)
                    elements = collection.elements = [];
                for (i = elements.length; i < data.length; ++i)
                    elements.push(createElement());
                while (elements.length > data.length) {
                    var e = elements.pop();
                    if (e.controller && e.controller.destroy)
                        e.controller.destroy();
                    if (e.element)
                        MAR.remove(e.element);
                }
                for (i = 0; i < data.length; ++i) {
                    if (elements[i].element && !elements[i].element.parentElement)
                        collection.parent.appendChild(elements[i].element);
                    if (data[i] !== elements[i].value || typeof data[i] == "object")
                        elements[i].controller.update(elements[i].value = data[i], i);
                }
            }
            else
            {
                if (!elements)
                    elements = collection.elements = {};
                var spares = [];
                for (k in elements)
                    if (!(k in data))
                        spares.push({
                            key: k,
                            e: elements[k]
                        });
                for (k in data)
                    if (!(k in elements)) {
                        if (!spares.length)
                            elements[k] = createElement();
                        else {
                            var s = spares.pop();
                            delete elements[s.key];
                            elements[k] = s.e;
                        }
                    }
                while (spares.length) {
                    var e = spares.pop();
                    delete elements[e.key];
                    e = e.e;
                    if (e.controller && e.controller.destroy)
                        e.controller.destroy();
                    if (e.element)
                        MAR.remove(e.element);
                }
                var pos = 0;
                for (i in elements) {
                    if (elements[i].element && !elements[i].element.parentElement)
                        collection.parent.appendChild(elements[i].element);
                    if (data[i] !== elements[i].value || typeof data[i] == "object")
                        elements[i].controller.update(elements[i].value = data[i], i, pos++);
                }
            }
            this.__pool.call("onUpdateCollection_" + name);
        },
        RMI: function(clazz, method, args, cb) {
            var THIS = this;
            if (typeof cb == "string")
                cb = this.__pool.call.bind(this.__pool, cb);
            var anyState = args.__anystate;
            delete args.__anystate;
            MAR.postURL([this.__data.backend || SOL.screens.backend, clazz, method].join('/'), args, function(ret, state) {
                if (ret) {
                    try {
                        ret = JSON.parse(ret);
                    } catch (ex) {}
                }
                cb.call(THIS, ret, state);
            }, {
                anystate: anyState
            });
        }
    });
    CLAZZ("framework.Phaser", {
        EXTENDS: "framework.Generic",
        phaserDOM: "BODY",
        game: null,
        gameWidth: 1024,
        gameHeight: 768,
        __active: false,
        paused: false,
        editor: false,
        editorLinkIndex: null,
        editorPauseTime: 1000,
        entities: null,
        entityList: null,
        shakeAmountX: 0,
        shakeAmountY: 0,
        __shakeAcc: 0,
        delayAfterEndGame: 3000,
        gameEnded: false,
        defaultEntityClazz: "framework.Phaser.Entity",
        STATIC: {
            game: null,
            requires: ["Phaser.js"],
            getPreloadList: function(data) {
                var map = data.map && SOL.assets[data.map];
                if (!map || !map.layers)
                    return;
                var path = data.assets[data.map].replace(/\/[^\/]+$/, "/");
                var list = {};
                for (var l = 0, ts; ts = map.tilesets[l]; ++l) {
                    for (var t in ts.tiles) {
                        var k = "sprite_" + (parseInt(t) + ts.firstgid);
                        var v = path + ts.tiles[t].image;
                        var m = v.match(/([^\/]+)\.[^\/]*$/);
                        if (m && data.assets[m[1]]) {
                            data.loadedAssets[k] = data.loadedAssets[m[1]];
                            data.assets[k] = data.assets[m[1]];
                            if (data.assets[m[1] + "ATLAS"]) {
                                SOL.assets[k + "ATLAS"] = data.loadedAssets[k + "ATLAS"] = data.loadedAssets[m[1] + "ATLAS"];
                                data.assets[k + "ATLAS"] = data.assets[m[1] + "ATLAS"];
                            }
                            continue;
                        }
                        list[k] = v;
                        data.assets[k] = v;
                    }
                }
                for (var l = 0, layer; layer = map.layers[l]; ++l) {
                    if (layer.type == "objectgroup" && layer.visible) {
                        for (var o = 0, obj; obj = layer.objects[o]; o++) {
                            for (var p in obj.properties) {
                                if (p[0] != "#")
                                    continue;
                                var component = obj.properties[p];
                                if (!list[component] && !resolve(component))
                                    list[component] = component.replace(/\./g, "/") + ".js";
                            }
                        }
                    }
                }
                if (!components.TileCollision)
                    list["components.TileCollision"] = "components/TileCollision.js";
                return list;
            }
        },
        DYNAMIC: true,
        CONSTRUCTOR: function(data) {
            SUPER(data);
            this.entities = {};
            this.entityList = [];
            this.__pool.silence("update");
            this.__pool.silence("onAddEntity");
            if (data.editorPauseTime)
                this.editorPauseTime = data.editorPauseTime;
            SOL.addClass("Button", {
                "CLAZZ": "framework.Phaser.Button"
            });
            SOL.addClass("Label", {
                "CLAZZ": "framework.Phaser.Label"
            });
            SOL.addClass("Bitmap", {
                "CLAZZ": "framework.Phaser.Bitmap"
            });
            SOL.addClass("FullScreenBitmap", {
                "CLAZZ": "framework.Phaser.FullScreenBitmap"
            });
            SOL.addClass("Interactive", {
                "CLAZZ": "framework.Phaser.Button",
                "components": [{
                    "CLAZZ": "components.FlyAI",
                    "enabled": false
                }, {
                    "CLAZZ": "components.AutoFlip",
                    "enabled": false
                }, {
                    "CLAZZ": "components.CollisionTriggers"
                }, {
                    "CLAZZ": "components.Spline",
                    "enabled": false
                }, {
                    "CLAZZ": "components.ZSort",
                    "enabled": false
                }, {
                    "CLAZZ": "components.Interactive"
                }],
                "disabled": false,
                "isRightAnswer": false
            });
            SOL.addClass("InteractiveArea", {
                "CLAZZ": "framework.Phaser.Label",
                "components": [{
                    "CLAZZ": "components.CollisionTriggers"
                }, {
                    "CLAZZ": "components.Interactive",
                    "handleClick": true
                }],
                "text": "",
                "disabled": false,
                "isRightAnswer": false,
                "events": {
                    "create": ["state = this.screen.editor ? 'editor' : 'play'"],
                    "editorBegin": ["sprite.alpha = this.visible ? 0.5 : 0.25"],
                    "playBegin": ["sprite.bringToTop()", "sprite.inputEnabled = true", "sprite.events.onInputDown.add( this.onPreClick )", "sprite.alpha = 0.001"],
                    "__playAudioAndDoAction": ["*playAudio(this.audioEffect)", "screen.setTimeout( this.onClick, this.__audio_name_audioEffectlength * 1000, this )"],
                    "onPreClick": ["if: this.audioEffect", "return: this.__playAudioAndDoAction()", "this.onClick()"]
                }
            });
            if (data.map)
                SOL.addClass("Tile", {
                    "CLAZZ": "framework.Phaser.SimpleBitmap",
                    "components": [{
                        "CLAZZ": "components.TileCollision"
                    }]
                });
        },
        getClass: function(name) {
            return this.__data.classes && this.__data.classes[name] || SOL.getClass(name);
        },
        onActivateNextScreen: function(screen) {
            if (!(screen instanceof framework.Phaser) && !this.editor) {
                this.game.destroy();
                framework.Phaser.game = null;
            }
        },
        editorActivate: function(parent) {
            if (framework.Phaser.game && framework.Phaser.game.canvas && !framework.Phaser.game.canvas.parentNode)
                parent.appendChild(framework.Phaser.game.canvas);
            SOL.execDisabled = false;
            if (this.editorPauseTime >= 0)
                this.setTimeout(this.editorPause, this.editorPauseTime, this);
        },
        phaserStateId: 0,
        screenshottaken: false,
        preRender: null,
        playerCount: 1,
        currentPlayer: 0,
        activate: function() {
            if (this.__data.speech)
                this.say(this.__data.speech);
            this.__active = true;
            if (this.editor) {
                this.preRender = (function() {
                    if (this.paused && !this.screenshottaken) {
                        this.screenshottaken = true;
                        this.editor("onPreviewPaused");
                    }
                }).bind(this);
            }
            if (!framework.Phaser.game) {
                applyPhaserFixes();
                var mode = Phaser.AUTO;
                var blacklist = [/iPad|iPhone|iPod|Trident/, /Tablet.DL.34[0-9][0-9]/i, /GT-P5210/, /SM-J120H/, /SM-G355M/, /SM-T113NU/, /LG-V490/i, /KFAUWI/i];
                blacklist.forEach(function(item) {
                    if (item.test(navigator.userAgent))
                        mode = Phaser.CANVAS;
                });
                framework.Phaser.game = new Phaser.Game(this.gameWidth, this.gameHeight, mode, this.phaserDOM, this, true);
                this.phaserStateId = 'default';
            } else {
                framework.Phaser.game.state.add(this.__uid, this, true);
                framework.Phaser.game.scale.setGameSize(this.gameWidth, this.gameHeight);
                this.phaserStateId = this.__uid;
            }
            PIXI.CanvasPool.pool = [];
            if (window.parent != window) {
                window.parent.postMessage({
                    setAspect: this.gameWidth / this.gameHeight
                }, location.origin);
            }
            window.game = this.game = framework.Phaser.game;
            this.game.paused = false;
            this.game.preserveDrawingBuffer = !!this.editor;
            LOG("Waiting for Phaser");
        },
        deactivate: function() {
            this.__pool.call("onDeactivateScreen");
            this.__active = false;
            this.game.state.remove(this.phaserStateId);
            while (this.game.world.children.length)
                this.game.world.remove(this.game.world.children[0]);
            var list = Object.keys(this.entities);
            for (var i = 0, l = list.length; i < l; ++i) {
                var entity = this.entities[list[i]];
                if (entity)
                    entity.destroy();
            }
            this.__pool.reset();
            this.__data = null;
        },
        init: function() {
            this.game.canvas.oncontextmenu = function(e) {
                e.preventDefault();
            }
            this.game.canvas.style.maxWidth = "100%";
            this.game.stage.disableVisibilityChange = true;
            this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            this.game.scale.fullScreenScaleMode = Phaser.ScaleManager.SHOW_ALL;
            this.game.scale.minWidth = this.gameWidth / 10;
            this.game.scale.minHeight = this.gameHeight / 10;
            this.game.scale.maxWidth = this.gameWidth;
            this.game.scale.maxHeight = this.gameHeight;
            this.game.scale.pageAlignHorizontally = true;
            this.game.scale.pageAlignVertically = true;
            this.game.scale.windowConstraints.bottom = "visual";
            this.game.scale.refresh();
        },
        preload: function() {
            var game = this.game;
            var data = this.__data;
            for (var k in data.loadedAssets) {
                var ref = data.assets[k];
                var res = data.loadedAssets[k];
                if (res instanceof HTMLElement && res.tagName == "IMG" && typeof ref == "string")
                {
                    var atlas = data.loadedAssets[k + "ATLAS"]
                    if (atlas) {
                        ref = ["textureAtlas", ref, atlas];
                        if (!atlas.setup)
                            atlas.setup = this.__atlasSetup.bind(atlas);
                    } else
                        ref = ["image"];
                }
                if (ref instanceof Array)
                {
                    game.cache["add" + ref[0][0].toUpperCase() + ref[0].substr(1)].apply(game.cache, [k, ref[1], res].concat(ref.slice(2)));
                    SOL.assets[k] = k;
                }
            }
        },
        onPlayerAction: function() {
            var cp = this.currentPlayer;
            this.currentPlayer = (this.currentPlayer + 1) % this.playerCount;
            if (cp != this.currentPlayer)
                this.switchContext();
        },
        __atlasSetup: function(sprite, entity) {
            if (!this.animations)
                return;
            function getOnUpdate(anim) {
                var ret = null;
                var cc = 0;
                var index = {};
                var exp = new RegExp("on" + anim.name + "Frame([0-9]+)", "i");
                for (var k in entity.constructor.methods) {
                    var m = k.match(exp);
                    if (m) {
                        index[m[1]] = [k];
                        cc++;
                    }
                }
                if (events && events[anim.name]) {
                    for (var k in events[anim.name]) {
                        var animFrame = events[anim.name][k];
                        if (Array.isArray(animFrame)) {
                            for (var i = 0; i <= animFrame.length; i++) {
                                if (index[animFrame[i]]) {
                                    index[animFrame[i]].push(k);
                                } else
                                    index[animFrame[i]] = [k];
                            }
                        } else {
                            if (index[animFrame]) {
                                index[animFrame].push(k);
                            } else
                                index[animFrame] = [k];
                        }
                        cc++;
                    }
                }
                if (cc) {
                    ret = new Phaser.Signal();
                    var lastFrame = undefined;
                    function cb() {
                        if (lastFrame == undefined || !anim._frameSkip)
                            lastFrame = anim._frameIndex - 1;
                        while (anim._frames && lastFrame != anim._frameIndex) {
                            lastFrame++;
                            lastFrame %= anim._frames.length;
                            if (lastFrame in index) {
                                var list = index[lastFrame];
                                for (var i = 0, cb; cb = list[i]; ++i) {
                                    if (typeof entity[cb] == "function")
                                        entity[cb]();
                                }
                            }
                        }
                    }
                    ret.add(cb);
                    anim.onComplete.add(cb);
                }
                return ret;
            }
            var THIS = this;
            var anims = this.animations;
            events = this.events;
            for (var name in anims)
            {
                var params = anims[name].slice();
                if (typeof params[0] == "string")
                {
                    var prefix = params[0];
                    var keys = [];
                    for (var k in this.frames)
                    {
                        if (k.substr(0, prefix.length) != prefix)
                            continue;
                        var post = k.substr(prefix.length);
                        keys[parseInt(post) - 1] = k;
                    }
                    params[0] = keys;
                }
                params.unshift(name);
                var anim = sprite.animations.add.apply(sprite.animations, params);
                anim.onUpdate = getOnUpdate(anim);
            }
            if (this.defaultAnimation)
                sprite.animations.play(this.defaultAnimation);
        },
        create: function() {
            if (!this.__active)
                return;
            if (this.__data.map) {
                var map = SOL.assets[this.__data.map];
                var o,
                    obj;
                game.world.setBounds(0, 0, map.tilewidth * map.width, map.tileheight * map.height);
                if (components.TileCollision)
                    components.TileCollision.initWorld(map.width, map.height, map.tilewidth, map.tileheight);
                for (var l = 0, layer; layer = map.layers[l]; ++l) {
                    var clazz;
                    var key = "class";
                    clazz = this.getClass(layer.name);
                    if (!clazz) {
                        clazz = resolve(layer.name);
                        key = "CLAZZ";
                    } else
                        clazz = layer.name;
                    if (layer.type == "objectgroup" && layer.visible) {
                        for (o = 0; obj = layer.objects[o]; o++) {
                            obj = MAR.mergeTo({
                                sprite: "sprite_" + obj.gid
                            }, obj);
                            obj.id = obj.name || obj.id;
                            if (obj.type) {
                                if (this.getClass(obj.type))
                                    obj.class = obj.type;
                                else
                                    obj.CLAZZ = obj.type;
                            } else if (!obj.CLAZZ && !obj.class)
                                obj[key] = clazz || "framework.Phaser.Bitmap";
                            if (typeof obj.components == "string")
                                obj.components = JSON.parse(obj.components);
                            if (!obj.components)
                                obj.components = [];
                            if (typeof obj.events == "string")
                                obj.events = JSON.parse(obj.events);
                            if (!obj.events)
                                obj.events = {};
                            obj.components.push({
                                "CLAZZ": "components.TiledAdjust"
                            });
                            var compIndex = {};
                            for (var p in obj.properties) {
                                var v = obj.properties[p];
                                if (p[0] == "#") {
                                    obj.components.push(compIndex[p.substr(1)] = {
                                        "CLAZZ": v,
                                        name: p.substr(1)
                                    });
                                } else if (p[0] == ".") {
                                    p = p.split(".")[1];
                                    if (!obj.events[p])
                                        obj.events[p] = [];
                                    obj.events[p].push(v);
                                } else {
                                    switch (v) {
                                    case "true":
                                        v = true;
                                        break;
                                    case "false":
                                        v = false;
                                        break;
                                    default:
                                        if (v[0] == "{" || v[0] == "[") {
                                            try {
                                                v = JSON.parse(v);
                                            } catch (e) {}
                                        } else {
                                            var fv = parseFloat(v);
                                            if (!isNaN(fv))
                                                v = fv;
                                        }
                                        break;
                                    }
                                    var k = p.split(".");
                                    if (k.length == 2 && compIndex[k[0]])
                                        compIndex[k[0]][k[1]] = v;
                                    else
                                        obj[p] = v;
                                }
                            }
                            this.addEntity(obj)
                        }
                    } else if (layer.type == "tilelayer" && layer.visible) {
                        var x = 0,
                            y = 0;
                        for (var i = 0; i < layer.data.length; ++i)
                        {
                            var o = layer.data[i];
                            if (o) {
                                obj = {
                                    sprite: "sprite_" + o,
                                    alpha: layer.opacity,
                                    x: x * map.tilewidth + layer.x,
                                    y: y * map.tileheight + layer.y
                                };
                                if (clazz)
                                    obj[key] = clazz;
                                else
                                    obj.class = "Tile";
                                this.addEntity(obj);
                            }
                            x++;
                            if (x == layer.width) {
                                x = 0;
                                y++;
                            }
                        }
                    }
                }
            }
            if (this.__data.entities) {
                for (var i = 0, data; data = this.__data.entities[i]; ++i)
                    if (!data.$isMarker)
                        this.addEntity(data);
            }
            CALL("onCreateScreen", this, this.__data);
        },
        editorPause: function() {
            if (this.editor) {
                CALL("onEditorPause");
                this.paused = true;
                SOL.execDisabled = true;
            }
        },
        instrumentForEditor: function(DO, data, entity) {
            if (!this.editor || !("inputEnabled" in DO))
                return;
            if (DO instanceof Phaser.Text)
                return new framework.Phaser.EditorTextResizer(DO, data, entity, this);
            new framework.Phaser.EditorImageResizer(DO, data, entity, this);
        },
        addEntity: function(data) {
            var ret = EntityComponent.create(data, this);
            if (ret)
                this.__pool.call("onAddEntity", ret);
            return ret;
        },
        update: function() {
            if (!this.paused) {
                scrollTo(0, 0);
                document.body.scrollTop = 0;
                document.body.scrollLeft = 0;
                if (Math.abs(this.shakeAmountX) > 1 || Math.abs(this.shakeAmountY) > 1)
                {
                    this.__shakeAcc++;
                    this.shakeAmountX *= 0.9;
                    this.shakeAmountY *= 0.9;
                    var y = Math.round(this.shakeAmountY * Math.sin(this.__shakeAcc * 1.1));
                    var x = Math.round(this.shakeAmountX * Math.cos(this.__shakeAcc * 1.1));
                    if (Math.abs(x) > -this.game.world.bounds.x || Math.abs(y) > -this.game.world.bounds.y) {
                        this.game.world.setBounds(-50, -50, this.gameWidth + 100, this.gameHeight + 100);
                    }
                    this.game.camera.x = x;
                    this.game.camera.y = y;
                }
                this.__execTimeouts(game.paused);
                try {
                    CALL("onTick");
                } catch (e) {
                    LOG("Error:", e.stack || e);
                }
            }
            try {
                CALL("onPostTick");
                CALL("onPreRender");
            } catch (e) {
                LOG("Error:", e.stack || e);
            }
        },
        __screenToLoad: null,
        endGame: function() {
            if (this.gameEnded)
                return;
            this.gameEnded = true;
            CALL("onEndGame");
            this.setTimeout(this.nextScreen.bind(this), this.delayAfterEndGame);
        }
    });
    CLAZZ("framework.Phaser.Entity", {
        EXTENDS: "EntityComponent",
        sprite: null,
        x: undefined,
        y: undefined,
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, data) {
            var mustInstrument = false,
                THIS = this;
            var oldDataSprite = data.sprite;
            SUPER(screen, data, {
                onMerge: function(data) {
                    var sprite = data.sprite || this.sprite;
                    if (sprite) {
                        if (Array.isArray(sprite))
                            sprite = sprite[Math.floor(Math.random() * sprite.length)];
                        else if (!(sprite instanceof PIXI.DisplayObject) && sprite.CLAZZ) {
                            var clazz = MAR.resolve(sprite.CLAZZ);
                            sprite = CLAZZ.withContext({
                                screen: screen,
                                entity: THIS
                            }, function() {
                                return clazz.NEW.apply(clazz, sprite.args);
                            });
                        }
                    }
                    if (typeof sprite == "string") {
                        data.sprite = this.loadSprite(sprite);
                        if (data.tileX || data.tileY) {
                            data.sprite = this.__setupTiling(data.sprite);
                            this.screen.instrumentForEditor(data.sprite, this.__data, this);
                        }
                    } else if (sprite) {
                        data.sprite = sprite;
                        mustInstrument = true;
                    }
                    this.sprite = data.sprite;
                }
            });
            data.sprite = oldDataSprite;
            if (this.sprite)
            {
                if (this.x !== undefined)
                    this.sprite.x = this.x;
                else
                    this.x = this.sprite.x;
                if (this.y !== undefined)
                    this.sprite.y = this.y;
                else
                    this.y = this.sprite.y;
                if (this.rotation !== undefined)
                    this.sprite.rotation = this.rotation;
                else
                    this.rotation = this.sprite.rotation;
                if (mustInstrument)
                    this.screen.instrumentForEditor(this.sprite, data, this);
            }
        },
        __setupTiling: function(sprite) {
            var screen = this.screen,
                data = this.__data;
            var tileCountX = data.tileX === true ? Math.ceil(screen.gameWidth / sprite.width) + 1 : data.tileX || 1;
            var tileCountY = data.tileY === true ? Math.ceil(screen.gameHeight / sprite.height) + 1 : data.tileY || 1;
            var bmd = screen.game.make.bitmapData(tileCountX * sprite.width, tileCountY * sprite.height);
            for (var i = 0; i < tileCountY; ++i) {
                for (var j = 0; j < tileCountX; ++j)
                    bmd.draw(sprite, j * sprite.width, i * sprite.height);
            }
            var ret = screen.game.add.image(0, 0, bmd);
            ret.tileWidth = sprite.width;
            ret.tileHeight = sprite.height;
            sprite.destroy();
            return ret;
        },
        loadSprite: function(name, props) {
            if (SOL.assets[name] === "") {
                name = game.make.bitmapData(1, 1);
                name.cls();
            }
            var sprite = game.add.image(0, 0, name);
            var atlas = SOL.assets[name + "ATLAS"];
            if (atlas && atlas.setup)
                atlas.setup(sprite, this);
            if (props)
            {
                for (var k in props)
                {
                    var handle = resolve(k, sprite, undefined, true);
                    if (typeof handle.value == "function")
                        handle.value.call(handle.obj, props[k]);
                    else
                        handle.obj[handle.key] = props[k];
                }
            }
            if (!props || !props.doNotInstrument)
                this.screen.instrumentForEditor(sprite, this.__data, this);
            return sprite;
        },
        swapCoords: function(other) {
            var x = this.sprite.x,
                y = this.sprite.y;
            this.sprite.x = other.sprite.x;
            this.sprite.y = other.sprite.y;
            other.sprite.x = x;
            other.sprite.y = y;
            x = this.x;
            y = this.y;
            this.x = other.x;
            this.y = other.y;
            other.x = x;
            other.y = y;
        },
        addComponent: function(compData, hidden) {
            var comp = compData;
            var clazz = compData;
            if (!this.components)
                this.components = [];
            else if (this.components.indexOf(compData) != -1)
                return;
            compData.entity = this;
            if (compData.CLAZZ) {
                clazz = resolve(compData.CLAZZ);
                if (!clazz)
                {
                    console.warn("Could not find component class:", compData);
                    return;
                }
                comp = clazz.NEW(compData);
                for (var name in comp.constructor.methods)
                    MAR.appendFunction(this, name, comp[name].bind(comp), this.screen.__pool);
            } else {
                for (var name in comp)
                    if (typeof comp[name] == "function")
                        MAR.appendFunction(this, name, comp[name].bind(comp), this.screen.__pool);
            }
            if (!hidden)
                this.components.push(compData);
            this[compData.name || clazz.NAME] = comp;
        },
        inputEnable: function(enabled) {
            if (this.sprite.input.inputEnabled == enabled)
                return;
            this.sprite.input.inputEnabled = enabled;
            this.bindEventHandlers(this.sprite.input);
        },
        bindEventHandlers: function(src, listener) {
            src = src || this.sprite.events;
            listener = listener || this;
            for (var k in listener.constructor.methods)
                if (src[k] && typeof src[k].add == "function")
                    src[k].add(listener[k].bind(listener));
        },
        disableTick: function() {
            this.screen.__pool.mute(this, "onTick");
        },
        onTick: function() {
            try {
                if (this.prevState != this.state)
                {
                    if (typeof this[this.prevState + "End"] == "function")
                        this[this.prevState + "End"]();
                    this.prevState = this.state;
                    if (typeof this[this.prevState + "Begin"] == "function")
                        this[this.prevState + "Begin"]();
                }
                if (typeof this[this.state] == "function")
                    this[this.state]();
            } catch (e) {
                LOG("ERROR:", this.constructor.NAME, this.id, e.stack || e);
            }
        },
        getCollision: function(sprite) {
            sprite = sprite || this.sprite;
            if (!sprite)
                return null;
            var collisions = CALL("checkCollision", sprite.getBounds(), []);
            return collisions && collisions[0];
        },
        destroy: function() {
            var index = this.screen.entityList.indexOf(this);
            if (index != -1)
                this.screen.entityList.splice(index, 1)
            delete this.screen.entities[this.id];
            if (this.__data.GUID && this.screen.entities[this.__data.GUID] == this)
                delete this.screen.entities[this.__data.GUID];
            if (this.sprite)
                this.sprite.destroy();
            this.sprite = null;
            this.screen.__pool.remove(this);
        }
    });
    CLAZZ("framework.Phaser.CollidableEntity", {
        EXTENDS: "framework.Phaser.Entity",
        DYNAMIC: true,
        collisionEnabled: true,
        checkCollision: function(other, collisions) {
            if (!this.collisionEnabled || !this.sprite || collisions.length && collisions[0].sprite.z >= this.sprite.z)
                return;
            this.sprite.displayObjectUpdateTransform();
            if (Phaser.Rectangle.intersects(this.sprite.getBounds(), other))
                collisions[0] = this;
            return collisions;
        }
    });
    CLAZZ("framework.Phaser.FullScreenBitmap", {
        EXTENDS: "framework.Phaser.Entity",
        DYNAMIC: true,
        scaleMode: "fill",
        sprite: null,
        screen: null,
        CONSTRUCTOR: function(screen, data) {
            if (data.visible === false) {
                SUPER(screen, data);
                if (this.sprite)
                    this.sprite.visible = false;
            } else {
                this.screen = screen;
                var bg = game.add.image(0, 0, data.sprite);
                this.sprite = bg;
                screen.instrumentForEditor(bg, data, this);
                var ignore = {
                    events: 1
                };
                for (var k in data) {
                    if (k in bg && !(k in ignore))
                        bg[k] = data[k];
                }
                if (data.events && data.events.create)
                    SOL.exec(data.events.create, this);
                bg.x = 0;
                bg.y = screen.gameHeight;
                bg.anchor.y = 1;
                var s;
                if ((data.scaleMode || this.scaleMode) == "fill") {
                    bg.scale.setTo(Math.max(screen.gameWidth / bg.width, screen.gameHeight / bg.height));
                } else if (data.scaleMode == "fit") {
                    bg.scale.setTo(Math.min(screen.gameWidth / bg.width, screen.gameHeight / bg.height));
                } else if (data.scaleMode == "stretch") {
                    bg.scale.setTo(screen.gameWidth / bg.width, screen.gameHeight / bg.height);
                }
            }
        }
    });
    CLAZZ("framework.Phaser.SimpleBitmap", {
        EXTENDS: "framework.Phaser.Entity",
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, data) {
            SUPER(screen, data);
            this.disableTick();
        }
    });
    CLAZZ("framework.Phaser.Bitmap", {
        EXTENDS: "framework.Phaser.Entity",
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, data) {
            SUPER(screen, data);
            if (this.width != 0 && this.width != undefined)
                this.sprite.scale.x = this.width / this.sprite.width;
            if (this.height != 0 && this.height != undefined)
                this.sprite.scale.y = this.height / this.sprite.height;
            if (this.height == undefined && this.width)
                this.sprite.scale.y = this.sprite.scale.x;
            if (this.width == undefined && this.height)
                this.sprite.scale.x = this.sprite.scale.y;
        }
    });
    CLAZZ("framework.Phaser.Button", {
        EXTENDS: "framework.Phaser.Entity",
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, data) {
            var isText = false;
            if (!data.sprite && typeof data.text == "string") {
                var failed = false;
                var text = (data.text || "").replace(/\$\{([a-zA-Z0-9.]+)\}/g, function(match, path) {
                    var v = MAR.resolve(path, {
                        SOL: SOL,
                        vars: SOL.vars,
                        entity: this,
                        persist: SOL.vars.persist
                    });
                    if (v && v instanceof Array)
                        v = v.join(", ");
                    if (v === undefined)
                        failed = true;
                    return v;
                });
                if (failed) {
                    failed = (data.text || "").match(/\$catch\{(.*)\}/);
                    if (failed)
                        text = failed[1];
                } else {
                    text = text.replace(/\$catch\{(.*)\}/, "");
                }
                data.sprite = game.add.text(data.x || 0, data.y || 0, text);
                isText = true;
            }
            var onClick = null;
            if (data.onClick) {
                var THIS = this;
                var cb = SOL.compile(data.onClick, this);
                if (data.__audio_name_audioEffectlength) {
                    onClick = function() {
                        screen.setTimeout(cb, data.__audio_name_audioEffectlength * 1000, THIS);
                    };
                } else {
                    onClick = cb;
                }
            }
            SUPER(screen, data);
            if (isText) {
                this.text = this.sprite;
                this.sprite.setStyle({
                    font: this.font || SOL.defaultFont,
                    fontSize: this.size || 20,
                    fill: this.color || "#000",
                    stroke: this.stroke || "#000",
                    strokeThickness: this.strokeThickness || 0,
                    wordWrap: this.wordWrap || true,
                    wordWrapWidth: this.wordWrapWidth || 700,
                    align: this.align || "center"
                });
            }
            if ("width" in this.sprite) {
                if (data.width)
                    this.sprite.width = data.width;
                if (data.height)
                    this.sprite.height = data.height;
            } else {
                if (data.width)
                    this.sprite.scale.x = data.width / (this.sprite.width / this.sprite.scale.x);
                if (data.height)
                    this.sprite.scale.y = data.height / (this.sprite.height / this.sprite.scale.y);
            }
            if (onClick)
                MAR.appendFunction(this, "onClick", onClick);
            var THIS = this;
            if (!this.screen.editor && this.onClick && this.sprite) {
                this.sprite.inputEnabled = true;
                this.sprite.events.onInputDown.add(function() {
                    THIS.onClick();
                });
            }
        }
    });
    CLAZZ("framework.Phaser.EditorResizer", {
        targetDO: null,
        targetData: null,
        targetEntity: null,
        entityUID: 0,
        dirty: false,
        STATIC: {
            focus: null
        },
        editor: null,
        screen: null,
        bmd: null,
        sprite: null,
        corners: null,
        x1: 0,
        x2: 0,
        y1: 0,
        y2: 0,
        CONSTRUCTOR: function(targetDO, targetData, targetEntity, screen) {
            this.targetDO = targetDO;
            this.targetData = targetData;
            this.targetEntity = targetEntity;
            var uid = targetData.__$uid;
            if (!uid) {
                for (var k in targetData) {
                    if (k[0] == "@") {
                        if (typeof targetData[k] == "object")
                            uid = targetData[k].__uid;
                        else
                            uid = screen.editorLinkIndex[targetData[k]];
                        break;
                    }
                }
            }
            this.entityUID = uid;
            this.screen = screen;
            this.editor = screen.editor;
        },
        __editorDragStartX: 0,
        __editorDragStartY: 0
    });
    CLAZZ("framework.Phaser.EditorTextResizer", {
        EXTENDS: framework.Phaser.EditorResizer,
        STATIC: {
            dragging: null,
            wasInit: false
        },
        visible: false,
        CONSTRUCTOR: function(targetDO, targetData, targetEntity, screen) {
            SUPER(targetDO, targetData, targetEntity, screen);
            var STATIC = framework.Phaser.EditorTextResizer;
            if (!STATIC.wasInit) {
                var dragX,
                    dragY;
                STATIC.wasInit = true;
                screen.game.canvas.addEventListener("mousemove", function(e) {
                    var dragging = e.buttons;
                    if (!framework.Phaser.EditorResizer.focus || !STATIC.dragging) {
                        STATIC.dragging = null;
                        return;
                    }
                    if (!dragging) {
                        if (STATIC.dragging)
                            framework.Phaser.EditorResizer.focus.__onEditorDragStop();
                        STATIC.dragging = null;
                        dragX = dragY = undefined;
                        return;
                    }
                    var clientX = e.clientX / (screen.game.canvas.clientWidth / screen.gameWidth),
                        clientY = e.clientY / (screen.game.canvas.clientHeight / screen.gameHeight);
                    if (dragX !== undefined) {
                        var ox = STATIC.dragging.x,
                            oy = STATIC.dragging.y;
                        STATIC.dragging.x += clientX - dragX;
                        STATIC.dragging.y += clientY - dragY;
                        framework.Phaser.EditorResizer.focus.onDrag(STATIC.dragging, ox, oy, STATIC.dragging.x, STATIC.dragging.y);
                    } else
                        framework.Phaser.EditorResizer.focus.__onEditorDragStart();
                    dragX = clientX;
                    dragY = clientY;
                });
            }
            screen.__pool.add(this);
            this.createDO();
        },
        createDO: function() {
            var game = this.screen.game;
            var bmd = this.bmd = game.add.bitmapData(1, 1);
            var DO = this.sprite = game.add.image(0, 0, this.bmd);
            DO.inputEnabled = true;
            DO.input.useHandCursor = true;
            if (this.targetData.$moveable) {
                if (this.targetData.$transform) {
                    this.corners = [];
                    var dotbmd = game.add.bitmapData(1, 1);
                    dotbmd.fill(255, 255, 255);
                    for (var i = 0; i < 4; ++i) {
                        var corner = game.add.image(0, 0, dotbmd);
                        this.corners.push(corner);
                        corner.scale.setTo(5, 5);
                        corner.targetScale = 5;
                        corner.anchor.setTo(0.5);
                        corner.blendMode = PIXI.blendModes.EXCLUSION;
                        corner.inputEnabled = true;
                        corner.events.onInputOver.add(this.onInputOverCorner.bind(this, corner));
                        corner.events.onInputOut.add(this.onInputOutCorner.bind(this, corner));
                        corner.events.onInputDown.add(this.onInputDownCorner.bind(this, corner));
                    }
                }
            }
            DO.events.onInputDown.add(this.onInputDown.bind(this));
        },
        onInputOverCorner: function(corner) {
            corner.targetScale = 10;
        },
        onInputOutCorner: function(corner) {
            corner.targetScale = 5;
        },
        onInputDownCorner: function(corner) {
            framework.Phaser.EditorResizer.focus = this;
            framework.Phaser.EditorTextResizer.dragging = corner;
        },
        onInputDown: function() {
            if (this.entityUID)
                this.editor("editOpt", this.entityUID);
            var STATIC = framework.Phaser.EditorTextResizer;
            framework.Phaser.EditorResizer.focus = this;
            if (this.targetData.$moveable || this.targetData.$transform)
                STATIC.dragging = this.targetDO;
        },
        vwidth: null,
        vheight: null,
        setWidth: function(w) {
            if (this.targetDO instanceof Phaser.Text) {
                this.targetDO.wordWrapWidth = w;
                this.vwidth = w;
            } else
                this.targetDO.width = w;
        },
        getWidth: function() {
            if (this.vwidth !== null)
                return this.vwidth;
            return this.targetDO.width;
        },
        setHeight: function(h) {
            if (this.targetDO instanceof Phaser.Text)
                this.vheight = h;
            else
                this.targetDO.height = h;
        },
        getHeight: function() {
            if (this.vheight !== null)
                return this.vheight;
            return this.targetDO.height;
        },
        onDrag: function(target, ox, oy, x, y) {
            this.dirty = true;
            if (target == this.sprite || !this.corners)
                return;
            if (target == this.corners[0]) {
                this.targetDO.x = x + this.targetDO.width * this.targetDO.anchor.x;
                this.targetDO.y = y + this.targetDO.height * this.targetDO.anchor.y;
                this.setWidth(Math.max(10, this.getWidth() + (ox - x)));
                this.setHeight(Math.max(10, this.getHeight() + (oy - y)));
            } else if (target == this.corners[1]) {
                this.targetDO.y = y + this.targetDO.height * this.targetDO.anchor.y;
                this.setWidth(Math.max(10, this.getWidth() - (ox - x)));
                this.setHeight(Math.max(10, this.getHeight() + (oy - y)));
            } else if (target == this.corners[2]) {
                this.setWidth(Math.max(10, this.getWidth() - (ox - x)));
                this.setHeight(Math.max(10, this.getHeight() - (oy - y)));
            } else if (target == this.corners[3]) {
                this.targetDO.x = x + this.targetDO.width * this.targetDO.anchor.x;
                this.setWidth(Math.max(10, this.getWidth() + (ox - x)));
                this.setHeight(Math.max(10, this.getHeight() - (oy - y)));
            }
        },
        onPreRender: function() {
            var visible = framework.Phaser.EditorResizer.focus == this;
            if (visible != this.visible) {
                this.visible = visible;
                this.x1 = undefined;
                if (this.corners)
                    this.corners.forEach(function(c) {
                        c.visible = visible;
                        if (visible)
                            c.parent.bringToTop(c);
                    });
            }
            var t = this.targetDO,
                DO = this.sprite;
            while (t.parent && !t.parent == DO.parent)
                t = t.parent;
            if (t) {
                var index = t.parent.children.indexOf(t);
                var oldIndex = DO.parent.children.indexOf(DO);
                if (index != oldIndex + 1) {
                    if (index > oldIndex)
                        index--;
                    DO.parent.children.splice(oldIndex, 1);
                    DO.parent.children.splice(index, 0, DO);
                }
            }
            var tdo = this.targetDO;
            var height = this.vheight || tdo.height || 0,
                width = this.vwidth || tdo.width || 0;
            var ax = tdo.anchor && tdo.anchor.x * tdo.width || 0;
            var ay = tdo.anchor && tdo.anchor.y * tdo.height || 0;
            var x1 = Math.round(tdo.x - ax) || 0;
            var x2 = Math.round(width + x1) || 0;
            var y1 = Math.round(tdo.y - ay) || 0;
            var y2 = Math.round(height + y1) || 0;
            if (x1 == this.x1 && x2 == this.x2 && y1 == this.y1 && y2 == this.y2)
                return;
            this.bmd.cls();
            this.bmd.fill(255, 255, 255, visible ? 0.2 : 0);
            this.sprite.x = x1;
            this.sprite.y = y1;
            this.sprite.scale.setTo(Math.abs(x2 - x1), Math.abs(y2 - y1));
            if (!visible)
                return;
            if (this.corners) {
                this.corners[0].x = x1;
                this.corners[0].y = y1;
                this.corners[0].scale.setTo(this.corners[0].scale.x - (this.corners[0].scale.x - this.corners[0].targetScale) * 0.1);
                this.corners[1].x = x2;
                this.corners[1].y = y1;
                this.corners[1].scale.setTo(this.corners[1].scale.x - (this.corners[1].scale.x - this.corners[1].targetScale) * 0.1);
                this.corners[2].x = x2;
                this.corners[2].y = y2;
                this.corners[2].scale.setTo(this.corners[2].scale.x - (this.corners[2].scale.x - this.corners[2].targetScale) * 0.1);
                this.corners[3].x = x1;
                this.corners[3].y = y2;
                this.corners[3].scale.setTo(this.corners[3].scale.x - (this.corners[3].scale.x - this.corners[3].targetScale) * 0.1);
            }
            return;
            function line(x1, y1, x2, y2) {
                var seglen = 5;
                var nx = x2 - x1,
                    ny = y2 - y1,
                    l = Math.sqrt(nx * nx + ny * ny);
                var segcount = Math.floor(l / seglen),
                    x = x1,
                    y = y1;
                nx = (nx / l) * seglen;
                ny = (ny / l) * seglen;
                for (var i = 0; i < segcount; i += 2, x += nx * 2, y += ny * 2) {
                    bmd.line(x, y, x + nx, y + ny);
                }
            }
        },
        __onEditorDragStop: function() {
            var changes = {
                x: this.targetDO.x,
                y: this.targetDO.y
            };
            if (this.targetDO instanceof Phaser.Text)
                changes.wordWrapWidth = this.targetDO.wordWrapWidth;
            else {
                changes.width = this.targetDO.width;
                changes.height = this.targetDO.height;
            }
            this.vwidth = null;
            this.vheight = null;
            if (this.dirty) {
                if ("__$uid" in this.targetData)
                    this.screen.editor("updateEntity", this.targetData.__$uid, changes);
                else
                    this.screen.editor("updateMoveable", this.targetData.__uid, changes);
            }
            this.dirty = false;
        },
        __onEditorDragStart: function() {
            this.__editorDragStartX = this.targetDO.x;
            this.__editorDragStartY = this.targetDO.y;
        }
    })
    CLAZZ("framework.Phaser.EditorImageResizer", {
        EXTENDS: framework.Phaser.EditorResizer,
        CONSTRUCTOR: function(DO, data, entity, screen) {
            SUPER(DO, data, entity, screen);
            var uid = this.entityUID;
            DO.inputEnabled = true;
            if (DO.input && "pixelPerfectAlpha" in DO.input)
                DO.input.pixelPerfectAlpha = 255;
            if (DO.input && "pixelPerfectClick" in DO.input)
                DO.input.pixelPerfectClick = true;
            if (DO.input && data.$moveable) {
                DO.input.useHandCursor = true;
                DO.input.enableDrag(false);
                DO.events.onDragStart.add(this.__onEditorDragStart.bind(this));
                DO.events.onDragStop.add(this.__onEditorDragStop.bind(this));
                if (data.$transform && !entity.EditorTransformComponent) {
                    entity.EditorTransformComponent = 1;
                    entity.addComponent({
                        "CLAZZ": "components.UserRotate",
                        "name": "EditorTransformComponent",
                        "spinSprite": "spinSprite",
                        "flipSprite": "flipSprite",
                        "sizeSprite": "sizeSprite"
                    }, true);
                }
            }
            if (uid) {
                DO.input.useHandCursor = true;
                var c = this.editor.bind(null, "editOpt", uid);
                DO.events.onInputDown.add(function() {
                    c();
                });
            }
        },
        __onEditorDragStop: function() {
            var sprite = this.targetDO;
            if (this.targetData.lockToGrid && this.screen.editorSnapEnabled !== false) {
                sprite.x = Math.round(sprite.x / this.targetData.lockToGrid) * this.targetData.lockToGrid;
                sprite.y = Math.round(sprite.y / this.targetData.lockToGrid) * this.targetData.lockToGrid;
            }
            if (Math.round(sprite.x) != Math.round(this.__editorDragStartX) || Math.round(sprite.y) != Math.round(this.__editorDragStartY))
                this.screen.editor("updateEntity", this.entityUID, {
                    x: sprite.x,
                    y: sprite.y
                });
        },
        __onEditorDragStart: function() {
            this.__editorDragStartX = this.targetDO.x;
            this.__editorDragStartY = this.targetDO.y;
            framework.Phaser.EditorResizer.focus = this;
        },
    });
    CLAZZ("framework.Phaser.Hotspot", {
        STATIC: {
            clazz: null,
            def: {
                EXTENDS: "Phaser.Image",
                DYNAMIC: true,
                onResize: null,
                onInputDown: null,
                onInputUp: null,
                color: "#FFFFFF",
                bitmap: null,
                innerWidth: 0,
                innerHeight: 0,
                paddingTop: 0,
                paddingLeft: 0,
                paddingRight: 0,
                paddingBottom: 0,
                outerWidth: 0,
                outerHeight: 0,
                dots: null,
                CONSTRUCTOR: function(area, parent, isEditable) {
                    if (area.padding) {
                        this.paddingLeft = this.paddingRight = this.paddingBottom = this.paddingTop = area.padding | 0;
                    }
                    this.paddingLeft = area.paddingLeft || this.paddingLeft;
                    this.paddingRight = area.paddingRight || this.paddingRight;
                    this.paddingBottom = area.paddingBottom || this.paddingBottom;
                    this.paddingTop = area.paddingTop || this.paddingTop;
                    this.innerWidth = area.width || 10;
                    this.innerHeight = area.height || 10;
                    this.bitmap = game.add.bitmapData(this.outerWidth, this.outerHeight);
                    this.fill(area.color || this.color);
                    SUPER(game, area.x || 0, area.y || 0, this.bitmap);
                    (parent || game.world).add(this);
                    this.updateOuterRect();
                    if (isEditable) {
                        var size = 5;
                        this.dots = [];
                        var dotBMP = game.add.bitmapData(size, size);
                        dotBMP.ctx.fillStyle = "#000";
                        dotBMP.ctx.fillRect(0, 0, size, size);
                        this.dots.push(game.add.sprite(0, 0, dotBMP));
                        this.dots.push(game.add.sprite(0, 0, dotBMP));
                        this.dots.push(game.add.sprite(0, 0, dotBMP));
                        this.dots.push(game.add.sprite(0, 0, dotBMP));
                        var THIS = this;
                        this.dots.forEach(function(f) {
                            f.inputEnabled = true;
                            f.targetScale = 1;
                            f.events.onInputOver.add(THIS.__onInputOver.bind(THIS, f));
                            f.events.onInputOut.add(THIS.__onInputOut.bind(THIS, f));
                            f.events.onInputDown.add(THIS.__onDotInputDown.bind(THIS, f));
                            f.events.onInputUp.add(THIS.__onDotInputUp.bind(THIS, f));
                            f.anchor.setTo(0.5);
                        });
                    }
                },
                fill: function(color) {
                    this.bitmap.clear();
                    this.bitmap.ctx.fillStyle = this.color = color;
                    this.bitmap.ctx.fillRect(0, 0, this.bitmap.width, this.bitmap.height);
                },
                selectedDot: null,
                __onInputOver: function(dot) {
                    if (dot != this.selectedDot)
                        dot.targetScale = 3;
                },
                __onInputOut: function(dot) {
                    if (dot != this.selectedDot)
                        dot.targetScale = 1;
                },
                __onDotInputDown: function(dot) {
                    this.selectedDot = dot;
                    dot.targetScale = 2;
                    if (this.onInputDown)
                        this.onInputDown();
                },
                __onDotInputUp: function(dot) {
                    if (this.selectedDot == dot)
                        this.selectedDot = null;
                    if (this.onInputUp)
                        this.onInputUp();
                },
                onPostTick: function() {
                    var dots = this.dots;
                    if (dots) {
                        var THIS = this;
                        this.dots.forEach(function(f) {
                            f.scale.x -= (f.scale.x - f.targetScale) * 0.3;
                            f.scale.y -= (f.scale.y - f.targetScale) * 0.3;
                            f.scale.z -= (f.scale.z - f.targetScale) * 0.3;
                            if (f != THIS.selectedDot) {
                                f.rotation -= f.rotation * 0.1;
                            }
                        });
                        var sel = this.selectedDot;
                        if (sel) {
                            sel.x = game.input.position.x;
                            sel.y = game.input.position.y;
                            sel.rotation -= (sel.rotation - Math.PI * 0.25) * 0.3;
                            if (sel == dots[0]) {
                                this.innerWidth += this.x - sel.x;
                                this.innerHeight += this.y - sel.y;
                                this.x = sel.x;
                                this.y = sel.y;
                            } else if (sel == dots[1]) {
                                this.innerWidth -= this.x + this.outerWidth - sel.x;
                                this.innerHeight += this.y - sel.y;
                                this.y = sel.y;
                            } else if (sel == dots[2]) {
                                this.innerWidth += this.x - sel.x;
                                this.innerHeight -= this.y + this.outerHeight - sel.y;
                                this.x = sel.x;
                            } else if (sel == dots[3]) {
                                this.innerWidth -= this.x + this.outerWidth - sel.x;
                                this.innerHeight -= this.y + this.outerHeight - sel.y;
                            }
                            this.updateOuterRect();
                        }
                        dots[0].x = this.x;
                        dots[0].y = this.y;
                        dots[1].x = this.x + this.outerWidth;
                        dots[1].y = this.y;
                        dots[2].x = this.x;
                        dots[2].y = this.y + this.outerHeight;
                        dots[3].x = this.x + this.outerWidth;
                        dots[3].y = this.y + this.outerHeight;
                    }
                },
                updateOuterRect: function() {
                    var iw = Math.max(3, this.innerWidth);
                    var ih = Math.max(3, this.innerHeight);
                    this.outerWidth = this.paddingLeft + iw + this.paddingRight;
                    this.outerHeight = this.paddingTop + ih + this.paddingBottom;
                    if (this.scale) {
                        this.scale.setTo(this.outerWidth / this.bitmap.width, this.outerHeight / this.bitmap.height);
                    }
                    if (typeof this.onResize == "function")
                        this.onResize(this.x, this.y, iw, ih);
                }
            },
            NEW: function(area, parent, resizeCB) {
                if (!this.clazz)
                    this.clazz = CLAZZ(this.def);
                return new this.clazz(area, parent, resizeCB);
            }
        }
    });
    CLAZZ("framework.Phaser.Curve", {
        STATIC: {
            clazz: null,
            def: {
                EXTENDS: "Phaser.Image",
                INJECT: ["screen", "entity"],
                DYNAMIC: true,
                screen: null,
                onResize: null,
                onInputDown: null,
                onInputUp: null,
                color: "#FFFFFF",
                lineWidth: 1,
                loop: false,
                bitmap: null,
                points: [],
                scales: [],
                dots: null,
                dotBMP: null,
                __isEditable: false,
                CONSTRUCTOR: function(parent, isEditable) {
                    if (isEditable == "editor")
                        isEditable = this.screen.editor;
                    this.__isEditable = isEditable;
                    SUPER(game);
                    (parent || game.world).add(this);
                    if (isEditable) {
                        this.screen.__pool.add(this);
                        this.inputEnabled = true;
                        this.input.pixelPerfectClick = true;
                        this.events.onInputDown.add(this.__addPoint.bind(this));
                    }
                },
                destroy: function() {
                    if (this.screen)
                        this.screen.__pool.remove(this);
                    Phaser.Image.prototype.destroy.call(this);
                },
                onCreateScreen: function() {
                    this.bringDotsToTop();
                },
                __addPoint: function() {
                    var index = 0,
                        delta = Number.MAX_SAFE_INTEGER,
                        points = this.points,
                        px = game.input.position.x,
                        py = game.input.position.y;
                    for (var i = 0; i < points.length; i += 2) {
                        var mdelta = dist(i);
                        if (mdelta < delta) {
                            delta = mdelta;
                            index = i;
                        }
                    }
                    if (index < points.length - 2 && (index == 0 || dist(index - 2) > dist(index + 2)))
                        index += 2;
                    this.points.splice(index, 0, this.points[index - 2] * 0.5 + this.points[index] * 0.5, this.points[index - 1] * 0.5 + this.points[index + 1] * 0.5);
                    this.scales.splice(index >> 1, 0, this.scales[(index - 1) >> 1] * 0.5 + this.scales[index >> 1] * 0.5);
                    if (this.screen.editor)
                        this.screen.editor("updateEntity", this.entity.__data.__$uid, {
                            points: this.points,
                            scales: this.scales
                        });
                    this.redraw();
                    function dist(i) {
                        return Math.pow(points[i] - px, 2) + Math.pow(points[i + 1] - py, 2);
                    }
                },
                redraw: function(points, color, lineWidth, scales) {
                    var i,
                        x,
                        y;
                    this.points = points = points || this.points;
                    this.scales = scales = scales || this.scales;
                    if (color !== undefined)
                        this.color = color;
                    if (lineWidth !== undefined)
                        this.lineWidth = lineWidth;
                    var curve = makeCurve(points, 0.5, 25, this.loop, false);
                    if (this.__isEditable && this.visible) {
                        if (!this.dots)
                            this.dots = [];
                        var dotBMP = this.dotBMP;
                        if (!dotBMP) {
                            var size = 10;
                            this.dotBMP = dotBMP = game.add.bitmapData(size, size);
                            dotBMP.ctx.fillStyle = "#000";
                            dotBMP.ctx.fillRect(0, 0, size, size);
                        }
                        while (this.dots.length * 2 > points.length)
                            this.dots.pop().destroy();
                        var THIS = this;
                        for (i = this.dots.length * 2; i < points.length; i += 2) {
                            var dot = game.add.sprite(points[i], points[i + 1], dotBMP);
                            dot.index = i;
                            this.dots.push(dot);
                            dot.inputEnabled = true;
                            dot.targetScale = 1;
                            dot.events.onInputOver.add(this.__onInputOver.bind(this, dot));
                            dot.events.onInputOut.add(this.__onInputOut.bind(this, dot));
                            dot.events.onInputDown.add(this.__onDotInputDown.bind(this, dot));
                            dot.events.onInputUp.add(this.__onDotInputUp.bind(this, dot));
                            dot.anchor.setTo(0.5);
                            dot.alpha = 0.8;
                        }
                        for (i = 0; i < points.length; i += 2) {
                            dot = this.dots[i * 0.5];
                            x = points[i];
                            y = points[i + 1];
                            dot.size = scales[i >> 1] || 1;
                            dot.index = i;
                            dot.x = x;
                            dot.y = y;
                        }
                    }
                    var bx = Number.MAX_SAFE_INTEGER,
                        by = Number.MAX_SAFE_INTEGER,
                        bw = Number.MIN_SAFE_INTEGER,
                        bh = Number.MIN_SAFE_INTEGER;
                    for (i = 0; i < curve.length; i += 2) {
                        x = curve[i];
                        y = curve[i + 1];
                        bx = Math.min(x, bx);
                        by = Math.min(y, by);
                        bw = Math.max(x, bw);
                        bh = Math.max(y, bh);
                    }
                    bw -= bx;
                    bh -= by;
                    var lw = this.lineWidth;
                    if (this.bitmap)
                        this.bitmap.destroy();
                    this.bitmap = game.make.bitmapData(bw + this.lineWidth * 2, bh + this.lineWidth * 2);
                    var g = this.bitmap.context;
                    g.beginPath();
                    g.moveTo(curve[0] - bx + lw, curve[1] - by + lw);
                    for (i = 2; i < curve.length; i += 2) {
                        var px = curve[i - 2],
                            py = curve[i - 1];
                        x = curve[i];
                        y = curve[i + 1];
                        g.lineTo(x - bx + lw, y - by + lw);
                    }
                    g.lineWidth = lw;
                    g.strokeStyle = this.color;
                    g.stroke();
                    g.closePath();
                    this.x = bx - lw;
                    this.y = by - lw;
                    this.loadTexture(this.bitmap);
                },
                bringDotsToTop: function() {
                    if (!this.dots)
                        return;
                    for (var i = 0; i < this.dots.length; ++i) {
                        this.dots[i].bringToTop();
                    }
                },
                selectedDot: null,
                __onInputOver: function(dot) {
                    if (dot != this.selectedDot)
                        dot.targetScale = 2;
                },
                __onInputOut: function(dot) {
                    if (dot != this.selectedDot)
                        dot.targetScale = 1;
                },
                __onDotInputDown: function(dot, sprite, evt) {
                    this.selectedDot = dot;
                    if (this.screen.editor)
                        this.screen.editor('editOpt', this.entity.__data.__$uid);
                    this.sizeMode = game.input.keyboard.isDown(16);
                    if (this.sizeMode) {
                        dot.targetScale = 1;
                        dot.alpha = 1;
                    } else
                        dot.targetScale = 1.5;
                    if (this.onInputDown)
                        this.onInputDown();
                },
                __onDotInputUp: function(dot, sprite, evt) {
                    dot.alpha = 0.8;
                    if (this.selectedDot == dot) {
                        if (evt.button == 2 && this.points.length > 4) {
                            this.points.splice(dot.index, 2);
                            this.scales.splice(dot.index >> 1, 1);
                        } else {
                            this.points[dot.index] = dot.x;
                            this.points[dot.index + 1] = dot.y;
                            this.scales[dot.index >> 1] = dot.size;
                        }
                        if (this.screen.editor)
                            this.screen.editor("updateEntity", this.entity.__data.__$uid, {
                                points: this.points,
                                scales: this.scales
                            });
                        this.redraw();
                        this.selectedDot = null;
                    }
                    if (this.onInputUp)
                        this.onInputUp();
                },
                update: function() {
                    var dots = this.dots;
                    if (dots) {
                        var THIS = this;
                        this.dots.forEach(function(f) {
                            f.scale.x -= (f.scale.x - f.targetScale * (f.size || 1)) * 0.3;
                            f.scale.y -= (f.scale.y - f.targetScale * (f.size || 1)) * 0.3;
                            f.scale.z -= (f.scale.z - f.targetScale * (f.size || 1)) * 0.3;
                            if (f != THIS.selectedDot)
                                f.rotation -= f.rotation * 0.1;
                        });
                        var sel = this.selectedDot;
                        if (sel) {
                            if (this.sizeMode) {
                                var dx = sel.x - game.input.position.x;
                                var dy = sel.y - game.input.position.y;
                                sel.size = Math.sqrt(dx * dx + dy * dy) / 5 + 0.1;
                            } else {
                                sel.x = game.input.position.x;
                                sel.y = game.input.position.y;
                                sel.rotation -= (sel.rotation - Math.PI * 0.25) * 0.3;
                            }
                        }
                    }
                }
            },
            NEW: function(area, parent, resizeCB) {
                if (!this.clazz)
                    this.clazz = CLAZZ(this.def);
                return new this.clazz(area, parent, resizeCB);
            }
        }
    });
    CLAZZ("framework.Phaser.Label", {
        EXTENDS: "framework.Phaser.Entity",
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, data) {
            if (data.area) {
                data.sprite = framework.Phaser.Hotspot.NEW(data.area, data.sprite, !!screen.editor && data.visibleInEditor !== false);
                data.sprite.onResize = this.__onResizeHotspot.bind(this);
                data.sprite.onInputDown = this.__onHotspotInputDown.bind(this);
                data.text = game.add.text(data.x || 0, data.y || 0, data.text == undefined ? "Label" : data.text, data.sprite);
            } else {
                data.text = data.sprite = game.add.text(data.x || 0, data.y || 0, data.text == undefined ? "Label" : data.text);
                data.text.anchor.setTo(0.5);
            }
            SUPER(screen, data);
            this.text.setStyle({
                font: this.font || SOL.defaultFont,
                fontSize: this.size || 20,
                fill: this.color || "#fff",
                stroke: this.stroke || "#000",
                strokeThickness: this.strokeThickness || 0,
                wordWrap: this.wordWrap || true,
                wordWrapWidth: (this.area && this.area.width) || this.wordWrapWidth || 700,
                align: this.align || "center"
            });
            if (data.area) {
                data.sprite.anchor.setTo(0, 0);
                data.text.anchor.setTo(0, 0);
                if (!data.area.x)
                    this.sprite.x = this.text.x;
                if (!data.area.y)
                    this.sprite.y = this.text.y;
                if (!data.area.height) {
                    this.sprite.innerHeight = this.text.height;
                    this.sprite.updateOuterRect();
                }
                MAR.appendFunction(this, "onPostTick", this.sprite.onPostTick.bind(this.sprite));
                if (this.screen.editor) {
                    var THIS = this;
                    this.addComponent({
                        onPostTick: function() {
                            THIS.text.x = THIS.sprite.x;
                            THIS.text.y = THIS.sprite.y;
                        }
                    });
                }
            }
        },
        __onHotspotInputDown: function() {
            if (this.screen.editor)
                this.screen.editor('editOpt', this.__data.__$uid);
        },
        __onResizeHotspot: function(x, y, w, h) {
            w = w | 0;
            h = h | 0;
            x = x | 0;
            y = y | 0;
            if (!this.text || this.text.style.wordWrapWidth == w)
                return;
            this.text.style.wordWrapWidth = w;
            this.text.setText(this.text.text);
            if (this.screen.editor)
                this.screen.editor("updateEntity", this.__data.__$uid, {
                    x: x,
                    y: y,
                    area: {
                        width: w,
                        height: h,
                        color: this.sprite.color
                    }
                });
        },
        setText: function(t) {
            this.text.setText("" + t);
        }
    });
    CLAZZ("framework.Phaser.TextField", {
        EXTENDS: "framework.Phaser.Label",
        DYNAMIC: true,
        input: null,
        strokeThickness: 0.00001,
        color: "#000",
        resizeOnChange: false,
        CONSTRUCTOR: function(screen, data) {
            data.area = data.area || {
                width: 200
            };
            SUPER(screen, data);
            this.text.anchor.setTo(0, 0);
            this.input = MAR.create("input", {
                style: {
                    opacity: 0,
                    position: "absolute"
                },
                onkeyup: this.__onKeyPress.bind(this),
                onkeydown: this.__onKeyPress.bind(this),
                onkeypress: this.__onKeyPress.bind(this),
                onblur: this.__onKeyPress.bind(this),
                onchange: this.__onKeyPress.bind(this)
            });
            if (!this.screen.editor) {
                this.sprite.inputEnabled = true;
                this.sprite.events.onInputUp.add(this.onFocus.bind(this));
            }
        },
        carretPosition: -1,
        addCarret: function(txt) {
            function doGetCaretPosition(oField) {
                var iCaretPos = 0;
                if (document.selection) {
                    oField.focus();
                    var oSel = document.selection.createRange();
                    oSel.moveStart('character', -oField.value.length);
                    iCaretPos = oSel.text.length;
                }
                else if (oField.selectionStart || oField.selectionStart == '0')
                    iCaretPos = oField.selectionStart;
                return iCaretPos;
            }
            this.carretPosition = doGetCaretPosition(this.input);
            return txt;
        },
        destroy: function() {
            SUPER();
            MAR.remove(this.input);
        },
        setText: function(t) {
            SUPER(t);
            if (this.area && (this.resizeOnChange || this.screen.editor)) {
                this.sprite.innerWidth = this.text.wordWrapWidth || this.area.width || 700;
                this.sprite.innerHeight = this.text.height;
                this.sprite.updateOuterRect();
            } else {
                if (this.text.height > this.sprite.innerHeight) {
                    SUPER("|");
                    if (this.text.height > this.sprite.innerHeight) {
                        this.sprite.innerHeight = this.text.height;
                        this.sprite.updateOuterRect();
                    }
                    SUPER(t);
                }
                SUPER(t + "I");
                var cropped = false;
                while (this.text.width >= this.sprite.innerWidth || this.text.height > this.sprite.innerHeight) {
                    cropped = true;
                    t = t.substr(0, t.length - 1);
                    SUPER(t + "I");
                }
                if (cropped)
                    this.input.value = t;
                if (this.carretPosition > -1)
                    t = t.substr(0, this.carretPosition) + "|" + t.substr(this.carretPosition);
                SUPER(t);
            }
        },
        __onKeyPress: function(e) {
            var THIS = this;
            if (e.type == "change" || e.type == "blur" || (e.type == "keydown" && e.key == "Tab")) {
                this.carretPosition = -1;
                this.setText(this.input.value);
                if (e.type == "change" && typeof this.onChange == "function")
                    this.onChange(THIS.input.value);
            } else {
                setTimeout(function() {
                    THIS.setText(THIS.addCarret(THIS.input.value));
                }, 0);
            }
        },
        onFocus: function() {
            if (!this.input.parentNode)
                document.body.appendChild(this.input);
            this.input.focus();
            this.setText(this.addCarret(this.input.value));
        }
    });
    CLAZZ("framework.Phaser.Group", {
        EXTENDS: "framework.Phaser.Entity",
        DYNAMIC: true,
        children: null,
        CONSTRUCTOR: function(screen, data) {
            data.sprite = game.add.group();
            SUPER(screen, data);
            if (!this.children)
                return;
            for (var i = 0, child; child = this.children[i]; ++i) {
                child.parent = this;
                var childEntity = screen.addEntity(child);
                if (!childEntity)
                    continue;
                if (childEntity.sprite)
                    this.sprite.add(childEntity.sprite);
                this[childEntity.id] = childEntity;
            }
        }
    });
    CLAZZ("PRAIA.Dummy", {
        EXTENDS: "framework.Phaser.Entity",
        text: null,
        CONSTRUCTOR: function(sprite) {
            if (!sprite)
                sprite = "";
            if (typeof sprite == "string")
                sprite = {
                    sprite: sprite
                };
            SUPER(SOL.screen, sprite);
            this.text = game.add.text(0, 0, "");
            this.text.anchor.setTo(0.5, 0.5);
            this.sprite.anchor.setTo(0.5, 0.5);
            this.sprite.inputEnabled = true;
            this.sprite.input.enableDrag(false);
            this.sprite.x = SOL.screen.gameWidth / 2;
            this.sprite.y = SOL.screen.gameHeight / 2;
        },
        onTick: function() {
            this.text.x = this.sprite.x;
            this.text.y = this.sprite.y;
            this.text.text = "[" + Math.round(this.text.x) + ", " + Math.round(this.text.y) + "]";
        }
    });
    window.dummy = function dummy(sprite) {
        return PRAIA.Dummy.NEW(sprite);
    }
    CLAZZ("components.Component", {
        entity: null,
        CONSTRUCTOR: function(data) {
            this.apply(data);
        },
        apply: function(data) {
            if (data)
                for (var k in data)
                    this[k] = data[k];
        }
    });
    CLAZZ("components.TiledAdjust", {
        DYNAMIC: true,
        EXTENDS: "components.Component",
        create: function() {
            this.tiledAdjust(this.entity.sprite.x, this.entity.sprite.y, this.entity.sprite.rotation);
            this.entity.y = this.entity.sprite.y;
            this.entity.x = this.entity.sprite.x;
        },
        tiledAdjust: function(x, y, rotation) {
            var mat = new PIXI.Matrix();
            rotation *= (1 / 180) * Math.PI;
            mat.identity().translate(this.entity.sprite.width * this.entity.sprite.anchor.x, this.entity.sprite.height * this.entity.sprite.anchor.y - this.entity.height).rotate(rotation || 0).translate(x || 0, y || 0);
            this.entity.x = this.entity.sprite.x = mat.tx;
            this.entity.y = this.entity.sprite.y = mat.ty;
            this.entity.rotation = this.entity.sprite.rotation = rotation;
        }
    });
})();
;
/* ../screens/loading/loading.js */
if (!window.LOADING_PLUGIN_PRESENT) {
    window.LOADING_PLUGIN_PRESENT = true;
    PRAIA.init(function() {
        SOL.mods.push({
            "SOL.screens.screens.unshift": [{
                "CLAZZ": "framework.Loading"
            }]
        });
        SOL.prefixPluginCount++;
        var nextScreenOrder = window.screenOrder;
        window.screenOrder = -1;
        CLAZZ("framework.Loading", {
            EXTENDS: "framework.Frontend",
            el: null,
            create: function() {
                this.el = MAR.create("div", {
                    parent: document.body,
                    style: {
                        position: "absolute",
                        width: "100%",
                        height: "100%"
                    }
                }, [["div", {
                    style: {
                        top: "30%",
                        left: "37%",
                        position: "absolute",
                        backgroundImage: "url(img/loadingGirl.png)",
                        width: "406px",
                        height: "300px"
                    }
                }, [["img", {
                    src: "img/loading.gif",
                    style: {
                        height: "60px",
                        position: "absolute",
                        top: "10px",
                        left: "185px",
                        mixBlendMode: "multiply"
                    }
                }], ["a", {
                    href: "http://www.frei.re/lab",
                    target: "_top"
                }, [["div", {
                    style: {
                        position: "absolute",
                        bottom: "17px",
                        fontFamily: "arial",
                        fontWeight: "bold",
                        textDecoration: "underline",
                        fontSize: "18px",
                        right: "27px"
                    },
                    text: "www.frei.re/lab"
                }]]]]]]);
                this.next(0);
            },
            deactivate: function() {
                SUPER();
                MAR.remove(this.el);
            },
            next: function(id) {
                if (id == SOL.screens.screens.length - 1) {
                    MAR.remove(this.el);
                    return this.loadScreen("order=" + nextScreenOrder);
                }
                SOL.preloadScreen(SOL.screens.screens[id + 1], this.next.bind(this, id + 1));
            }
        });
    });
}
;
/* ../js/IronBucket.js */
PRAIA.init(function() {
    function sanitize(name) {
        name = (name || "").toLowerCase().replace(/\s+/, "");
        name = name.replace(/[áàãâä]/g, "a");
        name = name.replace(/[óòõôö]/g, "o");
        name = name.replace(/[úùûü]/g, "u");
        name = name.replace(/[éèêë]/g, "e");
        name = name.replace(/[íìîï]/g, "i");
        name = name.replace(/[ý]/g, "y");
        name = name.replace(/[ç]/g, "c");
        name = name.replace(/[ñ]/g, "n");
        name = name.replace(/[ß]/g, "ss");
        name = name.replace(/[^a-z]/g, "");
        return name;
    }
    if (location.toString().indexOf("NO_IB=true") == -1)
        SOL.registerPlugin("js/IronBucket.js", function() {
            var ironbucket = null;
            var ironbucketUser = null;
            var ironbucketShare = null;
            var ironbucketId = null;
            var forceOfflineMode = false;
            function convertMillisecondsToISO8601Duration(inputMilliseconds) {
                var hours,
                    minutes,
                    seconds,
                    i_inputMilliseconds = parseInt(inputMilliseconds, 10),
                    i_inputCentiseconds,
                    inputIsNegative = "",
                    rtnStr = "";
                i_inputCentiseconds = Math.round(i_inputMilliseconds / 10);
                if (i_inputCentiseconds < 0) {
                    inputIsNegative = "-";
                    i_inputCentiseconds = i_inputCentiseconds * -1;
                }
                hours = parseInt(((i_inputCentiseconds) / 360000), 10);
                minutes = parseInt((((i_inputCentiseconds) % 360000) / 6000), 10);
                seconds = (((i_inputCentiseconds) % 360000) % 6000) / 100;
                rtnStr = inputIsNegative + "PT";
                if (hours > 0) {
                    rtnStr += hours + "H";
                }
                if (minutes > 0) {
                    rtnStr += minutes + "M";
                }
                rtnStr += seconds + "S";
                return rtnStr;
            }
            function ib_initIronBucket(shares) {
                if (!ironbucketUser && !ironbucketId)
                    return false;
                SOL.vars.persist.user = ironbucketId;
                if (!shares)
                    shares = [];
                var match = location.href.match(/^.*\/([0-9A-Za-z]+)(-[0-9]+)?(?:-eid([0-9]+)-et([0-9a-zA-Z]*))$/);
                if (match) {
                    var share = shareToInt(match[1]);
                    SOL.vars.persist.share = share;
                    if (shares.indexOf(share) == -1)
                        shares.push(share);
                }
                ironbucketShare = shares;
                if (!AREIA.checkBlackList()) {
                    var url = "http://frei.re/play.html?screens=./ws/Projects/play/short/0/projectId/" + SOL.screens.projectId + "&order=0&LED_ID=" + ironbucketId;
                    AREIA.callBrowser(url);
                    return;
                }
                AREIA.loadData("statementData", function(storedQueue) {
                    if (storedQueue)
                        ibqueue = storedQueue.concat(ibqueue);
                    ibqueue = ibqueue.concat(anonQueue.map(function(stmt) {
                        if (ironbucketUser)
                            stmt.actor = ironbucketUser;
                        else if (ironbucketId)
                            stmt.actorId = ironbucketId;
                        return stmt;
                    }));
                    anonQueue = [];
                    ironbucket = true;
                })
            }
            var anonQueue = [];
            var ibqueue = [];
            function __sendStatement(stmt) {
                if (stmt) {
                    if (!stmt.actor && !stmt.actorId) {
                        if (ironbucketUser)
                            stmt.actor = ironbucketUser;
                        else if (ironbucketId)
                            stmt.actorId = ironbucketId;
                        else {
                            anonQueue.push(stmt);
                            return;
                        }
                    }
                    ibqueue.push(stmt);
                }
                if (ironbucket && !forceOfflineMode)
                    send();
                return;
                function send() {
                    if (ironbucket)
                        AREIA.storeData("statementData", ibqueue);
                    var stmt = ibqueue.shift();
                    if (!stmt.actor && !stmt.actorId) {
                        if (ironbucketUser)
                            stmt.actor = ironbucketUser;
                        else
                            stmt.actorId = ironbucketId;
                    }
                    if (!stmt.id && ironbucketShare) {
                        for (var i = 0; i < ironbucketShare.length; ++i) {
                            stmt.id = MAR.getUUID();
                            stmt.share = ironbucketShare[i];
                            ibqueue.unshift(JSON.parse(JSON.stringify(stmt)));
                        }
                        send();
                        return;
                    }
                    if (MAR.GET.LED_ID == -1) {
                        LED.msg("event", stmt);
                        if (ibqueue.length)
                            send();
                        else
                            AREIA.storeData("statementData", ibqueue);
                    } else {
                        MAR.postURL(SOL.screens.backend + "/Statistics/event", {
                            statement: stmt
                        }, function(ret, status) {
                            if (!ret || status != 200) {
                                console.log("Could not save statement!", stmt, ret, status);
                                ibqueue.unshift(stmt);
                            } else if (ibqueue.length)
                                send();
                            else
                                AREIA.storeData("statementData", ibqueue);
                        });
                    }
                }
                ;
            }
            function statementsCallback(err, xhr) {
                if (err !== null) {
                    if (xhr !== null) {
                        console.log("Failed to save statement: " + xhr.responseText + " (" + xhr.status + ")");
                        return;
                    }
                    console.log("Failed to save statement: " + err);
                    return;
                }
                console.log("Statement saved");
            }
            var nextScreenOrder = window.screenOrder;
            window.screenOrder = -1;
            CLAZZ("ironbucket.GroupElement", {
                data: null,
                element: null,
                name: null,
                children: null,
                DOM: null,
                pool: null,
                CONSTRUCTOR: function() {
                    this.element = MAR.create("div", {
                        className: "childElementName",
                        style: {
                            paddingTop: "10px",
                            width: "100%",
                            textIndent: "30px",
                            fontSize: "24px",
                            cursor: "pointer",
                            border: "rgba(100,100,100,0.5)",
                            borderBottomStyle: "solid",
                            borderWidth: "1.5px"
                        }
                    });
                    this.DOM = MAR.index(this.element, null, this);
                    this.pool = SOL.screen.__pool;
                    this.pool.add(this);
                },
                childElementName: {
                    click: function() {
                        if (this.data.children) {
                            SOL.vars.groupStack.push(SOL.vars.group);
                            SOL.vars.group = this.data.children;
                            SOL.screen.updateCollection("group");
                        } else {
                            CALL("setSelectedItem", this.data.id);
                            SOL.vars.user = this.data.id;
                            SOL.vars.persist.playerName = this.data.name;
                        }
                    }
                },
                hasSubTree: function() {
                    if (this.data && this.data.children)
                        return true;
                },
                update: function(data) {
                    this.data = data;
                    this.element.priority = data.priority;
                    this.DOM.childElementName.textContent = data.name;
                    this.selectStyle(data.selected);
                    if (data.selected)
                        SOL.vars.user = this.data.id;
                    data.selected = false;
                },
                setSelectedItem: function(id) {
                    if (this.data.id == id) {
                        this.selectStyle(true);
                    } else {
                        this.selectStyle(false);
                    }
                },
                selectStyle: function(selected) {
                    if (selected) {
                        this.element.style.backgroundColor = "rgba(197,208,225,0.5)";
                    } else {
                        this.element.style.backgroundColor = "rgba(0,0,0,0)";
                    }
                }
            });
            CLAZZ("framework.IronbucketPluginScreen", {
                EXTENDS: "framework.Frontend",
                DYNAMIC: true,
                create: function() {
                    this.resize();
                    var THIS = this;
                    this.loadStorage(function() {
                        if (!THIS.doLEDLogin())
                            THIS.doLogin();
                    });
                    window.addEventListener("resize", this.resize);
                },
                deactivate: function() {
                    SUPER();
                    window.removeEventListener("resize", this.resize);
                },
                resize: function() {
                    var m = DOM.main.style;
                    var w = parseInt(m.width),
                        h = parseInt(m.height);
                    var sw = window.innerWidth,
                        sh = window.innerHeight;
                    var s = Math.min(sw / w, sh / h);
                    if (s > 1)
                        s = 1;
                    DOM.main.style.transform = "scale(" + s + ")";
                    var adjust = (w - w * s) * 0.5;
                    DOM.main.style.right = adjust + "px";
                    DOM.main.style.left = -adjust + "px";
                },
                doLEDLogin: function() {
                    var THIS = this,
                        hnd,
                        ret = true;
                    if (MAR.GET.LED_ID)
                        onGotId(MAR.GET.LED_ID);
                    else if (document.cookie && document.cookie.indexOf("FREIRE_ID") !== -1) {
                        THIS.RMI("User", "getEntity", {}, function(entity) {
                            var id = entity && (entity.type != "TEACHER" && entity.type != "MANAGER") && entity.scao_id;
                            if (id)
                                onGotId(id);
                            else
                                THIS.doLogin();
                        })
                    } else if (AREIA.externAPI) {
                        hnd = setTimeout(onGotId, 1000);
                        AREIA.getLEDId(onGotId);
                    } else
                        ret = false;
                    return ret;
                    function onGotId(ledId) {
                        if (!ledId) {
                            THIS.onGetUserData();
                            return;
                        }
                        LOG("GOT ID" + ledId);
                        if (hnd)
                            clearTimeout(hnd);
                        if (ledId == -1)
                            THIS.onGetUserData({
                                id: -1
                            });
                        else {
                            THIS.RMI("Libro", "getUserById", {
                                ledId: ledId,
                                projectId: SOL.screens.projectId,
                                __anystate: true
                            }, function(obj, status) {
                                LOG("RMI:" + obj);
                                if (typeof obj == "object") {
                                    AREIA.storeData("userData" + ledId, obj);
                                    THIS.storeChildData(obj);
                                    THIS.onGetUserData(obj);
                                } else if (status !== 200) {
                                    AREIA.loadData("userData" + ledId, function(obj) {
                                        if (obj && typeof obj == "string")
                                            obj = JSON.parse(obj);
                                        if (typeof obj == "object")
                                            THIS.onGetUserData(obj);
                                        else
                                            THIS.onGetUserData();
                                    });
                                } else {
                                    THIS.onGetUserData();
                                }
                            });
                        }
                    }
                },
                doPanic: function() {
                    console.error("PANIC!");
                },
                storeChildData: function(obj) {
                    if (!obj)
                        return;
                    if (obj.children) {
                        for (var k in obj.children) {
                            this.storeChildData(obj.children[k]);
                        }
                    }
                    if (obj.statisticsIds) {
                        AREIA.storeData("user" + obj.id + "proj" + SOL.screens.projectId, obj.statisticsIds);
                    }
                },
                doLogin: function() {
                    var id,
                        listTypes = {
                            "GROUP": true,
                            "GRADE": true,
                            "SCHOOL": true,
                            "CLASS": true
                        };
                    if (listTypes[window.linkEntityType])
                        id = window.linkEntityId;
                    else
                        return this.onGetUserData();
                    var THIS = this;
                    this.RMI("Hierarchy", "getChildren", {
                        entityId: id
                    }, function(obj) {
                        if (typeof obj == "object") {
                            THIS.onGetUserData(obj);
                        } else {
                            THIS.onGetUserData();
                        }
                    });
                },
                storage: null,
                loadStorage: function(cb) {
                    var THIS = this;
                    CALL("loadData", "freireIronbucket", function(storage) {
                        THIS.storage = storage || SOL.vars.user;
                        cb();
                    });
                },
                onUpdateCollection_group: function() {
                    var n = "";
                    if (SOL.vars.groupStack && SOL.vars.groupStack.length) {
                        DOM.back.style.display = "block";
                        n = "◄ ";
                    } else {
                        DOM.back.style.display = "none";
                    }
                    if (SOL.vars.group) {
                        n += SOL.vars.group.name;
                        DOM.back.textContent = n;
                    }
                    var children = [];
                    for (var i = 0; i < DOM.listSection.children.length; ++i) {
                        var child = DOM.listSection.children[i];
                        if (child.priority >= 0)
                            children[child.priority] = child;
                    }
                    for (i = 0; i < children.length; ++i)
                        MAR.remove(children[i]);
                    for (i = 0; i < children.length; ++i)
                    {
                        child = children[i];
                        if (!child)
                            continue;
                        DOM.listSection.appendChild(child);
                    }
                },
                onGetUserData: function(data) {
                    var storage = this.storage;
                    var user,
                        THIS = this;
                    if (storage && storage.user)
                        user = storage.user;
                    if (data && data.children) {
                        DOM.classesDiv.style.display = "block";
                        DOM.classesDataDiv.style.display = "block";
                        DOM.askUserNameDiv.style.display = "none";
                        DOM.confirmUserClass.style.display = "block";
                        DOM.txtUserName.style.display = "block";
                        DOM.askUser.style.display = "inline-block";
                        DOM.lblLEDUserName.textContent = data.name;
                        SOL.vars.groupStack = [];
                        function name(root, data) {
                            if (data.children) {
                                Object.keys(data.children).sort(function(a, b) {
                                    var na = sanitize(data.children[a].name);
                                    var nb = sanitize(data.children[b].name);
                                    if (na > nb)
                                        return 1;
                                    if (na < nb)
                                        return -1;
                                    return 0;
                                }).forEach(function(o, i) {
                                    data.children[o].priority = i;
                                });
                                Object.defineProperty(data.children, "name", {
                                    value: data.name
                                });
                                var leavesOnly = true;
                                for (var k in data.children) {
                                    name(root, data.children[k]);
                                    leavesOnly = leavesOnly && !data.children[k].children;
                                }
                                if (leavesOnly) {
                                    data.children[root.id] = {
                                        name: root.name,
                                        id: root.id,
                                        statisticsIds: root.statisticsIds
                                    }
                                }
                                if (data.statisticsIds) {
                                    if (!SOL.vars.statisticsIds)
                                        SOL.vars.statisticsIds = {};
                                    SOL.vars.statisticsIds[data.id] = data.statisticsIds;
                                }
                            }
                        }
                        name(data, data);
                        var keys;
                        do {
                            keys = Object.keys(data.children);
                            if (keys.length == 1) {
                                data = data.children[keys[0]];
                            } else
                                break;
                        } while (data.children);
                        if (!data.children) {
                            SOL.vars.user = data.id;
                            this.confirm();
                        } else {
                            SOL.vars.group = data.children;
                            if (storage && storage.id) {
                                var stack = [];
                                function search(n) {
                                    if (!n || n.id == storage.id)
                                        return n;
                                    if (n.children) {
                                        stack.push(n.children);
                                        for (var k in n.children) {
                                            var result = search(n.children[k]);
                                            if (result)
                                                return result;
                                        }
                                        stack.pop();
                                    }
                                    return false;
                                }
                                var result = search(data);
                                if (result) {
                                    result.selected = true;
                                    SOL.vars.group = stack[stack.length - 1];
                                    if (!SOL.vars.group)
                                        SOL.vars.group = data.children;
                                    SOL.vars.groupStack = stack;
                                    stack.pop();
                                }
                            }
                            this.createCollection("group", "SOL.vars.group", window.ironbucket.GroupElement, DOM.listSection);
                        }
                    } else if (data) {
                        SOL.vars.user = data.id;
                        this.confirm();
                    } else if (SOL.screens.backend && /^.*\/([0-9A-Za-z]+)(-[0-9]+)?(?:-eid([0-9]+)-et([0-9a-zA-Z]*))$/.test(location.href)) {
                        if (!user) {
                            this.RMI("User", "getEntity", {}, function(obj) {
                                if (!obj)
                                    THIS.showCustomShareLogin();
                                else
                                    THIS.showCustomShareLogin(obj.name, obj.id);
                            });
                        } else
                            this.showCustomShareLogin(user);
                    } else {
                        for (var i = 0; i < AREIA.trackers.length; ++i) {
                            if (AREIA.trackers[i].name == "IRONBUCKETTRACKER") {
                                AREIA.trackers.splice(i, 1);
                                break;
                            }
                        }
                        this.loadScreen("order=" + nextScreenOrder);
                    }
                },
                showCustomShareLogin: function(user, userId) {
                    if (user) {
                        if (userId)
                            SOL.vars.user = userId;
                        SOL.vars.persist.playerName = user;
                        DOM.txtUserName.value = user;
                        DOM.classesDiv.style.display = "none";
                        DOM.classesDataDiv.style.display = "none";
                        DOM.askUser.style.display = "inline-block";
                        DOM.txtUserName.style.display = "block";
                        DOM.confirmUserOptions.style.display = "block";
                        DOM.askUserNameDiv.style.display = "block";
                        DOM.unknowUserMessage.style.display = "none";
                        DOM.userMessage.style.display = "block";
                        DOM.lblUserName.textContent = user;
                        DOM.userOptions.style.display = "block";
                        DOM.confirmUser.style.display = "none";
                    } else {
                        DOM.classesDiv.style.display = "none";
                        DOM.classesDataDiv.style.display = "none";
                        DOM.txtUserName.style.display = "block";
                        DOM.confirmUserName.style.display = "block";
                        DOM.askUser.style.display = "inline-block";
                        DOM.askUserNameDiv.style.display = "block";
                        DOM.unknowUserMessage.style.display = "block";
                        DOM.userMessage.style.display = "none";
                        DOM.userOptions.style.display = "none";
                        DOM.confirmUser.style.display = "block";
                    }
                },
                deactivate: function() {
                    document.body.textContent = "";
                    document.body.style.backgroundColor = "white";
                },
                onkeypress_txtUserName: function(event) {
                    if (event.keyCode == 13)
                        this.confirm();
                },
                confirm: function() {
                    if (SOL.vars.user) {
                        this.initUser(SOL.vars.user);
                    } else if (DOM.askUserNameDiv.style.display == "block") {
                        SOL.vars.persist.playerName = ironbucketUser = (DOM.txtUserName.value || "no user").trim();
                        ib_initIronBucket();
                        this.loadScreen("order=" + nextScreenOrder);
                    }
                    CALL("storeData", "freireIronbucket", {
                        user: ironbucketUser,
                        id: ironbucketId
                    });
                },
                onclick_confirmUserOptions: function() {
                    this.confirm();
                },
                onclick_confirmUserName: function() {
                    this.confirm();
                },
                onclick_confirmUserClass: function() {
                    this.confirm();
                },
                initUser: function(userId) {
                    var THIS = this;
                    ironbucketId = userId;
                    if (userId == -1)
                        return loadStatistics([{
                            id: -2
                        }]);
                    if (SOL.vars.statisticsIds && SOL.vars.statisticsIds[userId])
                        return loadStatistics(SOL.vars.statisticsIds[userId]);
                    this.RMI("Hierarchy", "getStatisticsIds", {
                        entityId: userId,
                        projectId: SOL.screens.projectId,
                        __anystate: true
                    }, function(arr, state) {
                        if (!arr || !(arr instanceof Array)) {
                            AREIA.loadData("user" + userId + "proj" + SOL.screens.projectId, function(arr) {
                                if (!arr || !(arr instanceof Array)) {
                                    console.warn("Something is wrong", arr);
                                    return;
                                }
                                loadStatistics(arr);
                            });
                        } else
                            loadStatistics(arr);
                    });
                    function loadStatistics(arr) {
                        var o = [];
                        for (var i = 0; i < arr.length; ++i)
                            o[o.length] = arr[i].id;
                        var match = location.href.match(/^.*\/([0-9A-Za-z]+)(-[0-9]+)?(?:-eid([0-9]+)-et([0-9a-zA-Z]*))?$/);
                        if (match) {
                            var share = shareToInt(match[1]);
                            if (o.indexOf(share) == -1)
                                o.push(share);
                        }
                        if (!o.length)
                            return THIS.onGetUserData();
                        ib_initIronBucket(o);
                        THIS.loadScreen("order=" + nextScreenOrder);
                    }
                },
                onclick_back: function() {
                    if (SOL.vars.groupStack.length > 0) {
                        SOL.vars.group = SOL.vars.groupStack.pop();
                        SOL.screen.updateCollection("group");
                    }
                },
                onclick_notMe: function() {
                    SOL.vars.user = null;
                    DOM.confirmUser.style.display = "block";
                    DOM.unknowUserMessage.style.display = "block";
                    DOM.userMessage.style.display = "none";
                    DOM.userOptions.style.display = "none";
                    DOM.confirmUserOptions.style.display = "block";
                }
            });
            var LOCATION = location.toString().replace(/\/+$/, "") + "/";
            var words = {
                verbs: {
                    "abandoned": "https://w3id.org/xapi/adl/verbs/abandoned",
                    "answered": "http://adlnet.gov/expapi/verbs/answered",
                    "asked": "http://adlnet.gov/expapi/verbs/asked",
                    "attempted": "http://adlnet.gov/expapi/verbs/attempted",
                    "attended": "http://adlnet.gov/expapi/verbs/attended",
                    "commented": "http://adlnet.gov/expapi/verbs/commented",
                    "completed": "http://adlnet.gov/expapi/verbs/completed",
                    "exited": "http://adlnet.gov/expapi/verbs/exited",
                    "experienced": "http://adlnet.gov/expapi/verbs/experienced",
                    "failed": "http://adlnet.gov/expapi/verbs/failed",
                    "imported": "http://adlnet.gov/expapi/verbs/imported",
                    "initialized": "http://adlnet.gov/expapi/verbs/initialized",
                    "interacted": "http://adlnet.gov/expapi/verbs/interacted",
                    "launched": "http://adlnet.gov/expapi/verbs/launched",
                    "logged-in": "https://w3id.org/xapi/adl/verbs/logged-in",
                    "logged-out": "https://w3id.org/xapi/adl/verbs/logged-out",
                    "mastered": "http://adlnet.gov/expapi/verbs/mastered",
                    "passed": "http://adlnet.gov/expapi/verbs/passed",
                    "preferred": "http://adlnet.gov/expapi/verbs/preferred",
                    "progressed": "http://adlnet.gov/expapi/verbs/progressed",
                    "registered": "http://adlnet.gov/expapi/verbs/registered",
                    "responded": "http://adlnet.gov/expapi/verbs/responded",
                    "resumed": "http://adlnet.gov/expapi/verbs/resumed",
                    "satisfied": "https://w3id.org/xapi/adl/verbs/satisfied",
                    "scored": "http://adlnet.gov/expapi/verbs/scored",
                    "shared": "http://adlnet.gov/expapi/verbs/shared",
                    "suspended": "http://adlnet.gov/expapi/verbs/suspended",
                    "terminated": "http://adlnet.gov/expapi/verbs/terminated",
                    "voided": "http://adlnet.gov/expapi/verbs/voided",
                    "viewed": "http://frei.re/verbs/view",
                    "waived": "https://w3id.org/xapi/adl/verbs/waived"
                }
            };
            function word(type, word, uri) {
                if (!/^https?:\/\//.match)
                    uri = uri || (words[type] && words[type][word]) || ("http://frei.re/xapi/type/" + encodeURIComponent(word));
                if (!uri.match(/^https?:\/\//i))
                    uri = LOCATION + uri;
                var obj = {
                    id: uri,
                    display: {
                        "en-US": word
                    }
                };
                for (var k in MAR.TEXT.languages) {
                    if (MAR.TEXT.languages[k][word])
                        obj.display[k] = MAR.TEXT.languages[k][word];
                    else
                        obj.display[k] = word;
                }
                return obj;
            }
            MAR.TEXT.addTexts("pt-BR", {
                "abandoned": "abandonou",
                "answered": "respondeu",
                "asked": "perguntou",
                "attempted": "tentou",
                "attended": "participou",
                "commented": "comentou",
                "completed": "completou",
                "exited": "saiu",
                "experienced": "experimentou",
                "failed": "perdeu",
                "imported": "importou",
                "initialized": "inicializou",
                "interacted": "interagiu",
                "launched": "lançou",
                "logged-in": "deslogou",
                "logged-out": "logou",
                "mastered": "dominou",
                "passed": "passou",
                "preferred": "preferiu",
                "progressed": "progrediu",
                "registered": "registrou",
                "responded": "respondeu",
                "resumed": "continuou",
                "satisfied": "satisfez",
                "scored": "pontuou",
                "shared": "compartilhou",
                "suspended": "suspendeu",
                "terminated": "terminou",
                "voided": "cancelou",
                "viewed": "visualizou",
                "waived": "pulou"
            });
            SOL.mods.push({
                "SOL.screens.screens.unshift": [{
                    "CLAZZ": "framework.IronbucketPluginScreen",
                    layout: "screens/ironbucket/login.html",
                    "assets": {
                        "layout": "screens/ironbucket/login.html"
                    }
                }]
            });
            SOL.prefixPluginCount++;
            var ctx = [];
            function popCtx(type) {
                var i = getCtxIndex(type);
                if (i >= 0) {
                    var c = ctx[i];
                    ctx = ctx.splice(0, i);
                    return c;
                }
                return null;
            }
            function pushContext(name, type) {
                popCtx(type);
                var obj = {
                    id: name,
                    type: type
                };
                ctx.push(obj);
            }
            function getCtxIndex(type) {
                for (var i = 0, c; c = ctx[i]; ++i) {
                    if (c.type == type) {
                        return i;
                        break;
                    }
                }
                return -1;
            }
            function statement(inobj) {
                var p;
                var out = {};
                out.verb = word.apply(null, ["verbs"].concat(inobj.verb));
                out.object = word.apply(null, ["activities"].concat(inobj.object));
                out.project = SOL.screens.projectId;
                if (inobj.result)
                    out.result = inobj.result;
                if (ctx.length) {
                    function ctxObj(i) {
                        var c = ctx[i];
                        if (c.id)
                            c = LOCATION + c.id;
                        else
                            c = location.toString();
                        var obj = {
                            id: c
                        };
                        return obj;
                    }
                    out.context = {
                        contextActivities: {
                            parent: [ctxObj(ctx.length - 1)]
                        }
                    };
                    for (var i = 0; i < ctx.length; ++i) {
                        var g = out.context.contextActivities.grouping = out.context.contextActivities.grouping || [];
                        g.push(ctxObj(i));
                    }
                }
                __sendStatement(out);
            }
            var score = null;
            var levelStartTime = 0;
            var screenStartTime = 0,
                prevScreenTime = 0;
            var wasInit = false,
                levelName = null,
                levelURI;
            function initIB() {
                var uri;
                if (!wasInit) {
                    wasInit = true;
                    uri = "project/" + SOL.screens.projectId;
                    statement({
                        verb: "launched",
                        object: [SOL.screens.projectName, uri]
                    });
                    pushContext(uri, "globalctx");
                    uri = uri + "/session/" + MAR.getUUID();
                    statement({
                        verb: "launched",
                        object: [SOL.screens.projectName, uri]
                    });
                    pushContext(uri, "sessionctx");
                }
                var nlevelName = SOL.vars.levelName || SOL.screen.name;
                if (nlevelName != levelName) {
                    popCtx("level");
                    levelName = nlevelName;
                    levelURI = "project/" + SOL.screens.projectId + "/level/" + SOL.screen.__data.order;
                    statement({
                        verb: "launched",
                        object: [nlevelName, levelURI]
                    });
                    pushContext(levelURI, "level");
                    levelStartTime = performance.now();
                }
            }
            AREIA.addTracker({
                name: "IRONBUCKETTRACKER",
                onCreateScreen: function(screen) {
                    initIB();
                    screenStartTime = performance.now();
                    if (SOL.screens.screens.length - SOL.prefixPluginCount - 1 == SOL.currentScreenIndex) {
                        uri = "project/" + SOL.screens.projectId;
                        statement({
                            verb: "completed",
                            object: [SOL.screens.projectName, uri]
                        });
                    }
                    var uri = "project/" + SOL.screens.projectId + "/screen/" + screen.__data.USID;
                    statement({
                        verb: "viewed",
                        object: [screen.name, uri]
                    });
                    pushContext(uri, "screen");
                },
                __gameOver: function(succeed, score) {
                    var ctx = popCtx("level");
                    statement({
                        verb: "completed",
                        object: [levelName, ctx.id],
                        result: {
                            score: {
                                raw: Math.min(10, score),
                                min: 0,
                                max: 10
                            },
                            duration: convertMillisecondsToISO8601Duration(screenStartTime - levelStartTime),
                            success: succeed
                        }
                    });
                    levelName = null;
                },
                onGameCleared: function() {
                    if (!SOL.vars.gamePerformance || !SOL.vars.gamePerformance.length)
                        return;
                    var score = 0;
                    SOL.vars.gamePerformance.forEach(function(result) {
                        score += result.points || 0;
                    });
                    score = score / SOL.vars.gamePerformance.length;
                    statement({
                        verb: "scored",
                        object: [SOL.screens.projectName, "http://project/" + SOL.screens.projectId],
                        result: {
                            score: {
                                raw: Math.max(0, Math.min(100, score || 0)),
                                min: 0,
                                max: 100
                            },
                            duration: convertMillisecondsToISO8601Duration(screenStartTime - levelStartTime),
                            success: true
                        }
                    });
                },
                failed: function(score) {
                    this.__gameOver(false, score);
                },
                passed: function(score) {
                    this.__gameOver(true, score);
                },
                onWrong: function(data) {
                    if (data && data.$word)
                        data = data[data.$word];
                    statement({
                        verb: "failed",
                        object: data
                    });
                },
                onRight: function(data) {
                    if (data && data.$word)
                        data = data[data.$word];
                    statement({
                        verb: "passed",
                        object: data
                    });
                },
                onDeactivateScreen: function() {
                    var screen = SOL.screen.__data;
                    var uri = "project/" + SOL.screens.projectId + "/screen/" + screen.USID;
                    prevScreenTime = screenStartTime - performance.now();
                    statement({
                        verb: "exited",
                        object: [screen.name, uri],
                        result: {
                            duration: convertMillisecondsToISO8601Duration(prevScreenTime)
                        }
                    });
                }
            });
        });
});
;
/* ../entities/Timer.js */
CLAZZ("entities.Timer", {
    EXTENDS: "framework.Phaser.Entity",
    backgroundSprite: "",
    scaleSprite: "",
    foregroundSprite: "",
    scaleProperty: "y",
    timeLbl: 0,
    time: 10000,
    countDownEnabled: true,
    timeLeft: undefined,
    countDownTime: 6000,
    CONSTRUCTOR: function(screen, data) {
        if (data.time == 0)
            return;
        data.sprite = game.add.group();
        if (data.backgroundSprite)
            data.sprite.add(data.backgroundSprite = game.add.sprite(0, 0, data.backgroundSprite));
        if (data.scaleSprite)
            data.sprite.add(data.scaleSprite = game.add.sprite(0, 0, data.scaleSprite));
        if (data.foregroundSprite)
            data.sprite.add(data.foregroundSprite = game.add.sprite(0, 0, data.foregroundSprite));
        this.timeLbl = game.add.text(data.x + 15, data.y - 450, "0:00");
        this.timeLbl.setStyle({
            font: data.font || "Arial",
            fontSize: data.size || 24,
            fill: data.color || "#fff",
            stroke: data.stroke || "#000",
            strokeThickness: 4,
            align: "center"
        });
        screen.instrumentForEditor(data.backgroundSprite, data);
        SUPER(screen, data);
        if (!("levelName" in SOL.vars)) {
            SOL.vars.levelName = this.screen.name;
            SOL.vars.levelUSID = this.screen.__data.USID;
        }
    },
    oldText: undefined,
    onTick: function() {
        if (this.timeLeft === undefined)
            this.timeLeft = this.time;
        if (this.timeLeft <= 0)
            return;
        var sec = Math.floor(this.timeLeft / 1000) % 60;
        if (sec < 10)
            sec = "0" + sec;
        var min = Math.floor(Math.floor(this.timeLeft / 1000) / 60);
        var text = min + ":" + sec;
        if (text != this.oldText) {
            this.timeLbl.setText(text);
            this.oldText = text;
        }
        this.timeLeft -= SOL.screen.timeDelta;
        var scale = this.timeLeft / this.time || 0;
        if (scale < 0)
            scale = 0;
        this.scaleSprite.scale[this.scaleProperty] = scale;
        if (this.timeLeft <= this.countDownTime && this.countDownEnabled) {
            CALL("countDown");
            this.countDownEnabled = false;
        }
        if (this.timeLeft <= 0)
            CALL("onTimeEnded");
    },
    onEndGame: function() {
        SOL.vars.timeBonus = Math.max(0, this.timeLeft / this.time || 0);
        SOL.vars.timeSpend = SOL.vars.timeSpend ? SOL.vars.timeSpend + (this.time - this.timeLeft) : (this.time - this.timeLeft);
    }
})
;
/* ../screens/projects/Projects.js */
(function() {
    var Project = CLAZZ({
        element: null,
        DOM: null,
        img: null,
        model: null,
        title: null,
        extId: null,
        contextMenu: null,
        CONSTRUCTOR: function() {
            this.element = MAR.create("div", {
                className: "projects-listItem"
            }, [["img", {
                className: "layer"
            }], ["h1", {
                id: "title"
            }], ["span", {
                id: "itemExtId"
            }], ["div", {
                id: "sectionChildren",
                className: 'section'
            }]]);
            this.DOM = MAR.index(this.element, null, this);
            var cm = SOL.screen.createContextMenu(this.DOM['projects-listItem'], {
                tag: "ul",
                className: "ctxmenu",
                children: [["li", {
                    className: "owner",
                    text: MAR.TEXT("Editar"),
                    onclick: this.onClick.bind(this, "openProject")
                }], ["li", {
                    className: "all",
                    text: MAR.TEXT("Visualizar"),
                    onclick: this.onClick.bind(this, "play")
                }], ["li", {
                    className: "all",
                    text: MAR.TEXT("Customizar"),
                    onclick: this.onClick.bind(this, "duplicateProject")
                }], ["li", {
                    className: "owner",
                    text: MAR.TEXT("Excluir"),
                    onclick: this.onClick.bind(this, "removeProject")
                }], ["li", {
                    className: "owner",
                    text: MAR.TEXT("Propriedades"),
                    onclick: this.onClick.bind(this, "viewProjectProperties")
                }], ["li", {
                    className: "all",
                    text: MAR.TEXT("Estatísticas"),
                    onclick: this.onClick.bind(this, "viewStatistics")
                }]]
            });
            this.contextMenu = MAR.index(cm, null, null, true);
        },
        'projects-listItem': {
            click: function() {
                if (Array.isArray(this.model))
                    return;
                if (this.model.role == "OWNER")
                    this.onClick("openProject");
                else
                    this.onClick("play");
            }
        },
        onClick: function(call) {
            CALL(call, this.model.id);
        },
        update: function(model) {
            this.model = model;
            if (Array.isArray(model))
                this.updateArray(model);
            else
                this.updateItem(model);
        },
        updateArray: function(model) {
            this.element.className = 'projects-listSection';
            this.DOM.title.textContent = model.name;
            var el = this.DOM.sectionChildren;
            MAR.removeChildren(el);
            model.forEach(function(c) {
                var project = new Project();
                el.appendChild(project.element);
                project.update(c);
            })
        },
        updateItem: function(model) {
            this.element.className = 'projects-listItem';
            if (model.thumbnail)
                this.DOM.layer.src = SOL.ldr.domain + "thumbs/" + model.thumbnail;
            else
                this.DOM.layer.src = SOL.ldr.domain + "img/emptyProject.png";
            if (this.model.role == "OWNER") {
                this.contextMenu.owner.forEach(function(e) {
                    e.style.display = "list-item";
                });
                this.contextMenu.all.forEach(function(e) {
                    if (e.textContent == "Customizar")
                        e.textContent = "Duplicar";
                })
            } else {
                this.contextMenu.owner.forEach(function(e) {
                    e.style.display = "none";
                });
            }
            this.contextMenu.all.forEach(function(e) {
                if (e.textContent == MAR.TEXT("Estatísticas") && SOL.vars.user.type == "PARENT")
                    e.style.display = "none";
            });
            var m = (model.name || "Sem nome").match(/([^:]*)(?::(.*))?/);
            this.DOM.title.textContent = m[1] || "";
            this.DOM.itemExtId.textContent = (this.model.metadata.find(function(metadata) {
                return metadata.name == "ID Externo";
            }) || {
                value: ""
            }).value;
        }
    });
    var SharedProject = CLAZZ({
        element: null,
        img: null,
        model: null,
        title: null,
        CONSTRUCTOR: function() {
            this.element = document.createElement("div");
            this.element.className = "models-listItem";
            this.img = document.createElement("img");
            this.img.className = "layer";
            this.element.appendChild(this.img);
            this.title = document.createElement("div");
            this.title.className = "modelItem-name";
            this.element.appendChild(this.title);
            this.element.onclick = this.onClick.bind(this, "duplicateProject");
        },
        onClick: function(call) {
            CALL(call, this.model.id);
        },
        update: function(model) {
            this.model = model;
            if (model.thumbnail)
                this.img.src = "thumbs/" + model.thumbnail;
            else
                this.img.src = model.thumbnail || "img/emptyProject.png";
            var m = (model.name || "Sem nome").match(/([^:]*)(?::(.*))?/);
            this.title.textContent = m[1] || "";
        }
    })
    CLAZZ("screens.projects.Projects", {
        EXTENDS: "framework.Frontend",
        DYNAMIC: true,
        STATIC: {
            requires: ["screens/metadata/Metadata.js", "js/jszip.js", "js/sha1.js", "js/jsrsasign-latest-all-min.js", "js/FileSaver.js", "js/android/ETSign.js", "screens/export/Export.js", "screens/projectshare/ProjectShare.js", "screens/import/Import.js", ]
        },
        create: function() {
            if (SOL.vars.user.logo)
                DOM.clientLogo.src = "img/logos/" + SOL.vars.user.logo + ".png";
            else
                DOM.clientLogo.style.display = "none";
            this.reloadProjectList();
            if (SOL.vars.user.role !== "ADMIN") {
                DOM.register.style.display = "none";
                if (DOM.packageEditor)
                    DOM.packageEditor.style.display = "none";
            }
            if (SOL.vars.user.role != "NOTIFIER") {
                DOM.push.style.display = "none";
            }
            if (SOL.vars.user.role != "ANALYTICS") {
                DOM.analytics.style.display = "none";
            }
            if (SOL.vars.user.role == "EDITOR") {
                DOM.batchExport.style.display = "none";
            }
            this.createCollection("projectList", "SOL.vars.projects", Project, DOM.projectList);
            this.createCollection("modelList", "SOL.vars.sharedProjects", SharedProject, DOM.modelList);
            if (SOL.vars.user.firstLogin) {
                this.onclick_btnHelp();
                SOL.vars.user.firstLogin = false;
            }
        },
        reloadProjectList: function() {
            this.RMI("Projects", "getOwnProjectsList", {}, function(ret) {
                if (typeof ret == "object")
                    CALL("onLoadProjectsList", ret);
                else
                    CALL("RMIError", "Erro ao obter lista de projetos. Tente novamente mais tarde.");
            });
            this.RMI("Projects", "getSharedProjectsList", {}, function(ret) {
                if (ret && typeof ret == "object")
                    CALL("onLoadSharedProjectsList", ret);
                else
                    CALL("RMIError", "Erro ao obter projetos compartilhados. Tente novamente mais tarde.");
            });
        },
        onLoadSharedProjectsList: function(list) {
            SOL.vars.sharedProjects = list;
            this.updateCollection("modelList");
        },
        onLoadProjectsList: function(list) {
            var mine = [];
            var books = [];
            for (var k in list) {
                var item = list[k];
                if (Array.isArray(item)) {
                    books.push(item)
                    item.name = k;
                } else
                    mine.push(item)
            }
            SOL.vars.projects = mine.concat(books);
            this.updateCollection("projectList");
        },
        updateCollection: function(name) {
            SUPER(name);
            if (name != "projectList")
                return;
            if (SOL.vars.projects && SOL.vars.projects.length && !(SOL.vars.projects[0] instanceof Array))
                DOM["projectList-caption"].style.display = "block";
            else
                DOM["projectList-caption"].style.display = "none";
        },
        updateProjectMetadata: function(pid, name, mdlist) {
            var project = SOL.vars.projects.find(function(p) {
                return p.id == pid;
            });
            if (!project)
                return;
            project.metadata = mdlist;
            this.updateCollection("projectList");
        },
        onclose_metadata: function() {
            this.updateCollection("projectList");
        },
        onclick_btnHelp: function() {
            DOM.helpContainer.style.display = "inline";
            if (!DOM.helpFrame.src)
                DOM.helpFrame.src = DOM.helpFrame.dataset.src;
        },
        onclick_helpContainer: function() {
            DOM.helpContainer.style.display = "none";
            var src = DOM.helpFrame.src;
            DOM.helpFrame.src = "";
            DOM.helpFrame.src = src;
        },
        onclick_userTerms: function() {
            DOM.termsContainer.style.display = "inline";
            if (!DOM.termsContainer.src)
                DOM.termsContainer.src = DOM.termsContainer.dataset.src;
        },
        onclick_termsContainer: function() {
            DOM.termsContainer.style.display = "none";
            var src = DOM.termsFrame.src;
            DOM.termsFrame.src = "";
            DOM.termsFrame.src = src;
        },
        onclick_policy: function() {
            DOM.policyContainer.style.display = "inline";
            if (!DOM.policyContainer.src)
                DOM.policyContainer.src = DOM.policyContainer.dataset.src;
        },
        onclick_policyContainer: function() {
            DOM.policyContainer.style.display = "none";
            var src = DOM.policyFrame.src;
            DOM.policyFrame.src = "";
            DOM.policyFrame.src = src;
        },
        onclick_logOut: function() {
            this.RMI("User", "logout", {}, function() {
                if (gapi.auth2) {
                    var auth2 = gapi.auth2.getAuthInstance();
                    auth2.signOut().then(function() {
                        SOL.vars.user = null;
                        auth2 = null;
                        location.reload(true);
                    });
                } else
                    SOL.screen.loadScreen("Login");
            });
        },
        onclick_register: function() {
            SOL.screen.loadScreen("Register");
        },
        onclick_push: function() {
            SOL.screen.loadScreen("Push");
        },
        onclick_analytics: function() {
            SOL.screen.loadScreen("Semep");
        },
        onclick_batchExport: function() {
            var mine = [];
            for (var k in SOL.vars.projects)
                if (SOL.vars.projects[k].id)
                    mine.push(SOL.vars.projects[k].id);
            new screens.export.Export(mine);
        },
        onclick_projectImport: function() {
            new screens.import.Import();
        },
        onclick_logoEscribo: function() {
            window.open("http://www.escribo.com.br");
        },
        onclick_btnNewProject: function() {
            this.RMI("Projects", "create", {}, function(ret) {
                if (ret && typeof ret == "number") {
                    SOL.vars.projects.push({
                        id: ret
                    });
                    CALL("openProject", ret);
                }
                else
                    CALL("RMIError", "Erro ao criar um projeto novo.");
            });
        },
        getProject: function(id) {
            var arrs = [SOL.vars.projects, SOL.vars.sharedProjects];
            while (arrs.length) {
                var arr = arrs.pop();
                for (var i = 0; i < arr.length; ++i) {
                    if (Array.isArray(arr[i])) {
                        arrs.push(arr[i]);
                        continue;
                    }
                    if (arr[i].id === id)
                        return arr[i];
                }
            }
            return null;
        },
        play: function(id) {
            var link;
            link = "play.php?project=" + id;
            if (SOL.vars.user.scao_id)
                link += "&LED_ID=" + SOL.vars.user.scao_id;
            else
                link += "&NO_IB=true";
            window.open(link);
        },
        viewStatistics: function(id) {
            var THIS = this;
            SOL.vars.projectId = id;
            userId = SOL.vars.user.id;
            SOL.vars.projectModels = SOL.vars.projectModels || {};
            SOL.vars.project = SOL.vars.projectModels[SOL.vars.projectId];
            if (!SOL.vars.project) {
                this.RMI("Projects", "getProject", {
                    projectId: SOL.vars.projectId
                }, function(ret) {
                    if (typeof ret == "object") {
                        SOL.vars.projectModels[SOL.vars.projectId] = SOL.vars.project = ret;
                        getSharedClassLinks();
                    }
                    else
                        CALL("RMIError", "Erro ao obter projeto. Tente novamente mais tarde.");
                });
            } else
                getSharedClassLinks();
            return;
            function getSharedClassLinks() {
                THIS.RMI('Projects', 'getSharedClassLinks', {
                    projectId: id,
                    entityId: userId
                }, function(ret) {
                    if (ret instanceof Array && ret.length) {
                        SOL.vars.shareLinks = ret;
                        SOL.vars.shareId = null;
                        SOL.screen.loadScreen("Statistics");
                    }
                });
            }
        },
        openProject: function(id) {
            if (!this.getProject(id))
                return;
            SOL.vars.projectId = id;
            if (SOL.screen == null) {
                console.log("???");
            } else
                this.loadScreen("Editor");
        },
        removeProject: function(id) {
            var confirmation = confirm("tem certeza que deseja remover esse projeto?");
            if (!confirmation)
                return;
            var p = this.getProject(id);
            this.RMI("Projects", "remove", {
                projectId: id
            }, function(ret) {
                if (ret == true) {
                    var i = SOL.vars.projects.indexOf(p);
                    if (i != -1)
                        SOL.vars.projects.splice(i, 1);
                    this.reloadProjectList();
                }
            });
        },
        duplicateProject: function(id) {
            var p = this.getProject(id);
            var THIS = this;
            new screens.metadata.Metadata(id, function(cb) {
                THIS.RMI("Projects", "duplicate", {
                    projectId: id
                }, function(ret) {
                    if (typeof ret == "number") {
                        var np = JSON.parse(JSON.stringify(p));
                        np.id = ret;
                        cb(ret);
                        SOL.vars.projects = SOL.vars.projects || [];
                        SOL.vars.projects.unshift(np);
                        this.reloadProjectList();
                    }
                });
            });
        },
        viewProjectProperties: function(id) {
            new screens.metadata.Metadata(id);
        }
    });
})();
;
/* ../screens/tiro/Tiro.js */
(function() {
    var Balloon = CLAZZ({
        EXTENDS: "framework.Phaser.Entity",
        velX: 0,
        velY: 0,
        state: "following",
        followSprite: null,
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, followSprite) {
            SUPER(screen, {
                "sprite": "waterBalloon",
                "x": followSprite.x,
                "y": followSprite.y,
                "sprite.anchor.x": 0.5,
                "sprite.anchor.y": 0.5,
                components: [{
                    CLAZZ: "components.BallisticPhysics"
                }]
            });
            this.followSprite = followSprite;
            this.sprite.parent.swapChildren(this.sprite, this.followSprite);
        },
        following: function() {
            this.sprite.x = this.followSprite.x;
            this.sprite.y = this.followSprite.y;
        },
        fly: function() {
            this.sprite.scale.x *= 0.95;
            this.sprite.scale.y *= 0.95;
            if (this.sprite.scale.x <= 0.5)
                this.state = "dead";
        },
        deadBegin: function() {
            var hit = this.getCollision();
            if (hit) {
                if (hit.onHit)
                    hit.onHit(this);
                CALL("playAudio", "hitSound");
                CALL("onBalloonHit" + hit.constructor.NAME, this, hit);
                CALL("onBalloonHit", this, hit);
            }
            else
                CALL("onBalloonMiss");
            var splash = game.add.image(this.sprite.x, this.sprite.y, 'splash');
            this.sprite.parent.swapChildren(splash, this.sprite);
            splash.rotation = Math.random() * 180;
            splash.anchor.setTo(0.5, 0.5);
            this.sprite.destroy();
            this.sprite = splash;
            CALL("onSplash");
        },
        dead: function() {
            if (this.sprite.alpha > 0.1)
                this.sprite.alpha *= 0.9;
            else
                this.destroy();
        },
        onDragStop: function(followSprite, dx, dy) {
            if (this.followSprite != followSprite)
                return;
            this.sprite.parent.setChildIndex(this.sprite, SOL.screen.balloonTargetZIndex);
            this.state = "fly";
            this.setVelocity(dx, dy);
        }
    });
    CLAZZ("screens.tiro.Tiro", {
        EXTENDS: "framework.Phaser",
        waterBalloonCount: 399,
        balloonTargetZIndex: 2,
        groundHeight: 600,
        randomizeCards: true,
        rightCardCount: 0,
        wrongCardCount: 0,
        DYNAMIC: true,
        STATIC: {
            requires: ["components/FlyAI.js", "components/Spin.js", "components/BallisticPhysics.js", "components/Bounce.js"]
        },
        create: function() {
            SUPER();
            if (!this.editor && this.randomizeCards)
            {
                var cards = CALL("pollCard", []);
                if (cards) {
                    for (var i = 0, card; card = cards[i]; ++i)
                        cards[Math.floor(Math.random() * cards.length)].swapCoords(card);
                }
            }
        },
        onAddRightCard: function() {
            this.rightCardCount++;
        },
        onAddWrongCard: function() {
            this.wrongCardCount++;
        },
        onHitRightCard: function() {
            this.rightCardCount--;
            if (this.rightCardCount == 0)
                this.endGame();
        },
        onDragStart: function(sprite) {
            if (!this.waterBalloonCount)
                return;
            this.waterBalloonCount--;
            CALL("setBalloonCount", this.waterBalloonCount);
            new Balloon(this, sprite);
        },
        onShowHint: function() {
            var cards = CALL("pollCard", []);
            if (!cards)
                return;
            var ids = {};
            for (var i = 0, card; card = cards[i]; ++i)
                if (card.isValidForHint()) {
                    var id = card.key();
                    ids[id] ? ids[id].push(card) : ids[id] = [card];
                }
            var keys = Object.keys(ids);
            if (keys.length == 0)
                return console.log("A strange game. The only winning move is not to play.");
            var pick = keys[Math.floor(keys.length * Math.random())];
            for (var i = 0, card; card = ids[pick][i]; ++i)
                this.setTimeout(card.showHint.bind(card), i * 500);
        },
        onSplash: function() {
            if (this.waterBalloonCount == 0)
                this.endGame();
        },
        onTimeEnded: function() {
            this.endGame();
        }
    });
})();
;
/* ../screens/tiro/Monster.js */
CLAZZ("screens.tiro.Monster", {
    EXTENDS: "framework.Phaser.CollidableEntity",
    DYNAMIC: true,
    state: "fly",
    vx: 0,
    vy: 0,
    tx: 0,
    ty: 0,
    hitGround: false,
    friction: 0.02,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        if (!this.FlyAI)
            this.addComponent({
                "CLAZZ": "components.FlyAI"
            });
        this.tx = this.sprite.x;
        this.ty = this.sprite.y;
    },
    fall: function() {
        this.vy += 0.5;
        this.vx *= 1 - this.friction;
        this.vy *= 1 - this.friction;
        this.sprite.x += this.vx;
        this.sprite.y += this.vy;
        if (this.sprite.y > SOL.screen.groundHeight)
        {
            this.sprite.y = SOL.screen.groundHeight;
            if (!this.hitGround)
            {
                CALL("onShowHint");
                SOL.screen.shakeAmountY += 30;
                this.hitGround = true;
            }
            this.vx *= 0.9;
        }
        if (this.sprite.y == SOL.screen.groundHeight)
        {
            this.state = "spit";
            this.sprite.animations.play('getup');
            this.vy = -5;
        }
    },
    spit: function() {
        if (!this.sprite.animations.getAnimation('getup').isPlaying)
        {
            this.state = "fly";
            this.friction *= 0.5;
        }
    },
    flyBegin: function() {
        this.FlyAI.enabled = true;
        this.x = this.sprite.x;
        this.y = this.sprite.y;
        this.sprite.animations.play("fly");
    },
    flyEnd: function() {
        this.FlyAI.enabled = false;
    },
    onHit: function() {
        if (this.state != "fly")
            return;
        this.state = "fall";
        this.hitGround = false;
        this.sprite.animations.play('fall');
    }
});
;
/* ../screens/tiro/Card.js */
CLAZZ("screens.tiro.Card", {
    EXTENDS: "framework.Phaser.CollidableEntity",
    frontBG: null,
    rearBG: null,
    splash: null,
    img: null,
    lbl: null,
    id: "",
    pair: null,
    isCorrect: false,
    spinSpeed: 0.25,
    imgScale: 1,
    DYNAMIC: true,
    STATIC: {
        lastHit: null
    },
    CONSTRUCTOR: function(screen, data) {
        this.sprite = game.add.group();
        (data.components = data.components || []).push({
            CLAZZ: "components.Spin"
        }, {
            CLAZZ: "components.Bounce",
            property: "rotation",
            minIntensity: 0.005,
            decay: 0.98
        });
        SUPER(screen, data);
        SOL.screen.balloonTargetZIndex++;
        this.sprite.add(this.rearBG = this.loadSprite(this.rearBG, {
            "anchor.setTo": 0.5
        }));
        this.sprite.add(this.frontBG = this.loadSprite(this.frontBG, {
            "anchor.setTo": 0.5
        }));
        this.setSpinSprites(this.frontBG, this.rearBG);
        if (screen.editor) {
            this.frontBG.events.onInputDown.add(function() {
                this.frontBG.y = this.sprite.y;
                this.frontBG.x = this.sprite.x;
                this.sprite.y = 0;
                this.sprite.x = 0;
            }, this);
            this.frontBG.events.onDragUpdate.add(function() {
                this.sprite.x = this.frontBG.x;
                this.sprite.y = this.frontBG.y;
                this.frontBG.y = 0;
                this.frontBG.x = 0;
            }, this);
        }
        if (this.img) {
            this.img = game.add.sprite(0, 0, this.img);
            this.img.anchor.setTo(0.5, 0.5);
            this.sprite.add(this.img);
            var sx = this.frontBG.width / this.img.width;
            var sy = this.frontBG.height / this.img.height;
            this.img.scale.setTo(this.imgScale = Math.min(1, sx, sy) * 0.8);
        }
        if (this.lbl) {
            this.lbl = game.add.text(0, 0, this.lbl);
            this.lbl.anchor.setTo(0.5, 0.5);
            this.sprite.add(this.lbl);
        }
        if (this.pair)
        {
            if (!this.id)
                this.id = this.pair;
            this.setSpinFlipped(true);
        } else if (this.isCorrect)
            CALL("onAddRightCard");
        else
            CALL("onAddWrongCard");
    },
    key: function() {
        if (this.id)
            return this.id;
        return this.__uid;
    },
    isValidForHint: function() {
        if (this.state != "")
            return false;
        return this.pair != null || this.isCorrect;
    },
    showHint: function() {
        this.bounce(0.5);
    },
    onTick: function() {
        SUPER();
        if (this.pair && this.frontBG.scale.y <= 0)
        {
            if (this.lbl)
                this.lbl.visible = false;
            if (this.img)
                this.img.visible = false;
        }
        else
        {
            if (this.lbl)
                this.lbl.scale.y = Math.abs(this.frontBG.scale.y);
            if (this.img)
                this.img.scale.y = this.imgScale * Math.abs(this.frontBG.scale.y);
        }
    },
    setCorrect: function(isCorrect) {
        this.state = "wasHit";
        this.isCorrect = isCorrect;
    },
    onHit: function() {
        if (this.state != "")
            return;
        this.collisionEnabled = false;
        this.startSpin(this.pair ? 1 : -1, this.spinSpeed);
        if (this.pair)
        {
            if (!SOL.screens.tiro.Card.lastHit) {
                this.state = "awaitingPair";
                SOL.screens.tiro.Card.lastHit = this;
                CALL("onHitFirstCard");
            } else if (SOL.screens.tiro.Card.lastHit.id == this.pair) {
                this.setCorrect(true);
                SOL.screens.tiro.Card.lastHit.setCorrect(true);
                CALL("onHitSecondCard");
            } else {
                var other = SOL.screens.tiro.Card.lastHit;
                SOL.screens.tiro.Card.lastHit = null;
                CALL("onWrongPair", this, other);
                other.state = "unflip";
                this.state = "unflip";
            }
        } else {
            this.setCorrect(this.isCorrect);
            if (this.isCorrect)
                CALL("onHitRightCard");
            else
                CALL("onHitWrongCard");
        }
    },
    flipTime: 0,
    unflipBegin: function() {
        this.flipTime = 1000;
    },
    unflip: function() {
        this.flipTime--;
        if (this.flipTime > 0)
            return;
        this.state = "";
        this.startSpin(-1, 0.1);
        this.collisionEnabled = true;
    },
    fall: function() {
        this.sprite.alpha -= (this.sprite.alpha - 0.6) * 0.04;
        this.sprite.scale.x -= (this.sprite.scale.x - 0.8) * 0.04;
        this.sprite.scale.y = this.sprite.scale.x;
    },
    onEndGame: function() {
        var right = 0,
            wrong = 0;
        if (this.state == "wasHit")
        {
            if (this.isCorrect)
                right = 1;
            else
                wrong = 1;
        }
        else
        {
            if (this.isCorrect)
                wrong = 1;
        }
        if (this.isCorrect)
            this.state = "correct";
        else
            this.state = "fall";
        SOL.vars.rightAnswers = SOL.vars.rightAnswers + right || right;
        SOL.vars.wrongAnswers = SOL.vars.wrongAnswers + wrong || wrong;
    }
});
;
/* ../screens/tiro/Slingshot.js */
CLAZZ("screens.tiro.Slingshot", {
    EXTENDS: "framework.Phaser.Entity",
    id: "slingshot",
    lineSprite: null,
    width: 100,
    startX: 0,
    startY: 0,
    lineColor: '#9D3521',
    lineBMP: null,
    lineLeftOffsetX: -20,
    lineRightOffsetX: 20,
    lineWidth: 10,
    power: 1,
    DYNAMIC: true,
    ballistics: null,
    timeoutHandle: null,
    CONSTRUCTOR: function(screen, data) {
        this.lineBMP = game.add.bitmapData(game.world.width, game.world.height);
        this.lineSprite = game.add.image(0, 0, this.lineBMP);
        this.ballistics = new Phaser.Point();
        (data.components = data.components || []).push({
            CLAZZ: "components.BallisticPhysics",
            target: this.ballistics
        });
        SUPER(screen, data);
        this.startX = this.sprite.x;
        this.startY = this.sprite.y;
        this.sprite.inputEnabled = true;
        this.sprite.input.enableDrag(false);
        this.sprite.events.onDragStop.add(this.__onDragStop.bind(this));
        this.sprite.events.onDragStart.add(this.__onDragStart.bind(this));
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    velX: 0,
    velY: 0,
    isDragging: false,
    onEndGame: function() {
        this.sprite.inputEnabled = false;
    },
    resetTimeout: function() {
        SOL.screen.clearInterval(this.timeoutHandle);
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    __onDragStart: function() {
        this.isDragging = true;
        CALL("onDragStart", this.sprite);
        this.resetTimeout();
    },
    __onDragStop: function() {
        this.isDragging = false;
        CALL("onDragStop", this.sprite, (this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
        this.resetTimeout();
    },
    onPostTick: function() {
        if (!this.isDragging)
        {
            this.velX += this.startX - this.sprite.x;
            this.velY += this.startY - this.sprite.y;
            this.velX *= 0.8;
            this.velY *= 0.8;
            this.sprite.x += this.velX;
            this.sprite.y += this.velY;
        } else {
            this.velX = 0;
            this.velY = 0;
            this.resetTimeout();
        }
        this.lineBMP.clear();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineLeftOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX - this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineRightOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX + this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        var stepCount = 12;
        if (this.isDragging) {
            this.lineBMP.ctx.beginPath();
            this.ballistics.x = this.sprite.x;
            this.ballistics.y = this.sprite.y;
            var move = true;
            this.setVelocity((this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
            for (var i = 0; i < stepCount; ++i) {
                this.fly();
                this.lineBMP.ctx.lineWidth = (1 - i / stepCount) * 4;
                this.lineBMP.ctx.strokeStyle = "rgba(0,0,0," + (1 - i / stepCount) * 0.8 + ")";
                if (move)
                    this.lineBMP.ctx.moveTo(this.ballistics.x, this.ballistics.y);
                else
                    this.lineBMP.ctx.lineTo(this.ballistics.x, this.ballistics.y);
                move = !move;
                this.lineBMP.ctx.stroke();
            }
            this.lineBMP.ctx.closePath();
        }
        this.lineBMP.render();
    }
});
;
/* ../screens/editclassgames/EditClassGames.js */
CLAZZ("screens.editclassgames.CheckboxOpt", {
    element: null,
    DOM: null,
    model: null,
    CONSTRUCTOR: function() {
        SOL.screen.__pool.add(this);
        this.element = MAR.create("span", {
            className: "checkopt"
        }, [["input", {
            type: "checkbox",
            id: "metapackageInput"
        }], ["label", {
            id: "metapackageLabel"
        }]]);
        this.DOM = MAR.index(this.element, null, this);
    },
    destroy: function() {
        SOL.screen.__pool.remove(this);
    },
    onclick_metapackageLabel: function(event) {
        if (event.target == this.DOM.metapackageLabel)
            this.DOM.metapackageInput.checked = !this.DOM.metapackageInput.checked;
    },
    INPUT: {
        change: function() {
            CALL("onchange_packageGroup");
        }
    },
    update: function(model) {
        this.model = model;
        this.DOM.metapackageLabel.textContent = model.name;
    },
    pollCheckboxes: function(ret, listName) {
        let parentId = this.element.parentElement.id
        let canPoll = parentId.includes(listName) ? true : false;
        if (!canPoll)
            return;
        if (this.DOM.metapackageInput.checked)
            ret.push(+this.model.id);
        return ret;
    },
    updateCheckboxes: function(list, listName) {
        let parentId = this.element.parentElement.id
        let needsUpdate = parentId.includes(listName) ? true : false;
        if (!needsUpdate)
            return;
        this.DOM.metapackageInput.checked = this.model && list.indexOf(this.model.id) != -1;
    }
}),
CLAZZ("screens.editclassgames.EditClassGamesDD", {
    element: null,
    CONSTRUCTOR: function() {
        this.element = MAR.create("option");
    },
    update: function(model) {
        this.element.value = model.id;
        this.element.textContent = model.name;
        if (this.element.parentElement && model.id == this.element.parentElement.modelValue)
            this.element.parentElement.value = model.id;
    }
});
CLAZZ("screens.editclassgames.EditClassGames", {
    EXTENDS: "framework.Frontend",
    DYNAMIC: true,
    schools: [],
    classes: [],
    metapackages: [],
    teacherSelectedPackages: [],
    parentSelectedPackages: [],
    create: function() {
        if (SOL.vars.user.logo)
            DOM.clientLogo.src = "img/logos/" + SOL.vars.user.logo + ".png";
        else
            DOM.clientLogo.style.display = "none";
        this.RMI("Customer", "getSchoolList", {}, this._onGetSchools.bind(this));
        this.createCollection("schools", "SOL.screen.schools", screens.editclassgames.EditClassGamesDD, DOM.schools);
        this.createCollection("teacherMetapackages", "SOL.screen.metapackages", screens.editclassgames.CheckboxOpt, DOM.teacherMetapackages);
        this.createCollection("parentMetapackages", "SOL.screen.metapackages", screens.editclassgames.CheckboxOpt, DOM.parentMetapackages);
        this.RMI("Metapackage", "listAllMetapackage", {}, this._onGetMetapackages.bind(this));
    },
    _onGetSchools: function(schools) {
        schools.unshift({
            id: 0,
            name: "Selecione uma escola..."
        });
        this.schools = schools;
        CALL("updateCollection", "schools");
        this.createCollection("classes", "SOL.screen.classes", screens.editclassgames.EditClassGamesDD, DOM.classes);
    },
    _onGetClasses: function(classes) {
        if (classes.length)
            classes.unshift({
                id: 0,
                name: "Selecione uma turma..."
            })
        this.classes = classes;
        CALL("updateCollection", "classes");
    },
    onchange_schools: function() {
        var schoolId = parseInt(DOM.schools.value);
        if (!schoolId)
            return this._onGetClasses([]);
        this.RMI("Customer", "getClassesInSchool", {
            "schoolId": schoolId
        }, this._onGetClasses.bind(this));
    },
    onchange_classes: function() {
        var classElement = DOM.classes;
        var classId = parseInt(classElement.value);
        if (!classId)
            return this._onGetAcessibleMetapackages({
                'teacher': [],
                'parent': []
            });
        var className = classElement.options[classElement.selectedIndex].text;
        this.RMI("Metapackage", "searchClassMetapackage", {
            "classId": classId,
            "className": className
        }, this._onGetAcessibleMetapackages.bind(this));
    },
    showClassesDropdown: function() {
        DOM.style.visibility = 'visible';
    },
    hideClassesDropdown: function() {
        DOM.style.visibility = 'hidden';
    },
    _onGetAcessibleMetapackages: function(metapackages) {
        let teacherPackages = metapackages['teacher'];
        let parentPackages = metapackages['parent'];
        this.teacherSelectedPackages = teacherPackages.map((element) => '' + element.id);
        this.parentSelectedPackages = parentPackages.map((element) => '' + element.id);
        CALL("updateCheckboxes", this.teacherSelectedPackages, "teacher");
        CALL("updateCheckboxes", this.parentSelectedPackages, "parent");
    },
    _onGetMetapackages: function(metapackages) {
        this.metapackages = metapackages;
        CALL("updateCollection", "teacherMetapackages");
        CALL("updateCollection", "parentMetapackages");
    },
    onclick_cancelEditing: function() {
        this.cleanForm();
    },
    cleanForm: function() {
        DOM.schools.selectedIndex = 0;
        this.onchange_schools();
        CALL("updateCheckboxes", [], "teacher");
        CALL("updateCheckboxes", [], "parent");
    },
    onclick_submit: function() {
        var classElement = DOM.classes;
        var classId = parseInt(classElement.value);
        let teacherMetapackages = CALL('pollCheckboxes', [], 'teacher');
        let parentMetapackages = CALL('pollCheckboxes', [], 'parent');
        this.RMI("Metapackage", "addsMetapackagesToClass", {
            classId,
            teacherMetapackages,
            parentMetapackages
        }, (done) => {
            if (done) {
                alert("Cadastro de Metapacotes feito com sucesso");
                this.cleanForm();
            }
        });
    },
    onclick_clientLogo: function() {
        SOL.screen.loadScreen("Projects");
    },
});
;
/* ../screens/tiroeasymode/Slingshot.js */
CLAZZ("screens.tiroEasyMode.Slingshot", {
    EXTENDS: "framework.Phaser.Entity",
    id: "slingshot",
    lineSprite: null,
    width: 100,
    startX: 0,
    startY: 0,
    lineColor: '#9D3521',
    lineBMP: null,
    lineLeftOffsetX: -20,
    lineRightOffsetX: 20,
    lineWidth: 10,
    power: 1,
    DYNAMIC: true,
    ballistics: null,
    timeoutHandle: null,
    CONSTRUCTOR: function(screen, data) {
        this.lineBMP = game.add.bitmapData(game.world.width, game.world.height);
        this.lineSprite = game.add.image(0, 0, this.lineBMP);
        SOL.screen.__pool.silence("targetPos");
        this.ballistics = new Phaser.Point();
        (data.components = data.components || []).push({
            CLAZZ: "components.BallisticPhysics",
            target: this.ballistics
        });
        SUPER(screen, data);
        this.startX = this.sprite.x;
        this.startY = this.sprite.y;
        this.sprite.inputEnabled = true;
        this.sprite.input.enableDrag(false);
        this.sprite.events.onDragStop.add(this.__onDragStop.bind(this));
        this.sprite.events.onDragStart.add(this.__onDragStart.bind(this));
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    velX: 0,
    velY: 0,
    isDragging: false,
    onEndGame: function() {
        this.sprite.inputEnabled = false;
    },
    resetTimeout: function() {
        SOL.screen.clearInterval(this.timeoutHandle);
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    __onDragStart: function() {
        this.isDragging = true;
        CALL("onDragStart", this.sprite);
        this.resetTimeout();
    },
    __onDragStop: function() {
        this.isDragging = false;
        CALL("onDragStop", this.sprite, (this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
        this.resetTimeout();
    },
    onShot: function(x, y) {
        if (x == undefined)
            x = this.screen.game.input.x;
        if (y == undefined)
            y = this.screen.game.input.y;
        var tryCount = 20;
        var stepCount = 12;
        var aimX = 512,
            aimY = 384;
        var stepX = aimX;
        var stepY = aimY;
        for (var i = 0; i < tryCount; i++) {
            stepX /= 2;
            stepY /= 2;
            this.ballistics.x = aimX;
            this.ballistics.y = aimY;
            var supposedX = (this.startX - this.ballistics.x) * this.power;
            var supposedY = (this.startY - this.ballistics.y) * this.power;
            this.setVelocity(supposedX, supposedY);
            for (var j = 0; j < stepCount; ++j)
                this.fly();
            if (this.ballistics.x < x)
                aimX -= stepX;
            if (this.ballistics.y < y)
                aimY -= stepY;
            if (this.ballistics.x > x)
                aimX += stepX;
            if (this.ballistics.y > y)
                aimY += stepY;
        }
        this.sprite.x = aimX;
        this.sprite.y = aimY;
        CALL("onDragStart", this.sprite);
        CALL("onDragStop", this.sprite, (this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
        this.resetTimeout();
    },
    onPostTick: function() {
        if (!this.isDragging)
        {
            this.velX += this.startX - this.sprite.x;
            this.velY += this.startY - this.sprite.y;
            this.velX *= 0.8;
            this.velY *= 0.8;
            this.sprite.x += this.velX;
            this.sprite.y += this.velY;
        } else {
            this.velX = 0;
            this.velY = 0;
            this.resetTimeout();
        }
        this.lineBMP.clear();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineLeftOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX - this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineRightOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX + this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        var stepCount = 12;
        if (this.isDragging) {
            this.lineBMP.ctx.beginPath();
            this.ballistics.x = this.sprite.x;
            this.ballistics.y = this.sprite.y;
            var move = true;
            this.setVelocity((this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
            for (var i = 0; i < stepCount; ++i) {
                this.fly();
                this.lineBMP.ctx.lineWidth = (1 - i / stepCount) * 4;
                this.lineBMP.ctx.strokeStyle = "rgba(0,0,0," + (1 - i / stepCount) * 0.8 + ")";
                if (move)
                    this.lineBMP.ctx.moveTo(this.ballistics.x, this.ballistics.y);
                else
                    this.lineBMP.ctx.lineTo(this.ballistics.x, this.ballistics.y);
                move = !move;
                this.lineBMP.ctx.stroke();
            }
            CALL("targetPos", this.ballistics.x, this.ballistics.y)
            this.lineBMP.ctx.closePath();
        }
        this.lineBMP.render();
    }
});
;
/* ../screens/tiroEasyMode/Slingshot.js */
CLAZZ("screens.tiroEasyMode.Slingshot", {
    EXTENDS: "framework.Phaser.Entity",
    id: "slingshot",
    lineSprite: null,
    width: 100,
    startX: 0,
    startY: 0,
    lineColor: '#9D3521',
    lineBMP: null,
    lineLeftOffsetX: -20,
    lineRightOffsetX: 20,
    lineWidth: 10,
    power: 1,
    DYNAMIC: true,
    ballistics: null,
    timeoutHandle: null,
    CONSTRUCTOR: function(screen, data) {
        this.lineBMP = game.add.bitmapData(game.world.width, game.world.height);
        this.lineSprite = game.add.image(0, 0, this.lineBMP);
        SOL.screen.__pool.silence("targetPos");
        this.ballistics = new Phaser.Point();
        (data.components = data.components || []).push({
            CLAZZ: "components.BallisticPhysics",
            target: this.ballistics
        });
        SUPER(screen, data);
        this.startX = this.sprite.x;
        this.startY = this.sprite.y;
        this.sprite.inputEnabled = true;
        this.sprite.input.enableDrag(false);
        this.sprite.events.onDragStop.add(this.__onDragStop.bind(this));
        this.sprite.events.onDragStart.add(this.__onDragStart.bind(this));
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    velX: 0,
    velY: 0,
    isDragging: false,
    onEndGame: function() {
        this.sprite.inputEnabled = false;
    },
    resetTimeout: function() {
        SOL.screen.clearInterval(this.timeoutHandle);
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    __onDragStart: function() {
        this.isDragging = true;
        CALL("onDragStart", this.sprite);
        this.resetTimeout();
    },
    __onDragStop: function() {
        this.isDragging = false;
        CALL("onDragStop", this.sprite, (this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
        this.resetTimeout();
    },
    onShot: function(x, y) {
        if (x == undefined)
            x = this.screen.game.input.x;
        if (y == undefined)
            y = this.screen.game.input.y;
        var tryCount = 20;
        var stepCount = 12;
        var aimX = 512,
            aimY = 384;
        var stepX = aimX;
        var stepY = aimY;
        for (var i = 0; i < tryCount; i++) {
            stepX /= 2;
            stepY /= 2;
            this.ballistics.x = aimX;
            this.ballistics.y = aimY;
            var supposedX = (this.startX - this.ballistics.x) * this.power;
            var supposedY = (this.startY - this.ballistics.y) * this.power;
            this.setVelocity(supposedX, supposedY);
            for (var j = 0; j < stepCount; ++j)
                this.fly();
            if (this.ballistics.x < x)
                aimX -= stepX;
            if (this.ballistics.y < y)
                aimY -= stepY;
            if (this.ballistics.x > x)
                aimX += stepX;
            if (this.ballistics.y > y)
                aimY += stepY;
        }
        this.sprite.x = aimX;
        this.sprite.y = aimY;
        CALL("onDragStart", this.sprite);
        CALL("onDragStop", this.sprite, (this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
        this.resetTimeout();
    },
    onPostTick: function() {
        if (!this.isDragging)
        {
            this.velX += this.startX - this.sprite.x;
            this.velY += this.startY - this.sprite.y;
            this.velX *= 0.8;
            this.velY *= 0.8;
            this.sprite.x += this.velX;
            this.sprite.y += this.velY;
        } else {
            this.velX = 0;
            this.velY = 0;
            this.resetTimeout();
        }
        this.lineBMP.clear();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineLeftOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX - this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineRightOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX + this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        var stepCount = 12;
        if (this.isDragging) {
            this.lineBMP.ctx.beginPath();
            this.ballistics.x = this.sprite.x;
            this.ballistics.y = this.sprite.y;
            var move = true;
            this.setVelocity((this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
            for (var i = 0; i < stepCount; ++i) {
                this.fly();
                this.lineBMP.ctx.lineWidth = (1 - i / stepCount) * 4;
                this.lineBMP.ctx.strokeStyle = "rgba(0,0,0," + (1 - i / stepCount) * 0.8 + ")";
                if (move)
                    this.lineBMP.ctx.moveTo(this.ballistics.x, this.ballistics.y);
                else
                    this.lineBMP.ctx.lineTo(this.ballistics.x, this.ballistics.y);
                move = !move;
                this.lineBMP.ctx.stroke();
            }
            CALL("targetPos", this.ballistics.x, this.ballistics.y)
            this.lineBMP.ctx.closePath();
        }
        this.lineBMP.render();
    }
});
;
/* ../screens/escaladaEN/Slot.js */
CLAZZ("screens.escaladaEN.Slot", {
    EXTENDS: "framework.Phaser.CollidableEntity",
    DYNAMIC: true,
    text: "",
    block: null,
    pos: 0,
    height: 50,
    width: 50,
    activateSlot: function(pos) {
        if (pos !== undefined && pos != this.pos)
            return;
        if (!this.text || this.block || this.sprite.visible)
            return;
        this.collisionEnabled = this.sprite.visible = true;
        this.sprite.scale.setTo(0);
        this.sprite.alpha = 0;
        this.setAutoScaleEnabled(true);
        this.setTweenEnabled(true);
    },
    hasWrongSlots: function() {
        if (this.block && this.block.text != this.text)
            return true;
        return undefined;
    },
    hasEmptySlots: function() {
        if (this.sprite.visible)
            return true;
        return undefined;
    },
    resetBlocks: function(word, row, allActive) {
        game.world.bringToTop(this.sprite);
        this.block = null;
        this.text = word[this.pos];
        this.activateSlot();
        this.collisionEnabled = this.sprite.visible = allActive && this.pos < word.length;
        var y = this.y - row * this.height;
        var x = this.x - (word.length * this.width / 2) + this.pos * this.width;
        if (this.sprite.x == this.x)
            this.sprite.x = x;
        if (this.sprite.y == this.y)
            this.sprite.y = y;
        this.setAutoPosTarget(x, y);
    },
    setBlock: function(block, permanent) {
        if (this.block && this.block != block)
            this.block.onReplace();
        if (block) {
            block.setIndex(this.sprite.parent.getChildIndex(this.sprite) + 1);
            CALL("activateSlot", this.pos + 1);
        }
        if (!this.screen.editor)
            this.setSelection(!!block);
        this.collisionEnabled = !permanent;
        this.block = block;
        this.sprite.visible = block == null;
        this.snapToAutoPosTarget();
    }
});
;
/* ../screens/escaladaEN/Escalada.js */
CLAZZ("screens.escaladaEN.Escalada", {
    EXTENDS: "framework.Phaser",
    word: "",
    words: null,
    wordQueue: null,
    randomizeBlocks: true,
    blockData: null,
    correctCount: 0,
    wrongCount: 0,
    level: 5,
    tipsLeft: 0,
    DYNAMIC: true,
    STATIC: {
        requires: ["components/AutoPos.js", "components/AutoScale.js", "components/Tween.js"]
    },
    create: function() {
        SUPER();
        if (!this.tipsLeft)
            CALL("disableHints");
        this.wordQueue = Object.keys(this.words).reverse();
    },
    introComplete: function() {
        this.nextWord();
    },
    getAccumulated: function() {
        var acc = "";
        var slots = CALL("pollSlot", []);
        for (var i = 0, slot; slot = slots[i]; ++i)
            if (slot.block)
                acc += slot.block.text;
        return acc;
    },
    randomize: function(arr) {
        for (var i = 0, w; w = arr[i]; ++i)
        {
            var j = Math.floor(Math.random() * arr.length);
            arr[i] = arr[j];
            arr[j] = w;
        }
    },
    onPlaceBlock: function() {
        if (CALL("hasEmptySlots"))
            return;
        if (CALL("hasWrongSlots"))
            CALL("onWrong", this.word);
        else {
            CALL("onRight", this.word);
            if (this.hasNextWord())
                CALL("onNextWord");
            else
                CALL("onReachTop");
        }
    },
    onWrong: function() {
        this.wrongCount++;
    },
    onRight: function(word) {
        this.correctCount++;
        this.nextWord();
    },
    onEndFeedback: function() {
        if (this.feedbackAction)
            this.setTimeout(this.feedbackAction, 10, this);
        this.feedbackAction = null;
    },
    onEndGame: function() {
        SOL.vars.rightAnswers = (SOL.vars.rightAnswers || 0) + this.correctCount;
        SOL.vars.wrongAnswers = (SOL.vars.wrongAnswers || 0) + this.wrongCount + (this.level - this.correctCount);
    },
    hasNextWord: function() {
        return !(!this.wordQueue || this.correctCount == this.level);
    },
    nextWord: function() {
        if (!this.wordQueue || !this.wordQueue.length)
            this.wordQueue = Object.keys(this.words);
        if (this.correctCount == this.level)
            return this.endGame();
        if (this.randomON || this.randomON === undefined)
        {
            for (var i = 0; i < 10 && this.wordQueue[this.wordQueue.length - 1] == this.word || i == 0; ++i)
                this.randomize(this.wordQueue);
        }
        this.word = this.wordQueue.pop();
        var prop = this.words[this.word] || {};
        this.word = this.word.trim();
        var placed = undefined;
        if ("placed" in prop && prop.placed.length)
            placed = prop.placed.split("");
        CALL("setWord", this.word, prop);
        var count = (CALL("pollSlot", []) || []).length;
        while (count < this.word.length)
            this.addEntity({
                "class": "Slot",
                text: this.word[i],
                pos: count++
            });
        CALL("resetBlocks", this.word, this.correctCount, !!placed);
        var wrong = prop.wrong || "";
        var placedCount = 0;
        for (var i = 0; i < this.word.length; ++i) {
            if (placed && placed[i] == this.word[i])
                placedCount++;
        }
        var overflow = this.blockData.length - (this.word.length - placedCount + wrong.length);
        if (overflow < 0) {
            wrong = wrong.substr(0, wrong.length + overflow);
        }
        var letters = (this.word + wrong).split("");
        this.randomize(letters);
        var bdi = 0;
        for (var i = 0; i < letters.length; ++i) {
            var pos = null;
            if (placed) {
                pos = placed.indexOf(letters[i]);
                if (pos != -1) {
                    placed[pos] = "";
                } else
                    pos = null;
            }
            this.addEntity(MAR.mergeTo({
                slot: pos,
                text: letters[i]
            }, this.blockData[bdi] || this.blockData[0]));
            if (pos === null)
                bdi++;
        }
        if (!placed)
            CALL("activateSlot", 0);
    },
    showHint: function() {
        this.tipsLeft--;
        if (this.tipsLeft <= 0)
            CALL("disableHints");
        var slots = [];
        CALL("pollSlot", slots);
        var answer = null;
        var firstEmptySlot = null;
        for (var i = 0, slot; slot = slots[i]; ++i) {
            if (!firstEmptySlot && slot.hasEmptySlots())
                firstEmptySlot = slot;
            if (slot.hasWrongSlots()) {
                answer = [slot.block];
                break;
            }
        }
        if (!answer && firstEmptySlot)
            answer = [firstEmptySlot, CALL("getBlock", {
                text: firstEmptySlot.text,
                slot: null
            })];
        for (var k in answer) {
            if (answer[k] && typeof answer[k].activateHint == "function")
                answer[k].activateHint();
        }
    },
    onTimeEnded: function() {
        this.endGame();
    }
});
;
/* ../screens/escaladaEN/Display.js */
CLAZZ("screens.escaladaEN.Display", {
    EXTENDS: "framework.Phaser.Entity",
    DYNAMIC: true,
    index: 0,
    maxWidth: 230,
    maxHeight: 156,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.index = game.world.children.length;
    },
    setWord: function(word, props) {
        if (this.sprite)
            this.sprite.destroy();
        if (!props.question && SOL.assets['img_' + word]) {
            var screenData = this.screen.__data;
            var text = screenData.imgTitles && screenData.imgTitles[screenData.assets['img_' + word]];
            this.sprite = game.add.sprite(this.x, this.y, SOL.assets['img_' + word]);
            this.sprite.anchor.setTo(0.5);
            this.sprite.inputEnabled = true;
            this.sprite.events.onInputDown.add(this.screen.say.bind(this, text, null));
            var scaleW = this.maxWidth / this.sprite.width;
            var scaleH = this.maxHeight / this.sprite.height;
            this.sprite.scale.setTo(Math.min(1, scaleW, scaleH));
            game.world.setChildIndex(this.sprite, this.index);
        }
    }
});
;
/* ../screens/escaladaEN/Block.js */
CLAZZ("screens.escaladaEN.Block", {
    EXTENDS: "framework.Phaser.Entity",
    text: "",
    sprite: null,
    label: null,
    state: "goBack",
    startX: 0,
    startY: 0,
    labelScale: 1,
    slot: null,
    jumped: false,
    DYNAMIC: true,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.sprite.anchor.setTo(0.5, 0.5);
        var label = this.label = game.add.text(0, 0, this.text);
        label.anchor.setTo(0.7, 0.5);
        if (this.slot === null) {
            this.sprite.inputEnabled = true;
            this.sprite.input.enableDrag(false);
            this.sprite.events.onInputDown.add(this.onInputDown.bind(this));
            this.startX = this.x;
            this.startY = this.y;
            this.sprite.events.onDragUpdate.add(this.onDrag.bind(this));
            if (!this.screen.easyMode)
                this.sprite.events.onDragStop.add(this.onDragStop.bind(this));
        } else {
            var slot = CALL("getSlot", {
                "pos": this.slot
            });
            this.addToSlot(slot, true);
        }
    },
    destroy: function() {
        this.label.destroy();
        SUPER();
    },
    onDrag: function() {
        this.onPostTick();
    },
    onDragStop: function()
    {
        if (!this.class || this.class != "Block")
            return;
        var hit = this.getCollision(this.label);
        if (hit)
            this.addToSlot(hit);
        else {
            this.state = "goBack";
            CALL("onReleaseBlock");
        }
    },
    addToSlot: function(slot, permanent) {
        slot.setBlock(this, permanent);
        this.slot = slot;
        this.state = "goSlot";
    },
    onInputDown: function() {
        if (this.slot) {
            this.slot.setBlock(null);
            this.slot = null;
        }
        this.state = "drag";
    },
    bringToTop: function() {
        this.setIndex(game.world.children.length - 2);
    },
    changeSprite: function(tmp) {
        var i = this.sprite.parent.children.indexOf(this.sprite);
        tmp.scale.setTo(this.sprite.scale.x, this.sprite.scale.y);
        tmp.anchor.setTo(this.sprite.anchor.x, this.sprite.anchor.y);
        tmp.position.setTo(this.sprite.position.x, this.sprite.position.y);
        this.sprite.destroy();
        this.sprite = tmp;
        this.setIndex(i);
    },
    disableInput: function() {
        try {} catch (e) {}
        this.sprite.inputEnabled = false;
    },
    setIndex: function(i) {
        this.sprite.parent.setChildIndex(this.sprite, i);
        this.label.parent.setChildIndex(this.label, i + 1);
    },
    resort: function() {
        this.label.parent.setChildIndex(this.label, this.sprite.parent.children.indexOf(this.sprite) + 1);
    },
    onWrong: function() {
        if (this.sprite.inputEnabled && this.slot && this.slot.hasWrongSlots())
            this.showWrongBlockFeedback();
    },
    showWrongBlockFeedback: function() {},
    resetBlocks: function() {
        this.slot = null;
        this.sprite.inputEnabled = false;
        if (this.state == "goSlot")
            return;
        this.state = "die";
    },
    onPostTick: function() {
        var label = this.label,
            sprite = this.sprite;
        label.x = sprite.x;
        label.y = sprite.y;
        label.alpha = sprite.alpha;
        label.scale.x = sprite.scale.x * this.labelScale;
        label.scale.y = sprite.scale.y * this.labelScale;
    },
    doneScaling: function() {
        if (this.state == "die")
            this.destroy();
    },
    doneTweening: function() {
        if (this.state == "goSlot")
            CALL("onPlaceBlock");
    },
    onReplace: function() {
        this.slot = null;
        this.state = "goBack";
    }
});
;
/* ../screens/esteira/Question.js */
CLAZZ("screens.esteira.Question", {
    EXTENDS: "components.Component",
    enabled: false,
    group: null,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        this.group = this.entity.screen.game.add.group();
        for (var i = 1; i <= 4; ++i)
            this.addAlt(this.entity["alt" + i]);
    },
    create: function() {
        this.entity.text.visible = false;
        this.group.visible = false;
    },
    addAlt: function(txt) {
        var entity = this.entity;
        txt = this.entity.screen.game.add.text(0, 0, txt);
        this.group.add(txt);
        txt.setStyle({
            font: entity.font || SOL.defaultFont,
            fontSize: entity.size || 20,
            fill: entity.color || "#fff",
            stroke: entity.stroke || "#000",
            strokeThickness: entity.strokeThickness || 0,
            wordWrap: entity.wordWrap || true,
            wordWrapWidth: (entity.area && entity.area.width) || entity.wordWrapWidth || 700,
            align: entity.align || "center"
        });
        txt.x = entity.screen.gameWidth - txt.width - 100;
        return txt;
    },
    activateQuestion: function() {
        var screen = this.entity.screen,
            laneCount = CALL("getLaneCount");
        for (var i = 0; i < this.group.children.length; ++i) {
            var c = this.group.children[i];
            c.y = (i + 1) * (screen.gameHeight / (1 + laneCount)) - c.height;
        }
        this.entity.text.visible = true;
        this.group.visible = true;
    },
    pickOption: function(option) {}
});
;
/* ../screens/esteira/Monster.js */
CLAZZ("screens.esteira.Monster", {
    enterSpeed: 7,
    moveSpeed: 1,
    laneChangeSpeed: 0.2,
    EXTENDS: "components.Component",
    laneCount: 0,
    lane: 0,
    create: function() {
        this.entity.sprite.x = -this.entity.sprite.width;
        this.entity.sprite.y = this.entity.screen.gameHeight;
        this.entity.state = "enterScreen";
    },
    enterScreenBegin: function() {
        this.lane = this.laneCount = CALL("getLaneCount");
    },
    enterScreen: function() {
        if (this.entity.sprite.x < Math.abs(this.entity.sprite.width))
            this.entity.sprite.x += this.enterSpeed;
        else {
            this.entity.state = "moving"
        }
    },
    movingBegin: function() {
        CALL("showNextQuestion");
    },
    moving: function() {
        var sprite = this.entity.sprite,
            screen = this.entity.screen;
        if (sprite.x < screen.gameWidth) {
            sprite.x += this.moveSpeed;
            sprite.y -= (sprite.y - ((this.lane + 1) * (screen.gameHeight / (1 + this.laneCount)))) * this.laneChangeSpeed;
        } else {
            this.entity.state = "exit"
        }
    },
    onClickScreen: function() {
        if (this.entity.state != "moving")
            return;
        var d = this.entity.screen.game.input.y - this.entity.sprite.y;
        if (Math.abs(d) < 50)
            return;
        d = d > 0 ? 1 : -1;
        this.lane = (this.lane + d) % this.laneCount;
        if (this.lane < 0)
            this.lane = 0;
    },
    exitBegin: function() {
        CALL("pickOption", this.lane);
    },
    preFeedback: function() {
        this.entity.sprite.x += this.moveSpeed;
    }
});
;
/* ../screens/esteira/Belt.js */
CLAZZ("screens.esteira.Belt", {
    "EXTENDS": "components.Component",
    options: 4,
    overlap: 10,
    speed: 3,
    foreWidth: 0,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        var game = this.entity.screen.game;
        var fore = game.make.image(0, 0, this.entity.belt_fore);
        var back = game.make.image(0, 0, this.entity.belt_back);
        var overlap = this.overlap || 0;
        var maxX = this.entity.screen.gameWidth + fore.width;
        var deltaY = this.entity.screen.gameHeight / (this.options + 1);
        this.foreWidth = fore.width;
        var bmp = this.entity.screen.game.make.bitmapData(maxX, this.entity.screen.gameHeight);
        for (var i = 1; i <= this.options; ++i) {
            for (var x = 0; x < maxX; x += fore.width - overlap) {
                bmp.draw(fore, x, i * deltaY);
            }
        }
        this.entity.sprite = game.add.image(0, 0, bmp);
    },
    onTick: function() {
        var x = this.entity.sprite.x;
        x -= this.speed;
        while (x < -this.foreWidth + this.overlap)
            x += this.foreWidth - this.overlap;
        this.entity.sprite.x = x;
    },
    getLaneCount: function() {
        return this.options;
    }
});
;
/* ../screens/queda/Queda.js */
(function() {
    CLAZZ("screens.queda.Queda", {
        EXTENDS: "framework.Phaser",
        DYNAMIC: true,
        items: null,
        currentItem: "",
        itemQueue: null,
        correctCount: 0,
        wrongCount: 0,
        basketCount: 5,
        basketPlaces: null,
        state: "",
        maxWidth: 0,
        STATIC: {
            requires: ["components/AutoPos.js", "components/AutoScale.js", "components/Tween.js"]
        },
        create: function() {
            SUPER();
            this.itemQueue = Object.keys(this.items);
            this.state = "gameplay";
            if (this.obstacles.pipe) {
                this.addEntity({
                    "class": "Pipe"
                });
            }
            CALL("nextItem");
        },
        hasNextItem: function() {
            return !(!this.itemQueue || this.itemQueue.length == 0);
        },
        randomize: function(arr) {
            for (var i = 0, w; w = arr[i]; ++i)
            {
                var j = Math.floor(Math.random() * arr.length);
                arr[i] = arr[j];
                arr[j] = w;
            }
        },
        nextItem: function() {
            CALL("onEndRound");
            if (!this.hasNextItem())
                return this.endGame();
            this.randomize(this.itemQueue);
            this.currentItem = this.itemQueue.pop();
            var item = this.items[this.currentItem];
            var correct = CALL("getBasketSettings", {
                text: item.correct
            });
            var wrong = CALL("pollBasketSettings", []);
            if (!correct || !wrong)
                return this.endGame();
            var basketCount = Math.min(wrong.length, this.basketCount);
            if (this.sortBoxes) {
                var index = wrong.indexOf(correct);
                if (index > -1)
                    wrong.splice(index, 1);
                this.randomize(wrong);
            }
            var baskets = [];
            var places = this.basketPlaces[basketCount];
            if (!this.sortBoxes)
            {
                for (var i = 0; i < places.length && i < wrong.length; ++i) {
                    baskets[i] = this.addEntity(MAR.merge(wrong[i].__data, this.getClass("Basket"), places[i], {
                        "isCorrect": correct == wrong[i]
                    }));
                }
            }
            else
            {
                delete correct.__data.sprite;
                baskets[0] = this.addEntity(MAR.merge(correct.__data, this.getClass("Basket"), places[0], {
                    "isCorrect": true
                }));
                for (var i = 1; i < places.length && i <= wrong.length; ++i) {
                    delete wrong[i - 1].__data.sprite;
                    baskets[i] = this.addEntity(MAR.mergeTo(wrong[i - 1].__data, this.getClass("Basket"), places[i], {
                        "isCorrect": false
                    }));
                }
                var b = baskets[Math.floor(Math.random() * baskets.length)];
                baskets[0].swapCoords(b);
            }
            this.addEntity({
                "class": "Item",
                "sprite": "img_" + this.currentItem,
                "sprite.x": -100,
                "sprite.y": -100,
                "maxWidth": this.maxWidth,
                "word": item.correct
            });
            this.world.bringToTop(this.entities.Monster.sprite);
            this.world.bringToTop(this.entities.fireworks.sprite);
        },
        onTimeEnded: function() {
            this.endGame();
        },
        onWrong: function() {
            this.wrongCount++;
        },
        onRight: function() {
            this.correctCount++;
        },
        onEndGame: function() {
            SOL.vars.rightAnswers = (SOL.vars.rightAnswers || 0) + this.correctCount;
            SOL.vars.wrongAnswers = (SOL.vars.wrongAnswers || 0) + this.wrongCount;
            console.log("GAVE OVER!" + "\nRIGHT = " + SOL.vars.rightAnswers + "\nWRONG = " + SOL.vars.wrongAnswers);
        },
    });
})();
;
/* ../screens/queda/Pipe.js */

;
/* ../screens/queda/Item.js */
CLAZZ("screens.queda.Item", {
    EXTENDS: "framework.Phaser.Entity",
    DYNAMIC: true,
    word: "",
    state: "followTo",
    tx: 0,
    ty: 0,
    rotation: 0,
    maxWidth: 0,
    bounceCount: 0,
    isCorrect: false,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.maxWidth = 120;
        this.sprite.scale.setTo(1.6);
        this.sprite.anchor.setTo(0.5, -0.08);
        if (this.sprite.width > this.maxWidth * 4) {
            var scale = (this.maxWidth * 4) / this.sprite.width;
            this.sprite.scale.setTo(Math.min(1.6, scale));
        }
    },
    dropItem: function() {
        if (this.state != "followTo" || this.sprite.x < 0)
            return;
        this.FollowTo.enabled = false;
        this.BallisticPhysics.setVelocity(this.FollowTo.follow.MoveTo.deltaX, this.FollowTo.follow.MoveTo.deltaY);
        this.state = "fly";
        this.sprite.anchor.setTo(0.5);
        this.sprite.y += this.sprite.height / 2;
        this.rotation = (Math.random() * 0.1) - 0.05;
        CALL("playAudio", "dropSound", false);
    },
    fly: function() {
        CALL("checkItemCollision", this.sprite);
        if (!this.sprite) {
            return;
        }
        this.sprite.rotation += this.rotation;
        if (this.sprite.scale.y >= 1 || this.sprite.width > this.maxWidth)
            this.sprite.scale.setTo(this.sprite.scale.y - 0.02);
        if (this.sprite.x >= this.screen.gameWidth || this.sprite.x <= 0) {
            this.BallisticPhysics.velX = -this.BallisticPhysics.velX;
        }
        if ((this.sprite.y + this.sprite.height / 2) >= this.screen.gameHeight) {
            this.bounceCount++;
            this.BallisticPhysics.velY = -Math.abs(this.BallisticPhysics.velY) * this.bounceFactor;
            CALL("playAudio", "hitSound", false);
            if (this.bounceCount >= 3) {
                this.sprite.alpha -= 0.3;
                if (this.sprite.alpha <= 0) {
                    this.screen.entities.feedback.sprite.x = this.sprite.x;
                    this.screen.entities.feedback.sprite.y = this.sprite.y - 70;
                    if (this.isCorrect) {
                        CALL("onRight", this.word);
                    } else {
                        CALL("onWrong", this.word);
                    }
                    this.state = "dead";
                }
            }
        }
    },
    onItemBounceOut: function(bounceRight) {
        var vx = Math.abs(this.BallisticPhysics.velX);
        if (bounceRight) {
            this.BallisticPhysics.velX = vx;
            this.rotation = 0.11;
        } else {
            this.BallisticPhysics.velX = -vx;
            this.rotation = -0.11;
        }
    },
    onItemBounceIn: function(bounceRight) {
        var vx = Math.abs(this.BallisticPhysics.velX);
        if (bounceRight) {
            this.BallisticPhysics.velX = vx;
            this.rotation = 0.11;
        } else {
            this.BallisticPhysics.velX = -vx;
            this.rotation = -0.11;
        }
    },
    itemInTheBox: function(isCorrect) {
        this.bounceFactor = 0.5;
        this.isCorrect = isCorrect;
    },
    nextItem: function() {
        this.destroy();
    }
});
;
/* ../screens/queda/Basket.js */
CLAZZ("screens.queda.Basket", {
    EXTENDS: "framework.Phaser.Entity",
    DYNAMIC: true,
    isCorrect: false,
    text: "",
    active: true,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.spriteBack = this.loadSprite(this.spriteBack);
        var group = game.add.group();
        group.add(this.sprite);
        if (this.tint)
            this.sprite.tint = this.spriteBack.tint = parseInt(this.tint.substr(1), 16);
        if (this.img) {
            var img = this.loadSprite(this.img);
            var proportion = img.width / img.height;
            if (img.height > 100) {
                img.height = 100;
                img.width = 100 * proportion
            }
            img.anchor.setTo(0.5, 0.3);
            group.add(img);
        }
        var label = this.label = game.add.text(0, 0, this.text);
        label.anchor.setTo(0.5, 0);
        if (this.hideText)
            label.visible = false;
        label.setStyle({
            font: this.font || SOL.defaultFont,
            fontSize: this.size || 20,
            fill: this.color || "#fff",
            stroke: this.stroke || "#000",
            strokeThickness: this.strokeThickness || 0,
            wordWrap: this.wordWrap || true,
            wordWrapWidth: (this.area && this.area.width) || this.wordWrapWidth || 700,
            align: this.align || "center"
        });
        this.spriteBack.x = group.x = this.x;
        this.spriteBack.y = group.y = this.y;
        this.spriteBack.anchor.setTo(0.5);
        this.sprite.x = 0;
        this.sprite.y = 0;
        this.sprite = group;
        group.add(label);
    },
    swapCoords: function(other) {
        SUPER(other);
        this.spriteBack.x = this.sprite.x;
        this.spriteBack.y = this.sprite.y;
        if (other.spriteBack) {
            other.spriteBack.x = other.sprite.x;
            other.spriteBack.y = other.sprite.y;
        }
    },
    onEndRound: function() {
        this.destroy();
    },
    onItemCreated: function() {
        this.screen.world.bringToTop(this.sprite);
    },
    destroy: function() {
        if (this.spriteBack)
            this.spriteBack.destroy();
        SUPER();
    },
    checkItemCollision: function(itemSprite) {
        var hitBasketY = (itemSprite.y >= (this.sprite.y - this.sprite.height));
        if (hitBasketY)
        {
            if ((itemSprite.x >= (this.sprite.x - this.sprite.width / 2)) && (itemSprite.x <= (this.sprite.x + this.sprite.width / 2))) {
                if ((itemSprite.x - itemSprite.width / 2) <= (this.sprite.x - this.sprite.width / 2)) {
                    CALL("onItemBounceIn", true);
                }
                else if ((itemSprite.x + itemSprite.width / 2) >= (this.sprite.x + this.sprite.width / 2)) {
                    CALL("onItemBounceIn", false);
                }
                CALL("itemInTheBox", this.isCorrect);
                this.screen.entities.fireworks.sprite.x = this.sprite.x;
                this.screen.entities.fireworks.sprite.y = this.sprite.y - 100;
            }
            else if (((itemSprite.x - itemSprite.width / 2) >= (this.sprite.x - this.sprite.width / 2)) && ((itemSprite.x - itemSprite.width / 2) <= (this.sprite.x + this.sprite.width / 2))) {
                CALL("onItemBounceOut", true);
            }
            else if (((itemSprite.x + itemSprite.width / 2) >= (this.sprite.x - this.sprite.width / 2)) && ((itemSprite.x + itemSprite.width / 2) <= (this.sprite.x + this.sprite.width / 2))) {
                CALL("onItemBounceOut", false);
            }
        }
    }
});
;
/* ../screens/memoria/Memoria.js */
(function() {
    var Balloon = CLAZZ({
        EXTENDS: "framework.Phaser.Entity",
        velX: 0,
        velY: 0,
        state: "following",
        followSprite: null,
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, followSprite) {
            SUPER(screen, {
                "sprite": "waterBalloon",
                "x": followSprite.x,
                "y": followSprite.y,
                "sprite.anchor.x": 0.5,
                "sprite.anchor.y": 0.5,
                components: [{
                    CLAZZ: "components.BallisticPhysics"
                }]
            });
            this.followSprite = followSprite;
            this.sprite.parent.swapChildren(this.sprite, this.followSprite);
        },
        following: function() {
            this.sprite.x = this.followSprite.x;
            this.sprite.y = this.followSprite.y;
        },
        fly: function() {
            this.sprite.scale.x *= 0.95;
            this.sprite.scale.y *= 0.95;
            if (this.sprite.scale.x <= 0.5)
                this.state = "dead";
        },
        deadBegin: function() {
            var hit = this.getCollision();
            if (hit) {
                if (hit.onHit)
                    hit.onHit(this);
                CALL("playAudio", "hitSound");
                CALL("onBalloonHit" + hit.constructor.NAME, this, hit);
                CALL("onBalloonHit", this, hit);
            }
            else
                CALL("onBalloonMiss");
            var splash = game.add.image(this.sprite.x, this.sprite.y, 'splash');
            this.sprite.parent.swapChildren(splash, this.sprite);
            splash.rotation = Math.random() * 180;
            splash.anchor.setTo(0.5, 0.5);
            this.sprite.destroy();
            this.sprite = splash;
            CALL("onSplash");
        },
        dead: function() {
            if (this.sprite.alpha > 0.1)
                this.sprite.alpha *= 0.9;
            else
                this.destroy();
        },
        onDragStop: function(followSprite, dx, dy) {
            if (this.followSprite != followSprite)
                return;
            this.sprite.parent.setChildIndex(this.sprite, SOL.screen.balloonTargetZIndex);
            this.state = "fly";
            this.setVelocity(dx, dy);
        }
    });
    CLAZZ("screens.memoria.Memoria", {
        EXTENDS: "framework.Phaser",
        waterBalloonCount: 399,
        balloonTargetZIndex: 2,
        groundHeight: 600,
        randomizeCards: true,
        selectedCards: [],
        groups: {},
        DYNAMIC: true,
        STATIC: {
            requires: ["components/FlyAI.js", "components/Spin.js", "components/BallisticPhysics.js", "components/Bounce.js"]
        },
        CONSTRUCTOR: function(data) {
            SUPER(data);
            this.groups = {};
            this.selectedCards = [];
        },
        create: function() {
            SUPER();
            if (!this.editor && this.randomizeCards)
            {
                var cards = CALL("pollCard", []);
                if (cards) {
                    for (var i = 0, card; card = cards[i]; ++i)
                        cards[Math.floor(Math.random() * cards.length)].swapCoords(card);
                }
            }
        },
        addGroups: function(group) {
            if (!group)
                return;
            this.groups[group] = (this.groups[group] || 0) + 1;
        },
        onHitCard: function(card) {
            this.selectedCards.push(card);
            if (!card.group && this.selectedCards.length >= 2)
                this.onWrongSequence();
            if (this.selectedCards.length >= this.groups[card.group])
                this.onVerify();
            if (card.cardSound)
                CALL("playAudio", card.cardSound);
        },
        onVerify: function() {
            for (var i = 0; i < this.selectedCards.length; i++) {
                if (i == 0) {
                    var selectedGroup = this.selectedCards[i].group;
                    continue;
                }
                if (this.selectedCards[i].group != selectedGroup)
                    return this.onWrongSequence();
            }
            this.onRightSequence();
        },
        onRightSequence: function() {
            for (var i = 0; i < this.selectedCards.length; i++) {
                if (i == 0) {
                    var selectedGroup = this.selectedCards[i].group;
                }
                this.setTimeout(this.selectedCards[i].hitRightSequence, 2000 + i * 200);
            }
            this.selectedCards = [];
            delete this.groups[selectedGroup];
            SOL.vars.rightAnswers = SOL.vars.rightAnswers || 0 + 1;
            if (!Object.keys(this.groups).length)
                this.endGame();
        },
        onWrongSequence: function() {
            for (var i = 0; i < this.selectedCards.length; i++) {
                this.selectedCards[i].hitWrongSequence();
                this.setTimeout(this.selectedCards[i].hideCard, 2000 + i * 200);
            }
            SOL.vars.wrongAnswers = SOL.vars.wrongAnswers || 0 + 1;
            this.selectedCards = [];
        },
        onDragStart: function(sprite) {
            if (!this.waterBalloonCount)
                return;
            this.waterBalloonCount--;
            CALL("setBalloonCount", this.waterBalloonCount);
            this.addEntity({
                "class": "Balloon"
            });
        },
        onShowHint: function() {
            var card = CALL("getCard", {
                state: "",
                isCorrect: true
            }, []);
            if (card)
                this.setTimeout(card.showHint.bind(card), 500);
        },
        onSplash: function() {
            if (this.waterBalloonCount == 0) {
                if (Object.keys(this.groups).length)
                    SOL.vars.wrongAnswers = SOL.vars.wrongAnswers || 0 + Object.keys(this.groups).length;
                this.endGame();
            }
        },
        onTimeEnded: function() {
            this.endGame();
        }
    });
})();
;
/* ../screens/memoria/Slingshot.js */
CLAZZ("screens.tiroV2.Slingshot", {
    EXTENDS: "framework.Phaser.Entity",
    id: "slingshot",
    lineSprite: null,
    width: 100,
    startX: 0,
    startY: 0,
    lineColor: '#9D3521',
    lineBMP: null,
    lineLeftOffsetX: -20,
    lineRightOffsetX: 20,
    lineWidth: 10,
    power: 1,
    DYNAMIC: true,
    ballistics: null,
    timeoutHandle: null,
    CONSTRUCTOR: function(screen, data) {
        this.lineBMP = game.add.bitmapData(game.world.width, game.world.height);
        this.lineSprite = game.add.image(0, 0, this.lineBMP);
        SOL.screen.__pool.silence("targetPos");
        this.ballistics = new Phaser.Point();
        (data.components = data.components || []).push({
            CLAZZ: "components.BallisticPhysics",
            target: this.ballistics
        });
        SUPER(screen, data);
        this.startX = this.sprite.x;
        this.startY = this.sprite.y;
        this.sprite.inputEnabled = true;
        this.sprite.input.enableDrag(false);
        this.sprite.events.onDragStop.add(this.__onDragStop.bind(this));
        this.sprite.events.onDragStart.add(this.__onDragStart.bind(this));
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    velX: 0,
    velY: 0,
    isDragging: false,
    onEndGame: function() {
        this.sprite.inputEnabled = false;
    },
    resetTimeout: function() {
        SOL.screen.clearInterval(this.timeoutHandle);
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    __onDragStart: function() {
        this.isDragging = true;
        CALL("onDragStart", this.sprite);
        this.resetTimeout();
    },
    __onDragStop: function() {
        this.isDragging = false;
        CALL("onDragStop", this.sprite, (this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
        this.resetTimeout();
    },
    onPostTick: function() {
        if (!this.isDragging)
        {
            this.velX += this.startX - this.sprite.x;
            this.velY += this.startY - this.sprite.y;
            this.velX *= 0.8;
            this.velY *= 0.8;
            this.sprite.x += this.velX;
            this.sprite.y += this.velY;
        } else {
            this.velX = 0;
            this.velY = 0;
            this.resetTimeout();
        }
        this.lineBMP.clear();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineLeftOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX - this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineRightOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX + this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        var stepCount = 12;
        if (this.isDragging) {
            this.lineBMP.ctx.beginPath();
            this.ballistics.x = this.sprite.x;
            this.ballistics.y = this.sprite.y;
            var move = true;
            this.setVelocity((this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
            for (var i = 0; i < stepCount; ++i) {
                this.fly();
                this.lineBMP.ctx.lineWidth = (1 - i / stepCount) * 4;
                this.lineBMP.ctx.strokeStyle = "rgba(0,0,0," + (1 - i / stepCount) * 0.8 + ")";
                if (move)
                    this.lineBMP.ctx.moveTo(this.ballistics.x, this.ballistics.y);
                else
                    this.lineBMP.ctx.lineTo(this.ballistics.x, this.ballistics.y);
                move = !move;
                this.lineBMP.ctx.stroke();
            }
            CALL("targetPos", this.ballistics.x, this.ballistics.y)
            this.lineBMP.ctx.closePath();
        }
        this.lineBMP.render();
    }
});
;
/* ../screens/generic/Generic.js */
(function() {
    CLAZZ("screens.generic.Generic", {
        EXTENDS: "framework.Phaser",
        update: function() {
            SUPER();
            if (!framework.Phaser.lastScreen)
                return;
            framework.Phaser.lastScreen.style.width = game.canvas.style.width;
            framework.Phaser.lastScreen.style.height = game.canvas.style.height;
            framework.Phaser.lastScreen.style.marginLeft = game.canvas.style.marginLeft;
            framework.Phaser.lastScreen.style.marginTop = game.canvas.style.marginTop;
            framework.Phaser.lastScreen.style.marginBottom = game.canvas.style.marginBottom;
        }
    });
})();
;
/* ../screens/generic/LevelClear.js */
CLAZZ("screens.generic.LevelClear", {
    EXTENDS: "framework.Phaser",
    DYNAMIC: true,
    gradeA: 10,
    gradeB: 7.5,
    gradeC: 5,
    _grade: 0,
    timeSpend: null,
    levelName: "",
    levelId: "",
    performance: {},
    create: function() {
        SUPER();
        var total = (SOL.vars.rightAnswers || 0) + (SOL.vars.wrongAnswers || 0);
        var right = (SOL.vars.rightAnswers || 0);
        if (total != 0)
            this._grade = (right / total + ((SOL.vars.timeBonus || 0) * 0.1)) * 10;
        else if ("timeBonus" in SOL.vars) {
            if (SOL.vars.timeBonus > 0)
                this._grade = (this.gradeA * 1.3 - this.gradeC) * SOL.vars.timeBonus + this.gradeC;
        }
        if (SOL.vars.timeSpend) {
            var sec = Math.floor(SOL.vars.timeSpend / 1000) % 60;
            if (sec < 10)
                sec = "0" + sec;
            var min = Math.floor(Math.floor(SOL.vars.timeSpend / 1000) / 60);
            this.timeSpend = min + ":" + sec;
        }
        var starCount = 0;
        if (this._grade > this.gradeC)
            starCount = 1;
        if (this._grade >= this.gradeB)
            starCount++;
        if (this._grade >= this.gradeA)
            starCount++;
        this.performance = {
            id: SOL.vars.levelUSID,
            grade: starCount,
            time: SOL.vars.timeSpend,
            points: Math.floor(this._grade * 10)
        }
        if (SOL.vars.levelName)
            this.performance.firstLevel = SOL.vars.levelUSID;
        var existingData;
        if (SOL.vars.gamePerformance) {
            SOL.vars.gamePerformance.forEach(function(performance, index) {
                if (performance.id == SOL.vars.levelUSID)
                    SOL.vars.gamePerformance.splice(index, 1);
            });
            SOL.vars.gamePerformance.push(this.performance);
            existingData = SOL.vars.gamePerformance
        }
        this.levelName = SOL.vars.levelUSID || SOL.vars.levelName || SOL.prevScreenName;
        CALL("updateGrade", this._grade);
        SOL.vars = {
            persist: SOL.vars.persist
        };
        SOL.vars.gamePerformance = existingData || [this.performance];
        CALL("killAllSounds");
        if (this.levelName)
            CALL("loadData", "highscore_" + this.levelName, this.updateLevel.bind(this));
        if (this._grade < this.gradeC)
            CALL("failed", this._grade);
        else
            CALL("passed", this._grade);
    },
    updateLevel: function(levelData) {
        levelData = levelData || {};
        if (!levelData.grade || this._grade > levelData.grade) {
            levelData.grade = this._grade;
            CALL("storeData", "highscore_" + this.levelName, levelData);
        }
    },
    activateStars: function(grade) {
        if (this._grade <= this.gradeC)
            CALL("showFailedUI");
        else {
            var starCount = 0;
            if (this._grade > this.gradeC) {
                CALL("activateStar1");
                starCount++;
            }
            if (this._grade >= this.gradeB) {
                starCount++;
                CALL("activateStar2");
            }
            if (this._grade >= this.gradeA) {
                starCount++;
                CALL("activateStar3");
            }
            CALL("starSound" + starCount);
            if (this.readStarCount !== false) {
                if (starCount == 1)
                    this.say("Parabéns! Você ganhou uma estrela!");
                if (starCount == 2)
                    this.say("Parabéns! Você ganhou duas estrelas!");
                if (starCount == 3)
                    this.say("Parabéns! Você ganhou três estrelas!");
            }
            CALL("showPassedUI");
        }
    }
});
;
/* ../screens/generic/GameClear.js */
CLAZZ("screens.generic.GameClear", {
    EXTENDS: "framework.Phaser",
    DYNAMIC: true,
    stars: 0,
    totalTime: 0,
    points: 0,
    firstLevel: null,
    create: function() {
        SUPER();
        CALL("onGameCleared");
        var points = 0;
        if (SOL.vars.gamePerformance) {
            var THIS = this;
            SOL.vars.gamePerformance.forEach(function(result) {
                THIS.points += parseInt(result.points);
                THIS.totalTime += parseInt(result.time || "0");
                THIS.stars += parseInt(result.grade);
                if (!THIS.firstLevel && result.firstLevel)
                    THIS.firstLevel = result.firstLevel;
            });
            var sec = Math.floor(this.totalTime / 1000) % 60 || "0";
            if (sec < 10)
                sec = "0" + sec;
            var min = Math.floor(Math.floor(this.totalTime / 1000) / 60) || "00";
            this.totalTime = min + ":" + sec;
            points = this.points / SOL.vars.gamePerformance.length;
        }
        CALL("setStats");
        CALL("showPassedUI");
        if (points < 50)
            CALL("onGetNoMedal");
        else if (points <= 65)
            CALL("onGetBronzeMedal");
        else if (points <= 90)
            CALL("onGetSilverMedal");
        else if (points > 90)
            CALL("onGetGoldMedal");
        else
            CALL("onGetNoMedal");
        SOL.vars = {};
    }
});
;
/* ../screens/generic/LevelSelect.js */
CLAZZ("screens.generic.LevelSelect", {
    EXTENDS: "framework.Phaser",
    STATIC: {
        getPreloadList: function(data) {
            var ret = {};
            var num = 0;
            for (var i = 0, screen; screen = SOL.screens.screens[i]; ++i) {
                if ((screen.levelSelect !== true && screen.levelSelect != data.name))
                    continue;
                if (screen.icon)
                    ret['icon' + screen.GUID] = screen.icon;
                num++;
            }
            return ret;
        }
    },
    create: function() {
        SUPER();
        var num = 0;
        for (var i = 0, screen; screen = SOL.screens.screens[i]; ++i) {
            if (screen.levelSelect === true || screen.levelSelect == this.name)
                CALL("loadData", "highscore_" + (screen.name || screen.GUID), this.addLevel.bind(this, screen, num++));
        }
    },
    addLevel: function(screen, num, data) {
        var grade;
        if (!data)
            grade = "NEW";
        else if (data.grade >= 10)
            grade = "A";
        else if (data.grade >= 7.5)
            grade = "B";
        else if (data.grade >= 5)
            grade = "C";
        else
            grade = "F";
        this.addEntity({
            "class": "Level",
            "hasPlayed": !!data,
            "grade": grade,
            "data": data || {},
            "levelName": screen.name || "Level " + (num + 1),
            "number": num,
            "icon": 'icon' + num,
            "id": "Level" + num,
            "levelGUID": screen.GUID
        });
    }
});
;
/* ../screens/editor/HistoryElement.js */
CLAZZ("screens.editor.HistoryElement", {
    INJECT: ["parent", "data", "context"],
    el: null,
    DOM: null,
    CONSTRUCTOR: function() {
        this.el = MAR.create("div", this.parent, {
            id: "container",
            style: {
                marginBottom: "10px"
            }
        }, [["img", {
            src: "resources/thumb_" + this.data.id + ".png",
            style: {
                width: "100%"
            }
        }], ["div", {
            text: this.data.timestamp
        }]]);
        this.DOM = MAR.index(this.el, null, this);
    },
    IMG: {
        error: function() {
            this.el.style.display = "none";
        }
    }
});
;
/* ../screens/escaladaV2/Slot.js */
CLAZZ("screens.escaladaV2.Slot", {
    EXTENDS: "framework.Phaser.CollidableEntity",
    DYNAMIC: true,
    text: "",
    block: null,
    pos: 0,
    height: 50,
    width: 50,
    activateSlot: function(pos) {
        if (pos !== undefined && pos != this.pos)
            return;
        if (!this.text || this.block || this.sprite.visible)
            return;
        this.collisionEnabled = this.sprite.visible = true;
        this.sprite.scale.setTo(0);
        this.sprite.alpha = 0;
        this.setAutoScaleEnabled(true);
        this.setTweenEnabled(true);
    },
    hasWrongSlots: function() {
        if (this.block && this.block.text != this.text)
            return true;
        return undefined;
    },
    hasEmptySlots: function() {
        if (this.sprite.visible)
            return true;
        return undefined;
    },
    resetBlocks: function(word, row, allActive) {
        game.world.bringToTop(this.sprite);
        this.block = null;
        this.text = word[this.pos];
        this.activateSlot();
        this.collisionEnabled = this.sprite.visible = allActive && this.pos < word.length;
        var y = this.y - row * this.height;
        var x = this.x - (word.length * this.width / 2) + this.pos * this.width;
        if (this.sprite.x == this.x)
            this.sprite.x = x;
        if (this.sprite.y == this.y)
            this.sprite.y = y;
        this.setAutoPosTarget(x, y);
    },
    setBlock: function(block, permanent) {
        if (this.block && this.block != block)
            this.block.onReplace();
        if (block) {
            block.setIndex(this.sprite.parent.getChildIndex(this.sprite) + 1);
            CALL("activateSlot", this.pos + 1);
        }
        if (!this.screen.editor)
            this.setSelection(!!block);
        this.collisionEnabled = !permanent;
        this.block = block;
        this.sprite.visible = block == null;
        this.snapToAutoPosTarget();
    }
});
;
/* ../screens/escaladaV2/Escalada.js */
CLAZZ("screens.escaladaV2.Escalada", {
    EXTENDS: "framework.Phaser",
    word: "",
    words: null,
    wordQueue: null,
    randomizeBlocks: true,
    blockData: null,
    correctCount: 0,
    wrongCount: 0,
    level: 5,
    tipsLeft: 0,
    DYNAMIC: true,
    STATIC: {
        requires: ["components/AutoPos.js", "components/AutoScale.js", "components/Tween.js"]
    },
    create: function() {
        SUPER();
        if (!this.tipsLeft)
            CALL("disableHints");
        this.wordQueue = Object.keys(this.words).reverse();
    },
    introComplete: function() {
        this.nextWord();
    },
    getAccumulated: function() {
        var acc = "";
        var slots = CALL("pollSlot", []);
        for (var i = 0, slot; slot = slots[i]; ++i)
            if (slot.block)
                acc += slot.block.text;
        return acc;
    },
    randomize: function(arr) {
        for (var i = 0, w; w = arr[i]; ++i)
        {
            var j = Math.floor(Math.random() * arr.length);
            arr[i] = arr[j];
            arr[j] = w;
        }
    },
    onPlaceBlock: function() {
        if (CALL("hasEmptySlots"))
            return;
        if (CALL("hasWrongSlots"))
            CALL("onWrong", this.word);
        else {
            CALL("onRight", this.word);
            if (this.hasNextWord())
                CALL("onNextWord");
            else
                CALL("onReachTop");
        }
    },
    onWrong: function() {
        this.wrongCount++;
    },
    onRight: function(word) {
        this.correctCount++;
        this.nextWord();
        this.say(word);
    },
    onEndFeedback: function() {
        if (this.feedbackAction)
            this.setTimeout(this.feedbackAction, 10, this);
        this.feedbackAction = null;
    },
    onEndGame: function() {
        SOL.vars.rightAnswers = (SOL.vars.rightAnswers || 0) + this.correctCount;
        SOL.vars.wrongAnswers = (SOL.vars.wrongAnswers || 0) + this.wrongCount + (this.level - this.correctCount);
    },
    hasNextWord: function() {
        return !(!this.wordQueue || this.correctCount == this.level);
    },
    nextWord: function() {
        if (!this.wordQueue || !this.wordQueue.length)
            this.wordQueue = Object.keys(this.words);
        if (this.correctCount == this.level)
            return this.endGame();
        if (this.randomON || this.randomON === undefined)
        {
            for (var i = 0; i < 10 && this.wordQueue[this.wordQueue.length - 1] == this.word || i == 0; ++i)
                this.randomize(this.wordQueue);
        }
        this.word = this.wordQueue.pop();
        var prop = this.words[this.word] || {};
        this.word = this.word.trim();
        var placed = undefined;
        if ("placed" in prop && prop.placed.length)
            placed = prop.placed.split("");
        CALL("setWord", this.word, prop);
        var count = (CALL("pollSlot", []) || []).length;
        while (count < this.word.length)
            this.addEntity({
                "class": "Slot",
                text: this.word[i],
                pos: count++
            });
        CALL("resetBlocks", this.word, this.correctCount, !!placed);
        var wrong = prop.wrong || "";
        var placedCount = 0;
        for (var i = 0; i < this.word.length; ++i) {
            if (placed && placed[i] == this.word[i])
                placedCount++;
        }
        var overflow = this.blockData.length - (this.word.length - placedCount + wrong.length);
        if (overflow < 0) {
            wrong = wrong.substr(0, wrong.length + overflow);
        }
        var letters = (this.word + wrong).split("");
        this.randomize(letters);
        var bdi = 0;
        for (var i = 0; i < letters.length; ++i) {
            var pos = null;
            if (placed) {
                pos = placed.indexOf(letters[i]);
                if (pos != -1) {
                    placed[pos] = "";
                } else
                    pos = null;
            }
            this.addEntity(MAR.mergeTo({
                slot: pos,
                text: letters[i]
            }, this.blockData[bdi] || this.blockData[0]));
            if (pos === null)
                bdi++;
        }
        if (!placed)
            CALL("activateSlot", 0);
    },
    showHint: function() {
        this.tipsLeft--;
        if (this.tipsLeft <= 0)
            CALL("disableHints");
        var slots = [];
        CALL("pollSlot", slots);
        var answer = null;
        var firstEmptySlot = null;
        for (var i = 0, slot; slot = slots[i]; ++i) {
            if (!firstEmptySlot && slot.hasEmptySlots())
                firstEmptySlot = slot;
            if (slot.hasWrongSlots()) {
                answer = [slot.block];
                break;
            }
        }
        if (!answer && firstEmptySlot)
            answer = [firstEmptySlot, CALL("getBlock", {
                text: firstEmptySlot.text,
                slot: null
            })];
        for (var k in answer) {
            if (answer[k] && typeof answer[k].activateHint == "function")
                answer[k].activateHint();
        }
    },
    onTimeEnded: function() {
        this.endGame();
    }
});
;
/* ../screens/escaladaV2/Display.js */
CLAZZ("screens.escaladaV2.Display", {
    EXTENDS: "framework.Phaser.Entity",
    DYNAMIC: true,
    index: 0,
    maxWidth: 230,
    maxHeight: 156,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.index = game.world.children.length;
    },
    setWord: function(word, props) {
        if (this.sprite)
            this.sprite.destroy();
        if (!props.question && SOL.assets['img_' + word]) {
            var screenData = this.screen.__data;
            var text = screenData.imgTitles && screenData.imgTitles[screenData.assets['img_' + word]];
            this.sprite = game.add.sprite(this.x, this.y, SOL.assets['img_' + word]);
            this.sprite.anchor.setTo(0.5);
            this.sprite.inputEnabled = true;
            this.sprite.events.onInputDown.add(this.screen.say.bind(this, text, null));
            var scaleW = this.maxWidth / this.sprite.width;
            var scaleH = this.maxHeight / this.sprite.height;
            this.sprite.scale.setTo(Math.min(1, scaleW, scaleH));
            game.world.setChildIndex(this.sprite, this.index);
        }
    }
});
;
/* ../screens/escaladaV2/Block.js */
CLAZZ("screens.escaladaV2.Block", {
    EXTENDS: "framework.Phaser.Entity",
    text: "",
    sprite: null,
    label: null,
    state: "goBack",
    startX: 0,
    startY: 0,
    labelScale: 1,
    slot: null,
    jumped: false,
    DYNAMIC: true,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.sprite.anchor.setTo(0.5, 0.5);
        var label = this.label = game.add.text(0, 0, this.text);
        label.anchor.setTo(0.7, 0.5);
        if (this.slot === null) {
            this.sprite.inputEnabled = true;
            this.sprite.input.enableDrag(false);
            this.sprite.events.onInputDown.add(this.onInputDown.bind(this));
            this.startX = this.x;
            this.startY = this.y;
            this.sprite.events.onDragUpdate.add(this.onDrag.bind(this));
            if (!this.screen.easyMode)
                this.sprite.events.onDragStop.add(this.onDragStop.bind(this));
        } else {
            var slot = CALL("getSlot", {
                "pos": this.slot
            });
            this.addToSlot(slot, true);
        }
    },
    destroy: function() {
        this.label.destroy();
        SUPER();
    },
    onDrag: function() {
        this.onPostTick();
    },
    onDragStop: function()
    {
        if (!this.class || this.class != "Block")
            return;
        var hit = this.getCollision(this.label);
        if (hit)
            this.addToSlot(hit);
        else {
            this.state = "goBack";
            CALL("onReleaseBlock");
        }
    },
    addToSlot: function(slot, permanent) {
        slot.setBlock(this, permanent);
        this.slot = slot;
        this.state = "goSlot";
    },
    onInputDown: function() {
        if (this.slot) {
            this.slot.setBlock(null);
            this.slot = null;
        }
        this.state = "drag";
    },
    bringToTop: function() {
        this.setIndex(game.world.children.length - 2);
    },
    changeSprite: function(tmp) {
        var i = this.sprite.parent.children.indexOf(this.sprite);
        tmp.scale.setTo(this.sprite.scale.x, this.sprite.scale.y);
        tmp.anchor.setTo(this.sprite.anchor.x, this.sprite.anchor.y);
        tmp.position.setTo(this.sprite.position.x, this.sprite.position.y);
        this.sprite.destroy();
        this.sprite = tmp;
        this.setIndex(i);
    },
    disableInput: function() {
        try {} catch (e) {}
        this.sprite.inputEnabled = false;
    },
    setIndex: function(i) {
        this.sprite.parent.setChildIndex(this.sprite, i);
        this.label.parent.setChildIndex(this.label, i + 1);
    },
    resort: function() {
        this.label.parent.setChildIndex(this.label, this.sprite.parent.children.indexOf(this.sprite) + 1);
    },
    onWrong: function() {
        if (this.sprite.inputEnabled && this.slot && this.slot.hasWrongSlots())
            this.showWrongBlockFeedback();
    },
    showWrongBlockFeedback: function() {},
    resetBlocks: function() {
        this.slot = null;
        this.sprite.inputEnabled = false;
        if (this.state == "goSlot")
            return;
        this.state = "die";
    },
    onPostTick: function() {
        var label = this.label,
            sprite = this.sprite;
        label.x = sprite.x;
        label.y = sprite.y;
        label.alpha = sprite.alpha;
        label.scale.x = sprite.scale.x * this.labelScale;
        label.scale.y = sprite.scale.y * this.labelScale;
    },
    doneScaling: function() {
        if (this.state == "die")
            this.destroy();
    },
    doneTweening: function() {
        if (this.state == "goSlot")
            CALL("onPlaceBlock");
    },
    onReplace: function() {
        this.slot = null;
        this.state = "goBack";
    }
});
;
/* ../screens/tiroV2/Tiro.js */
(function() {
    var Balloon = CLAZZ({
        EXTENDS: "framework.Phaser.Entity",
        velX: 0,
        velY: 0,
        state: "following",
        followSprite: null,
        DYNAMIC: true,
        CONSTRUCTOR: function(screen, followSprite) {
            SUPER(screen, {
                "sprite": "waterBalloon",
                "x": followSprite.x,
                "y": followSprite.y,
                "sprite.anchor.x": 0.5,
                "sprite.anchor.y": 0.5,
                components: [{
                    CLAZZ: "components.BallisticPhysics"
                }]
            });
            this.followSprite = followSprite;
            this.sprite.parent.swapChildren(this.sprite, this.followSprite);
        },
        following: function() {
            this.sprite.x = this.followSprite.x;
            this.sprite.y = this.followSprite.y;
        },
        fly: function() {
            this.sprite.scale.x *= 0.95;
            this.sprite.scale.y *= 0.95;
            if (this.sprite.scale.x <= 0.5)
                this.state = "dead";
        },
        deadBegin: function() {
            var hit = this.getCollision();
            if (hit) {
                if (hit.onHit)
                    hit.onHit(this);
                CALL("playAudio", "hitSound");
                CALL("onBalloonHit" + hit.constructor.NAME, this, hit);
                CALL("onBalloonHit", this, hit);
            }
            else
                CALL("onBalloonMiss");
            var splash = game.add.image(this.sprite.x, this.sprite.y, 'splash');
            this.sprite.parent.swapChildren(splash, this.sprite);
            splash.rotation = Math.random() * 180;
            splash.anchor.setTo(0.5, 0.5);
            this.sprite.destroy();
            this.sprite = splash;
            CALL("onSplash");
        },
        dead: function() {
            if (this.sprite.alpha > 0.1)
                this.sprite.alpha *= 0.9;
            else
                this.destroy();
        },
        onDragStop: function(followSprite, dx, dy) {
            if (this.followSprite != followSprite)
                return;
            this.sprite.parent.setChildIndex(this.sprite, SOL.screen.balloonTargetZIndex);
            this.state = "fly";
            this.setVelocity(dx, dy);
        }
    });
    CLAZZ("screens.tiroV2.Tiro", {
        EXTENDS: "framework.Phaser",
        waterBalloonCount: 399,
        balloonTargetZIndex: 2,
        groundHeight: 600,
        randomizeCards: true,
        rightCardCount: 0,
        wrongCardCount: 0,
        DYNAMIC: true,
        STATIC: {
            requires: ["components/FlyAI.js", "components/Spin.js", "components/BallisticPhysics.js", "components/Bounce.js"]
        },
        create: function() {
            SUPER();
            if (!this.editor && this.randomizeCards)
            {
                var cards = CALL("pollCard", []);
                if (cards) {
                    for (var i = 0, card; card = cards[i]; ++i)
                        cards[Math.floor(Math.random() * cards.length)].swapCoords(card);
                }
            }
        },
        onAddRightCard: function() {
            this.rightCardCount++;
        },
        onAddWrongCard: function() {
            this.wrongCardCount++;
        },
        onRight: function(word) {
            this.rightCardCount--;
            if (this.rightCardCount == 0)
                this.endGame();
        },
        onDragStart: function(sprite) {
            if (!this.waterBalloonCount)
                return;
            this.waterBalloonCount--;
            CALL("setBalloonCount", this.waterBalloonCount);
            this.addEntity({
                "class": "Balloon"
            });
        },
        onShowHint: function() {
            var card = CALL("getCard", {
                state: "",
                isCorrect: true
            }, []);
            if (card)
                this.setTimeout(card.showHint.bind(card), 500);
            return;
        },
        onSplash: function() {
            if (this.waterBalloonCount == 0)
                this.endGame();
        },
        onTimeEnded: function() {
            this.endGame();
        }
    });
})();
;
/* ../screens/tiroV2/Monster.js */
CLAZZ("screens.tiroV2.Monster", {
    EXTENDS: "framework.Phaser.CollidableEntity",
    DYNAMIC: true,
    state: "fly",
    vx: 0,
    vy: 0,
    tx: 0,
    ty: 0,
    hitGround: false,
    friction: 0.02,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        if (!this.FlyAI)
            this.addComponent({
                "CLAZZ": "components.FlyAI"
            });
        this.tx = this.sprite.x;
        this.ty = this.sprite.y;
    },
    fall: function() {
        this.vy += 0.5;
        this.vx *= 1 - this.friction;
        this.vy *= 1 - this.friction;
        this.sprite.x += this.vx;
        this.sprite.y += this.vy;
        if (this.sprite.y > SOL.screen.groundHeight)
        {
            this.sprite.y = SOL.screen.groundHeight;
            if (!this.hitGround)
            {
                if (this.screen.showHint)
                    CALL("onShowHint");
                SOL.screen.shakeAmountY += 30;
                this.hitGround = true;
            }
            this.vx *= 0.9;
        }
        if (this.sprite.y == SOL.screen.groundHeight)
        {
            this.state = "spit";
            this.sprite.animations.play('getup');
            this.vy = -5;
        }
    },
    spit: function() {
        if (!this.sprite.animations.getAnimation('getup').isPlaying)
        {
            this.state = "fly";
            this.friction *= 0.5;
        }
    },
    flyBegin: function() {
        this.FlyAI.enabled = true;
        this.x = this.sprite.x;
        this.y = this.sprite.y;
        this.sprite.animations.play("fly");
    },
    flyEnd: function() {
        this.FlyAI.enabled = false;
    },
    onHit: function() {
        if (this.state != "fly")
            return;
        this.state = "fall";
        this.hitGround = false;
        this.sprite.animations.play('fall');
    }
});
;
/* ../screens/tiroV2/Slingshot.js */
CLAZZ("screens.tiroV2.Slingshot", {
    EXTENDS: "framework.Phaser.Entity",
    id: "slingshot",
    lineSprite: null,
    width: 100,
    startX: 0,
    startY: 0,
    lineColor: '#9D3521',
    lineBMP: null,
    lineLeftOffsetX: -20,
    lineRightOffsetX: 20,
    lineWidth: 10,
    power: 1,
    DYNAMIC: true,
    ballistics: null,
    timeoutHandle: null,
    CONSTRUCTOR: function(screen, data) {
        this.lineBMP = game.add.bitmapData(game.world.width, game.world.height);
        this.lineSprite = game.add.image(0, 0, this.lineBMP);
        SOL.screen.__pool.silence("targetPos");
        this.ballistics = new Phaser.Point();
        (data.components = data.components || []).push({
            CLAZZ: "components.BallisticPhysics",
            target: this.ballistics
        });
        SUPER(screen, data);
        this.startX = this.sprite.x;
        this.startY = this.sprite.y;
        this.sprite.inputEnabled = true;
        this.sprite.input.enableDrag(false);
        this.sprite.events.onDragStop.add(this.__onDragStop.bind(this));
        this.sprite.events.onDragStart.add(this.__onDragStart.bind(this));
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    velX: 0,
    velY: 0,
    isDragging: false,
    onEndGame: function() {
        this.sprite.inputEnabled = false;
    },
    resetTimeout: function() {
        SOL.screen.clearInterval(this.timeoutHandle);
        this.timeoutHandle = SOL.screen.setInterval("*showHowToPlayHelp()", 10000);
    },
    __onDragStart: function() {
        this.isDragging = true;
        CALL("onDragStart", this.sprite);
        this.resetTimeout();
    },
    __onDragStop: function() {
        this.isDragging = false;
        CALL("onDragStop", this.sprite, (this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
        this.resetTimeout();
    },
    onPostTick: function() {
        if (!this.isDragging)
        {
            this.velX += this.startX - this.sprite.x;
            this.velY += this.startY - this.sprite.y;
            this.velX *= 0.8;
            this.velY *= 0.8;
            this.sprite.x += this.velX;
            this.sprite.y += this.velY;
        } else {
            this.velX = 0;
            this.velY = 0;
            this.resetTimeout();
        }
        this.lineBMP.clear();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineLeftOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX - this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        this.lineBMP.ctx.beginPath();
        this.lineBMP.ctx.lineWidth = this.lineWidth;
        this.lineBMP.ctx.strokeStyle = this.lineColor;
        this.lineBMP.ctx.moveTo(this.sprite.x + this.lineRightOffsetX, this.sprite.y);
        this.lineBMP.ctx.lineTo(this.startX + this.width, this.startY);
        this.lineBMP.ctx.stroke();
        this.lineBMP.ctx.closePath();
        var stepCount = 12;
        if (this.isDragging) {
            this.lineBMP.ctx.beginPath();
            this.ballistics.x = this.sprite.x;
            this.ballistics.y = this.sprite.y;
            var move = true;
            this.setVelocity((this.startX - this.sprite.x) * this.power, (this.startY - this.sprite.y) * this.power);
            for (var i = 0; i < stepCount; ++i) {
                this.fly();
                this.lineBMP.ctx.lineWidth = (1 - i / stepCount) * 4;
                this.lineBMP.ctx.strokeStyle = "rgba(0,0,0," + (1 - i / stepCount) * 0.8 + ")";
                if (move)
                    this.lineBMP.ctx.moveTo(this.ballistics.x, this.ballistics.y);
                else
                    this.lineBMP.ctx.lineTo(this.ballistics.x, this.ballistics.y);
                move = !move;
                this.lineBMP.ctx.stroke();
            }
            CALL("targetPos", this.ballistics.x, this.ballistics.y)
            this.lineBMP.ctx.closePath();
        }
        this.lineBMP.render();
    }
});
;
/* ../screens/escalada/Slot.js */
CLAZZ("screens.escalada.Slot", {
    EXTENDS: "framework.Phaser.CollidableEntity",
    DYNAMIC: true,
    text: "",
    block: null,
    pos: 0,
    height: 50,
    width: 50,
    activateSlot: function(pos) {
        if (pos !== undefined && pos != this.pos)
            return;
        if (!this.text || this.block || this.sprite.visible)
            return;
        this.collisionEnabled = this.sprite.visible = true;
        this.sprite.scale.setTo(0);
        this.sprite.alpha = 0;
        this.setAutoScaleEnabled(true);
        this.setTweenEnabled(true);
    },
    hasWrongSlots: function() {
        if (this.block && this.block.text != this.text)
            return true;
        return undefined;
    },
    hasEmptySlots: function() {
        if (this.sprite.visible)
            return true;
        return undefined;
    },
    resetBlocks: function(word, row, allActive) {
        game.world.bringToTop(this.sprite);
        this.block = null;
        this.text = word[this.pos];
        this.activateSlot();
        this.collisionEnabled = this.sprite.visible = allActive && this.pos < word.length;
        var y = this.y - row * this.height;
        var x = this.x - (word.length * this.width / 2) + this.pos * this.width;
        if (this.sprite.x == this.x)
            this.sprite.x = x;
        if (this.sprite.y == this.y)
            this.sprite.y = y;
        this.setAutoPosTarget(x, y);
    },
    setBlock: function(block, permanent) {
        if (this.block && this.block != block)
            this.block.onReplace();
        if (block) {
            block.setIndex(this.sprite.parent.getChildIndex(this.sprite) + 1);
            CALL("activateSlot", this.pos + 1);
        }
        this.collisionEnabled = !permanent;
        this.block = block;
        this.sprite.visible = block == null;
        this.snapToAutoPosTarget();
    }
});
;
/* ../screens/escalada/Escalada.js */
CLAZZ("screens.escalada.Escalada", {
    EXTENDS: "framework.Phaser",
    word: "",
    words: null,
    wordQueue: null,
    randomizeBlocks: true,
    blockData: null,
    correctCount: 0,
    wrongCount: 0,
    level: 5,
    tipsLeft: 0,
    DYNAMIC: true,
    tincanEnabled: false,
    STATIC: {
        requires: ["components/AutoPos.js", "components/AutoScale.js", "components/Tween.js", "screens/tincanTest.js"]
    },
    create: function() {
        SUPER();
        if (!this.tipsLeft)
            CALL("disableHints");
        this.wordQueue = Object.keys(this.words);
        if (this.tincanEnabled) {
            if (tc_initTinCan("Renan", "renan@escribo.com.br")) {
                tc_sendStatement("Entrou2!");
            }
        }
    },
    introComplete: function() {
        this.nextWord();
    },
    getAccumulated: function() {
        var acc = "";
        var slots = CALL("pollSlot", []);
        for (var i = 0, slot; slot = slots[i]; ++i)
            if (slot.block)
                acc += slot.block.text;
        return acc;
    },
    randomize: function(arr) {
        for (var i = 0, w; w = arr[i]; ++i)
        {
            var j = Math.floor(Math.random() * arr.length);
            arr[i] = arr[j];
            arr[j] = w;
        }
    },
    onPlaceBlock: function() {
        if (CALL("hasEmptySlots"))
            return;
        if (CALL("hasWrongSlots"))
            CALL("onWrong", this.word);
        else {
            CALL("onRight", this.word);
            if (this.hasNextWord())
                CALL("onNextWord");
            else
                CALL("onReachTop");
        }
    },
    onWrong: function() {
        this.wrongCount++;
        if (this.tincanEnabled) {
            tc_sendStatement("Errou!")
        }
    },
    onRight: function() {
        this.correctCount++;
        this.nextWord();
        if (this.tincanEnabled) {
            tc_sendStatement("Acertou!");
        }
    },
    onEndFeedback: function() {
        if (this.feedbackAction)
            this.setTimeout(this.feedbackAction, 10, this);
        this.feedbackAction = null;
    },
    onEndGame: function() {
        SOL.vars.rightAnswers = (SOL.vars.rightAnswers || 0) + this.correctCount;
        SOL.vars.wrongAnswers = (SOL.vars.wrongAnswers || 0) + this.wrongCount + (this.level - this.correctCount);
        if (this.tincanEnabled) {
            tc_sendStatement("Terminou o Jogo!");
        }
    },
    hasNextWord: function() {
        return !(!this.wordQueue || this.correctCount == this.level);
    },
    nextWord: function() {
        if (!this.wordQueue || !this.wordQueue.length)
            this.wordQueue = Object.keys(this.words);
        if (this.correctCount == this.level)
            return this.endGame();
        for (var i = 0; i < 10 && this.wordQueue[this.wordQueue.length - 1] == this.word || i == 0; ++i)
            this.randomize(this.wordQueue);
        this.word = this.wordQueue.pop();
        var prop = this.words[this.word] || {};
        this.word = this.word.trim();
        var placed = undefined;
        if ("placed" in prop && prop.placed.length)
            placed = prop.placed.split("");
        CALL("setWord", this.word, prop);
        var count = (CALL("pollSlot", []) || []).length;
        while (count < this.word.length)
            this.addEntity({
                "class": "Slot",
                text: this.word[i],
                pos: count++
            });
        CALL("resetBlocks", this.word, this.correctCount, !!placed);
        var wrong = prop.wrong || "";
        var overflow = this.blockData.length - (this.word.length + wrong.length);
        if (overflow < 0) {
            wrong = wrong.substr(0, wrong.length + overflow);
        }
        var letters = (this.word + wrong).split("");
        this.randomize(letters);
        for (var i = 0; i < letters.length; ++i) {
            var pos = null;
            if (placed) {
                pos = placed.indexOf(letters[i]);
                if (pos != -1)
                    placed[pos] = "";
                else
                    pos = null;
            }
            this.addEntity(MAR.mergeTo({
                slot: pos,
                text: letters[i]
            }, this.blockData[i]));
        }
        if (!placed)
            CALL("activateSlot", 0);
    },
    showHint: function() {
        this.tipsLeft--;
        if (this.tipsLeft <= 0)
            CALL("disableHints");
        var slots = [];
        CALL("pollSlot", slots);
        var answer = null;
        var firstEmptySlot = null;
        for (var i = 0, slot; slot = slots[i]; ++i) {
            if (!firstEmptySlot && slot.hasEmptySlots())
                firstEmptySlot = slot;
            if (slot.hasWrongSlots()) {
                answer = [slot.block];
                break;
            }
        }
        if (!answer && firstEmptySlot)
            answer = [firstEmptySlot, CALL("getBlock", {
                text: firstEmptySlot.text,
                slot: null
            })];
        for (var k in answer) {
            if (answer[k] && typeof answer[k].activateHint == "function")
                answer[k].activateHint();
        }
    },
    onTimeEnded: function() {
        if (this.tincanEnabled) {
            tc_sendStatement("Tempo Acabou");
        }
        this.endGame();
    }
});
;
/* ../screens/escalada/Display.js */
CLAZZ("screens.escalada.Display", {
    EXTENDS: "framework.Phaser.Entity",
    DYNAMIC: true,
    index: 0,
    maxWidth: 230,
    maxHeight: 156,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.index = game.world.children.length;
    },
    setWord: function(word, props) {
        if (this.sprite)
            this.sprite.destroy();
        if (!props.question && SOL.assets['img_' + word]) {
            this.sprite = game.add.sprite(this.x, this.y, SOL.assets['img_' + word]);
            this.sprite.anchor.setTo(0.5);
            var scaleW = this.maxWidth / this.sprite.width;
            var scaleH = this.maxHeight / this.sprite.height;
            this.sprite.scale.setTo(Math.min(1, scaleW, scaleH));
            game.world.setChildIndex(this.sprite, this.index);
        }
    }
});
;
/* ../screens/escalada/Block.js */
CLAZZ("screens.escalada.Block", {
    EXTENDS: "framework.Phaser.Entity",
    text: "",
    sprite: null,
    label: null,
    state: "goBack",
    startX: 0,
    startY: 0,
    slot: null,
    DYNAMIC: true,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.sprite.anchor.setTo(0.5, 0.5);
        var label = this.label = game.add.text(0, 0, this.text);
        label.anchor.setTo(0.7, 0.5);
        if (this.slot != null) {
            var slot = CALL("getSlot", {
                "pos": this.slot
            });
            this.addToSlot(slot, true);
        } else {
            this.sprite.inputEnabled = true;
            this.sprite.input.enableDrag(false);
            this.sprite.events.onInputDown.add(this.onInputDown.bind(this));
            this.sprite.events.onDragStop.add(this.onDragStop.bind(this));
            this.sprite.events.onDragUpdate.add(this.onDrag.bind(this));
            this.startX = this.x;
            this.startY = this.y;
        }
    },
    destroy: function() {
        this.label.destroy();
        SUPER();
    },
    onDrag: function() {
        this.onPostTick();
    },
    onDragStop: function()
    {
        var hit = this.getCollision(this.label);
        if (hit)
            this.addToSlot(hit);
        else {
            this.state = "goBack";
            CALL("onReleaseBlock");
        }
    },
    addToSlot: function(slot, permanent) {
        slot.setBlock(this, permanent);
        this.slot = slot;
        this.state = "goSlot";
    },
    onInputDown: function() {
        if (this.slot) {
            this.slot.setBlock(null);
            this.slot = null;
        }
        this.state = "drag";
    },
    bringToTop: function() {
        this.setIndex(game.world.children.length - 2);
    },
    disableInput: function() {
        try {} catch (e) {}
        this.sprite.inputEnabled = false;
    },
    setIndex: function(i) {
        this.sprite.parent.setChildIndex(this.sprite, i);
        this.label.parent.setChildIndex(this.label, i + 1);
    },
    onWrong: function() {
        if (this.sprite.inputEnabled && this.slot)
            this.showWrongBlockFeedback();
    },
    showWrongBlockFeedback: function() {},
    resetBlocks: function() {
        this.slot = null;
        this.sprite.inputEnabled = false;
        if (this.state == "goSlot")
            return;
        this.state = "die";
    },
    onPostTick: function() {
        this.label.x = this.sprite.x;
        this.label.y = this.sprite.y;
        this.label.alpha = this.sprite.alpha;
        this.label.scale.copyFrom(this.sprite.scale);
    },
    doneScaling: function() {
        if (this.state == "die")
            this.destroy();
    },
    doneTweening: function() {
        if (this.state == "goSlot")
            CALL("onPlaceBlock");
    },
    onReplace: function() {
        this.slot = null;
        this.state = "goBack";
    }
});
;
/* ../screens/interactive/Timeline.js */
CLAZZ("screens.interactive.TimelineElement", {
    INJECT: ["parent", "data", "source", "context", "inIndex"],
    el: null,
    DOM: null,
    isActive: false,
    GUID: null,
    timeline: null,
    activeColor: "rgba(255,255,255,0.8)",
    inactiveColor: "rgba(50,50,50,0.5)",
    CONSTRUCTOR: function() {
        this.timeline = this.context.context;
        this.el = MAR.create("div", this.parent, {
            style: {
                position: "absolute",
                overflow: "hidden",
                width: "7px",
                height: "13px",
                fontSize: "10px",
                cursor: "ew-resize",
                backgroundColor: this.inactiveColor,
                boxSizing: "borderBox",
                border: "1px solid #555"
            }
        }, [["span", {
            id: "label"
        }], ["div", {
            id: "btnRemoveKeyframe",
            text: " X ",
            style: {
                position: "absolute",
                top: 0,
                left: "66px",
                textAlign: "center",
                width: "14px",
                height: "14px",
                color: "white",
                backgroundColor: "red",
                cursor: "not-allowed"
            }
        }]]);
        this.DOM = MAR.index(this.el, null, this);
        this.redraw();
    },
    editor: function(action, uid, data) {
        var timeline = this.timeline;
        if (!this[action])
            return timeline.editor.apply(null, Array.prototype.slice.call(arguments));
        var guid = null;
        var entities = timeline.screen.__data.entities;
        for (var i = 0, e; e = entities[i]; ++i) {
            if (e.__$uid == uid) {
                guid = e.GUID;
                break;
            }
        }
        if (guid === null)
            return timeline.editor.apply(null, Array.prototype.slice.call(arguments));
        this[action](guid, data);
        timeline.save();
    },
    updateEntity: function(guid, data) {
        var actions = this.data.actions = this.data.actions || {};
        actions[guid] = actions[guid] || {};
        MAR.mergeTo(actions[guid], data);
        this.redraw();
    },
    redraw: function() {
        var timeline = this.timeline;
        var left = (this.data.time - timeline.offset) * this.parent.clientWidth / timeline.zoom;
        this.el.style.left = left + "px";
        if (left > this.parent.clientWidth)
            this.context.showArrowRight();
        if (left < 0)
            this.context.showArrowLeft();
        var icon;
        if (this.data.actions && Object.keys(this.data.actions).length) {
            if (this.data.events && this.data.events.length)
                icon = "●";
            else
                icon = "℗";
        } else {
            if (this.data.events && this.data.events.length)
                icon = "©";
            else
                icon = "◌";
        }
        this.DOM.label.textContent = icon + " - " + this.data.time.toFixed(2) + "s";
    },
    setCurrentKeyFrame: function(kf) {
        this.isActive = kf === this;
        if (this.isActive)
            this.el.style.backgroundColor = this.activeColor;
        else
            this.el.style.backgroundColor = this.inactiveColor;
    },
    dragging: false,
    dirty: false,
    __ROOT__: {
        mouseover: function() {
            MAR.mergeTo(this.DOM.__ROOT__.style, {
                width: "80px",
                zIndex: "9999"
            });
        },
        mouseout: function() {
            MAR.mergeTo(this.DOM.__ROOT__.style, {
                width: "7px",
                zIndex: ""
            });
        },
        mousedown: function(evt) {
            if (evt.target != this.el && evt.target != this.DOM.label)
                return;
            if (evt.shiftKey) {
                this.source.push(JSON.parse(JSON.stringify(this.data)));
                this.parent.update();
                this.timeline.save();
                return;
            }
            this.dragging = true;
            if (!this.el.requestPointerLock)
                this.el.requestPointerLock = this.el.requestPointerLock || this.el.mozRequestPointerLock;
            this.el.requestPointerLock();
        },
        mouseup: function(evt) {
            this.dragging = false;
            document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock;
            document.exitPointerLock();
            if (this.dirty) {
                this.timeline.save();
                this.dirty = false;
            }
        },
        mousemove: function(evt) {
            if (!this.dragging || !evt.movementX)
                return;
            this.dirty = true;
            var timeline = this.timeline;
            this.data.time += evt.movementX / this.parent.clientWidth * timeline.zoom;
            this.redraw();
        },
        click: function() {
            CALL("setCurrentKeyFrame", this);
            var now = performance.now();
            if (now - this.lastClick < 250) {
                this.timeline.editor('editOpt', this.timeline.__data.__$uid);
                this.timeline.editor('setCurrentKeyFrame', this.timeline.__data.__$uid, this.context.inIndex, this.inIndex, this.timeline.keyframes);
            }
            this.lastClick = now;
        }
    },
    lastClick: 0,
    btnRemoveKeyframe: {
        click: function() {
            this.source.splice(this.source.indexOf(this.data), 1);
            this.parent.update();
            this.timeline.save();
        }
    }
});
CLAZZ("screens.interactive.TimelineLayerElement", {
    INJECT: ["parent", "data", "source", "context", "inIndex"],
    el: null,
    DOM: null,
    CONSTRUCTOR: function() {
        this.el = MAR.create("div", {
            style: {
                height: "16px",
                position: 'relative'
            }
        }, this.parent, [["div", {
            id: "keyline",
            style: {
                position: 'absolute',
                top: 0,
                left: 0,
                height: "14px",
                width: "100%",
                overflow: "hidden",
                boxSizing: "borderBox",
                fontSize: "10px",
                borderBottom: "1px solid #999"
            },
            dataset: {
                array: "data.frames",
                clazz: "screens.interactive.TimelineElement"
            }
        }], ["div", {
            style: {
                position: "absolute",
                top: 0,
                left: 0,
                height: "14px",
                backgroundColor: "white",
                paddingRight: "5px"
            }
        }, [["span", {
            id: "arrowLeft",
            text: "◄"
        }], ["img", {
            id: "btnDeleteLayer",
            src: "img/deleteLink.png",
            height: 14,
            style: {
                verticalAlign: "text-top",
                marginRight: "5px"
            }
        }], ["input", {
            id: "inpName",
            value: this.data.name,
            style: {
                border: 0,
                padding: 0,
                margin: 0,
                height: "100%",
                width: "100px",
                boxSizing: "border-box",
                fontSize: "14px",
                position: "relative",
                top: "-1px"
            }
        }]]], ["div", {
            id: 'arrowRight',
            text: "►",
            style: {
                position: "absolute",
                top: 0,
                right: 0
            }
        }]]);
        this.DOM = MAR.index(this.el, null, this);
    },
    showArrowRight: function() {
        this.DOM.arrowRight.style.display = "";
    },
    showArrowLeft: function() {
        this.DOM.arrowLeft.style.display = "";
    },
    redraw: function() {
        this.DOM.arrowRight.style.display = "none";
        this.DOM.arrowLeft.style.display = "none";
        this.DOM.keyline.call("redraw");
    },
    setCurrentKeyFrame: function(kf) {
        this.DOM.keyline.call("setCurrentKeyFrame", kf);
    },
    inpName: {
        change: function() {
            this.data.name = this.DOM.inpName.value.trim();
            this.context.save();
        }
    },
    btnDeleteLayer: {
        click: function() {
            this.source.splice(this.source.indexOf(this.data), 1);
            this.parent.update();
            this.context.prevRect = null;
            this.context.save();
        }
    },
    keyline: {
        mousedown: function(evt) {
            if (evt.target != this.DOM.keyline)
                return;
            var time = this.context.offset + (evt.clientX / this.DOM.keyline.clientWidth) * this.context.zoom;
            this.data.frames.push({
                time: time
            });
            this.DOM.keyline.update();
            this.context.save();
        }
    }
});
CLAZZ("screens.interactive.Timeline", {
    EXTENDS: "framework.Phaser.Entity",
    DYNAMIC: false,
    el: null,
    DOM: null,
    keyframes: null,
    timeline: null,
    zoom: 10,
    offset: 0,
    editor: null,
    time: 0,
    prevTime: 0,
    enabled: true,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.compileTimeline();
        this.prevTime = performance.now();
        this.editor = this.screen.editor;
        if (this.editor && SOL.vars.advancedMode)
            this.init();
    },
    save: function() {
        if (this.editor) {
            this.editor.call(null, "updateEntityByGUID", this.GUID, {
                "keyframes": this.keyframes
            });
            this.compileTimeline();
        }
    },
    compileTimeline: function() {
        var entities = {},
            screen = this.screen,
            THIS = this;
        var keyframes = this.keyframes;
        if (!keyframes || !Array.isArray(keyframes)) {
            this.timeline = [];
            this.keyframes = [];
            return;
        }
        this.screen.__data.entities.forEach(function(e) {
            if (e.GUID)
                entities[e.GUID] = e;
        });
        var timelineList = this.timeline = [];
        keyframes.forEach(function(layer) {
            var keys = {},
                prev = {};
            var timeline = layer.frames.slice().sort(function(a, b) {
                return a.time - b.time;
            });
            timeline.forEach(function(keyframe) {
                var actions = keyframe.actions;
                for (var guid in actions) {
                    if (!entities[guid]) {
                        delete actions[guid];
                        return;
                    }
                    if (!keys[guid])
                        keys[guid] = {};
                    for (var k in actions[guid]) {
                        var v;
                        if ((k in entities[guid]))
                            v = entities[guid][k];
                        else if (screen.entities[guid])
                            v = MAR.resolve(k, screen.entities[guid]);
                        keys[guid][k] = v;
                    }
                }
            });
            var first = {
                time: 0,
                actions: {},
                events: [],
                interpolation: null
            };
            for (var guid in keys) {
                var firstguid = first.actions[guid] = {};
                for (var k in keys[guid])
                    firstguid[k] = keys[guid][k];
            }
            timeline.unshift(first);
            timeline = timeline.map(function(keyframe) {
                var ret = {
                    time: keyframe.time,
                    interpolation: keyframe.interpolation || null,
                    actions: {},
                    next: {},
                    prev: {},
                    events: !THIS.editor && keyframe.events && keyframe.events.length && SOL.compile(keyframe.events, THIS)
                };
                for (var guid in keyframe.actions) {
                    if (prev[guid]) {
                        ret.prev[guid] = prev[guid];
                        prev[guid].next[guid] = ret;
                    }
                    prev[guid] = ret;
                    var obj = ret.actions[guid] = {},
                        keysguid = keys[guid],
                        eguid = keyframe.actions[guid];
                    for (var k in keysguid) {
                        keysguid[k] = obj[k] = k in eguid ? eguid[k] : keysguid[k];
                    }
                }
                return ret;
            });
            timeline.timeOffset = 0;
            timeline.paused = false;
            timeline.GUID = layer.GUID;
            timelineList[timelineList.length] = timeline;
        });
    },
    init: function() {
        this.enabled = false;
        if (!this.keyframes)
            this.keyframes = [];
        this.keyListener = this.__keyListener.bind(this);
        document.body.addEventListener("keydown", this.keyListener);
        document.body.addEventListener("keyup", this.keyListener);
        this.el = MAR.create("div", {
            style: {
                position: "absolute",
                top: 0,
                left: 0,
                width: 0,
                backgroundColor: "rgba(255,255,255,0.7)",
                boxSizing: "border-box"
            }
        }, [["div", {
            id: "btnToggleVisibility",
            text: "T",
            style: {
                position: 'absolute',
                top: '-15px',
                cursor: 'pointer'
            }
        }], ["div", {
            id: "timelineRuler",
            style: {
                cursor: 'cell'
            }
        }], ["div", {
            id: "timelineContainer",
            dataset: {
                array: "keyframes",
                clazz: "screens.interactive.TimelineLayerElement"
            }
        }], ["div", {
            id: "btnAddLayer",
            text: " + ",
            style: {
                position: 'absolute',
                top: '-15px',
                left: '15px',
                cursor: 'pointer'
            }
        }]], document.body);
        this.DOM = MAR.index(this.el, null, this);
        this.toggleVisibility();
    },
    toggleVisibility: function() {
        this.isHidden = !this.isHidden;
        this.DOM.timelineContainer.style.display = this.isHidden ? "none" : "";
        this.DOM.btnAddLayer.style.display = this.isHidden ? "none" : "";
        this.prevRect = null;
        this.setCurrentKeyFrame(this.isHidden ? null : this.currentKeyFrame);
    },
    timelineContainer: {
        mousewheel: function(evt) {
            var delta = evt.deltaY > 0 ? 1 : -1;
            if (!evt.shiftKey) {
                this.offset += delta;
            } else {
                this.zoom *= delta > 0 ? 2 : 0.5;
                if (this.zoom > 1000)
                    this.zoom = 1000;
                if (this.zoom < 1)
                    this.zoom = 1;
            }
            this.DOM.timelineContainer.call("redraw");
        }
    },
    isHidden: undefined,
    btnToggleVisibility: {
        click: function() {
            this.toggleVisibility();
        }
    },
    btnAddLayer: {
        click: function() {
            this.prevRect = null;
            this.keyframes.push({
                name: "layer " + (this.keyframes.length + 1),
                GUID: MAR.getUUID(),
                frames: []
            });
            this.DOM.timelineContainer.update();
        }
    },
    __keyListener: function(evt) {
        if (evt.type == "keyup" && (evt.code == "Space" || evt.key == " "))
            this.enabled = !this.enabled;
    },
    keyListener: null,
    onDeactivateScreen: function() {
        this._destroy();
    },
    _destroy: function() {
        MAR.remove(this.el);
        document.body.removeEventListener("keydown", this.keyListener);
        document.body.removeEventListener("keyup", this.keyListener);
    },
    currentKeyFrame: null,
    setCurrentKeyFrame: function(kf) {
        if (kf) {
            this.currentKeyFrame = kf;
            this.screen.editor = kf.editor.bind(kf);
            CALL("runToTime", kf.data.time);
            this.DOM.timelineContainer.call("setCurrentKeyFrame", kf);
        } else {
            this.screen.editor = this.editor;
            CALL("runToTime", 0);
        }
    },
    runToTime: function(time) {
        var layers = this.timeline;
        for (var i = 0, l = layers.length; i < l; ++i) {
            for (var j = 0, jl = layers[i].length; j < jl; ++j) {
                var kf = layers[i][j];
                if (kf.time > time)
                    break;
                this.applyKeyframe(kf, time, true);
            }
        }
    },
    applyKeyframe: function(kf, time, full) {
        for (var guid in kf.actions) {
            var next = kf.next[guid];
            if (!next || (next.time <= time && !full))
                continue;
            var entity = this.screen.entities[guid];
            if (!entity)
                continue;
            var w = (time - kf.time) / (next.time - kf.time);
            if (w > 1)
                w = 1;
            if (next.interpolation === "smoothstep")
                w = ((w) * (w) * (3 - 2 * (w)));
            var w1 = 1 - w;
            var keys = kf.actions[guid],
                nextkeys = next.actions[guid];
            for (var k in keys) {
                var v = keys[k];
                switch (k) {
                case "opacity":
                    entity.sprite.alpha = (v * w1 + nextkeys[k] * w) / 100;
                    break;
                case "x":
                case "y":
                    entity[k] = entity.sprite[k] = v * w1 + nextkeys[k] * w;
                    break;
                case "rotation":
                    entity[k] = entity.sprite[k] = v * w1 + nextkeys[k] * w;
                    break;
                case "sprite.scale.x":
                    entity[k] = entity.sprite.scale.x = v * w1 + nextkeys[k] * w;
                    break;
                case "sprite.scale.y":
                    entity[k] = entity.sprite.scale.y = v * w1 + nextkeys[k] * w;
                    break;
                }
            }
        }
    },
    onTick: function() {
        if (!this.enabled)
            return;
        var now = performance.now();
        delta = (now - this.prevTime) / 1000;
        this.prevTime = now;
        this.time += delta;
        var layers = this.timeline,
            prev;
        for (var i = 0, l = layers.length; i < l; ++i) {
            var layer = layers[i];
            var timeOffset = layer.timeOffset;
            this.currentLayer = layer;
            if (layer.paused) {
                layer.timeOffset += delta;
                continue;
            }
            for (var j = 0, jl = layer.length; j < jl; ++j) {
                var kf = layer[j];
                if (kf.time > this.time - timeOffset)
                    break;
                var exec = (this.time - timeOffset - delta < kf.time) && kf.events;
                this.applyKeyframe(kf, this.time - timeOffset, true);
                if (exec) {
                    exec();
                }
            }
            if (j == jl)
                layers[i].timeOffset = this.time;
        }
        this.currentLayer = null;
    },
    stop: function(layerGUID) {
        for (var i = 0, l = this.timeline.length; i < l; ++i) {
            var layer = this.timeline[i];
            if (layer.GUID == layerGUID)
                return layer.paused = true;
        }
    },
    play: function(layerGUID) {
        for (var i = 0, l = this.timeline.length; i < l; ++i) {
            var layer = this.timeline[i];
            if (layer.GUID == layerGUID)
                return layer.paused = false;
        }
    },
    currentLayer: null,
    prevRect: null,
    onPostTick: function() {
        if (!this.el)
            return;
        if (this.enabled)
            this.onTick();
        var rect = this.screen.game.canvas.getBoundingClientRect();
        var prevRect = this.prevRect;
        if (!prevRect || rect.left != prevRect.left || rect.top != prevRect.top || rect.right != prevRect.right || rect.bottom != prevRect.bottom) {
            this.prevRect = rect;
            this.el.style.width = rect.width + "px";
            this.el.style.top = (rect.bottom - this.el.clientHeight - 5) + "px";
            this.el.style.left = rect.left + "px";
            this.DOM.timelineContainer.call("redraw");
        }
    }
})
;
/* ../screens/interactive/Interactive.js */
CLAZZ("screens.interactive.Interactive", {
    EXTENDS: "framework.Phaser",
    DYNAMIC: true,
    zoom: false,
    growScale: 0.15,
    shuffleList: null,
    delayAfterEndGame: 4000,
    counts: null,
    frameNumber: 0,
    externalSceneURL: null,
    editorSnapEnabled: false,
    STATIC: {
        requires: ["components/FlyAI.js", "components/AutoFlip.js", "components/CollisionTriggers.js", "components/Spline.js", "components/ZSort.js", "components/Interactive.js", ]
    },
    CONSTRUCTOR: function(data) {
        this.editorSnapEnabled = data.editorSnapEnabled;
        this.externalSceneURL = data.externalSceneURL;
        SUPER(data);
        this.shuffleList = [];
        this.counts = {};
        if (this.externalSceneURL)
            this.loadExternalScene(this.externalSceneURL);
    },
    loadExternalScene: function(url) {
        if (!url || typeof url !== "string")
            return;
        url = url.replace(/\{([^\}]+)\}/g, function(m, g1) {
            return SOL.vars.persist[g1];
        });
        MAR.getURL(url, onGotJSON.bind(this), {
            anystate: true
        });
        return;
        function onGotJSON(ret) {
            if (!ret) {
                if (url) {
                    var oldURL = url;
                    url = null;
                    AREIA.loadData(oldURL, onGotJSON.bind(this));
                } else {
                    CALL("onLoadSceneError");
                }
                return;
            }
            if (typeof ret === "string") {
                try {
                    ret = JSON.parse(ret);
                } catch (ex) {
                    CALL("onLoadSceneError");
                    LOG("Error parsing response: " + ex + " | " + ret);
                    return;
                }
            }
            if (url) {
                AREIA.storeData(url, ret);
            }
            var spawns = {};
            for (var i = 0, entity; entity = data.entities[i]; ++i) {
                spawns[entity[entity.$word]] = entity.GUID;
            }
            for (var k in controllerScene) {
                if (!spawns[k])
                    continue;
                var list = controllerScene[k];
                for (var i = 0, cso; cso = list[i]; ++i)
                    CALL("spawn", cso, spawns[k]);
            }
        }
    },
    create: function() {
        CALL("killAllSounds");
        SUPER();
        if (this.editor)
            return;
        CALL("playAudio", "bgSound", true);
        CALL("playAudio", "openingSound");
        for (var i = 0, l = this.shuffleList.length; i < l; ++i)
            this.shuffleList[i].swapCoords(this.shuffleList[Math.floor(Math.random() * this.shuffleList.length)]);
    },
    parseNumber: function(value) {
        value = value.replace(',', '.');
        value = parseFloat(value);
        if (value && value != NaN)
            return value;
        else
            return 1;
    },
    countUp: function(vname, amount) {
        if (amount)
            amount = this.parseNumber(amount);
        var oldValue = this.counts[vname] || 0;
        this.counts[vname] = (this.counts[vname] || 0) + (amount || 1);
        var newValue = this.counts[vname];
        CALL("on" + vname + "=" + this.counts[vname]);
        CALL("on" + vname + "from" + oldValue + "to" + newValue);
        CALL("onChange" + vname);
    },
    countDown: function(vname, amount) {
        if (arguments.length == 0) {
            CALL("playAudio", "hurryUp", true);
        } else {
            if (amount)
                amount = this.parseNumber(amount);
            var oldValue = this.counts[vname] || 0;
            this.counts[vname] = (this.counts[vname] || 0) - (amount || 1);
            var newValue = this.counts[vname];
            CALL("on" + vname + "=" + this.counts[vname]);
            CALL("on" + vname + "from" + oldValue + "to" + newValue);
            CALL("onChange" + vname);
        }
    },
    onWrong: function() {
        var feedback = Math.floor(Math.random() * 2);
        CALL("playAudio", "wrongFeedbackSound");
        SOL.vars.wrongAnswers = (SOL.vars.wrongAnswers || 0) + 1;
    },
    onRight: function() {
        var feedback = Math.floor(Math.random() * 2);
        CALL("playAudio", "rightFeedbackSound");
        SOL.vars.rightAnswers = (SOL.vars.rightAnswers || 0) + 1;
        var pendingAnswers = CALL("hasPendingRight");
        var pendingTexts = CALL("getTextField", {
            disabled: false
        });
        if (!pendingAnswers && !pendingTexts)
            CALL("endGame");
    },
    onShakeScreen: function() {
        this.shakeAmountX += 50;
    },
    acc: 0,
    onTick: function() {
        this.frameNumber++;
        if (!this.zoom)
            return;
        this.acc += this.growScale;
        if (this.acc >= Math.PI) {
            this.zoom = false;
            this.acc = 0;
        }
        this.game.camera.scale.y = this.game.camera.scale.x = 1 + Math.sin(this.acc) * 0.05;
        this.game.camera.x = (this.gameWidth * this.game.camera.scale.x) / 2 - this.gameWidth / 2;
        this.game.camera.y = (this.gameHeight * this.game.camera.scale.y) / 2 - this.gameHeight / 2;
    },
    onGrowScreen: function() {
        this.zoom = true;
        this.acc = 0;
        this.growScale = Math.abs(this.growScale);
    },
    onDeactivateScreen: function() {
        if (!this.game)
            return;
        this.game.camera.scale.x = 1;
        this.game.camera.scale.y = 1;
    },
    onEndGame: function() {
        this.onGrowScreen();
    },
    onTimeEnded: function() {
        if (this.gameEnded)
            return;
        CALL("killAllSounds");
        CALL("playAudio", "timeEnded");
        this.delayAfterEndGame = 2000;
        this.endGame();
    }
});
;
/* ../screens/interactive/Video.js */
CLAZZ("screens.interactive.Video", {
    EXTENDS: "framework.Phaser.Label",
    DYNAMIC: true,
    src: null,
    el: null,
    DOM: null,
    player: null,
    CONSTRUCTOR: function(screen, data) {
        var isText = false;
        SUPER(screen, data);
        var useCallBrowser = false;
        if (screen.editor)
            return;
        var useExperimentalAPI = this.useNewAPI;
        if (!useCallBrowser) {
            if (useExperimentalAPI) {
                var videoId = (data.src || "").replace(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be|youtube.[^\/]+).*(?:v=|embed\/|\/)([a-z0-9\-_]+).*$/i, "$1");
                this.el = MAR.create("div", {
                    style: {
                        position: "absolute",
                        top: 0,
                        left: 0,
                        color: "red",
                        width: "100%",
                        height: "100%",
                        border: "none",
                    },
                    attr: {
                        allowfullscreen: true
                    },
                    id: `player${videoId}`
                });
                this.DOM = MAR.index(this.el);
                document.body.appendChild(this.el);
                this.player = new YT.Player(`player${videoId}`, {
                    width: this.area.width,
                    height: this.area.height,
                    videoId,
                    events: {
                        onReady: this.videoReady.bind(this),
                        onStateChange: this.onVideoEnds.bind(this)
                    }
                })
            } else {
                this.el = MAR.create("iframe", {
                    style: {
                        position: "absolute",
                        top: 0,
                        left: 0,
                        width: 0,
                        height: 0,
                        border: "none",
                    },
                    attr: {
                        allowfullscreen: true
                    },
                    src: (data.src || "").replace(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be|youtube.[^\/]+).*(?:v=|embed\/|\/)([a-z0-9\-_]+).*$/i, "https://www.youtube.com/embed/$1")
                });
                this.DOM = MAR.index(this.el);
                document.body.appendChild(this.el);
            }
        } else {
            var THIS = this;
            this.sprite.inputEnabled = true;
            this.sprite.events.onInputDown.add(function() {
                CALL("callBrowser", data.src);
            });
        }
    },
    videoReady: function(event) {
        event.target.playVideo();
    },
    onVideoEnds: function(event) {
        if (event && event.data === 0) {
            CALL('onVideoEnds');
            this._destroyVideoPlayer()
        }
    },
    onDeactivateScreen: function() {
        MAR.remove(this.el);
    },
    destroy: function() {
        MAR.remove(this.el);
    },
    _destroyVideoPlayer: function() {
        if (this.player)
            this.player.destroy();
    },
    prevRect: null,
    onPreRender: function() {
        if (!this.el)
            return;
        var rect = this.screen.game.canvas.getBoundingClientRect();
        var prevRect = this.prevRect;
        if (!prevRect || rect.left != prevRect.left || rect.top != prevRect.top || rect.right != prevRect.right || rect.bottom != prevRect.bottom) {
            this.prevRect = rect;
            var scaleX = rect.width / this.screen.gameWidth;
            var scaleY = rect.height / this.screen.gameHeight;
            this.el.style.width = this.sprite.width * scaleX + "px";
            this.el.style.height = this.sprite.height * scaleY + "px";
            this.el.style.top = (rect.top + this.sprite.y * scaleY) + "px";
            this.el.style.left = (rect.left + this.sprite.x * scaleX) + "px";
        }
    },
    hideVideo: function() {
        MAR.remove(this.el);
    },
    _videoIsFullscreen: function() {
        var doc = window.document;
        return doc.fullscreenElement || doc.mozFullScreenElement || doc.webkitFullscreenElement || doc.msFullscreenElement || false;
    },
    _endsFullScreen: function() {
        var doc = window.document;
        var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;
        cancelFullScreen.call(doc);
    }
})
;
/* ../screens/corte/Corte.js */
CLAZZ("screens.corte.Corte", {
    EXTENDS: "framework.Phaser",
    wordQueue: null,
    onCreateScreen: function() {
        CALL("nextWord");
    },
    nextWord: function() {
        if (!this.wordQueue || !this.wordQueue.length)
            this.resetWordQueue();
        if (!this.wordQueue || !this.wordQueue.length)
            return;
        this.wordQueue.pop().enable();
    },
    resetWordQueue: function() {
        this.wordQueue = [];
        CALL("pollChopable", this.wordQueue);
        var i = 0,
            l = this.wordQueue.length;
        for (; i < l; ++i)
            this.wordQueue[i] = this.wordQueue[Math.floor(Math.random() * this.wordQueue.length)];
    },
    onTimeEnded: function() {
        this.endGame();
    },
    verifyCuts: function() {
        var parts = [];
        var full = CALL("getChoppedParts", parts);
        if (!full)
            return;
        full = full.trim().toUpperCase().split(/\|+/);
        var counts = {};
        parts.forEach(function(v, i) {
            counts[v] = (counts[v] || 0) + 1;
        });
        full.forEach(function(v, i) {
            counts[v] = (counts[v] || 0) - 1;
        });
        for (var k in counts) {
            if (counts[k] == 0)
                SOL.vars.rightAnswers = (SOL.vars.rightAnswers || 0) + 1;
            else if (counts[k] < 0)
                SOL.vars.wrongAnswers = (SOL.vars.wrongAnswers || 0) + 1;
        }
        this.endGame();
    }
});
;
/* ../js/moment.min.js */
!function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.moment = t()
}(this, function() {
    "use strict";
    var e,
        i;
    function c() {
        return e.apply(null, arguments)
    }
    function o(e) {
        return e instanceof Array || "[object Array]" === Object.prototype.toString.call(e)
    }
    function u(e) {
        return null != e && "[object Object]" === Object.prototype.toString.call(e)
    }
    function l(e) {
        return void 0 === e
    }
    function h(e) {
        return "number" == typeof e || "[object Number]" === Object.prototype.toString.call(e)
    }
    function d(e) {
        return e instanceof Date || "[object Date]" === Object.prototype.toString.call(e)
    }
    function f(e, t) {
        var n,
            s = [];
        for (n = 0; n < e.length; ++n)
            s.push(t(e[n], n));
        return s
    }
    function m(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }
    function _(e, t) {
        for (var n in t)
            m(t, n) && (e[n] = t[n]);
        return m(t, "toString") && (e.toString = t.toString), m(t, "valueOf") && (e.valueOf = t.valueOf), e
    }
    function y(e, t, n, s) {
        return Tt(e, t, n, s, !0).utc()
    }
    function g(e) {
        return null == e._pf && (e._pf = {
            empty: !1,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: !1,
            invalidMonth: null,
            invalidFormat: !1,
            userInvalidated: !1,
            iso: !1,
            parsedDateParts: [],
            meridiem: null,
            rfc2822: !1,
            weekdayMismatch: !1
        }), e._pf
    }
    function v(e) {
        if (null == e._isValid) {
            var t = g(e),
                n = i.call(t.parsedDateParts, function(e) {
                    return null != e
                }),
                s = !isNaN(e._d.getTime()) && t.overflow < 0 && !t.empty && !t.invalidMonth && !t.invalidWeekday && !t.weekdayMismatch && !t.nullInput && !t.invalidFormat && !t.userInvalidated && (!t.meridiem || t.meridiem && n);
            if (e._strict && (s = s && 0 === t.charsLeftOver && 0 === t.unusedTokens.length && void 0 === t.bigHour), null != Object.isFrozen && Object.isFrozen(e))
                return s;
            e._isValid = s
        }
        return e._isValid
    }
    function p(e) {
        var t = y(NaN);
        return null != e ? _(g(t), e) : g(t).userInvalidated = !0, t
    }
    i = Array.prototype.some ? Array.prototype.some : function(e) {
        for (var t = Object(this), n = t.length >>> 0, s = 0; s < n; s++)
            if (s in t && e.call(this, t[s], s, t))
                return !0;
        return !1
    };
    var r = c.momentProperties = [];
    function w(e, t) {
        var n,
            s,
            i;
        if (l(t._isAMomentObject) || (e._isAMomentObject = t._isAMomentObject), l(t._i) || (e._i = t._i), l(t._f) || (e._f = t._f), l(t._l) || (e._l = t._l), l(t._strict) || (e._strict = t._strict), l(t._tzm) || (e._tzm = t._tzm), l(t._isUTC) || (e._isUTC = t._isUTC), l(t._offset) || (e._offset = t._offset), l(t._pf) || (e._pf = g(t)), l(t._locale) || (e._locale = t._locale), 0 < r.length)
            for (n = 0; n < r.length; n++)
                l(i = t[s = r[n]]) || (e[s] = i);
        return e
    }
    var t = !1;
    function M(e) {
        w(this, e),
        this._d = new Date(null != e._d ? e._d.getTime() : NaN),
        this.isValid() || (this._d = new Date(NaN)),
        !1 === t && (t = !0, c.updateOffset(this), t = !1)
    }
    function k(e) {
        return e instanceof M || null != e && null != e._isAMomentObject
    }
    function S(e) {
        return e < 0 ? Math.ceil(e) || 0 : Math.floor(e)
    }
    function D(e) {
        var t = +e,
            n = 0;
        return 0 !== t && isFinite(t) && (n = S(t)), n
    }
    function a(e, t, n) {
        var s,
            i = Math.min(e.length, t.length),
            r = Math.abs(e.length - t.length),
            a = 0;
        for (s = 0; s < i; s++)
            (n && e[s] !== t[s] || !n && D(e[s]) !== D(t[s])) && a++;
        return a + r
    }
    function Y(e) {
        !1 === c.suppressDeprecationWarnings && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + e)
    }
    function n(i, r) {
        var a = !0;
        return _(function() {
            if (null != c.deprecationHandler && c.deprecationHandler(null, i), a) {
                for (var e, t = [], n = 0; n < arguments.length; n++) {
                    if (e = "", "object" == typeof arguments[n]) {
                        for (var s in e += "\n[" + n + "] ", arguments[0])
                            e += s + ": " + arguments[0][s] + ", ";
                        e = e.slice(0, -2)
                    } else
                        e = arguments[n];
                    t.push(e)
                }
                Y(i + "\nArguments: " + Array.prototype.slice.call(t).join("") + "\n" + (new Error).stack),
                a = !1
            }
            return r.apply(this, arguments)
        }, r)
    }
    var s,
        O = {};
    function T(e, t) {
        null != c.deprecationHandler && c.deprecationHandler(e, t),
        O[e] || (Y(t), O[e] = !0)
    }
    function b(e) {
        return e instanceof Function || "[object Function]" === Object.prototype.toString.call(e)
    }
    function x(e, t) {
        var n,
            s = _({}, e);
        for (n in t)
            m(t, n) && (u(e[n]) && u(t[n]) ? (s[n] = {}, _(s[n], e[n]), _(s[n], t[n])) : null != t[n] ? s[n] = t[n] : delete s[n]);
        for (n in e)
            m(e, n) && !m(t, n) && u(e[n]) && (s[n] = _({}, s[n]));
        return s
    }
    function P(e) {
        null != e && this.set(e)
    }
    c.suppressDeprecationWarnings = !1,
    c.deprecationHandler = null,
    s = Object.keys ? Object.keys : function(e) {
        var t,
            n = [];
        for (t in e)
            m(e, t) && n.push(t);
        return n
    };
    var W = {};
    function C(e, t) {
        var n = e.toLowerCase();
        W[n] = W[n + "s"] = W[t] = e
    }
    function H(e) {
        return "string" == typeof e ? W[e] || W[e.toLowerCase()] : void 0
    }
    function R(e) {
        var t,
            n,
            s = {};
        for (n in e)
            m(e, n) && (t = H(n)) && (s[t] = e[n]);
        return s
    }
    var U = {};
    function F(e, t) {
        U[e] = t
    }
    function L(e, t, n) {
        var s = "" + Math.abs(e),
            i = t - s.length;
        return (0 <= e ? n ? "+" : "" : "-") + Math.pow(10, Math.max(0, i)).toString().substr(1) + s
    }
    var N = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
        G = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
        V = {},
        E = {};
    function I(e, t, n, s) {
        var i = s;
        "string" == typeof s && (i = function() {
            return this[s]()
        }),
        e && (E[e] = i),
        t && (E[t[0]] = function() {
            return L(i.apply(this, arguments), t[1], t[2])
        }),
        n && (E[n] = function() {
            return this.localeData().ordinal(i.apply(this, arguments), e)
        })
    }
    function A(e, t) {
        return e.isValid() ? (t = j(t, e.localeData()), V[t] = V[t] || function(s) {
            var e,
                i,
                t,
                r = s.match(N);
            for (e = 0, i = r.length; e < i; e++)
                E[r[e]] ? r[e] = E[r[e]] : r[e] = (t = r[e]).match(/\[[\s\S]/) ? t.replace(/^\[|\]$/g, "") : t.replace(/\\/g, "");
            return function(e) {
                var t,
                    n = "";
                for (t = 0; t < i; t++)
                    n += b(r[t]) ? r[t].call(e, s) : r[t];
                return n
            }
        }(t), V[t](e)) : e.localeData().invalidDate()
    }
    function j(e, t) {
        var n = 5;
        function s(e) {
            return t.longDateFormat(e) || e
        }
        for (G.lastIndex = 0; 0 <= n && G.test(e);)
            e = e.replace(G, s),
            G.lastIndex = 0,
            n -= 1;
        return e
    }
    var Z = /\d/,
        z = /\d\d/,
        $ = /\d{3}/,
        q = /\d{4}/,
        J = /[+-]?\d{6}/,
        B = /\d\d?/,
        Q = /\d\d\d\d?/,
        X = /\d\d\d\d\d\d?/,
        K = /\d{1,3}/,
        ee = /\d{1,4}/,
        te = /[+-]?\d{1,6}/,
        ne = /\d+/,
        se = /[+-]?\d+/,
        ie = /Z|[+-]\d\d:?\d\d/gi,
        re = /Z|[+-]\d\d(?::?\d\d)?/gi,
        ae = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
        oe = {};
    function ue(e, n, s) {
        oe[e] = b(n) ? n : function(e, t) {
            return e && s ? s : n
        }
    }
    function le(e, t) {
        return m(oe, e) ? oe[e](t._strict, t._locale) : new RegExp(he(e.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(e, t, n, s, i) {
            return t || n || s || i
        })))
    }
    function he(e) {
        return e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
    }
    var de = {};
    function ce(e, n) {
        var t,
            s = n;
        for ("string" == typeof e && (e = [e]), h(n) && (s = function(e, t) {
            t[n] = D(e)
        }), t = 0; t < e.length; t++)
            de[e[t]] = s
    }
    function fe(e, i) {
        ce(e, function(e, t, n, s) {
            n._w = n._w || {},
            i(e, n._w, n, s)
        })
    }
    var me = 0,
        _e = 1,
        ye = 2,
        ge = 3,
        ve = 4,
        pe = 5,
        we = 6,
        Me = 7,
        ke = 8;
    function Se(e) {
        return De(e) ? 366 : 365
    }
    function De(e) {
        return e % 4 == 0 && e % 100 != 0 || e % 400 == 0
    }
    I("Y", 0, 0, function() {
        var e = this.year();
        return e <= 9999 ? "" + e : "+" + e
    }),
    I(0, ["YY", 2], 0, function() {
        return this.year() % 100
    }),
    I(0, ["YYYY", 4], 0, "year"),
    I(0, ["YYYYY", 5], 0, "year"),
    I(0, ["YYYYYY", 6, !0], 0, "year"),
    C("year", "y"),
    F("year", 1),
    ue("Y", se),
    ue("YY", B, z),
    ue("YYYY", ee, q),
    ue("YYYYY", te, J),
    ue("YYYYYY", te, J),
    ce(["YYYYY", "YYYYYY"], me),
    ce("YYYY", function(e, t) {
        t[me] = 2 === e.length ? c.parseTwoDigitYear(e) : D(e)
    }),
    ce("YY", function(e, t) {
        t[me] = c.parseTwoDigitYear(e)
    }),
    ce("Y", function(e, t) {
        t[me] = parseInt(e, 10)
    }),
    c.parseTwoDigitYear = function(e) {
        return D(e) + (68 < D(e) ? 1900 : 2e3)
    };
    var Ye,
        Oe = Te("FullYear", !0);
    function Te(t, n) {
        return function(e) {
            return null != e ? (xe(this, t, e), c.updateOffset(this, n), this) : be(this, t)
        }
    }
    function be(e, t) {
        return e.isValid() ? e._d["get" + (e._isUTC ? "UTC" : "") + t]() : NaN
    }
    function xe(e, t, n) {
        e.isValid() && !isNaN(n) && ("FullYear" === t && De(e.year()) && 1 === e.month() && 29 === e.date() ? e._d["set" + (e._isUTC ? "UTC" : "") + t](n, e.month(), Pe(n, e.month())) : e._d["set" + (e._isUTC ? "UTC" : "") + t](n))
    }
    function Pe(e, t) {
        if (isNaN(e) || isNaN(t))
            return NaN;
        var n,
            s = (t % (n = 12) + n) % n;
        return e += (t - s) / 12, 1 === s ? De(e) ? 29 : 28 : 31 - s % 7 % 2
    }
    Ye = Array.prototype.indexOf ? Array.prototype.indexOf : function(e) {
        var t;
        for (t = 0; t < this.length; ++t)
            if (this[t] === e)
                return t;
        return -1
    },
    I("M", ["MM", 2], "Mo", function() {
        return this.month() + 1
    }),
    I("MMM", 0, 0, function(e) {
        return this.localeData().monthsShort(this, e)
    }),
    I("MMMM", 0, 0, function(e) {
        return this.localeData().months(this, e)
    }),
    C("month", "M"),
    F("month", 8),
    ue("M", B),
    ue("MM", B, z),
    ue("MMM", function(e, t) {
        return t.monthsShortRegex(e)
    }),
    ue("MMMM", function(e, t) {
        return t.monthsRegex(e)
    }),
    ce(["M", "MM"], function(e, t) {
        t[_e] = D(e) - 1
    }),
    ce(["MMM", "MMMM"], function(e, t, n, s) {
        var i = n._locale.monthsParse(e, s, n._strict);
        null != i ? t[_e] = i : g(n).invalidMonth = e
    });
    var We = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,
        Ce = "January_February_March_April_May_June_July_August_September_October_November_December".split("_");
    var He = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");
    function Re(e, t) {
        var n;
        if (!e.isValid())
            return e;
        if ("string" == typeof t)
            if (/^\d+$/.test(t))
                t = D(t);
            else if (!h(t = e.localeData().monthsParse(t)))
                return e;
        return n = Math.min(e.date(), Pe(e.year(), t)), e._d["set" + (e._isUTC ? "UTC" : "") + "Month"](t, n), e
    }
    function Ue(e) {
        return null != e ? (Re(this, e), c.updateOffset(this, !0), this) : be(this, "Month")
    }
    var Fe = ae;
    var Le = ae;
    function Ne() {
        function e(e, t) {
            return t.length - e.length
        }
        var t,
            n,
            s = [],
            i = [],
            r = [];
        for (t = 0; t < 12; t++)
            n = y([2e3, t]),
            s.push(this.monthsShort(n, "")),
            i.push(this.months(n, "")),
            r.push(this.months(n, "")),
            r.push(this.monthsShort(n, ""));
        for (s.sort(e), i.sort(e), r.sort(e), t = 0; t < 12; t++)
            s[t] = he(s[t]),
            i[t] = he(i[t]);
        for (t = 0; t < 24; t++)
            r[t] = he(r[t]);
        this._monthsRegex = new RegExp("^(" + r.join("|") + ")", "i"),
        this._monthsShortRegex = this._monthsRegex,
        this._monthsStrictRegex = new RegExp("^(" + i.join("|") + ")", "i"),
        this._monthsShortStrictRegex = new RegExp("^(" + s.join("|") + ")", "i")
    }
    function Ge(e) {
        var t;
        if (e < 100 && 0 <= e) {
            var n = Array.prototype.slice.call(arguments);
            n[0] = e + 400,
            t = new Date(Date.UTC.apply(null, n)),
            isFinite(t.getUTCFullYear()) && t.setUTCFullYear(e)
        } else
            t = new Date(Date.UTC.apply(null, arguments));
        return t
    }
    function Ve(e, t, n) {
        var s = 7 + t - n;
        return -((7 + Ge(e, 0, s).getUTCDay() - t) % 7) + s - 1
    }
    function Ee(e, t, n, s, i) {
        var r,
            a,
            o = 1 + 7 * (t - 1) + (7 + n - s) % 7 + Ve(e, s, i);
        return a = o <= 0 ? Se(r = e - 1) + o : o > Se(e) ? (r = e + 1, o - Se(e)) : (r = e, o), {
            year: r,
            dayOfYear: a
        }
    }
    function Ie(e, t, n) {
        var s,
            i,
            r = Ve(e.year(), t, n),
            a = Math.floor((e.dayOfYear() - r - 1) / 7) + 1;
        return a < 1 ? s = a + Ae(i = e.year() - 1, t, n) : a > Ae(e.year(), t, n) ? (s = a - Ae(e.year(), t, n), i = e.year() + 1) : (i = e.year(), s = a), {
            week: s,
            year: i
        }
    }
    function Ae(e, t, n) {
        var s = Ve(e, t, n),
            i = Ve(e + 1, t, n);
        return (Se(e) - s + i) / 7
    }
    I("w", ["ww", 2], "wo", "week"),
    I("W", ["WW", 2], "Wo", "isoWeek"),
    C("week", "w"),
    C("isoWeek", "W"),
    F("week", 5),
    F("isoWeek", 5),
    ue("w", B),
    ue("ww", B, z),
    ue("W", B),
    ue("WW", B, z),
    fe(["w", "ww", "W", "WW"], function(e, t, n, s) {
        t[s.substr(0, 1)] = D(e)
    });
    function je(e, t) {
        return e.slice(t, 7).concat(e.slice(0, t))
    }
    I("d", 0, "do", "day"),
    I("dd", 0, 0, function(e) {
        return this.localeData().weekdaysMin(this, e)
    }),
    I("ddd", 0, 0, function(e) {
        return this.localeData().weekdaysShort(this, e)
    }),
    I("dddd", 0, 0, function(e) {
        return this.localeData().weekdays(this, e)
    }),
    I("e", 0, 0, "weekday"),
    I("E", 0, 0, "isoWeekday"),
    C("day", "d"),
    C("weekday", "e"),
    C("isoWeekday", "E"),
    F("day", 11),
    F("weekday", 11),
    F("isoWeekday", 11),
    ue("d", B),
    ue("e", B),
    ue("E", B),
    ue("dd", function(e, t) {
        return t.weekdaysMinRegex(e)
    }),
    ue("ddd", function(e, t) {
        return t.weekdaysShortRegex(e)
    }),
    ue("dddd", function(e, t) {
        return t.weekdaysRegex(e)
    }),
    fe(["dd", "ddd", "dddd"], function(e, t, n, s) {
        var i = n._locale.weekdaysParse(e, s, n._strict);
        null != i ? t.d = i : g(n).invalidWeekday = e
    }),
    fe(["d", "e", "E"], function(e, t, n, s) {
        t[s] = D(e)
    });
    var Ze = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");
    var ze = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");
    var $e = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
    var qe = ae;
    var Je = ae;
    var Be = ae;
    function Qe() {
        function e(e, t) {
            return t.length - e.length
        }
        var t,
            n,
            s,
            i,
            r,
            a = [],
            o = [],
            u = [],
            l = [];
        for (t = 0; t < 7; t++)
            n = y([2e3, 1]).day(t),
            s = this.weekdaysMin(n, ""),
            i = this.weekdaysShort(n, ""),
            r = this.weekdays(n, ""),
            a.push(s),
            o.push(i),
            u.push(r),
            l.push(s),
            l.push(i),
            l.push(r);
        for (a.sort(e), o.sort(e), u.sort(e), l.sort(e), t = 0; t < 7; t++)
            o[t] = he(o[t]),
            u[t] = he(u[t]),
            l[t] = he(l[t]);
        this._weekdaysRegex = new RegExp("^(" + l.join("|") + ")", "i"),
        this._weekdaysShortRegex = this._weekdaysRegex,
        this._weekdaysMinRegex = this._weekdaysRegex,
        this._weekdaysStrictRegex = new RegExp("^(" + u.join("|") + ")", "i"),
        this._weekdaysShortStrictRegex = new RegExp("^(" + o.join("|") + ")", "i"),
        this._weekdaysMinStrictRegex = new RegExp("^(" + a.join("|") + ")", "i")
    }
    function Xe() {
        return this.hours() % 12 || 12
    }
    function Ke(e, t) {
        I(e, 0, 0, function() {
            return this.localeData().meridiem(this.hours(), this.minutes(), t)
        })
    }
    function et(e, t) {
        return t._meridiemParse
    }
    I("H", ["HH", 2], 0, "hour"),
    I("h", ["hh", 2], 0, Xe),
    I("k", ["kk", 2], 0, function() {
        return this.hours() || 24
    }),
    I("hmm", 0, 0, function() {
        return "" + Xe.apply(this) + L(this.minutes(), 2)
    }),
    I("hmmss", 0, 0, function() {
        return "" + Xe.apply(this) + L(this.minutes(), 2) + L(this.seconds(), 2)
    }),
    I("Hmm", 0, 0, function() {
        return "" + this.hours() + L(this.minutes(), 2)
    }),
    I("Hmmss", 0, 0, function() {
        return "" + this.hours() + L(this.minutes(), 2) + L(this.seconds(), 2)
    }),
    Ke("a", !0),
    Ke("A", !1),
    C("hour", "h"),
    F("hour", 13),
    ue("a", et),
    ue("A", et),
    ue("H", B),
    ue("h", B),
    ue("k", B),
    ue("HH", B, z),
    ue("hh", B, z),
    ue("kk", B, z),
    ue("hmm", Q),
    ue("hmmss", X),
    ue("Hmm", Q),
    ue("Hmmss", X),
    ce(["H", "HH"], ge),
    ce(["k", "kk"], function(e, t, n) {
        var s = D(e);
        t[ge] = 24 === s ? 0 : s
    }),
    ce(["a", "A"], function(e, t, n) {
        n._isPm = n._locale.isPM(e),
        n._meridiem = e
    }),
    ce(["h", "hh"], function(e, t, n) {
        t[ge] = D(e),
        g(n).bigHour = !0
    }),
    ce("hmm", function(e, t, n) {
        var s = e.length - 2;
        t[ge] = D(e.substr(0, s)),
        t[ve] = D(e.substr(s)),
        g(n).bigHour = !0
    }),
    ce("hmmss", function(e, t, n) {
        var s = e.length - 4,
            i = e.length - 2;
        t[ge] = D(e.substr(0, s)),
        t[ve] = D(e.substr(s, 2)),
        t[pe] = D(e.substr(i)),
        g(n).bigHour = !0
    }),
    ce("Hmm", function(e, t, n) {
        var s = e.length - 2;
        t[ge] = D(e.substr(0, s)),
        t[ve] = D(e.substr(s))
    }),
    ce("Hmmss", function(e, t, n) {
        var s = e.length - 4,
            i = e.length - 2;
        t[ge] = D(e.substr(0, s)),
        t[ve] = D(e.substr(s, 2)),
        t[pe] = D(e.substr(i))
    });
    var tt,
        nt = Te("Hours", !0),
        st = {
            calendar: {
                sameDay: "[Today at] LT",
                nextDay: "[Tomorrow at] LT",
                nextWeek: "dddd [at] LT",
                lastDay: "[Yesterday at] LT",
                lastWeek: "[Last] dddd [at] LT",
                sameElse: "L"
            },
            longDateFormat: {
                LTS: "h:mm:ss A",
                LT: "h:mm A",
                L: "MM/DD/YYYY",
                LL: "MMMM D, YYYY",
                LLL: "MMMM D, YYYY h:mm A",
                LLLL: "dddd, MMMM D, YYYY h:mm A"
            },
            invalidDate: "Invalid date",
            ordinal: "%d",
            dayOfMonthOrdinalParse: /\d{1,2}/,
            relativeTime: {
                future: "in %s",
                past: "%s ago",
                s: "a few seconds",
                ss: "%d seconds",
                m: "a minute",
                mm: "%d minutes",
                h: "an hour",
                hh: "%d hours",
                d: "a day",
                dd: "%d days",
                M: "a month",
                MM: "%d months",
                y: "a year",
                yy: "%d years"
            },
            months: Ce,
            monthsShort: He,
            week: {
                dow: 0,
                doy: 6
            },
            weekdays: Ze,
            weekdaysMin: $e,
            weekdaysShort: ze,
            meridiemParse: /[ap]\.?m?\.?/i
        },
        it = {},
        rt = {};
    function at(e) {
        return e ? e.toLowerCase().replace("_", "-") : e
    }
    function ot(e) {
        var t = null;
        if (!it[e] && "undefined" != typeof module && module && module.exports)
            try {
                t = tt._abbr,
                require("./locale/" + e),
                ut(t)
            } catch (e) {}
        return it[e]
    }
    function ut(e, t) {
        var n;
        return e && ((n = l(t) ? ht(e) : lt(e, t)) ? tt = n : "undefined" != typeof console && console.warn && console.warn("Locale " + e + " not found. Did you forget to load it?")), tt._abbr
    }
    function lt(e, t) {
        if (null === t)
            return delete it[e], null;
        var n,
            s = st;
        if (t.abbr = e, null != it[e])
            T("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
            s = it[e]._config;
        else if (null != t.parentLocale)
            if (null != it[t.parentLocale])
                s = it[t.parentLocale]._config;
            else {
                if (null == (n = ot(t.parentLocale)))
                    return rt[t.parentLocale] || (rt[t.parentLocale] = []), rt[t.parentLocale].push({
                        name: e,
                        config: t
                    }), null;
                s = n._config
            }
        return it[e] = new P(x(s, t)), rt[e] && rt[e].forEach(function(e) {
            lt(e.name, e.config)
        }), ut(e), it[e]
    }
    function ht(e) {
        var t;
        if (e && e._locale && e._locale._abbr && (e = e._locale._abbr), !e)
            return tt;
        if (!o(e)) {
            if (t = ot(e))
                return t;
            e = [e]
        }
        return function(e) {
            for (var t, n, s, i, r = 0; r < e.length;) {
                for (t = (i = at(e[r]).split("-")).length, n = (n = at(e[r + 1])) ? n.split("-") : null; 0 < t;) {
                    if (s = ot(i.slice(0, t).join("-")))
                        return s;
                    if (n && n.length >= t && a(i, n, !0) >= t - 1)
                        break;
                    t--
                }
                r++
            }
            return tt
        }(e)
    }
    function dt(e) {
        var t,
            n = e._a;
        return n && -2 === g(e).overflow && (t = n[_e] < 0 || 11 < n[_e] ? _e : n[ye] < 1 || n[ye] > Pe(n[me], n[_e]) ? ye : n[ge] < 0 || 24 < n[ge] || 24 === n[ge] && (0 !== n[ve] || 0 !== n[pe] || 0 !== n[we]) ? ge : n[ve] < 0 || 59 < n[ve] ? ve : n[pe] < 0 || 59 < n[pe] ? pe : n[we] < 0 || 999 < n[we] ? we : -1, g(e)._overflowDayOfYear && (t < me || ye < t) && (t = ye), g(e)._overflowWeeks && -1 === t && (t = Me), g(e)._overflowWeekday && -1 === t && (t = ke), g(e).overflow = t), e
    }
    function ct(e, t, n) {
        return null != e ? e : null != t ? t : n
    }
    function ft(e) {
        var t,
            n,
            s,
            i,
            r,
            a = [];
        if (!e._d) {
            var o,
                u;
            for (o = e, u = new Date(c.now()), s = o._useUTC ? [u.getUTCFullYear(), u.getUTCMonth(), u.getUTCDate()] : [u.getFullYear(), u.getMonth(), u.getDate()], e._w && null == e._a[ye] && null == e._a[_e] && function(e) {
                var t,
                    n,
                    s,
                    i,
                    r,
                    a,
                    o,
                    u;
                if (null != (t = e._w).GG || null != t.W || null != t.E)
                    r = 1,
                    a = 4,
                    n = ct(t.GG, e._a[me], Ie(bt(), 1, 4).year),
                    s = ct(t.W, 1),
                    ((i = ct(t.E, 1)) < 1 || 7 < i) && (u = !0);
                else {
                    r = e._locale._week.dow,
                    a = e._locale._week.doy;
                    var l = Ie(bt(), r, a);
                    n = ct(t.gg, e._a[me], l.year),
                    s = ct(t.w, l.week),
                    null != t.d ? ((i = t.d) < 0 || 6 < i) && (u = !0) : null != t.e ? (i = t.e + r, (t.e < 0 || 6 < t.e) && (u = !0)) : i = r
                }
                s < 1 || s > Ae(n, r, a) ? g(e)._overflowWeeks = !0 : null != u ? g(e)._overflowWeekday = !0 : (o = Ee(n, s, i, r, a), e._a[me] = o.year, e._dayOfYear = o.dayOfYear)
            }(e), null != e._dayOfYear && (r = ct(e._a[me], s[me]), (e._dayOfYear > Se(r) || 0 === e._dayOfYear) && (g(e)._overflowDayOfYear = !0), n = Ge(r, 0, e._dayOfYear), e._a[_e] = n.getUTCMonth(), e._a[ye] = n.getUTCDate()), t = 0; t < 3 && null == e._a[t]; ++t)
                e._a[t] = a[t] = s[t];
            for (; t < 7; t++)
                e._a[t] = a[t] = null == e._a[t] ? 2 === t ? 1 : 0 : e._a[t];
            24 === e._a[ge] && 0 === e._a[ve] && 0 === e._a[pe] && 0 === e._a[we] && (e._nextDay = !0, e._a[ge] = 0),
            e._d = (e._useUTC ? Ge : function(e, t, n, s, i, r, a) {
                var o;
                return e < 100 && 0 <= e ? (o = new Date(e + 400, t, n, s, i, r, a), isFinite(o.getFullYear()) && o.setFullYear(e)) : o = new Date(e, t, n, s, i, r, a), o
            }).apply(null, a),
            i = e._useUTC ? e._d.getUTCDay() : e._d.getDay(),
            null != e._tzm && e._d.setUTCMinutes(e._d.getUTCMinutes() - e._tzm),
            e._nextDay && (e._a[ge] = 24),
            e._w && void 0 !== e._w.d && e._w.d !== i && (g(e).weekdayMismatch = !0)
        }
    }
    var mt = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
        _t = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
        yt = /Z|[+-]\d\d(?::?\d\d)?/,
        gt = [["YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/], ["YYYY-MM-DD", /\d{4}-\d\d-\d\d/], ["GGGG-[W]WW-E", /\d{4}-W\d\d-\d/], ["GGGG-[W]WW", /\d{4}-W\d\d/, !1], ["YYYY-DDD", /\d{4}-\d{3}/], ["YYYY-MM", /\d{4}-\d\d/, !1], ["YYYYYYMMDD", /[+-]\d{10}/], ["YYYYMMDD", /\d{8}/], ["GGGG[W]WWE", /\d{4}W\d{3}/], ["GGGG[W]WW", /\d{4}W\d{2}/, !1], ["YYYYDDD", /\d{7}/]],
        vt = [["HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/], ["HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/], ["HH:mm:ss", /\d\d:\d\d:\d\d/], ["HH:mm", /\d\d:\d\d/], ["HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/], ["HHmmss,SSSS", /\d\d\d\d\d\d,\d+/], ["HHmmss", /\d\d\d\d\d\d/], ["HHmm", /\d\d\d\d/], ["HH", /\d\d/]],
        pt = /^\/?Date\((\-?\d+)/i;
    function wt(e) {
        var t,
            n,
            s,
            i,
            r,
            a,
            o = e._i,
            u = mt.exec(o) || _t.exec(o);
        if (u) {
            for (g(e).iso = !0, t = 0, n = gt.length; t < n; t++)
                if (gt[t][1].exec(u[1])) {
                    i = gt[t][0],
                    s = !1 !== gt[t][2];
                    break
                }
            if (null == i)
                return void (e._isValid = !1);
            if (u[3]) {
                for (t = 0, n = vt.length; t < n; t++)
                    if (vt[t][1].exec(u[3])) {
                        r = (u[2] || " ") + vt[t][0];
                        break
                    }
                if (null == r)
                    return void (e._isValid = !1)
            }
            if (!s && null != r)
                return void (e._isValid = !1);
            if (u[4]) {
                if (!yt.exec(u[4]))
                    return void (e._isValid = !1);
                a = "Z"
            }
            e._f = i + (r || "") + (a || ""),
            Yt(e)
        } else
            e._isValid = !1
    }
    var Mt = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;
    function kt(e, t, n, s, i, r) {
        var a = [function(e) {
            var t = parseInt(e, 10);
            {
                if (t <= 49)
                    return 2e3 + t;
                if (t <= 999)
                    return 1900 + t
            }
            return t
        }(e), He.indexOf(t), parseInt(n, 10), parseInt(s, 10), parseInt(i, 10)];
        return r && a.push(parseInt(r, 10)), a
    }
    var St = {
        UT: 0,
        GMT: 0,
        EDT: -240,
        EST: -300,
        CDT: -300,
        CST: -360,
        MDT: -360,
        MST: -420,
        PDT: -420,
        PST: -480
    };
    function Dt(e) {
        var t,
            n,
            s,
            i = Mt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").replace(/^\s\s*/, "").replace(/\s\s*$/, ""));
        if (i) {
            var r = kt(i[4], i[3], i[2], i[5], i[6], i[7]);
            if (t = i[1], n = r, s = e, t && ze.indexOf(t) !== new Date(n[0], n[1], n[2]).getDay() && (g(s).weekdayMismatch = !0, !(s._isValid = !1)))
                return;
            e._a = r,
            e._tzm = function(e, t, n) {
                if (e)
                    return St[e];
                if (t)
                    return 0;
                var s = parseInt(n, 10),
                    i = s % 100;
                return (s - i) / 100 * 60 + i
            }(i[8], i[9], i[10]),
            e._d = Ge.apply(null, e._a),
            e._d.setUTCMinutes(e._d.getUTCMinutes() - e._tzm),
            g(e).rfc2822 = !0
        } else
            e._isValid = !1
    }
    function Yt(e) {
        if (e._f !== c.ISO_8601)
            if (e._f !== c.RFC_2822) {
                e._a = [],
                g(e).empty = !0;
                var t,
                    n,
                    s,
                    i,
                    r,
                    a,
                    o,
                    u,
                    l = "" + e._i,
                    h = l.length,
                    d = 0;
                for (s = j(e._f, e._locale).match(N) || [], t = 0; t < s.length; t++)
                    i = s[t],
                    (n = (l.match(le(i, e)) || [])[0]) && (0 < (r = l.substr(0, l.indexOf(n))).length && g(e).unusedInput.push(r), l = l.slice(l.indexOf(n) + n.length), d += n.length),
                    E[i] ? (n ? g(e).empty = !1 : g(e).unusedTokens.push(i), a = i, u = e, null != (o = n) && m(de, a) && de[a](o, u._a, u, a)) : e._strict && !n && g(e).unusedTokens.push(i);
                g(e).charsLeftOver = h - d,
                0 < l.length && g(e).unusedInput.push(l),
                e._a[ge] <= 12 && !0 === g(e).bigHour && 0 < e._a[ge] && (g(e).bigHour = void 0),
                g(e).parsedDateParts = e._a.slice(0),
                g(e).meridiem = e._meridiem,
                e._a[ge] = function(e, t, n) {
                    var s;
                    if (null == n)
                        return t;
                    return null != e.meridiemHour ? e.meridiemHour(t, n) : (null != e.isPM && ((s = e.isPM(n)) && t < 12 && (t += 12), s || 12 !== t || (t = 0)), t)
                }(e._locale, e._a[ge], e._meridiem),
                ft(e),
                dt(e)
            } else
                Dt(e);
        else
            wt(e)
    }
    function Ot(e) {
        var t,
            n,
            s,
            i,
            r = e._i,
            a = e._f;
        return e._locale = e._locale || ht(e._l), null === r || void 0 === a && "" === r ? p({
            nullInput: !0
        }) : ("string" == typeof r && (e._i = r = e._locale.preparse(r)), k(r) ? new M(dt(r)) : (d(r) ? e._d = r : o(a) ? function(e) {
            var t,
                n,
                s,
                i,
                r;
            if (0 === e._f.length)
                return g(e).invalidFormat = !0, e._d = new Date(NaN);
            for (i = 0; i < e._f.length; i++)
                r = 0,
                t = w({}, e),
                null != e._useUTC && (t._useUTC = e._useUTC),
                t._f = e._f[i],
                Yt(t),
                v(t) && (r += g(t).charsLeftOver, r += 10 * g(t).unusedTokens.length, g(t).score = r, (null == s || r < s) && (s = r, n = t));
            _(e, n || t)
        }(e) : a ? Yt(e) : l(n = (t = e)._i) ? t._d = new Date(c.now()) : d(n) ? t._d = new Date(n.valueOf()) : "string" == typeof n ? (s = t, null === (i = pt.exec(s._i)) ? (wt(s), !1 === s._isValid && (delete s._isValid, Dt(s), !1 === s._isValid && (delete s._isValid, c.createFromInputFallback(s)))) : s._d = new Date(+i[1])) : o(n) ? (t._a = f(n.slice(0), function(e) {
            return parseInt(e, 10)
        }), ft(t)) : u(n) ? function(e) {
            if (!e._d) {
                var t = R(e._i);
                e._a = f([t.year, t.month, t.day || t.date, t.hour, t.minute, t.second, t.millisecond], function(e) {
                    return e && parseInt(e, 10)
                }),
                ft(e)
            }
        }(t) : h(n) ? t._d = new Date(n) : c.createFromInputFallback(t), v(e) || (e._d = null), e))
    }
    function Tt(e, t, n, s, i) {
        var r,
            a = {};
        return !0 !== n && !1 !== n || (s = n, n = void 0), (u(e) && function(e) {
            if (Object.getOwnPropertyNames)
                return 0 === Object.getOwnPropertyNames(e).length;
            var t;
            for (t in e)
                if (e.hasOwnProperty(t))
                    return !1;
            return !0
        }(e) || o(e) && 0 === e.length) && (e = void 0), a._isAMomentObject = !0, a._useUTC = a._isUTC = i, a._l = n, a._i = e, a._f = t, a._strict = s, (r = new M(dt(Ot(a))))._nextDay && (r.add(1, "d"), r._nextDay = void 0), r
    }
    function bt(e, t, n, s) {
        return Tt(e, t, n, s, !1)
    }
    c.createFromInputFallback = n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.", function(e) {
        e._d = new Date(e._i + (e._useUTC ? " UTC" : ""))
    }),
    c.ISO_8601 = function() {},
    c.RFC_2822 = function() {};
    var xt = n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/", function() {
            var e = bt.apply(null, arguments);
            return this.isValid() && e.isValid() ? e < this ? this : e : p()
        }),
        Pt = n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/", function() {
            var e = bt.apply(null, arguments);
            return this.isValid() && e.isValid() ? this < e ? this : e : p()
        });
    function Wt(e, t) {
        var n,
            s;
        if (1 === t.length && o(t[0]) && (t = t[0]), !t.length)
            return bt();
        for (n = t[0], s = 1; s < t.length; ++s)
            t[s].isValid() && !t[s][e](n) || (n = t[s]);
        return n
    }
    var Ct = ["year", "quarter", "month", "week", "day", "hour", "minute", "second", "millisecond"];
    function Ht(e) {
        var t = R(e),
            n = t.year || 0,
            s = t.quarter || 0,
            i = t.month || 0,
            r = t.week || t.isoWeek || 0,
            a = t.day || 0,
            o = t.hour || 0,
            u = t.minute || 0,
            l = t.second || 0,
            h = t.millisecond || 0;
        this._isValid = function(e) {
            for (var t in e)
                if (-1 === Ye.call(Ct, t) || null != e[t] && isNaN(e[t]))
                    return !1;
            for (var n = !1, s = 0; s < Ct.length; ++s)
                if (e[Ct[s]]) {
                    if (n)
                        return !1;
                    parseFloat(e[Ct[s]]) !== D(e[Ct[s]]) && (n = !0)
                }
            return !0
        }(t),
        this._milliseconds = +h + 1e3 * l + 6e4 * u + 1e3 * o * 60 * 60,
        this._days = +a + 7 * r,
        this._months = +i + 3 * s + 12 * n,
        this._data = {},
        this._locale = ht(),
        this._bubble()
    }
    function Rt(e) {
        return e instanceof Ht
    }
    function Ut(e) {
        return e < 0 ? -1 * Math.round(-1 * e) : Math.round(e)
    }
    function Ft(e, n) {
        I(e, 0, 0, function() {
            var e = this.utcOffset(),
                t = "+";
            return e < 0 && (e = -e, t = "-"), t + L(~~(e / 60), 2) + n + L(~~e % 60, 2)
        })
    }
    Ft("Z", ":"),
    Ft("ZZ", ""),
    ue("Z", re),
    ue("ZZ", re),
    ce(["Z", "ZZ"], function(e, t, n) {
        n._useUTC = !0,
        n._tzm = Nt(re, e)
    });
    var Lt = /([\+\-]|\d\d)/gi;
    function Nt(e, t) {
        var n = (t || "").match(e);
        if (null === n)
            return null;
        var s = ((n[n.length - 1] || []) + "").match(Lt) || ["-", 0, 0],
            i = 60 * s[1] + D(s[2]);
        return 0 === i ? 0 : "+" === s[0] ? i : -i
    }
    function Gt(e, t) {
        var n,
            s;
        return t._isUTC ? (n = t.clone(), s = (k(e) || d(e) ? e.valueOf() : bt(e).valueOf()) - n.valueOf(), n._d.setTime(n._d.valueOf() + s), c.updateOffset(n, !1), n) : bt(e).local()
    }
    function Vt(e) {
        return 15 * -Math.round(e._d.getTimezoneOffset() / 15)
    }
    function Et() {
        return !!this.isValid() && (this._isUTC && 0 === this._offset)
    }
    c.updateOffset = function() {};
    var It = /^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,
        At = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;
    function jt(e, t) {
        var n,
            s,
            i,
            r = e,
            a = null;
        return Rt(e) ? r = {
            ms: e._milliseconds,
            d: e._days,
            M: e._months
        } : h(e) ? (r = {}, t ? r[t] = e : r.milliseconds = e) : (a = It.exec(e)) ? (n = "-" === a[1] ? -1 : 1, r = {
            y: 0,
            d: D(a[ye]) * n,
            h: D(a[ge]) * n,
            m: D(a[ve]) * n,
            s: D(a[pe]) * n,
            ms: D(Ut(1e3 * a[we])) * n
        }) : (a = At.exec(e)) ? (n = "-" === a[1] ? -1 : 1, r = {
            y: Zt(a[2], n),
            M: Zt(a[3], n),
            w: Zt(a[4], n),
            d: Zt(a[5], n),
            h: Zt(a[6], n),
            m: Zt(a[7], n),
            s: Zt(a[8], n)
        }) : null == r ? r = {} : "object" == typeof r && ("from" in r || "to" in r) && (i = function(e, t) {
            var n;
            if (!e.isValid() || !t.isValid())
                return {
                    milliseconds: 0,
                    months: 0
                };
            t = Gt(t, e),
            e.isBefore(t) ? n = zt(e, t) : ((n = zt(t, e)).milliseconds = -n.milliseconds, n.months = -n.months);
            return n
        }(bt(r.from), bt(r.to)), (r = {}).ms = i.milliseconds, r.M = i.months), s = new Ht(r), Rt(e) && m(e, "_locale") && (s._locale = e._locale), s
    }
    function Zt(e, t) {
        var n = e && parseFloat(e.replace(",", "."));
        return (isNaN(n) ? 0 : n) * t
    }
    function zt(e, t) {
        var n = {};
        return n.months = t.month() - e.month() + 12 * (t.year() - e.year()), e.clone().add(n.months, "M").isAfter(t) && --n.months, n.milliseconds = +t - +e.clone().add(n.months, "M"), n
    }
    function $t(s, i) {
        return function(e, t) {
            var n;
            return null === t || isNaN(+t) || (T(i, "moment()." + i + "(period, number) is deprecated. Please use moment()." + i + "(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."), n = e, e = t, t = n), qt(this, jt(e = "string" == typeof e ? +e : e, t), s), this
        }
    }
    function qt(e, t, n, s) {
        var i = t._milliseconds,
            r = Ut(t._days),
            a = Ut(t._months);
        e.isValid() && (s = null == s || s, a && Re(e, be(e, "Month") + a * n), r && xe(e, "Date", be(e, "Date") + r * n), i && e._d.setTime(e._d.valueOf() + i * n), s && c.updateOffset(e, r || a))
    }
    jt.fn = Ht.prototype,
    jt.invalid = function() {
        return jt(NaN)
    };
    var Jt = $t(1, "add"),
        Bt = $t(-1, "subtract");
    function Qt(e, t) {
        var n = 12 * (t.year() - e.year()) + (t.month() - e.month()),
            s = e.clone().add(n, "months");
        return -(n + (t - s < 0 ? (t - s) / (s - e.clone().add(n - 1, "months")) : (t - s) / (e.clone().add(n + 1, "months") - s))) || 0
    }
    function Xt(e) {
        var t;
        return void 0 === e ? this._locale._abbr : (null != (t = ht(e)) && (this._locale = t), this)
    }
    c.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ",
    c.defaultFormatUtc = "YYYY-MM-DDTHH:mm:ss[Z]";
    var Kt = n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(e) {
        return void 0 === e ? this.localeData() : this.locale(e)
    });
    function en() {
        return this._locale
    }
    var tn = 126227808e5;
    function nn(e, t) {
        return (e % t + t) % t
    }
    function sn(e, t, n) {
        return e < 100 && 0 <= e ? new Date(e + 400, t, n) - tn : new Date(e, t, n).valueOf()
    }
    function rn(e, t, n) {
        return e < 100 && 0 <= e ? Date.UTC(e + 400, t, n) - tn : Date.UTC(e, t, n)
    }
    function an(e, t) {
        I(0, [e, e.length], 0, t)
    }
    function on(e, t, n, s, i) {
        var r;
        return null == e ? Ie(this, s, i).year : ((r = Ae(e, s, i)) < t && (t = r), function(e, t, n, s, i) {
            var r = Ee(e, t, n, s, i),
                a = Ge(r.year, 0, r.dayOfYear);
            return this.year(a.getUTCFullYear()), this.month(a.getUTCMonth()), this.date(a.getUTCDate()), this
        }.call(this, e, t, n, s, i))
    }
    I(0, ["gg", 2], 0, function() {
        return this.weekYear() % 100
    }),
    I(0, ["GG", 2], 0, function() {
        return this.isoWeekYear() % 100
    }),
    an("gggg", "weekYear"),
    an("ggggg", "weekYear"),
    an("GGGG", "isoWeekYear"),
    an("GGGGG", "isoWeekYear"),
    C("weekYear", "gg"),
    C("isoWeekYear", "GG"),
    F("weekYear", 1),
    F("isoWeekYear", 1),
    ue("G", se),
    ue("g", se),
    ue("GG", B, z),
    ue("gg", B, z),
    ue("GGGG", ee, q),
    ue("gggg", ee, q),
    ue("GGGGG", te, J),
    ue("ggggg", te, J),
    fe(["gggg", "ggggg", "GGGG", "GGGGG"], function(e, t, n, s) {
        t[s.substr(0, 2)] = D(e)
    }),
    fe(["gg", "GG"], function(e, t, n, s) {
        t[s] = c.parseTwoDigitYear(e)
    }),
    I("Q", 0, "Qo", "quarter"),
    C("quarter", "Q"),
    F("quarter", 7),
    ue("Q", Z),
    ce("Q", function(e, t) {
        t[_e] = 3 * (D(e) - 1)
    }),
    I("D", ["DD", 2], "Do", "date"),
    C("date", "D"),
    F("date", 9),
    ue("D", B),
    ue("DD", B, z),
    ue("Do", function(e, t) {
        return e ? t._dayOfMonthOrdinalParse || t._ordinalParse : t._dayOfMonthOrdinalParseLenient
    }),
    ce(["D", "DD"], ye),
    ce("Do", function(e, t) {
        t[ye] = D(e.match(B)[0])
    });
    var un = Te("Date", !0);
    I("DDD", ["DDDD", 3], "DDDo", "dayOfYear"),
    C("dayOfYear", "DDD"),
    F("dayOfYear", 4),
    ue("DDD", K),
    ue("DDDD", $),
    ce(["DDD", "DDDD"], function(e, t, n) {
        n._dayOfYear = D(e)
    }),
    I("m", ["mm", 2], 0, "minute"),
    C("minute", "m"),
    F("minute", 14),
    ue("m", B),
    ue("mm", B, z),
    ce(["m", "mm"], ve);
    var ln = Te("Minutes", !1);
    I("s", ["ss", 2], 0, "second"),
    C("second", "s"),
    F("second", 15),
    ue("s", B),
    ue("ss", B, z),
    ce(["s", "ss"], pe);
    var hn,
        dn = Te("Seconds", !1);
    for (I("S", 0, 0, function() {
        return ~~(this.millisecond() / 100)
    }), I(0, ["SS", 2], 0, function() {
        return ~~(this.millisecond() / 10)
    }), I(0, ["SSS", 3], 0, "millisecond"), I(0, ["SSSS", 4], 0, function() {
        return 10 * this.millisecond()
    }), I(0, ["SSSSS", 5], 0, function() {
        return 100 * this.millisecond()
    }), I(0, ["SSSSSS", 6], 0, function() {
        return 1e3 * this.millisecond()
    }), I(0, ["SSSSSSS", 7], 0, function() {
        return 1e4 * this.millisecond()
    }), I(0, ["SSSSSSSS", 8], 0, function() {
        return 1e5 * this.millisecond()
    }), I(0, ["SSSSSSSSS", 9], 0, function() {
        return 1e6 * this.millisecond()
    }), C("millisecond", "ms"), F("millisecond", 16), ue("S", K, Z), ue("SS", K, z), ue("SSS", K, $), hn = "SSSS"; hn.length <= 9; hn += "S")
        ue(hn, ne);
    function cn(e, t) {
        t[we] = D(1e3 * ("0." + e))
    }
    for (hn = "S"; hn.length <= 9; hn += "S")
        ce(hn, cn);
    var fn = Te("Milliseconds", !1);
    I("z", 0, 0, "zoneAbbr"),
    I("zz", 0, 0, "zoneName");
    var mn = M.prototype;
    function _n(e) {
        return e
    }
    mn.add = Jt,
    mn.calendar = function(e, t) {
        var n = e || bt(),
            s = Gt(n, this).startOf("day"),
            i = c.calendarFormat(this, s) || "sameElse",
            r = t && (b(t[i]) ? t[i].call(this, n) : t[i]);
        return this.format(r || this.localeData().calendar(i, this, bt(n)))
    },
    mn.clone = function() {
        return new M(this)
    },
    mn.diff = function(e, t, n) {
        var s,
            i,
            r;
        if (!this.isValid())
            return NaN;
        if (!(s = Gt(e, this)).isValid())
            return NaN;
        switch (i = 6e4 * (s.utcOffset() - this.utcOffset()), t = H(t)) {
        case "year":
            r = Qt(this, s) / 12;
            break;
        case "month":
            r = Qt(this, s);
            break;
        case "quarter":
            r = Qt(this, s) / 3;
            break;
        case "second":
            r = (this - s) / 1e3;
            break;
        case "minute":
            r = (this - s) / 6e4;
            break;
        case "hour":
            r = (this - s) / 36e5;
            break;
        case "day":
            r = (this - s - i) / 864e5;
            break;
        case "week":
            r = (this - s - i) / 6048e5;
            break;
        default:
            r = this - s
        }
        return n ? r : S(r)
    },
    mn.endOf = function(e) {
        var t;
        if (void 0 === (e = H(e)) || "millisecond" === e || !this.isValid())
            return this;
        var n = this._isUTC ? rn : sn;
        switch (e) {
        case "year":
            t = n(this.year() + 1, 0, 1) - 1;
            break;
        case "quarter":
            t = n(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;
            break;
        case "month":
            t = n(this.year(), this.month() + 1, 1) - 1;
            break;
        case "week":
            t = n(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;
            break;
        case "isoWeek":
            t = n(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;
            break;
        case "day":
        case "date":
            t = n(this.year(), this.month(), this.date() + 1) - 1;
            break;
        case "hour":
            t = this._d.valueOf(),
            t += 36e5 - nn(t + (this._isUTC ? 0 : 6e4 * this.utcOffset()), 36e5) - 1;
            break;
        case "minute":
            t = this._d.valueOf(),
            t += 6e4 - nn(t, 6e4) - 1;
            break;
        case "second":
            t = this._d.valueOf(),
            t += 1e3 - nn(t, 1e3) - 1;
            break
        }
        return this._d.setTime(t), c.updateOffset(this, !0), this
    },
    mn.format = function(e) {
        e || (e = this.isUtc() ? c.defaultFormatUtc : c.defaultFormat);
        var t = A(this, e);
        return this.localeData().postformat(t)
    },
    mn.from = function(e, t) {
        return this.isValid() && (k(e) && e.isValid() || bt(e).isValid()) ? jt({
            to: this,
            from: e
        }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate()
    },
    mn.fromNow = function(e) {
        return this.from(bt(), e)
    },
    mn.to = function(e, t) {
        return this.isValid() && (k(e) && e.isValid() || bt(e).isValid()) ? jt({
            from: this,
            to: e
        }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate()
    },
    mn.toNow = function(e) {
        return this.to(bt(), e)
    },
    mn.get = function(e) {
        return b(this[e = H(e)]) ? this[e]() : this
    },
    mn.invalidAt = function() {
        return g(this).overflow
    },
    mn.isAfter = function(e, t) {
        var n = k(e) ? e : bt(e);
        return !(!this.isValid() || !n.isValid()) && ("millisecond" === (t = H(t) || "millisecond") ? this.valueOf() > n.valueOf() : n.valueOf() < this.clone().startOf(t).valueOf())
    },
    mn.isBefore = function(e, t) {
        var n = k(e) ? e : bt(e);
        return !(!this.isValid() || !n.isValid()) && ("millisecond" === (t = H(t) || "millisecond") ? this.valueOf() < n.valueOf() : this.clone().endOf(t).valueOf() < n.valueOf())
    },
    mn.isBetween = function(e, t, n, s) {
        var i = k(e) ? e : bt(e),
            r = k(t) ? t : bt(t);
        return !!(this.isValid() && i.isValid() && r.isValid()) && ("(" === (s = s || "()")[0] ? this.isAfter(i, n) : !this.isBefore(i, n)) && (")" === s[1] ? this.isBefore(r, n) : !this.isAfter(r, n))
    },
    mn.isSame = function(e, t) {
        var n,
            s = k(e) ? e : bt(e);
        return !(!this.isValid() || !s.isValid()) && ("millisecond" === (t = H(t) || "millisecond") ? this.valueOf() === s.valueOf() : (n = s.valueOf(), this.clone().startOf(t).valueOf() <= n && n <= this.clone().endOf(t).valueOf()))
    },
    mn.isSameOrAfter = function(e, t) {
        return this.isSame(e, t) || this.isAfter(e, t)
    },
    mn.isSameOrBefore = function(e, t) {
        return this.isSame(e, t) || this.isBefore(e, t)
    },
    mn.isValid = function() {
        return v(this)
    },
    mn.lang = Kt,
    mn.locale = Xt,
    mn.localeData = en,
    mn.max = Pt,
    mn.min = xt,
    mn.parsingFlags = function() {
        return _({}, g(this))
    },
    mn.set = function(e, t) {
        if ("object" == typeof e)
            for (var n = function(e) {
                    var t = [];
                    for (var n in e)
                        t.push({
                            unit: n,
                            priority: U[n]
                        });
                    return t.sort(function(e, t) {
                        return e.priority - t.priority
                    }), t
                }(e = R(e)), s = 0; s < n.length; s++)
                this[n[s].unit](e[n[s].unit]);
        else if (b(this[e = H(e)]))
            return this[e](t);
        return this
    },
    mn.startOf = function(e) {
        var t;
        if (void 0 === (e = H(e)) || "millisecond" === e || !this.isValid())
            return this;
        var n = this._isUTC ? rn : sn;
        switch (e) {
        case "year":
            t = n(this.year(), 0, 1);
            break;
        case "quarter":
            t = n(this.year(), this.month() - this.month() % 3, 1);
            break;
        case "month":
            t = n(this.year(), this.month(), 1);
            break;
        case "week":
            t = n(this.year(), this.month(), this.date() - this.weekday());
            break;
        case "isoWeek":
            t = n(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));
            break;
        case "day":
        case "date":
            t = n(this.year(), this.month(), this.date());
            break;
        case "hour":
            t = this._d.valueOf(),
            t -= nn(t + (this._isUTC ? 0 : 6e4 * this.utcOffset()), 36e5);
            break;
        case "minute":
            t = this._d.valueOf(),
            t -= nn(t, 6e4);
            break;
        case "second":
            t = this._d.valueOf(),
            t -= nn(t, 1e3);
            break
        }
        return this._d.setTime(t), c.updateOffset(this, !0), this
    },
    mn.subtract = Bt,
    mn.toArray = function() {
        var e = this;
        return [e.year(), e.month(), e.date(), e.hour(), e.minute(), e.second(), e.millisecond()]
    },
    mn.toObject = function() {
        var e = this;
        return {
            years: e.year(),
            months: e.month(),
            date: e.date(),
            hours: e.hours(),
            minutes: e.minutes(),
            seconds: e.seconds(),
            milliseconds: e.milliseconds()
        }
    },
    mn.toDate = function() {
        return new Date(this.valueOf())
    },
    mn.toISOString = function(e) {
        if (!this.isValid())
            return null;
        var t = !0 !== e,
            n = t ? this.clone().utc() : this;
        return n.year() < 0 || 9999 < n.year() ? A(n, t ? "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYYYY-MM-DD[T]HH:mm:ss.SSSZ") : b(Date.prototype.toISOString) ? t ? this.toDate().toISOString() : new Date(this.valueOf() + 60 * this.utcOffset() * 1e3).toISOString().replace("Z", A(n, "Z")) : A(n, t ? "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYY-MM-DD[T]HH:mm:ss.SSSZ")
    },
    mn.inspect = function() {
        if (!this.isValid())
            return "moment.invalid(/* " + this._i + " */)";
        var e = "moment",
            t = "";
        this.isLocal() || (e = 0 === this.utcOffset() ? "moment.utc" : "moment.parseZone", t = "Z");
        var n = "[" + e + '("]',
            s = 0 <= this.year() && this.year() <= 9999 ? "YYYY" : "YYYYYY",
            i = t + '[")]';
        return this.format(n + s + "-MM-DD[T]HH:mm:ss.SSS" + i)
    },
    mn.toJSON = function() {
        return this.isValid() ? this.toISOString() : null
    },
    mn.toString = function() {
        return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
    },
    mn.unix = function() {
        return Math.floor(this.valueOf() / 1e3)
    },
    mn.valueOf = function() {
        return this._d.valueOf() - 6e4 * (this._offset || 0)
    },
    mn.creationData = function() {
        return {
            input: this._i,
            format: this._f,
            locale: this._locale,
            isUTC: this._isUTC,
            strict: this._strict
        }
    },
    mn.year = Oe,
    mn.isLeapYear = function() {
        return De(this.year())
    },
    mn.weekYear = function(e) {
        return on.call(this, e, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy)
    },
    mn.isoWeekYear = function(e) {
        return on.call(this, e, this.isoWeek(), this.isoWeekday(), 1, 4)
    },
    mn.quarter = mn.quarters = function(e) {
        return null == e ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (e - 1) + this.month() % 3)
    },
    mn.month = Ue,
    mn.daysInMonth = function() {
        return Pe(this.year(), this.month())
    },
    mn.week = mn.weeks = function(e) {
        var t = this.localeData().week(this);
        return null == e ? t : this.add(7 * (e - t), "d")
    },
    mn.isoWeek = mn.isoWeeks = function(e) {
        var t = Ie(this, 1, 4).week;
        return null == e ? t : this.add(7 * (e - t), "d")
    },
    mn.weeksInYear = function() {
        var e = this.localeData()._week;
        return Ae(this.year(), e.dow, e.doy)
    },
    mn.isoWeeksInYear = function() {
        return Ae(this.year(), 1, 4)
    },
    mn.date = un,
    mn.day = mn.days = function(e) {
        if (!this.isValid())
            return null != e ? this : NaN;
        var t,
            n,
            s = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        return null != e ? (t = e, n = this.localeData(), e = "string" != typeof t ? t : isNaN(t) ? "number" == typeof (t = n.weekdaysParse(t)) ? t : null : parseInt(t, 10), this.add(e - s, "d")) : s
    },
    mn.weekday = function(e) {
        if (!this.isValid())
            return null != e ? this : NaN;
        var t = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return null == e ? t : this.add(e - t, "d")
    },
    mn.isoWeekday = function(e) {
        if (!this.isValid())
            return null != e ? this : NaN;
        if (null == e)
            return this.day() || 7;
        var t,
            n,
            s = (t = e, n = this.localeData(), "string" == typeof t ? n.weekdaysParse(t) % 7 || 7 : isNaN(t) ? null : t);
        return this.day(this.day() % 7 ? s : s - 7)
    },
    mn.dayOfYear = function(e) {
        var t = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
        return null == e ? t : this.add(e - t, "d")
    },
    mn.hour = mn.hours = nt,
    mn.minute = mn.minutes = ln,
    mn.second = mn.seconds = dn,
    mn.millisecond = mn.milliseconds = fn,
    mn.utcOffset = function(e, t, n) {
        var s,
            i = this._offset || 0;
        if (!this.isValid())
            return null != e ? this : NaN;
        if (null == e)
            return this._isUTC ? i : Vt(this);
        if ("string" == typeof e) {
            if (null === (e = Nt(re, e)))
                return this
        } else
            Math.abs(e) < 16 && !n && (e *= 60);
        return !this._isUTC && t && (s = Vt(this)), this._offset = e, this._isUTC = !0, null != s && this.add(s, "m"), i !== e && (!t || this._changeInProgress ? qt(this, jt(e - i, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, c.updateOffset(this, !0), this._changeInProgress = null)), this
    },
    mn.utc = function(e) {
        return this.utcOffset(0, e)
    },
    mn.local = function(e) {
        return this._isUTC && (this.utcOffset(0, e), this._isUTC = !1, e && this.subtract(Vt(this), "m")), this
    },
    mn.parseZone = function() {
        if (null != this._tzm)
            this.utcOffset(this._tzm, !1, !0);
        else if ("string" == typeof this._i) {
            var e = Nt(ie, this._i);
            null != e ? this.utcOffset(e) : this.utcOffset(0, !0)
        }
        return this
    },
    mn.hasAlignedHourOffset = function(e) {
        return !!this.isValid() && (e = e ? bt(e).utcOffset() : 0, (this.utcOffset() - e) % 60 == 0)
    },
    mn.isDST = function() {
        return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
    },
    mn.isLocal = function() {
        return !!this.isValid() && !this._isUTC
    },
    mn.isUtcOffset = function() {
        return !!this.isValid() && this._isUTC
    },
    mn.isUtc = Et,
    mn.isUTC = Et,
    mn.zoneAbbr = function() {
        return this._isUTC ? "UTC" : ""
    },
    mn.zoneName = function() {
        return this._isUTC ? "Coordinated Universal Time" : ""
    },
    mn.dates = n("dates accessor is deprecated. Use date instead.", un),
    mn.months = n("months accessor is deprecated. Use month instead", Ue),
    mn.years = n("years accessor is deprecated. Use year instead", Oe),
    mn.zone = n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/", function(e, t) {
        return null != e ? ("string" != typeof e && (e = -e), this.utcOffset(e, t), this) : -this.utcOffset()
    }),
    mn.isDSTShifted = n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information", function() {
        if (!l(this._isDSTShifted))
            return this._isDSTShifted;
        var e = {};
        if (w(e, this), (e = Ot(e))._a) {
            var t = e._isUTC ? y(e._a) : bt(e._a);
            this._isDSTShifted = this.isValid() && 0 < a(e._a, t.toArray())
        } else
            this._isDSTShifted = !1;
        return this._isDSTShifted
    });
    var yn = P.prototype;
    function gn(e, t, n, s) {
        var i = ht(),
            r = y().set(s, t);
        return i[n](r, e)
    }
    function vn(e, t, n) {
        if (h(e) && (t = e, e = void 0), e = e || "", null != t)
            return gn(e, t, n, "month");
        var s,
            i = [];
        for (s = 0; s < 12; s++)
            i[s] = gn(e, s, n, "month");
        return i
    }
    function pn(e, t, n, s) {
        t = ("boolean" == typeof e ? h(t) && (n = t, t = void 0) : (t = e, e = !1, h(n = t) && (n = t, t = void 0)), t || "");
        var i,
            r = ht(),
            a = e ? r._week.dow : 0;
        if (null != n)
            return gn(t, (n + a) % 7, s, "day");
        var o = [];
        for (i = 0; i < 7; i++)
            o[i] = gn(t, (i + a) % 7, s, "day");
        return o
    }
    yn.calendar = function(e, t, n) {
        var s = this._calendar[e] || this._calendar.sameElse;
        return b(s) ? s.call(t, n) : s
    },
    yn.longDateFormat = function(e) {
        var t = this._longDateFormat[e],
            n = this._longDateFormat[e.toUpperCase()];
        return t || !n ? t : (this._longDateFormat[e] = n.replace(/MMMM|MM|DD|dddd/g, function(e) {
            return e.slice(1)
        }), this._longDateFormat[e])
    },
    yn.invalidDate = function() {
        return this._invalidDate
    },
    yn.ordinal = function(e) {
        return this._ordinal.replace("%d", e)
    },
    yn.preparse = _n,
    yn.postformat = _n,
    yn.relativeTime = function(e, t, n, s) {
        var i = this._relativeTime[n];
        return b(i) ? i(e, t, n, s) : i.replace(/%d/i, e)
    },
    yn.pastFuture = function(e, t) {
        var n = this._relativeTime[0 < e ? "future" : "past"];
        return b(n) ? n(t) : n.replace(/%s/i, t)
    },
    yn.set = function(e) {
        var t,
            n;
        for (n in e)
            b(t = e[n]) ? this[n] = t : this["_" + n] = t;
        this._config = e,
        this._dayOfMonthOrdinalParseLenient = new RegExp((this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) + "|" + /\d{1,2}/.source)
    },
    yn.months = function(e, t) {
        return e ? o(this._months) ? this._months[e.month()] : this._months[(this._months.isFormat || We).test(t) ? "format" : "standalone"][e.month()] : o(this._months) ? this._months : this._months.standalone
    },
    yn.monthsShort = function(e, t) {
        return e ? o(this._monthsShort) ? this._monthsShort[e.month()] : this._monthsShort[We.test(t) ? "format" : "standalone"][e.month()] : o(this._monthsShort) ? this._monthsShort : this._monthsShort.standalone
    },
    yn.monthsParse = function(e, t, n) {
        var s,
            i,
            r;
        if (this._monthsParseExact)
            return function(e, t, n) {
                var s,
                    i,
                    r,
                    a = e.toLocaleLowerCase();
                if (!this._monthsParse)
                    for (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = [], s = 0; s < 12; ++s)
                        r = y([2e3, s]),
                        this._shortMonthsParse[s] = this.monthsShort(r, "").toLocaleLowerCase(),
                        this._longMonthsParse[s] = this.months(r, "").toLocaleLowerCase();
                return n ? "MMM" === t ? -1 !== (i = Ye.call(this._shortMonthsParse, a)) ? i : null : -1 !== (i = Ye.call(this._longMonthsParse, a)) ? i : null : "MMM" === t ? -1 !== (i = Ye.call(this._shortMonthsParse, a)) ? i : -1 !== (i = Ye.call(this._longMonthsParse, a)) ? i : null : -1 !== (i = Ye.call(this._longMonthsParse, a)) ? i : -1 !== (i = Ye.call(this._shortMonthsParse, a)) ? i : null
            }.call(this, e, t, n);
        for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), s = 0; s < 12; s++) {
            if (i = y([2e3, s]), n && !this._longMonthsParse[s] && (this._longMonthsParse[s] = new RegExp("^" + this.months(i, "").replace(".", "") + "$", "i"), this._shortMonthsParse[s] = new RegExp("^" + this.monthsShort(i, "").replace(".", "") + "$", "i")), n || this._monthsParse[s] || (r = "^" + this.months(i, "") + "|^" + this.monthsShort(i, ""), this._monthsParse[s] = new RegExp(r.replace(".", ""), "i")), n && "MMMM" === t && this._longMonthsParse[s].test(e))
                return s;
            if (n && "MMM" === t && this._shortMonthsParse[s].test(e))
                return s;
            if (!n && this._monthsParse[s].test(e))
                return s
        }
    },
    yn.monthsRegex = function(e) {
        return this._monthsParseExact ? (m(this, "_monthsRegex") || Ne.call(this), e ? this._monthsStrictRegex : this._monthsRegex) : (m(this, "_monthsRegex") || (this._monthsRegex = Le), this._monthsStrictRegex && e ? this._monthsStrictRegex : this._monthsRegex)
    },
    yn.monthsShortRegex = function(e) {
        return this._monthsParseExact ? (m(this, "_monthsRegex") || Ne.call(this), e ? this._monthsShortStrictRegex : this._monthsShortRegex) : (m(this, "_monthsShortRegex") || (this._monthsShortRegex = Fe), this._monthsShortStrictRegex && e ? this._monthsShortStrictRegex : this._monthsShortRegex)
    },
    yn.week = function(e) {
        return Ie(e, this._week.dow, this._week.doy).week
    },
    yn.firstDayOfYear = function() {
        return this._week.doy
    },
    yn.firstDayOfWeek = function() {
        return this._week.dow
    },
    yn.weekdays = function(e, t) {
        var n = o(this._weekdays) ? this._weekdays : this._weekdays[e && !0 !== e && this._weekdays.isFormat.test(t) ? "format" : "standalone"];
        return !0 === e ? je(n, this._week.dow) : e ? n[e.day()] : n
    },
    yn.weekdaysMin = function(e) {
        return !0 === e ? je(this._weekdaysMin, this._week.dow) : e ? this._weekdaysMin[e.day()] : this._weekdaysMin
    },
    yn.weekdaysShort = function(e) {
        return !0 === e ? je(this._weekdaysShort, this._week.dow) : e ? this._weekdaysShort[e.day()] : this._weekdaysShort
    },
    yn.weekdaysParse = function(e, t, n) {
        var s,
            i,
            r;
        if (this._weekdaysParseExact)
            return function(e, t, n) {
                var s,
                    i,
                    r,
                    a = e.toLocaleLowerCase();
                if (!this._weekdaysParse)
                    for (this._weekdaysParse = [], this._shortWeekdaysParse = [], this._minWeekdaysParse = [], s = 0; s < 7; ++s)
                        r = y([2e3, 1]).day(s),
                        this._minWeekdaysParse[s] = this.weekdaysMin(r, "").toLocaleLowerCase(),
                        this._shortWeekdaysParse[s] = this.weekdaysShort(r, "").toLocaleLowerCase(),
                        this._weekdaysParse[s] = this.weekdays(r, "").toLocaleLowerCase();
                return n ? "dddd" === t ? -1 !== (i = Ye.call(this._weekdaysParse, a)) ? i : null : "ddd" === t ? -1 !== (i = Ye.call(this._shortWeekdaysParse, a)) ? i : null : -1 !== (i = Ye.call(this._minWeekdaysParse, a)) ? i : null : "dddd" === t ? -1 !== (i = Ye.call(this._weekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._shortWeekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._minWeekdaysParse, a)) ? i : null : "ddd" === t ? -1 !== (i = Ye.call(this._shortWeekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._weekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._minWeekdaysParse, a)) ? i : null : -1 !== (i = Ye.call(this._minWeekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._weekdaysParse, a)) ? i : -1 !== (i = Ye.call(this._shortWeekdaysParse, a)) ? i : null
            }.call(this, e, t, n);
        for (this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], this._shortWeekdaysParse = [], this._fullWeekdaysParse = []), s = 0; s < 7; s++) {
            if (i = y([2e3, 1]).day(s), n && !this._fullWeekdaysParse[s] && (this._fullWeekdaysParse[s] = new RegExp("^" + this.weekdays(i, "").replace(".", "\\.?") + "$", "i"), this._shortWeekdaysParse[s] = new RegExp("^" + this.weekdaysShort(i, "").replace(".", "\\.?") + "$", "i"), this._minWeekdaysParse[s] = new RegExp("^" + this.weekdaysMin(i, "").replace(".", "\\.?") + "$", "i")), this._weekdaysParse[s] || (r = "^" + this.weekdays(i, "") + "|^" + this.weekdaysShort(i, "") + "|^" + this.weekdaysMin(i, ""), this._weekdaysParse[s] = new RegExp(r.replace(".", ""), "i")), n && "dddd" === t && this._fullWeekdaysParse[s].test(e))
                return s;
            if (n && "ddd" === t && this._shortWeekdaysParse[s].test(e))
                return s;
            if (n && "dd" === t && this._minWeekdaysParse[s].test(e))
                return s;
            if (!n && this._weekdaysParse[s].test(e))
                return s
        }
    },
    yn.weekdaysRegex = function(e) {
        return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || Qe.call(this), e ? this._weekdaysStrictRegex : this._weekdaysRegex) : (m(this, "_weekdaysRegex") || (this._weekdaysRegex = qe), this._weekdaysStrictRegex && e ? this._weekdaysStrictRegex : this._weekdaysRegex)
    },
    yn.weekdaysShortRegex = function(e) {
        return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || Qe.call(this), e ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex) : (m(this, "_weekdaysShortRegex") || (this._weekdaysShortRegex = Je), this._weekdaysShortStrictRegex && e ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex)
    },
    yn.weekdaysMinRegex = function(e) {
        return this._weekdaysParseExact ? (m(this, "_weekdaysRegex") || Qe.call(this), e ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex) : (m(this, "_weekdaysMinRegex") || (this._weekdaysMinRegex = Be), this._weekdaysMinStrictRegex && e ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex)
    },
    yn.isPM = function(e) {
        return "p" === (e + "").toLowerCase().charAt(0)
    },
    yn.meridiem = function(e, t, n) {
        return 11 < e ? n ? "pm" : "PM" : n ? "am" : "AM"
    },
    ut("en", {
        dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function(e) {
            var t = e % 10;
            return e + (1 === D(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th")
        }
    }),
    c.lang = n("moment.lang is deprecated. Use moment.locale instead.", ut),
    c.langData = n("moment.langData is deprecated. Use moment.localeData instead.", ht);
    var wn = Math.abs;
    function Mn(e, t, n, s) {
        var i = jt(t, n);
        return e._milliseconds += s * i._milliseconds, e._days += s * i._days, e._months += s * i._months, e._bubble()
    }
    function kn(e) {
        return e < 0 ? Math.floor(e) : Math.ceil(e)
    }
    function Sn(e) {
        return 4800 * e / 146097
    }
    function Dn(e) {
        return 146097 * e / 4800
    }
    function Yn(e) {
        return function() {
            return this.as(e)
        }
    }
    var On = Yn("ms"),
        Tn = Yn("s"),
        bn = Yn("m"),
        xn = Yn("h"),
        Pn = Yn("d"),
        Wn = Yn("w"),
        Cn = Yn("M"),
        Hn = Yn("Q"),
        Rn = Yn("y");
    function Un(e) {
        return function() {
            return this.isValid() ? this._data[e] : NaN
        }
    }
    var Fn = Un("milliseconds"),
        Ln = Un("seconds"),
        Nn = Un("minutes"),
        Gn = Un("hours"),
        Vn = Un("days"),
        En = Un("months"),
        In = Un("years");
    var An = Math.round,
        jn = {
            ss: 44,
            s: 45,
            m: 45,
            h: 22,
            d: 26,
            M: 11
        };
    var Zn = Math.abs;
    function zn(e) {
        return (0 < e) - (e < 0) || +e
    }
    function $n() {
        if (!this.isValid())
            return this.localeData().invalidDate();
        var e,
            t,
            n = Zn(this._milliseconds) / 1e3,
            s = Zn(this._days),
            i = Zn(this._months);
        t = S((e = S(n / 60)) / 60),
        n %= 60,
        e %= 60;
        var r = S(i / 12),
            a = i %= 12,
            o = s,
            u = t,
            l = e,
            h = n ? n.toFixed(3).replace(/\.?0+$/, "") : "",
            d = this.asSeconds();
        if (!d)
            return "P0D";
        var c = d < 0 ? "-" : "",
            f = zn(this._months) !== zn(d) ? "-" : "",
            m = zn(this._days) !== zn(d) ? "-" : "",
            _ = zn(this._milliseconds) !== zn(d) ? "-" : "";
        return c + "P" + (r ? f + r + "Y" : "") + (a ? f + a + "M" : "") + (o ? m + o + "D" : "") + (u || l || h ? "T" : "") + (u ? _ + u + "H" : "") + (l ? _ + l + "M" : "") + (h ? _ + h + "S" : "")
    }
    var qn = Ht.prototype;
    return qn.isValid = function() {
        return this._isValid
    }, qn.abs = function() {
        var e = this._data;
        return this._milliseconds = wn(this._milliseconds), this._days = wn(this._days), this._months = wn(this._months), e.milliseconds = wn(e.milliseconds), e.seconds = wn(e.seconds), e.minutes = wn(e.minutes), e.hours = wn(e.hours), e.months = wn(e.months), e.years = wn(e.years), this
    }, qn.add = function(e, t) {
        return Mn(this, e, t, 1)
    }, qn.subtract = function(e, t) {
        return Mn(this, e, t, -1)
    }, qn.as = function(e) {
        if (!this.isValid())
            return NaN;
        var t,
            n,
            s = this._milliseconds;
        if ("month" === (e = H(e)) || "quarter" === e || "year" === e)
            switch (t = this._days + s / 864e5, n = this._months + Sn(t), e) {
            case "month":
                return n;
            case "quarter":
                return n / 3;
            case "year":
                return n / 12
            }
        else
            switch (t = this._days + Math.round(Dn(this._months)), e) {
            case "week":
                return t / 7 + s / 6048e5;
            case "day":
                return t + s / 864e5;
            case "hour":
                return 24 * t + s / 36e5;
            case "minute":
                return 1440 * t + s / 6e4;
            case "second":
                return 86400 * t + s / 1e3;
            case "millisecond":
                return Math.floor(864e5 * t) + s;
            default:
                throw new Error("Unknown unit " + e)
            }
    }, qn.asMilliseconds = On, qn.asSeconds = Tn, qn.asMinutes = bn, qn.asHours = xn, qn.asDays = Pn, qn.asWeeks = Wn, qn.asMonths = Cn, qn.asQuarters = Hn, qn.asYears = Rn, qn.valueOf = function() {
        return this.isValid() ? this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * D(this._months / 12) : NaN
    }, qn._bubble = function() {
        var e,
            t,
            n,
            s,
            i,
            r = this._milliseconds,
            a = this._days,
            o = this._months,
            u = this._data;
        return 0 <= r && 0 <= a && 0 <= o || r <= 0 && a <= 0 && o <= 0 || (r += 864e5 * kn(Dn(o) + a), o = a = 0), u.milliseconds = r % 1e3, e = S(r / 1e3), u.seconds = e % 60, t = S(e / 60), u.minutes = t % 60, n = S(t / 60), u.hours = n % 24, o += i = S(Sn(a += S(n / 24))), a -= kn(Dn(i)), s = S(o / 12), o %= 12, u.days = a, u.months = o, u.years = s, this
    }, qn.clone = function() {
        return jt(this)
    }, qn.get = function(e) {
        return e = H(e), this.isValid() ? this[e + "s"]() : NaN
    }, qn.milliseconds = Fn, qn.seconds = Ln, qn.minutes = Nn, qn.hours = Gn, qn.days = Vn, qn.weeks = function() {
        return S(this.days() / 7)
    }, qn.months = En, qn.years = In, qn.humanize = function(e) {
        if (!this.isValid())
            return this.localeData().invalidDate();
        var t,
            n,
            s,
            i,
            r,
            a,
            o,
            u,
            l,
            h,
            d,
            c = this.localeData(),
            f = (n = !e, s = c, i = jt(t = this).abs(), r = An(i.as("s")), a = An(i.as("m")), o = An(i.as("h")), u = An(i.as("d")), l = An(i.as("M")), h = An(i.as("y")), (d = r <= jn.ss && ["s", r] || r < jn.s && ["ss", r] || a <= 1 && ["m"] || a < jn.m && ["mm", a] || o <= 1 && ["h"] || o < jn.h && ["hh", o] || u <= 1 && ["d"] || u < jn.d && ["dd", u] || l <= 1 && ["M"] || l < jn.M && ["MM", l] || h <= 1 && ["y"] || ["yy", h])[2] = n, d[3] = 0 < +t, d[4] = s, function(e, t, n, s, i) {
                return i.relativeTime(t || 1, !!n, e, s)
            }.apply(null, d));
        return e && (f = c.pastFuture(+this, f)), c.postformat(f)
    }, qn.toISOString = $n, qn.toString = $n, qn.toJSON = $n, qn.locale = Xt, qn.localeData = en, qn.toIsoString = n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", $n), qn.lang = Kt, I("X", 0, 0, "unix"), I("x", 0, 0, "valueOf"), ue("x", se), ue("X", /[+-]?\d+(\.\d{1,3})?/), ce("X", function(e, t, n) {
        n._d = new Date(1e3 * parseFloat(e, 10))
    }), ce("x", function(e, t, n) {
        n._d = new Date(D(e))
    }), c.version = "2.24.0", e = bt, c.fn = mn, c.min = function() {
        return Wt("isBefore", [].slice.call(arguments, 0))
    }, c.max = function() {
        return Wt("isAfter", [].slice.call(arguments, 0))
    }, c.now = function() {
        return Date.now ? Date.now() : +new Date
    }, c.utc = y, c.unix = function(e) {
        return bt(1e3 * e)
    }, c.months = function(e, t) {
        return vn(e, t, "months")
    }, c.isDate = d, c.locale = ut, c.invalid = p, c.duration = jt, c.isMoment = k, c.weekdays = function(e, t, n) {
        return pn(e, t, n, "weekdays")
    }, c.parseZone = function() {
        return bt.apply(null, arguments).parseZone()
    }, c.localeData = ht, c.isDuration = Rt, c.monthsShort = function(e, t) {
        return vn(e, t, "monthsShort")
    }, c.weekdaysMin = function(e, t, n) {
        return pn(e, t, n, "weekdaysMin")
    }, c.defineLocale = lt, c.updateLocale = function(e, t) {
        if (null != t) {
            var n,
                s,
                i = st;
            null != (s = ot(e)) && (i = s._config),
            (n = new P(t = x(i, t))).parentLocale = it[e],
            it[e] = n,
            ut(e)
        } else
            null != it[e] && (null != it[e].parentLocale ? it[e] = it[e].parentLocale : null != it[e] && delete it[e]);
        return it[e]
    }, c.locales = function() {
        return s(it)
    }, c.weekdaysShort = function(e, t, n) {
        return pn(e, t, n, "weekdaysShort")
    }, c.normalizeUnits = H, c.relativeTimeRounding = function(e) {
        return void 0 === e ? An : "function" == typeof e && (An = e, !0)
    }, c.relativeTimeThreshold = function(e, t) {
        return void 0 !== jn[e] && (void 0 === t ? jn[e] : (jn[e] = t, "s" === e && (jn.ss = t - 1), !0))
    }, c.calendarFormat = function(e, t) {
        var n = e.diff(t, "days", !0);
        return n < -6 ? "sameElse" : n < -1 ? "lastWeek" : n < 0 ? "lastDay" : n < 1 ? "sameDay" : n < 2 ? "nextDay" : n < 7 ? "nextWeek" : "sameElse"
    }, c.prototype = mn, c.HTML5_FMT = {
        DATETIME_LOCAL: "YYYY-MM-DDTHH:mm",
        DATETIME_LOCAL_SECONDS: "YYYY-MM-DDTHH:mm:ss",
        DATETIME_LOCAL_MS: "YYYY-MM-DDTHH:mm:ss.SSS",
        DATE: "YYYY-MM-DD",
        TIME: "HH:mm",
        TIME_SECONDS: "HH:mm:ss",
        TIME_MS: "HH:mm:ss.SSS",
        WEEK: "GGGG-[W]WW",
        MONTH: "YYYY-MM"
    }, c
});
;
/* ../js/youtubeAPI.js */
if (!window['YT']) {
    var YT = {
        loading: 0,
        loaded: 0
    };
}
if (!window['YTConfig']) {
    var YTConfig = {
        'host': 'http://www.youtube.com'
    };
}
if (!YT.loading) {
    YT.loading = 1;
    (function() {
        var l = [];
        YT.ready = function(f) {
            if (YT.loaded) {
                f();
            } else {
                l.push(f);
            }
        };
        window.onYTReady = function() {
            YT.loaded = 1;
            for (var i = 0; i < l.length; i++) {
                try {
                    l[i]();
                } catch (e) {}
            }
        };
        YT.setConfig = function(c) {
            for (var k in c) {
                if (c.hasOwnProperty(k)) {
                    YTConfig[k] = c[k];
                }
            }
        };
        var a = document.createElement('script');
        a.type = 'text/javascript';
        a.id = 'www-widgetapi-script';
        a.src = 'https://s.ytimg.com/yts/jsbin/www-widgetapi-vfll-F3yY/www-widgetapi.js';
        a.async = true;
        var c = document.currentScript;
        if (c) {
            var n = c.nonce || c.getAttribute('nonce');
            if (n) {
                a.setAttribute('nonce', n);
            }
        }
        var b = document.getElementsByTagName('script')[0];
        b.parentNode.insertBefore(a, b);
    })();
}
;
/* ../components/UserRotate.js */
CLAZZ("components.UserRotate", {
    EXTENDS: "components.Component",
    enabled: true,
    updateEntity: true,
    spinSprite: "",
    flipSprite: "",
    sizeSprite: "",
    distance: 80,
    isSpinning: false,
    isScaling: false,
    __snap: true,
    __ScaleSnap: true,
    spinSnap: 0,
    spinScale: 0.4,
    flipScale: 0.4,
    sizeScale: 0.4,
    targetAlpha: 0,
    alphaSpeed: 1,
    create: function() {
        if (!this.entity.sprite)
            return;
        var screen = this.entity.screen;
        this.distance = Math.max(20, Math.sqrt(Math.pow(this.entity.sprite.width / 2, 2) + Math.pow(this.entity.sprite.height / 2, 2)) + 20);
        if (this.spinSprite) {
            this.spinSprite = this.entity.loadSprite(this.spinSprite, {
                doNotInstrument: true
            });
            this.spinSprite.anchor.setTo(0.5, 0.5);
            this.spinSprite.scale.setTo(this.spinScale, this.spinScale);
            this.spinSprite.inputEnabled = true;
            this.spinSprite.events.onInputDown.add(SOL.editorExec.bind(SOL, "startSpinDrag()", this.entity));
            this.spinSprite.events.onInputUp.add(SOL.editorExec.bind(SOL, "stopSpinDrag()", this.entity));
            this.entity.sprite.parent.add(this.spinSprite);
        }
        if (this.sizeSprite) {
            this.sizeSprite = this.entity.loadSprite(this.sizeSprite, {
                doNotInstrument: true
            });
            this.sizeSprite.anchor.setTo(0.5, 0.5);
            this.sizeSprite.scale.setTo(this.sizeScale, this.sizeScale);
            this.sizeSprite.inputEnabled = true;
            this.sizeSprite.events.onInputDown.add(SOL.editorExec.bind(SOL, "startSizeDrag()", this.entity));
            this.sizeSprite.events.onInputUp.add(SOL.editorExec.bind(SOL, "stopSizeDrag()", this.entity));
            this.entity.sprite.parent.add(this.sizeSprite);
        }
        if (this.flipSprite) {
            this.flipSprite = this.entity.loadSprite(this.flipSprite, {
                doNotInstrument: true
            });
            this.flipSprite.anchor.setTo(0.5, 0.5);
            this.flipSprite.scale.setTo(this.flipScale, this.flipScale);
            this.flipSprite.inputEnabled = true;
            this.flipSprite.events.onInputUp.add(SOL.editorExec.bind(SOL, "onClickFlip()", this.entity));
            this.entity.sprite.parent.add(this.flipSprite);
        }
        if (this.flipSprite || this.spinSprite || this.sizeSprite) {
            this.entity.sprite.inputEnabled = true;
            this.entity.sprite.events.onInputDown.add(this.showURControls.bind(this));
        }
    },
    rotateEntity: function() {},
    hideURControls: function() {
        this.alphaSpeed = 0.1;
        this.targetAlpha = 0;
    },
    showURControls: function() {
        if (!this.enabled)
            return;
        CALL("hideURControls");
        this.alphaSpeed = 0.2;
        this.targetAlpha = 1;
    },
    onClickFlip: function() {
        this.showURControls();
        var s = this.entity.sprite.scale.x *= -1;
        if (this.updateEntity)
            this.entity["scale.x"] = s;
        if (this.entity.screen.editor)
            this.entity.screen.editor("updateEntity", this.entity.__data.__$uid, {
                "sprite.scale.x": s
            });
    },
    onPostTick: function() {
        var parent;
        var entitySprite = this.entity.sprite;
        var angle = Math.atan2(Math.abs(this.entity.sprite.height / 2), Math.abs(this.entity.sprite.width / 2));
        var rotation = this.entity.rotation || 0;
        if (entitySprite.rotation < 0)
            entitySprite.rotation = (entitySprite.rotation % (Math.PI * 2)) + Math.PI * 2;
        if (rotation < 0)
            rotation = (rotation % (Math.PI * 2)) + Math.PI * 2;
        var rotationDelta = rotation - entitySprite.rotation;
        if (rotationDelta > Math.PI)
            rotationDelta -= 2 * Math.PI;
        else if (rotationDelta < -Math.PI)
            rotationDelta += 2 * Math.PI;
        entitySprite.rotation = (entitySprite.rotation + rotationDelta * 0.17) % (2 * Math.PI);
        if (this.spinSprite) {
            parent = this.entity.sprite.parent;
            this.spinSprite.alpha += (this.targetAlpha - this.spinSprite.alpha) * this.alphaSpeed;
            this.spinSprite.visible = this.spinSprite.alpha > 0.1;
            if (this.isSpinning) {
                this.spinSprite.x = game.input.x;
                this.spinSprite.y = game.input.y;
                rotation = Math.atan2(game.input.y - entitySprite.y, game.input.x - entitySprite.x) - angle;
                if (this.spinSnap)
                    rotation = Math.round((rotation / Math.PI * 180) / this.spinSnap) * this.spinSnap / 180 * Math.PI;
                if (this.updateEntity)
                    this.entity.rotation = rotation;
                else
                    entitySprite.rotation = rotation;
            } else if (this.__snap) {
                this.spinSprite.x = entitySprite.x + Math.cos(entitySprite.rotation + angle) * this.distance;
                this.spinSprite.y = entitySprite.y + Math.sin(entitySprite.rotation + angle) * this.distance;
            } else {
                var dx = ((entitySprite.x + Math.cos(entitySprite.rotation + angle) * this.distance) - this.spinSprite.x) * 0.17;
                this.spinSprite.x += dx;
                var dy = ((entitySprite.y + Math.sin(entitySprite.rotation + angle) * this.distance) - this.spinSprite.y) * 0.17;
                this.spinSprite.y += dy;
                if (!this.isSpinning && Math.abs(dx) + Math.abs(dy) < 1) {
                    this.__snap = true;
                }
            }
            parent.setChildIndex(this.spinSprite, parent.children.length - 1);
            this.spinSprite.rotation = this.entity.sprite.rotation + Math.PI / 2;
        }
        if (this.flipSprite) {
            parent = this.entity.sprite.parent;
            this.flipSprite.alpha += (this.targetAlpha - this.flipSprite.alpha) * this.alphaSpeed;
            this.flipSprite.visible = this.flipSprite.alpha > 0.1;
            this.flipSprite.x = entitySprite.x + Math.cos(entitySprite.rotation) * this.distance;
            this.flipSprite.y = entitySprite.y + Math.sin(entitySprite.rotation) * this.distance;
            parent.setChildIndex(this.flipSprite, parent.children.length - 1);
        }
        if (this.sizeSprite) {
            parent = this.entity.sprite.parent;
            this.sizeSprite.alpha += (this.targetAlpha - this.sizeSprite.alpha) * this.alphaSpeed;
            this.sizeSprite.visible = this.sizeSprite.alpha > 0.1;
            if (this.isScaling) {
                this.sizeSprite.x = game.input.x;
                this.sizeSprite.y = game.input.y;
                if ("wordWrapWidth" in entitySprite) {
                    this.distance = Math.max(20, Math.sqrt(Math.pow(entitySprite.x - this.sizeSprite.x, 2) + Math.pow(entitySprite.y - this.sizeSprite.y, 2)));
                    entitySprite.wordWrapWidth = this.distance;
                }
                else {
                    this.distance = Math.max(20, Math.sqrt(Math.pow(entitySprite.x - this.sizeSprite.x, 2) + Math.pow(entitySprite.y - this.sizeSprite.y, 2)));
                    entitySprite.scale.x = Math.sign(entitySprite.scale.x) * Math.abs((this.distance + 20) / (entitySprite.width / entitySprite.scale.x));
                    entitySprite.scale.y = Math.abs(entitySprite.scale.x);
                }
            } else if (this.__ScaleSnap) {
                this.sizeSprite.x = entitySprite.x + Math.cos(entitySprite.rotation - angle) * this.distance;
                this.sizeSprite.y = entitySprite.y + Math.sin(entitySprite.rotation - angle) * this.distance;
            } else {
                var dx = ((entitySprite.x + Math.cos(entitySprite.rotation - angle) * this.distance) - this.sizeSprite.x) * 0.17;
                this.sizeSprite.x += dx;
                var dy = ((entitySprite.y + Math.sin(entitySprite.rotation - angle) * this.distance) - this.sizeSprite.y) * 0.17;
                this.sizeSprite.y += dy;
                if (!this.isSpinning && Math.abs(dx) + Math.abs(dy) < 1) {
                    this.__ScaleSnap = true;
                }
            }
            parent.setChildIndex(this.sizeSprite, parent.children.length - 1);
            this.sizeSprite.rotation = this.entity.sprite.rotation;
        }
        if (!this.isSpinning && !this.isScaling && (this.spinSprite || this.flipSprite)) {
            var a = (this.spinSprite || this.flipSprite).alpha;
            if (a >= 0.995 && this.targetAlpha == 1) {
                this.targetAlpha = 0;
                this.alphaSpeed = 0.003;
            }
        }
    },
    startSpinDrag: function() {
        this.showURControls();
        this.isSpinning = true;
        this.__snap = false;
    },
    startSizeDrag: function() {
        this.showURControls();
        this.isScaling = true;
        this.__ScaleSnap = false;
    },
    stopSpinDrag: function() {
        this.showURControls();
        this.isSpinning = false;
        if (this.entity.screen.editor)
            this.entity.screen.editor("updateEntity", this.entity.__data.__$uid, {
                "rotation": this.entity.rotation
            });
    },
    stopSizeDrag: function() {
        this.showURControls();
        this.isScaling = false;
        if (this.entity.screen.editor) {
            if ("wordWrapWidth" in this.entity.sprite) {
                this.entity.screen.editor("updateEntity", this.entity.__data.__$uid, {
                    "wordWrapWidth": this.entity.sprite.wordWrapWidth
                });
            }
            this.entity.screen.editor("updateEntity", this.entity.__data.__$uid, {
                "sprite.scale.y": this.entity.sprite.scale.y,
                "sprite.scale.x": this.entity.sprite.scale.x
            });
        }
    }
});
;
/* ../components/Rocket.js */
CLAZZ("components.Rocket", {
    EXTENDS: "components.Component",
    mat: {
        "1": {
            "0": ""
        },
        "0": {
            "0": "dude"
        },
        "-1": {
            "0": ""
        },
        "-2": {
            "0": ""
        },
        "-3": {
            "0": ""
        }
    },
    feetX: 16,
    feetY: 75,
    baseX: 0,
    baseY: 0,
    emitter: null,
    resetRocket: function(x, y) {
        var e = this.entity;
        e.loadMatrix(this.mat);
        e.sprite = e.Grid.sprite;
        e.buildPhysicsBody();
        this.baseX = x;
        this.baseY = y;
        e.PhysicsBody.rotSpeed = 0;
        e.PhysicsBody.enabled = false;
        this.stage = 0;
        this.onChangePlatformAngle(0);
        this.dead = false;
        this.lookAt = false;
    },
    startLaunch: function() {
        var THIS = this;
        this.entity.screen.setTimeout(function() {
            THIS.lookAt = false;
        }, 2000);
    },
    onChangePlatformAngle: function(angle) {
        if (this.stage != 0)
            return;
        this.entity.setTranslation(0, 0, this.baseX, this.baseY);
        this.entity.setRotation(this.feetX, this.feetY, angle);
    },
    shakeIt: 0,
    shake: 0,
    dead: false,
    onCollision: function(tile) {
        if (tile && tile.name < 50)
            this.shake += 30;
        if (this.dead)
            return;
        if (tile) {
            switch (tile.name) {
            case 50:
                tile.name = 51;
                tile.sprite.visible = false;
                CALL("onGetStar");
                return false;
            case 70:
                tile.name = 71;
                tile.sprite.visible = false;
                CALL("onGetPrize");
            case 51:
                return false;
            case 60:
                return false;
            case 61:
                return false;
            case 62:
            case 71:
                return false;
            default:
                break;
            }
        }
        this.dead = true;
        CALL("onRocketHit");
    },
    stage: 0,
    startStage: function(number) {
        if (this.stage & (1 << number))
            return;
        this.stage = this.stage | (1 << number);
        CALL("fireEngines", number);
        this.entity.enablePhysics();
    },
    addThrust: function(t) {
        t = t || 0;
        if (!t)
            return;
        var cosr = Math.cos(this.entity.sprite.rotation),
            sinr = Math.sin(this.entity.sprite.rotation);
        this.entity.addForce(sinr * t, -cosr * t);
    },
    setCameraPosition: function(x, y) {
        this.lookAt = true;
        this.cameraX = x;
        this.cameraY = y;
    },
    cameraX: 0,
    cameraY: 0,
    lookAt: null,
    cameraPosY: 0,
    followCamera: function(speed) {
        var sprite = this.entity.sprite;
        var screen = this.entity.screen;
        var tween = true;
        var tx = 0,
            ty = 0;
        if (this.lookAt) {
            tx = this.cameraX;
            ty = this.cameraY;
            tween = false;
        } else {
            if (this.dead) {
                return;
                tx = game.camera.x;
                ty = this.cameraPosY;
                tween = false;
            } else {
                tx = sprite.x;
                ty = sprite.y;
            }
        }
        tx -= screen.gameWidth * 0.5;
        ty -= screen.gameHeight * 0.5;
        game.camera.y = this.cameraPosY;
        if (tween) {
            game.camera.x -= (game.camera.x - tx) * speed;
            game.camera.y -= (game.camera.y - ty) * speed;
        } else {
            game.camera.x = tx;
            game.camera.y = ty;
        }
        this.cameraPosY = game.camera.y;
        this.shakeIt += 0.7
        this.shake *= 0.9;
    },
    rotateRocket: function(rotation) {
        this.entity.setRotation(0, 0, rotation);
    },
    onPostTick: function() {
        var game = this.entity.screen.game;
        var sprite = this.entity.sprite;
        if (!this.dead && this.stage != 0) {
            if (sprite.y > game.world.height)
                this.onCollision();
        }
        this.followCamera(this.stage == 0 ? 0.02 : 0.1);
    }
});
;
/* ../components/BallisticPhysics.js */
CLAZZ("components.BallisticPhysics", {
    EXTENDS: "components.Component",
    target: null,
    gravity: 4,
    friction: 0.85,
    velX: 0,
    velY: 0,
    updateEntity: false,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        this.target = this.target || this.entity.sprite;
    },
    fly: function() {
        if (this.target) {
            this.target.x += this.velX;
            this.target.y += this.velY;
            if (this.updateEntity) {
                this.entity.x = this.target.x;
                this.entity.y = this.target.y;
            }
        }
        this.velY += this.gravity;
        this.velX *= this.friction;
        this.velY *= this.friction;
    },
    setVelocity: function(dx, dy) {
        this.velX = dx;
        this.velY = dy;
    },
    addForce: function(x, y) {
        this.velX += x;
        this.velY += y;
    }
});
;
/* ../components/MouseInput.js */
CLAZZ("components.MouseInput", {
    EXTENDS: "components.Component",
    enabled: true,
    updateEntity: true,
    pixelPerfectClick: false,
    pixelPerfectOver: false,
    useHandCursor: false,
    pixelPerfectAlpha: 1,
    onClick: null,
    onDblClick: null,
    onMouseOver: null,
    onMouseOut: null,
    onMouseUp: null,
    onMouseDown: null,
    onMouseClick: null,
    onMouseDblClick: null,
    onDragStart: null,
    onDragUpdate: null,
    onDragStop: null,
    dragEnabled: false,
    x: undefined,
    y: undefined,
    __clickTime: undefined,
    cancelClick: undefined,
    event: null,
    sprite: null,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (this.entity.screen.editor) {
            return;
        }
        this.onClick = this.onClick || this.entity.onClick;
        this.onDblClick = this.onDblClick || this.entity.onDblClick;
        this.onMouseOver = this.onMouseOver || this.entity.onMouseOver;
        this.onMouseOut = this.onMouseOut || this.entity.onMouseOut;
        this.onMouseUp = this.onMouseUp || this.entity.onMouseUp;
        this.onMouseDown = this.onMouseDown || this.entity.onMouseDown;
        this.onMouseClick = this.onMouseClick || this.entity.onMouseClick;
        this.onMouseDblClick = this.onMouseDblClick || this.entity.onMouseDblClick;
        this.onDragStart = this.onDragStart || this.entity.onDragStart;
        this.onDragUpdate = this.onDragUpdate || this.entity.onDragUpdate;
        this.onDragStop = this.onDragStop || this.entity.onDragStop;
        if (this.entity.sprite) {
            var e = this.enabled;
            this.enabled = undefined;
            this.setMouseInputEnabled(e);
        }
    },
    setMouseInputEnabled: function(e) {
        if (this.enabled == e)
            return;
        this.enabled = e;
        this.entity.sprite.inputEnabled = e;
        if (e) {
            if (this.dragEnabled)
                this.entity.sprite.input.enableDrag(false);
            else if (!this.dragEnabled)
                this.entity.sprite.input.disableDrag();
            this.entity.sprite.input.pixelPerfectClick = this.pixelPerfectClick;
            this.entity.sprite.input.pixelPerfectAlpha = this.pixelPerfectAlpha;
            this.entity.sprite.input.pixelPerfectOver = this.pixelPerfectOver;
        }
        if (this.sprite != this.entity.sprite) {
            this.sprite = this.entity.sprite;
            this.entity.sprite.events.onInputOver.add(this.__onInputOver.bind(this));
            this.entity.sprite.events.onInputOut.add(this.__onInputOut.bind(this));
            this.entity.sprite.events.onInputDown.add(this.__onInputDown.bind(this));
            this.entity.sprite.events.onInputUp.add(this.__onInputUp.bind(this));
            this.entity.sprite.events.onDragStart.add(this.__onDragStart.bind(this));
            this.entity.sprite.events.onDragUpdate.add(this.__onDragUpdate.bind(this));
            this.entity.sprite.events.onDragStop.add(this.__onDragStop.bind(this));
        }
    },
    __onInputOver: function(target, e) {
        this.event = e;
        this.x = e.x;
        this.y = e.y;
        if (typeof this.onMouseOver == "string")
            SOL.exec(this.onMouseOver, this.entity);
        else if (typeof this.onMouseOver == "function")
            this.onMouseOver();
    },
    __onInputOut: function(target, e) {
        this.event = e;
        this.x = e.x;
        this.y = e.y;
        if (typeof this.onMouseOut == "string")
            SOL.exec(this.onMouseOut, this.entity);
        else if (typeof this.onMouseOut == "function")
            this.onMouseOut();
        this.cancelClick = true;
    },
    __onInputDown: function(target, e) {
        this.event = e;
        this.x = e.x;
        this.y = e.y;
        this.cancelClick = false;
        if (typeof this.onMouseDown == "string")
            SOL.exec(this.onMouseDown, this.entity);
        else if (typeof this.onMouseDown == "function")
            this.onMouseDown();
    },
    __onInputUp: function(target, e) {
        this.event = e;
        this.x = e.x;
        this.y = e.y;
        if (typeof this.onMouseUp == "string")
            SOL.exec(this.onMouseUp, this.entity);
        else if (typeof this.onMouseUp == "function")
            this.onMouseUp();
        if (!this.cancelClick) {
            if (typeof this.onMouseClick == "string")
                SOL.exec(this.onMouseClick, this.entity);
            else if (typeof this.onMouseClick == "function")
                this.onMouseClick();
            if (typeof this.onClick == "string")
                SOL.exec(this.onClick, this.entity);
            else if (typeof this.onClick == "function")
                this.onClick();
            var time = performance.now();
            if (time - this.__clickTime < 300) {
                if (typeof this.onMouseDblClick == "string")
                    SOL.exec(this.onMouseDblClick, this.entity);
                else if (typeof this.onMouseDblClick == "function")
                    this.onMouseDblClick();
            }
            this.__clickTime = time;
        }
    },
    __onDragStart: function(target, e) {
        this.event = e;
        this.x = e.x;
        this.y = e.y;
        if (this.updateEntity) {
            this.entity.x = this.entity.sprite.x;
            this.entity.y = this.entity.sprite.y;
        }
        if (typeof this.onDragStart == "string")
            SOL.exec(this.onDragStart, this.entity);
        else if (typeof this.onDragStart == "function")
            this.onDragStart();
    },
    __onDragUpdate: function(target, e) {
        this.event = e;
        if (this.x != e.x && this.y != e.y) {
            this.x = e.x;
            this.y = e.y;
            if (this.updateEntity) {
                this.entity.x = this.entity.sprite.x;
                this.entity.y = this.entity.sprite.y;
            }
            if (typeof this.onDragUpdate == "string")
                SOL.exec(this.onDragUpdate, this.entity);
            else if (typeof this.onDragUpdate == "function")
                this.onDragUpdate();
        }
    },
    __onDragStop: function(target, e) {
        this.event = e;
        this.x = e.x;
        this.y = e.y;
        if (this.updateEntity) {
            this.entity.x = this.entity.sprite.x;
            this.entity.y = this.entity.sprite.y;
        }
        if (typeof this.onDragStop == "string")
            SOL.exec(this.onDragStop, this.entity);
        else if (typeof this.onDragStop == "function")
            this.onDragStop();
    }
});
;
/* ../components/TileWalker.js */
need("components.TileCollision", function() {
    CLAZZ("components.TileWalker", {
        EXTENDS: "components.TileCollision",
        enabled: true,
        updateEntity: true,
        checkCollision: function() {
            if (!this.entity.sprite)
                return;
            var world = components.TileCollision.world;
            if (!world)
                return;
            var recheckCount = 0;
            if (this.entity.name == "Bob")
                return;
            do {
                var recheck = false;
                SUPER();
                var x,
                    y,
                    tx = this.tx,
                    ty = this.ty,
                    maxy = Math.min(this.ty + this.th, world.length - 1),
                    maxx = Math.min(this.tx + this.tw, world[0].length - 1);
                var minx = Math.max(0, tx),
                    miny = Math.max(0, ty);
                var bounds = this.bounds;
                var hbw = Math.abs(bounds.width * 0.5);
                var hbh = Math.abs(bounds.height * 0.5);
                for (y = miny; y <= maxy; ++y) {
                    for (x = minx; x <= maxx; ++x) {
                        for (var k in world[y][x]) {
                            var v = world[y][x][k];
                            if (v == this)
                                continue;
                            var obounds = v.bounds;
                            var intersects = !(bounds.x + bounds.width < obounds.x || bounds.y + bounds.height < obounds.y || bounds.x > obounds.x + obounds.width || bounds.y > obounds.y + obounds.height);
                            if (intersects) {
                                var hobw = Math.abs(obounds.width * 0.5);
                                var hobh = obounds.height * 0.5;
                                var dx = (obounds.x + hobw) - (bounds.x + hbw);
                                var dy = (obounds.y + hobh) - (bounds.y + hbh);
                                var sx = Math.sign(dx),
                                    sy = Math.sign(dy);
                                dx -= (hbw + hobw) * sx;
                                dy -= (hbh + hobh) * sy;
                                if (!dx && !dy)
                                    dy = -1;
                                if (Math.abs(dy) > Math.abs(dx)) {
                                    this.entity.sprite.x += dx - sx;
                                    dx = "*" + dx;
                                }
                                else {
                                    this.entity.sprite.y += dy - sy;
                                    dy = "*" + dy;
                                }
                                LOG(this.entity.id, bounds.x, bounds.y, " - ", v.entity.id, obounds.x, obounds.y);
                                recheck = true;
                                x = maxx;
                                y = maxy;
                                break;
                            }
                        }
                    }
                }
                recheckCount++;
            } while (recheck && recheckCount < 10);
        },
        onPostTick: function() {
            if (!this.enabled || !this.entity.sprite)
                return;
            this.checkCollision();
            if (this.updateEntity) {
                this.entity.x = this.entity.sprite.x;
                this.entity.y = this.entity.sprite.y;
            }
        }
    });
});
;
/* ../components/SomeSomeLogic.js */
CLAZZ("components.SomeSomeLogic", {
    EXTENDS: "components.Component",
    nextAnswer: function() {
        if (this.entity.screen.gameEnded)
            return;
        do {
            var blocks = [];
            CALL("getBlock", {
                state: "null"
            }, blocks);
            if (!blocks.length)
                CALL("noAnswer");
        } while (!blocks.length)
        var mat = [];
        var w = this.entity.screen.columns;
        for (var i = 0, block; block = blocks[i++];)
            mat[block.row * w + block.column] = block;
        var steps = this.entity.screen.level;
        var directions = {
            0: [0, -1],
            1: [1, 0],
            2: [0, 1],
            3: [-1, 0]
        };
        var maxcol = this.entity.screen.columns;
        var maxrow = this.entity.screen.rows;
        var op = (this.entity.screen.operation || "add").toLowerCase();
        var error = 0;
        while (error < 10000) {
            var block = blocks[Math.floor(Math.random() * blocks.length)];
            var firstBlock = block;
            var acc = parseInt(block.text.text);
            var selected = {};
            selected[block.__uid] = block;
            var localerror = 0;
            for (var i = 1; i < steps && localerror < 100; ++i) {
                var direction = Math.floor(Math.random() * 4);
                var ncol = block.column + directions[direction][0];
                var nrow = block.row + directions[direction][1];
                if (ncol >= maxcol || nrow >= maxrow || ncol < 0 || nrow < 0 || !mat[nrow * w + ncol] || mat[nrow * w + ncol].state != "null" || selected[mat[nrow * w + ncol].__uid]) {
                    --i;
                    ++localerror;
                    ++error;
                    continue;
                }
                var box = mat[nrow * w + ncol];
                var prevacc = acc;
                switch (op) {
                case "add":
                    acc += parseInt(box.text.text);
                    break;
                case "sub":
                    acc -= parseInt(box.text.text);
                    break;
                case "mul":
                    acc *= parseInt(box.text.text);
                    break;
                case "div":
                    acc /= parseInt(box.text.text);
                    break;
                }
                if (acc != Math.floor(acc)) {
                    --i;
                    acc = prevacc;
                    ++localerror;
                    ++error;
                    continue;
                }
                selected[box.__uid] = block = box;
            }
            if (i >= 2)
                break;
            error++;
        }
        if (this.entity.screen.avoidNegatives && acc < 0)
            return this.nextAnswer();
        if (i < 2) {
            if (blocks.length < w)
                CALL("noAnswer");
            else
                CALL("reshuffle");
            this.nextAnswer();
        } else {
            this.entity.setText("" + acc);
            firstBlock.isHintBlock = true;
            if (this.entity.screen.easyHint) {
                for (var k in selected) {
                    selected[k].isHintBlock = true;
                }
            }
        }
    },
    onChainSelect: function(chain) {
        if (chain.length < 2)
            return;
        var acc = parseInt(chain[0].text.text);
        var op = (this.entity.screen.operation || "add").toLowerCase();
        switch (op) {
        case "add":
            for (var i = 1, box; box = chain[i]; ++i)
                acc += parseInt(box.text.text);
            break;
        case "sub":
            for (var i = 1, box; box = chain[i]; ++i)
                acc -= parseInt(box.text.text);
            break;
        case "mul":
            for (var i = 1, box; box = chain[i]; ++i)
                acc *= parseInt(box.text.text);
            break;
        case "div":
            for (var i = 1, box; box = chain[i]; ++i)
                acc /= parseInt(box.text.text);
            break;
        }
        SOL.vars.accValue = acc;
        if (parseInt(this.entity.text.text) == acc) {
            var blocks = [];
            CALL("getBlock", null, blocks);
            var mat = [];
            var w = this.entity.screen.columns;
            for (var i = 0, block; block = blocks[i++];)
                mat[block.row * w + block.column] = block;
            var rows = this.entity.screen.rows;
            for (var i = 0, box; box = chain[i++];) {
                box.delay = i * 225;
                box.onSelectRight && box.onSelectRight();
                var dropHeight = 1;
                for (var r = box.row || 0; r < rows; ++r) {
                    var above = mat[r * w + box.column];
                    if (!above)
                        continue;
                    above.delay = i * 225;
                    above.onDrop && above.onDrop();
                }
            }
            CALL("onRight", op);
            this.nextAnswer();
        } else {
            for (var i = 0, box; box = chain[i++];)
                box.onSelectWrong && box.onSelectWrong();
            CALL("onWrong", op);
        }
    }
});
;
/* ../components/RocketHUD.js */
CLAZZ("components.RocketHUD", {
    EXTENDS: "components.Component",
    buttons: null,
    target: 0,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        var e = this.entity;
        this.buttons = [];
        if (!e.sprite) {
            e.sprite = this.entity.screen.game.add.group();
            e.sprite.fixedToCamera = true;
        }
        e.width = e.screen.game.camera.width;
        e.height = e.screen.game.camera.height;
    },
    addButton: function(sprite, event) {
        this.buttons.push(sprite);
        sprite.inputEnabled = true;
        sprite.events.onInputDown.add(this.entity["onClick" + event].bind(this.entity));
        this.entity.sprite.add(sprite);
        sprite.input.pixelPerfectClick = true;
    },
    addText: function(x, y, text) {
        var txt = this.entity.screen.game.add.text(x, y, text);
        txt.anchor.setTo(0.5);
        this.entity.sprite.add(txt);
        txt.setStyle({
            wordWrapWidth: 300,
            align: "center"
        });
        return txt;
    },
    create: function() {
        this.entity.sprite.alpha = 0;
    },
    onTick: function() {
        this.entity.sprite.alpha -= (this.entity.sprite.alpha - this.target) * 0.1;
    },
    show: function() {
        this.entity.sprite.parent.bringToTop(this.entity.sprite);
        this.target = 1;
        this.buttons.forEach(function(button) {
            button.inputEnabled = true;
        });
    },
    hide: function() {
        this.target = 0;
        this.buttons.forEach(function(button) {
            button.inputEnabled = false;
        });
    }
});
;
/* ../components/TangramGrid.js */
CLAZZ("components.TangramGrid", {
    EXTENDS: "components.Component",
    bmd: null,
    data: null,
    sprite: null,
    count: 0,
    map: null,
    snap: 3,
    shadowSize: 1.1,
    outline: true,
    exactPieces: false,
    piecesIds: [],
    onCreateScreen: function() {
        var map = this.map = components.SpriteMap.createMap("target");
        this.entity.sprite.updateTransform();
        var shapes = this.getGridShapes();
        map.sprite.visible = true;
        this.count = shapes.length;
        var dict = {};
        if (this.exactPieces)
            this.piecesIds = shapes.map(function(shape) {
                return shape.__uid
            });
        for (var i = 0, s; s = shapes[i]; ++i) {
            dict[s.__uid] = {
                x: s.sprite.scale.x,
                y: s.sprite.scale.y
            };
            s.sprite.scale.x *= this.shadowSize;
            s.sprite.scale.y *= this.shadowSize;
            map.addToSpriteMap(s.SpriteMap);
        }
        map.xor = false;
        map.outline = this.outline;
        map.redraw();
        for (var i = 0, s; s = shapes[i]; ++i) {
            s.sprite.scale.setTo(dict[s.__uid].x, dict[s.__uid].y);
            s.sprite.updateTransform();
        }
        this.bmd = map.bmd;
        map.bmd = null;
        this.sprite = map.sprite;
        map.enabled = false;
        this.entity.sprite.parent.setChildIndex(this.sprite, this.entity.sprite.parent.getChildIndex(this.entity.sprite) + 1);
        this.sprite.x = map.bounds.x;
        this.sprite.y = map.bounds.y;
        this.sprite.anchor.copyFrom(this.entity.sprite.anchor);
        this.sprite.alpha = 0.7;
        CALL("resetShapes");
    },
    getGridShapes: function() {
        var bounds = this.entity.sprite.getBounds();
        var shapes = [];
        var THIS = this;
        CALL("getShape", function(s) {
            s.sprite.updateTransform();
            s.sprite.x = Math.round(s.sprite.x / THIS.snap) * THIS.snap;
            s.sprite.y = Math.round(s.sprite.y / THIS.snap) * THIS.snap;
            return bounds.intersects(s.sprite.getBounds());
        }, shapes);
        return shapes;
    },
    haveCorrectPieces: function(shapes) {
        if (shapes.length != this.count || !shapes.length) {
            LOG("Incomplete", shapes.length, this.count);
            return false;
        }
        if (this.exactPieces) {
            for (var i = 0; i < shapes.length; i++) {
                var shape = shapes[i];
                if (this.piecesIds.indexOf(shape.__uid) == -1)
                    return false;
            }
        }
        return true;
    },
    onVerify: function() {
        if (!this.bmd)
            return;
        var shapes = this.getGridShapes();
        var haveCorrectPieces = this.haveCorrectPieces(shapes);
        if (!haveCorrectPieces)
            return;
        var acc = 0;
        var score = 0;
        var wrong = 0;
        this.data = this.bmd.context.getImageData(0, 0, this.bmd.width, this.bmd.height);
        var b = this.data;
        var bw = b.width;
        var bh = b.height;
        var bdata = this.data.data;
        acc = 1;
        var wrongest = "None";
        for (var i = 0; i < shapes.length; ++i) {
            var shape = shapes[i];
            var comp = shape.SpriteMap;
            var cosa = Math.cos(shape.sprite.rotation);
            var sina = Math.sin(shape.sprite.rotation);
            var a = comp.alphaSprite;
            var adata = comp.data;
            var aw = Math.abs(comp.alphaBMD.width);
            var ah = Math.abs(comp.alphaBMD.height);
            var ancX = -Math.abs(a.anchor.x * comp.alphaBMD.width);
            var ancY = -a.anchor.y * comp.alphaBMD.height;
            score = 0;
            wrong = 0;
            var sx = shape.sprite.x - this.sprite.x;
            var sy = shape.sprite.y - this.sprite.y;
            var scalex = shape.sprite.scale.x * 0.9;
            var scaley = shape.sprite.scale.y * 0.9;
            for (var ay = 0; ay < ah; ++ay) {
                for (var ax = 0; ax < aw; ++ax) {
                    var ap = adata[(ay * aw + ax) * 4 + 3] >= 127;
                    if (!ap)
                        continue;
                    var bx = Math.round(sx + (cosa * (ancX + ax) * scalex - sina * (ancY + ay) * scaley));
                    var by = Math.round(sy + (sina * (ancX + ax) * scalex + cosa * (ancY + ay) * scaley));
                    var bc = (by * bw + bx) * 4 + 2;
                    if (bx < 0 || bx >= bw || by < 0 || by >= bh) {
                        wrong++;
                        continue;
                    }
                    var bp = bdata[bc] >= 127 || bdata[bc] == shape.__uid;
                    if (bp) {
                        score++;
                        bdata[bc] = shape.__uid;
                    } else
                        wrong++;
                }
            }
            console.log(shape.gid || shape.__data.sprite, " points: ", score / (score + wrong));
            var rat = score / (score + wrong);
            if (!rat || rat < acc) {
                acc = rat;
                wrongest = shape.__data.sprite + " " + shape.__uid;
            }
        }
        if (acc && acc > 0.95) {
            SOL.vars.rightAnswers = 1;
            SOL.vars.wrongAnswers = 0;
            CALL("endGame");
        }
        LOG("Score: ", wrongest, acc);
    },
    onTimeEnded: function() {
        CALL("endGame");
    }
});
;
/* ../components/Interactive.js */
CLAZZ("components.Interactive", {
    EXTENDS: "components.Component",
    isRightAnswer: null,
    isWrongAnswer: null,
    disabled: false,
    currentLine: null,
    followTarget: null,
    handleClick: false,
    canDisableClick: false,
    isInStartPosition: null,
    startX: 0,
    startY: 0,
    startScaleX: 1,
    startScaleY: 1,
    targetX: null,
    targetY: null,
    isDragging: false,
    __onShow: null,
    __onEndOfLine: null,
    __onClick: null,
    TTL: NaN,
    enabled: true,
    CONSTRUCTOR: function(screen, data) {
        SUPER(screen, data);
        this.TTL = this.entity.TTL;
        "onEndOfLine, onShow".split(",").forEach(this.__initEvent.bind(this));
        if (this.handleClick)
            this.__initEvent("onClick");
        for (var k in this.entity.customEvents) {
            var func = SOL.compile(["if: !this.Interactive.enabled", "return:"].concat(this.entity.customEvents[k]), this.entity);
            MAR.appendFunction(this.entity, k, func, this.entity.screen.__pool);
        }
        if (typeof this.entity.__data.text === "string") {
            var THIS = this;
            var dependencies = {},
                values = {};
            var exp = /\$\{([^}<>=!]+)((?:[<>=!]{1,2}[^:]+:[^}]+)+)?\}/g;
            this.entity.__data.text.replace(exp, function(m, v) {
                values[v] = undefined;
                MAR.appendFunction(THIS.entity, "onChange" + v, updateText.bind(THIS, v), THIS.entity.screen.__pool);
            });
            function updateText(key) {
                var ctx = this.entity.screen.counts;
                var nv = ctx[key];
                if (values[key] === nv)
                    return;
                values[key] = nv;
                var str = this.entity.__data.text.replace(exp, function(m, v, sub) {
                    v = values[v];
                    if (sub) {
                        sub = sub.split(/\s*(?:^|;)\s*([<>=!]{1,2})\s*([^:]+):\s*/);
                        for (var i = 1, l = sub.length; i < l;) {
                            var op = sub[i++],
                                cmp = sub[i++],
                                nv = sub[i++],
                                test = false;
                            switch (op) {
                            case ">":
                                test = v > cmp;
                                break;
                            case ">=":
                                test = v >= cmp;
                                break;
                            case "<":
                                test = v < cmp;
                                break;
                            case "<=":
                                test = v <= cmp;
                                break;
                            case "=":
                            case "==":
                                test = v == cmp;
                                break;
                            case "!=":
                                test = v != cmp;
                                break;
                            }
                            if (test) {
                                v = nv;
                                break;
                            }
                        }
                        if (!test)
                            v = "";
                    }
                    return v;
                });
                if (this.entity.text.text !== str)
                    this.entity.text.setText(str);
            }
        }
    },
    __initEvent: function(evt) {
        evt = evt.trim();
        var data = this.entity.__data[evt];
        if (!data)
            return;
        if (data instanceof Array || typeof data == "string")
            this["__" + evt] = SOL.compile(["if: !this.Interactive.enabled", "return:"].concat(data), this.entity);
        else {
            var cmds = {};
            for (var k in data)
                cmds[k] = SOL.compile(["if: !this.Interactive.enabled", "return:"].concat(data[k]), this.entity);
            this["__" + evt] = cmds;
        }
    },
    spawn: function(TTL, GUID) {
        if (GUID != this.entity.GUID)
            return;
        var newGUID = "CLONE" + MAR.getUID();
        if (typeof TTL != "object")
            TTL = {
                TTL: TTL
            };
        var e = this.entity.screen.addEntity(MAR.merge(this.entity.__data, {
            GUID: newGUID,
            SRCGUID: GUID,
            x: this.entity.sprite.x,
            y: this.entity.sprite.y
        }, TTL));
        e.showObject(newGUID);
        if (typeof e.onSpawn == "function")
            e.onSpawn();
    },
    followEntity: function(target, GUID) {
        if (GUID != this.entity.GUID || !(target in this.entity.screen.entities) || !this.entity.screen.entities[target].sprite)
            return;
        this.entity.state = "followEntityState";
        this.followTarget = this.entity.screen.entities[target].sprite;
        this.followEntityState();
    },
    followEntityState: function() {
        this.entity.sprite.x = this.followTarget.x + (this.entity.followOffsetX || 0);
        this.entity.sprite.y = this.followTarget.y + (this.entity.followOffsetY || 0);
    },
    followLine: function(target, GUID) {
        if (GUID != this.entity.GUID || !(target in this.entity.screen.entities) || this.entity.Spline.enabled)
            return;
        this.currentLine = target;
        this.entity.state = "follow";
        this.entity.Spline.enabled = true;
        this.entity.Spline.speed = this.entity.speed;
        this.entity.FlyAI.speed = this.entity.speed / 10;
        var targetEntity = this.entity.screen.entities[target];
        this.entity.follow(targetEntity.points, targetEntity.scales);
    },
    followBegin: function() {
        this.entity.Spline.enabled = true;
        this.entity.Spline.iterator = 0;
    },
    followEnd: function() {
        this.entity.Spline.enabled = false;
    },
    setMovement: function(movement, GUID) {
        if (GUID == this.entity.GUID)
            this.entity.state = movement;
    },
    showObject: function(GUID) {
        if (GUID == this.entity.GUID) {
            if (this.entity.CollisionTriggers)
                this.entity.CollisionTriggers.enabled = true;
            if (!this.entity.sprite.visible) {
                this.entity.sprite.visible = true;
                if (this.__onShow)
                    this.__onShow();
            }
        }
    },
    bringToTop: function(GUID) {
        if (GUID == this.entity.GUID) {
            this.entity.sprite.bringToTop();
        }
    },
    hideObject: function(GUID) {
        if (GUID == this.entity.GUID) {
            this.entity.sprite.visible = false;
            if (this.entity.CollisionTriggers && this.entity.hiddenCollision === false)
                this.entity.CollisionTriggers.enabled = false;
        }
    },
    scrollTtB: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            anchor = sprite.anchor,
            pos = sprite.position,
            height = Math.abs(sprite.height);
        pos.y += entity.speed;
        if (entity.tileY === true) {
            if (pos.y + height * anchor.y > 0)
                pos.y = height * anchor.y - sprite.tileHeight + (pos.y + height * anchor.y) % sprite.tileHeight;
        } else {
            if (pos.y + height * anchor.y > entity.screen.gameHeight)
                pos.y = height * anchor.y - height;
        }
    },
    scrollBtT: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            anchor = sprite.anchor,
            pos = sprite.position,
            height = Math.abs(sprite.height);
        pos.y -= entity.speed;
        if (entity.tileY === true) {
            if (pos.y - height * anchor.y < -sprite.tileHeight)
                pos.y = height * anchor.y + (pos.y - height * anchor.y) % sprite.tileHeight;
        } else {
            if (pos.y - height * anchor.y < -height)
                pos.y = entity.screen.gameHeight + height * anchor.y;
        }
    },
    scrollLtR: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            anchor = sprite.anchor,
            pos = sprite.position,
            width = Math.abs(sprite.width);
        pos.x += entity.speed;
        if (entity.tileX === true) {
            if (pos.x + width * anchor.x > 0)
                pos.x = width * anchor.x - sprite.tileWidth + (pos.x + width * anchor.x) % sprite.tileWidth;
        } else {
            if (pos.x + width * anchor.x > entity.screen.gameWidth)
                pos.x = width * anchor.x - width;
        }
    },
    scrollRtL: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            anchor = sprite.anchor,
            pos = sprite.position,
            width = Math.abs(sprite.width);
        pos.x -= entity.speed;
        if (entity.tileX === true) {
            if (pos.x - width * anchor.x < -Math.abs(sprite.tileWidth * sprite.scale.x))
                pos.x = width * anchor.x + (pos.x - width * anchor.x) % Math.abs(sprite.tileWidth * sprite.scale.x);
        } else {
            if (pos.x - width * anchor.x < -width)
                pos.x = entity.screen.gameWidth + width * anchor.x;
        }
    },
    moveTtB: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            anchor = sprite.anchor,
            pos = sprite.position,
            height = Math.abs(sprite.height);
        pos.y += entity.speed;
    },
    moveBtT: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            anchor = sprite.anchor,
            pos = sprite.position,
            height = Math.abs(sprite.height);
        pos.y -= entity.speed;
    },
    moveLtR: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            anchor = sprite.anchor,
            pos = sprite.position,
            width = Math.abs(sprite.width);
        pos.x += entity.speed;
    },
    moveRtL: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            anchor = sprite.anchor,
            pos = sprite.position,
            width = Math.abs(sprite.width);
        pos.x -= entity.speed;
    },
    goToPointer: function() {
        this.targetX = this.entity.screen.game.input.x;
        this.targetY = this.entity.screen.game.input.y;
        this.entity.state = "goToTarget";
        this.goToTarget();
    },
    goToTarget: function() {
        var entity = this.entity,
            sprite = this.entity.sprite,
            pos = sprite.position;
        var speed = (0.0005 * Math.max(400, Math.min(0.1, entity.speed * entity.speed)));
        var dx = (pos.x - this.targetX) * speed;
        var dy = (pos.y - this.targetY) * speed;
        pos.x -= dx;
        pos.y -= dy;
        if (!this.entity.AutoFlip.enabled) {
            sprite.scale.x -= (sprite.scale.x - this.startScaleX) * speed;
            sprite.scale.y -= (sprite.scale.y - this.startScaleY) * speed;
        }
        if (Math.abs(dx) + Math.abs(dy) < 0.2) {
            pos.x = this.targetX;
            pos.y = this.targetY;
            entity.state = "";
            if (typeof this.entity.onReachTarget == "function")
                this.entity.onReachTarget();
        }
    },
    goToStart: function() {
        this.targetX = this.startX;
        this.targetY = this.startY;
        this.entity.state = "goToTarget";
        this.goToTarget();
    },
    onTick: function() {
        var sprite = this.entity.sprite;
        if (this.entity.sortMode == "-y") {
            var height = Math.abs(sprite.height);
            this.entity.ZSort.z = -(sprite.y - (sprite.anchor && sprite.anchor.y * height) + height * 0.5);
            if (this.entity.state == "followEntityState")
                this.entity.ZSort.z++;
        }
        var isInStartPosition = sprite.x == this.startX && sprite.y == this.startY;
        if (isInStartPosition != this.isInStartPosition) {
            this.isInStartPosition = isInStartPosition;
            if (isInStartPosition) {
                if (typeof this.entity.onInStartPosition == "function")
                    this.entity.onInStartPosition();
                if (typeof this.entity.screen.countUp == "function") {
                    this.entity.screen.countUp("InStartPosition");
                    this.entity.screen.countUp(this.entity[this.entity.$word] + "InStartPosition");
                }
            } else {
                if (typeof this.entity.onNotInStartPosition == "function")
                    this.entity.onNotInStartPosition();
                if (typeof this.entity.screen.countDown == "function") {
                    this.entity.screen.countDown("InStartPosition");
                    this.entity.screen.countDown(this.entity[this.entity.$word] + "InStartPosition");
                }
            }
        }
        this.TTL -= 1 / 30;
        if (this.TTL < 0)
            this.selfDestruct();
    },
    selfDestruct: function() {
        if (!this.enabled)
            return;
        if (this.entity.CollisionTriggers)
            this.entity.CollisionTriggers.enabled = false;
        this.enabled = false;
        this.TTL = NaN;
        setTimeout(this.entity.destroy.bind(this.entity), 1);
    },
    flyAIBegin: function() {
        if (this.entity.screen.editor)
            return;
        this.entity.FlyAI.enabled = true;
        this.entity.x = this.entity.sprite.x;
        this.entity.y = this.entity.sprite.y;
    },
    flyAIEnd: function() {
        this.entity.FlyAI.enabled = false;
    },
    dragAIBegin: function() {
        this.entity.sprite.input.enabled = true;
    },
    dragAIEnd: function() {
        if (this.canDisableClick)
            this.entity.sprite.input.enabled = false;
    },
    dragAI: function() {
        if (this.isDragging) {
            this.entity.sprite.x = this.entity.screen.game.input.x;
            this.entity.sprite.y = this.entity.screen.game.input.y;
        }
    },
    _onInputDown: function() {
        this.isDragging = this.entity.state == "dragAI";
    },
    _onInputUp: function() {
        this.isDragging = false;
        if (this.entity.lockToGrid) {
            this.entity.sprite.x = Math.round((this.entity.sprite.x - this.startX) / this.entity.lockToGrid) * this.entity.lockToGrid + this.startX;
            this.entity.sprite.y = Math.round((this.entity.sprite.y - this.startY) / this.entity.lockToGrid) * this.entity.lockToGrid + this.startY;
        }
    },
    dragAIEnd: function() {
        if (this.entity.lockToGrid) {
            this.entity.sprite.x = Math.round((this.entity.sprite.x - this.startX) / this.entity.lockToGrid) * this.entity.lockToGrid + this.startX;
            this.entity.sprite.y = Math.round((this.entity.sprite.y - this.startY) / this.entity.lockToGrid) * this.entity.lockToGrid + this.startY;
        }
    },
    hasPendingRight: function() {
        if (this.isRightAnswer && !this.disabled)
            return true;
    },
    checkRight: function() {
        if (this.disabled)
            return;
        this.disabled = true;
        this.entity.screen.addEntity({
            "class": "rightFeedback",
            "x": this.entity.sprite.x - this.entity.sprite.width * this.entity.sprite.anchor.x + this.entity.sprite.width * 0.5,
            "y": this.entity.sprite.y - this.entity.sprite.height * this.entity.sprite.anchor.y + this.entity.sprite.height * 0.5
        });
        CALL("onRight", this.entity[this.entity.$word]);
    },
    checkWrong: function() {
        if (this.disabled)
            return;
        this.showWrongAnimation();
        CALL("onWrong", this.entity[this.entity.$word]);
    },
    sayText: function(text) {
        var entity = this.entity;
        if (arguments.length == 0)
            text = (entity.text && entity.text._text) || (entity.__data.sprite && entity.screen.__data.assets[entity.__data.sprite] && entity.screen.__data.imgTitles[entity.screen.__data.assets[entity.__data.sprite]]);
        entity.screen.say(text);
    },
    hasUserCall: function(call) {
        var entity = this.entity;
        if (entity.__data.onClick && entity.__data.onClick.indexOf(call) !== -1)
            return true;
        if (entity.__data.onShow && entity.__data.onShow.indexOf(call) !== -1)
            return true;
        if (entity.__data.onCollision) {
            var collision = entity.__data.onCollision;
            for (var k in collision) {
                if (collision[k].indexOf(call) != -1)
                    return true;
            }
        }
        if (entity.__data.onEndCollision) {
            var collision = entity.__data.onEndCollision;
            for (var k in collision) {
                if (collision[k].indexOf(call) != -1)
                    return true;
            }
        }
        if (entity.__data.customEvents) {
            var evt = entity.__data.customEvents;
            for (var k in evt) {
                if (evt[k].indexOf(call) != -1)
                    return true;
            }
        }
        if (entity.__data.onEndOfLine) {
            var collision = entity.__data.onEndOfLine;
            for (var k in collision) {
                if (collision[k].indexOf(call) != -1)
                    return true;
            }
        }
        return false;
    },
    create: function() {
        var entity = this.entity,
            THIS = this;
        if (entity.AutoFlip)
            entity.AutoFlip.defaultRight = (entity.__data["sprite.scale.x"] || 1) > 0;
        if (this.entity.Spline)
            this.entity.Spline.onComplete = function() {
                entity.Spline.enabled = false;
                if (THIS.currentLine in THIS.__onEndOfLine)
                    THIS.__onEndOfLine[THIS.currentLine]();
            };
        if (this.entity.sortMode)
            this.entity.ZSort.enabled = true;
        if (entity.state == "shuffle")
            this.entity.screen.shuffleList.push(entity)
        if (entity.makeTTSSpeech == "beginning" || entity.makeTTSSpeech == "beginningNClick")
            this.sayText();
        if (this.hasUserCall("checkRight()"))
            this.isRightAnswer = true;
        if (this.hasUserCall("checkWrong()"))
            this.isWrongAnswer = true;
        this.startX = this.entity.x;
        this.startY = this.entity.y;
        if (entity.sprite) {
            this.startScaleX = this.entity.sprite.scale.x;
            this.startScaleY = this.entity.sprite.scale.y;
            if (entity.screen.editor)
                entity.sprite.visible = entity.visibleInEditor;
            else {
                entity.sprite.visible = entity.visible;
                entity.sprite.events.onInputDown.add(this._onInputDown, this);
                entity.sprite.events.onInputUp.add(this._onInputUp, this);
                this.canDisableClick = entity.sprite.inputEnabled && !(entity.makeTTSSpeech == "click" || entity.makeTTSSpeech == "beginningNClick" || (entity.__data.onClick && entity.__data.onClick.length) || entity.audioEffect);
                if (this.canDisableClick)
                    entity.sprite.input.enabled = false;
            }
            if (entity.CollisionTriggers && entity.hiddenCollision === false)
                entity.CollisionTriggers.enabled = entity.sprite.visible;
            if (entity.pixelArt)
                entity.sprite.smoothed = false;
            if ("opacity" in entity)
                entity.sprite.alpha = (entity.opacity / 100) || 0;
            if (entity.sprite.anchor && entity.anchorMode && entity.anchorMode.length) {
                var anchorMode = entity.anchorMode.split(",").map(parseFloat);
                entity.sprite.anchor.x = anchorMode[0] || 0;
                entity.sprite.anchor.y = anchorMode[1] || 0;
            }
            if (entity.sprite.visible && this.__onShow)
                this.__onShow();
        }
    },
    onClick: function() {
        var entity = this.entity;
        if (entity.makeTTSSpeech == "click" || entity.makeTTSSpeech == "beginningNClick")
            this.sayText();
        if (this.handleClick) {
            if (this.__onClick)
                this.__onClick();
        } else {
            if (entity.audioEffect)
                CALL("playAudio", entity.audioEffect);
        }
    },
    playActionAudio: function(GUID) {
        var entity = this.entity;
        if (GUID == this.entity.GUID && entity.audioEffect)
            CALL("playAudio", entity.audioEffect);
    },
    playAnimation: function(animation, GUID) {
        var sprite = this.entity.sprite;
        if (sprite && sprite.animations && (arguments.length == 1 || GUID == this.entity.GUID))
            sprite.animations.play(animation)
    },
    onTimeEnded: function() {
        this.disabled = true
    },
    onEndGame: function() {
        if (this.entity.sprite && this.entity.sprite.visible == false)
            return;
        if (this.isRightAnswer && !this.disabled)
            this.checkWrong();
        this.disabled = true;
        if (this.isRightAnswer)
            return this.entity.screen.setTimeout(this.showRightAnimation, 1500, this);
    },
    showRightAnimation: function() {
        var sprite = this.entity.sprite;
        if (!sprite)
            return;
        var anchorx = 0.5,
            anchory = 0.5;
        if (sprite.anchor) {
            anchorx = sprite.anchor.x;
            anchory = sprite.anchor.y;
        }
        this.entity.screen.addEntity({
            "class": "popFireworks",
            "x": sprite.x - sprite.width * anchorx + sprite.width * 0.5,
            "y": sprite.y - sprite.height * anchory + sprite.height * 0.5
        });
    },
    showWrongAnimation: function() {
        var sprite = this.entity.sprite;
        if (!sprite)
            return;
        var anchorx = 0.5,
            anchory = 0.5;
        if (sprite.anchor) {
            anchorx = sprite.anchor.x;
            anchory = sprite.anchor.y;
        }
        this.entity.screen.addEntity({
            "class": "wrongFeedback",
            "x": sprite.x - sprite.width * anchorx + sprite.width * 0.5,
            "y": sprite.y - sprite.height * anchory + sprite.height * 0.5
        });
    }
})
;
/* ../components/NameGen.js */
CLAZZ("components.NameGen", {
    EXTENDS: "components.Component",
    rules: null,
    minPhonemeCount: 0,
    maxPhonemeCount: 2,
    oPhonemes: null,
    phonemes: null,
    cPhonemes: null,
    addNameRule: function(minPC, maxPC, ops, ps, cps, condition) {
        var rules;
        this.rules = this.rules || [];
        if ((!ops || !ops.length) && (!ps || !ps.length) && (!cps || !cps.length))
            return;
        this.rules.push({
            minPC: minPC,
            maxPC: maxPC,
            ops: ops,
            ps: ps,
            cps: cps,
            condition: condition
        });
    },
    addNameRules: function(rules) {
        if (!rules)
            return;
        this.rules = (this.rules || []).concat(rules);
    },
    generateName: function() {
        if (!this.rules)
            return "";
        var name = "";
        for (var ri = 0, rule; rule = this.rules[ri]; ++ri) {
            if (rule.condition) {
                var conditions = rule.condition;
                if (!(conditions instanceof Array))
                    conditions = [conditions];
                var sat = true;
                for (var ci = 0, cond; sat && (cond = conditions[ci]); ++ci) {
                    var cmp = cond["=="] || "==";
                    var op = cond["&&"] || "&&";
                    var F = new Function("return arguments[0] " + op + " (arguments[1] " + cmp + " arguments[2])");
                    for (var k in cond) {
                        if (k == "==" || k == "&&")
                            continue;
                        sat = F(sat, this.entity[k], cond[k]);
                        if (!sat)
                            break;
                    }
                }
                if (!sat)
                    continue;
            }
            if (name)
                name += " ";
            var phonemeCount = (MAR.rand16() % (rule.maxPC - rule.minPC)) + rule.minPC;
            var partName = "";
            if (rule.ops && rule.ops.length)
                partName += rule.ops[MAR.rand16() % rule.ops.length];
            if (rule.ps && rule.ps.length)
                for (var i = 0; i < phonemeCount; ++i)
                    partName += rule.ps[MAR.rand16() % rule.ps.length];
            if (rule.cps && rule.cps.length)
                partName += rule.cps[MAR.rand16() % rule.cps.length];
            name += partName;
            if (rule.property)
                this.entity[rule.property] = partName;
        }
        return name.replace(/\s+/g, " ");
    }
});
;
/* ../components/MoveTo.js */
CLAZZ("components.MoveTo", {
    EXTENDS: "components.Component",
    speed: 1,
    entityTarget: null,
    targetX: 0,
    targetY: 0,
    enabled: true,
    updateEntity: true,
    deltaX: 0,
    deltaY: 0,
    callback: "doneMoving",
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (this.callback == "doneMoving" && !this.entity.doneMoving)
            this.callback = null;
    },
    onTick: function() {
        if (!this.enabled || !this.entity.sprite)
            return;
        var tx = this.targetX;
        var ty = this.targetY;
        if (this.entityTarget && this.entityTarget.sprite) {
            tx += this.entityTarget.sprite.x;
            ty += this.entityTarget.sprite.y;
        }
        var dx = tx - this.entity.sprite.x;
        var dy = ty - this.entity.sprite.y;
        var l = Math.sqrt(dx * dx + dy * dy);
        dx = dx / l;
        dy = dy / l;
        if (l > this.speed) {
            dx *= this.speed;
            dy *= this.speed;
        } else {
            this.enabled = false;
            if (this.callback)
                SOL.exec(this.callback, this.entity);
        }
        this.entity.sprite.x += dx;
        this.entity.sprite.y += dy;
        this.deltaX = dx;
        this.deltaY = dy;
        if (this.updateEntity) {
            this.entity.x = this.entity.sprite.x;
            this.entity.y = this.entity.sprite.y;
        }
    },
    moveTo: function(targetX, targetY, callback) {
        if (callback !== undefined && this.callback != callback)
            this.callback = callback;
        this.targetY = targetY || 0;
        this.targetX = targetX || 0;
        this.enabled = true;
    },
    moveToInc: function(targetX, targetY, callback) {
        this.moveTo(this.targetX + targetX, this.targetY + targetY, callback);
    }
});
;
/* ../components/Logic.js */
CLAZZ("components.Logic", {
    EXTENDS: "components.Component",
    repeat: function(count, cmd) {
        for (var i = 0; i < count; ++i)
            SOL.exec(cmd, this.entity);
    },
    lessThan: function(a, b, t, f) {
        if (a < b)
            SOL.exec(t, this.entity);
        else
            SOL.exec(f, this.entity);
    },
    if: function(v, t, f) {
        if (v)
            SOL.exec(t, this.entity);
        else
            SOL.exec(f, this.entity);
    }
});
;
/* ../components/ChainSelect.js */
CLAZZ("components.ChainSelect", {
    EXTENDS: "components.Component",
    enabled: true,
    selected: false,
    stackMode: true,
    chainSprite: null,
    scale: 1,
    STATIC: {
        selection: null,
        isSelecting: false
    },
    CONSTRUCTOR: function(data) {
        SUPER(data);
    },
    select: function() {
        if (this.selected)
            return;
        this.selected = true;
        components.ChainSelect.selection = components.ChainSelect.selection || [];
        components.ChainSelect.selection.push(this.entity);
    },
    onPostTick: function() {
        if (!this.selected || !this.chainSprite)
            return;
        if (typeof this.chainSprite == "string") {
            this.chainSprite = this.entity.loadSprite(this.chainSprite);
            this.chainSprite.visible = false;
            this.chainSprite.anchor.setTo(0.5);
            this.chainSprite.scale.setTo(this.scale);
        }
        var s = components.ChainSelect.selection;
        if (!s)
            return;
        var i = s.indexOf(this.entity);
        if (i == -1)
            return;
        if (this.chainSprite.visible = i < s.length - 1) {
            this.chainSprite.x = (this.entity.sprite.x + s[i + 1].sprite.x) * 0.5;
            this.chainSprite.y = (this.entity.sprite.y + s[i + 1].sprite.y) * 0.5;
        }
    },
    unselect: function() {
        if (this.chainSprite)
            this.chainSprite.visible = false;
        if (!components.ChainSelect.selection || !this.selected || (this.stackMode && components.ChainSelect.selection[components.ChainSelect.selection.length - 1] != this.entity))
            return;
        this.selected = false;
        var i = components.ChainSelect.selection.indexOf(this.entity);
        if (i == -1)
            return;
        components.ChainSelect.selection.splice(i, 1);
    },
    unselectAll: function() {
        this.selected = false;
        components.ChainSelect.selection = null;
        this.entity.unselect();
    },
    onMouseDown: function() {
        if (!this.enabled)
            return;
        CALL("unselectAll");
        components.ChainSelect.isSelecting = true;
        this.entity.select();
    },
    onMouseOver: function(event) {
        if (!this.enabled)
            return;
        event = event || this.entity.MouseInput.event;
        var isDragging = event.button > 0 || event.leftButton.isDown || (!event.isMouse && event.isDown);
        if (!isDragging) {
            if (!components.ChainSelect.isSelecting)
                this.onMouseUp();
            return;
        }
        components.ChainSelect.selection = components.ChainSelect.selection || [];
        if (components.ChainSelect.selection.length) {
            var last = components.ChainSelect.selection[components.ChainSelect.selection.length - 1];
            var a = last.sprite;
            var b = this.entity.sprite;
            var dx = a.x - b.x;
            var dy = a.y - b.y;
            var r = Math.min(a.width / 2, a.height / 2) + Math.min(b.width / 2, b.height / 2);
            if (dx * dx + dy * dy > r * r)
                return;
        }
        if (this.selected && this.stackMode && components.ChainSelect.selection.length > 1 && components.ChainSelect.selection[components.ChainSelect.selection.length - 2] == this.entity) {
            components.ChainSelect.selection[components.ChainSelect.selection.length - 1].unselect();
            return;
        }
        this.entity.select();
    },
    onMouseUp: function() {
        if (!components.ChainSelect.isSelecting || !components.ChainSelect.selection || !components.ChainSelect.selection.length)
            return;
        components.ChainSelect.isSelecting = false;
        CALL("onChainSelect", components.ChainSelect.selection);
        CALL("unselectAll");
    }
});
;
/* ../components/Spriter.js */
CLAZZ("components.Spriter", {
    EXTENDS: "components.Component",
    scon: null,
    skeletonEntity: "",
    showing: null,
    sprites: null,
    time: 0,
    _prevAnim: null,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        this.sprites = this.sprites || {};
        this.showing = {};
    },
    setupSkeleton: function(assetName) {
        var asset = SOL.assets[assetName];
        this.scon = new spriter_scon.Scon(asset.entity, asset.folder);
    },
    onPostTick: function() {
        var scon = this.scon;
        var folder = scon.folder;
        var entityId = scon.getEntityId(this.skeletonEntity);
        var animId = scon.getAnimationId(entityId, this.animation);
        var entity = this.entity;
        var prevshow = this.showing;
        var showing = {};
        var sprites = this.sprites;
        if (this.animation != this._prevAnim)
            this.time = 0;
        else
            this.time += this.entity.screen.game.time.physicsElapsedMS;
        this._prevAnim = this.animation;
        scon.setCurrentTime(this.time, {}, entityId, animId || 0, function(obj) {
            var meta = folder[obj.folder].file[obj.file];
            var sprite = sprites[meta.name];
            if (!sprite)
                return;
            sprite.visible = true;
            if ("pivot_x" in meta)
                sprite.anchor.x = meta.pivot_x;
            if ("pivot_y" in meta)
                sprite.anchor.y = 1 - meta.pivot_y;
            if ("scale_x" in obj)
                sprite.scale.x = obj.scale_x;
            if ("scale_y" in obj)
                sprite.scale.y = -obj.scale_y;
            if ("x" in obj)
                sprite.x = obj.x;
            if ("y" in obj)
                sprite.y = obj.y;
            if ("angle" in obj)
                sprite.rotation = obj.angle / 180 * Math.PI;
            sprite.bringToTop();
            showing[meta.name] = true;
        });
        for (var k in sprites) {
            sprites[k].visible = showing[k] == true;
        }
    }
});
;
/* ../components/Depth.js */
CLAZZ("components.Depth", {
    EXTENDS: "components.Component",
    z: 1,
    STATIC: {
        cameraX: 0,
        cameraY: 0,
        cameraZ: 0,
        near: 0,
        far: undefined,
        sorter: {
            screen: null,
            list: null,
            zsort: function(limit) {
                if (!this.list)
                    return;
                var swapped = true;
                for (var j = 0; swapped && (!limit || j < limit); j++) {
                    swapped = false;
                    for (var i = 1; i < this.list.length; ++i) {
                        if (this.list[i].z < this.list[i - 1].z) {
                            swapped = true;
                            var tmp = this.list[i];
                            this.list[i] = this.list[i - 1];
                            this.list[i - 1] = tmp;
                            var s1 = this.list[i].entity.sprite;
                            var s2 = this.list[i - 1].entity.sprite;
                            s1.parent.swapChildren(s1, s2);
                        }
                    }
                }
            },
            postTick: function() {
                this.zsort(1);
            }
        }
    },
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (components.Depth.sorter.screen != this.entity.screen) {
            components.Depth.sorter.screen = this.entity.screen;
            components.Depth.sorter.list = [];
            this.entity.screen.__pool.add(components.Depth.sorter);
        }
    },
    onPostTick: function() {
        if (components.Depth.far === undefined)
            components.Depth.far = Math.sqrt(this.entity.screen.gameWidth);
        var x = this.entity.x - components.Depth.cameraX;
        var y = this.entity.y - components.Depth.cameraY;
        var z = this.z - components.Depth.cameraZ;
        z = (z - components.Depth.near) / (components.Depth.far - components.Depth.near);
        var m = this.entity.screen.gameWidth * 0.5;
        this.entity.sprite.x = m + x / z;
        this.entity.sprite.y = this.entity.screen.gameHeight * 0.5 + y / z;
        if (this.entity.scale)
            this.entity.sprite.scale.setTo(this.entity.scale / z);
        else {
            if (this.entity.scaleX)
                this.entity.sprite.scale.x = this.entity.scaleX / z;
            if (this.entity.scaleY)
                this.entity.sprite.scale.y = this.entity.scaleY / z;
        }
    }
});
;
/* ../components/Grid.js */
CLAZZ("components.Grid", {
    EXTENDS: "components.Component",
    enabled: true,
    STATIC: {
        spares: {}
    },
    sprite: null,
    map: null,
    matrix: null,
    tileW: 32,
    tileH: 32,
    getMatrix: function() {
        if (!this.matrix)
            this.matrix = {};
        return this.matrix;
    },
    cachedWidth: -1,
    cachedHeight: -1,
    getWidth: function() {
        if (this.cachedWidth != -1)
            return this.cachedWidth;
        var i,
            j;
        var mat = this.matrix;
        var max = undefined;
        for (i in mat) {
            var mati = mat[i];
            for (j in mati) {
                if (max == undefined || j | 0 > max)
                    max = j | 0;
            }
        }
        return this.cachedWidth = max;
    },
    getHeight: function() {
        if (this.cachedHeight != -1)
            return this.cachedHeight;
        var i,
            j;
        var mat = this.matrix;
        var max = undefined;
        for (i in mat) {
            if (max == undefined || (i | 0) > max)
                max = i | 0;
        }
        return this.cachedHeight = max;
    },
    clearMatrix: function() {
        var mat = this.matrix;
        for (var i in mat) {
            var mati = mat[i];
            for (var j in mati) {
                if (mati[j])
                    this.removeTile(j, i);
            }
        }
    },
    loadMatrix: function(src) {
        for (var i in src) {
            var srci = src[i];
            for (var j in srci) {
                this.addTile(j, i, srci[j]);
            }
        }
    },
    removeTile: function(x, y) {
        if (!this.matrix[y])
            return;
        var tile = this.matrix[y][x];
        if (!tile)
            return;
        this.sprite.remove(tile.sprite);
        tile.deleted = true;
        if (!tile.entity)
            components.Grid.spares[tile.name] = tile.sprite;
        delete this.matrix[y][x];
    },
    onTick: function() {
        if (!this.sprite || !this.sprite.visible)
            return;
        var tileH = this.tileH,
            tileW = this.tileW;
        var pass = ++this.pass;
        var sx = this.entity.screen.game.camera.x - this.sprite.x - tileW * 0.5;
        var sy = this.entity.screen.game.camera.y - this.sprite.y - tileH * 0.5;
        var w = sx + this.entity.screen.gameWidth + tileW;
        var h = sy + this.entity.screen.gameHeight + tileH;
        var mat = this.matrix;
        for (var y = sy; y <= h; y += tileH) {
            var maty = mat[Math.round(y / tileH)];
            if (!maty)
                continue;
            for (var x = sx; x <= w; x += tileW) {
                var tile = maty[Math.floor(x / tileW)];
                if (!tile || tile.entity)
                    continue;
                tile.pass = pass;
                if (tile.index == -1)
                    this.__showTile(tile);
            }
        }
        if (!this.visibleTiles)
            return;
        var i = 0;
        while (tile = this.visibleTiles[i]) {
            if (tile.pass != pass)
                this.__hideTile(tile);
            else
                i++;
        }
    },
    pass: 0,
    visibleTiles: null,
    __showTile: function(tile) {
        if (tile.entity)
            return;
        var spares = components.Grid.spares;
        if (!tile.sprite) {
            if (!spares[tile.name] || !spares[tile.name].length)
                tile.sprite = this.entity.loadSprite((this.map && this.map[tile.name]) || tile.name);
            else
                tile.sprite = spares[tile.name].pop();
            tile.sprite.anchor.setTo(0.5);
        }
        if (tile.sprite.parent != this.sprite)
            this.sprite.add(tile.sprite);
        if (!this.visibleTiles)
            this.visibleTiles = [tile];
        else
            this.visibleTiles.push(tile);
        tile.index = this.visibleTiles.length - 1;
        if (tile.tint != undefined)
            tile.sprite.tint = tile.tint;
        tile.sprite.x = tile.x;
        tile.sprite.y = tile.y;
    },
    __hideTile: function(tile) {
        if (tile.entity)
            return;
        if (tile.index != -1) {
            var lastTile = this.visibleTiles.pop();
            if (lastTile != tile) {
                this.visibleTiles[tile.index] = lastTile;
                lastTile.index = tile.index;
            }
            tile.index = -1;
        }
        if (tile.sprite) {
            var spares = components.Grid.spares;
            if (!spares[tile.name])
                spares[tile.name] = [tile.sprite];
            else
                spares[tile.name].push(tile.sprite);
            if (tile.sprite.parent == this.sprite)
                this.sprite.remove(tile.sprite);
            tile.sprite = null;
        }
    },
    addTile: function(x, y, name, tint) {
        if (name === undefined)
            return;
        if (!this.matrix)
            this.matrix = {};
        if (!this.matrix[y])
            this.matrix[y] = {};
        if (!this.sprite)
            this.sprite = this.entity.screen.game.add.group();
        var tileH5 = this.tileH * 0.5,
            tileW5 = this.tileW * 0.5;
        var sx = x * this.tileW + tileW5;
        var sy = y * this.tileH + tileH5;
        var mapping = this.map && this.map[name] || name;
        var tile = {
            name: name,
            sprite: null,
            entity: null,
            x: sx,
            y: sy,
            top: sy - tileH5,
            bottom: sy + tileH5,
            left: sx - tileW5,
            right: sx + tileH5,
            index: -1,
            pass: -1,
            tint: tint
        };
        var clazz = this.entity.screen.getClass(mapping);
        var entity = null;
        if (clazz) {
            tile.entity = this.entity.screen.addEntity({
                "class": mapping,
                tile: tile,
                x: sx,
                y: sy,
                tileX: x,
                tileY: y
            });
            tile.sprite = tile.entity.sprite;
            this.sprite.add(tile.sprite);
        }
        this.matrix[y][x] = tile;
        return tile;
    }
});
;
/* ../components/AutoFlip.js */
CLAZZ("components.AutoFlip", {
    EXTENDS: "components.Component",
    enabled: true,
    defaultRight: false,
    px: undefined,
    onTick: function() {
        if (!this.enabled)
            return;
        if (this.px !== undefined) {
            var dx = this.entity.sprite.x - this.px;
            if (dx == 0)
                return;
            var scale = dx > 0 ? -1 : 1;
            if (this.defaultRight)
                scale *= -1;
            if (Math.sign(this.entity.sprite.scale.x) != Math.sign(scale)) {
                if (this.entity.onFlipEntity)
                    this.entity.onFlipEntity();
                this.entity.sprite.scale.x *= -1;
            }
        }
        this.px = this.entity.sprite.x;
    }
});
;
/* ../components/FlyAI.js */
CLAZZ("components.FlyAI", {
    EXTENDS: "components.Component",
    enabled: true,
    friction: 0.02,
    vx: undefined,
    vy: undefined,
    tx: undefined,
    ty: undefined,
    minX: undefined,
    minY: undefined,
    maxX: undefined,
    maxY: undefined,
    updateEntity: true,
    speed: 0.1,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (this.entity.sprite) {
            this.tx = this.entity.sprite.x;
            this.ty = this.entity.sprite.y;
        }
        SOL.screen.__pool.silence("onHitTargetPos");
        if (this.tx === undefined)
            this.tx = Math.random() * this.entity.screen.gameWidth * 0.8 + this.entity.screen.gameWidth * 0.1;
        if (this.ty === undefined)
            this.ty = Math.random() * this.entity.screen.gameHeight * 0.8 + this.entity.screen.gameHeight * 0.1;
        if (this.vx === undefined)
            this.vx = Math.random() * 10 - 5;
        if (this.vy === undefined)
            this.vy = Math.random() * 10 - 5;
    },
    onTick: function() {
        if (!this.enabled)
            return;
        var x;
        var y;
        if (this.updateEntity) {
            x = this.entity.x;
            y = this.entity.y;
        } else {
            x = this.entity.sprite.x;
            y = this.entity.sprite.y;
        }
        if (Math.abs(x - this.tx) < 10) {
            CALL("onHitTargetPos");
            if (this.minX !== undefined && this.maxX !== undefined)
                this.tx = Math.random() * (this.maxX - this.minX) + this.minX;
            else
                this.tx = Math.random() * this.entity.screen.gameWidth * 0.8 + this.entity.screen.gameWidth * 0.1;
        }
        if (Math.abs(y - this.ty) < 10) {
            CALL("onHitTargetPos");
            if (this.minY !== undefined && this.maxY !== undefined)
                this.ty = Math.random() * (this.maxY - this.minY) + this.minY;
            else
                this.ty = Math.random() * this.entity.screen.gameHeight * 0.6 + this.entity.screen.gameHeight * 0.2;
        }
        this.vx += (this.tx - x) / Math.abs(this.tx - x) * this.speed;
        this.vy += (this.ty - y) / Math.abs(this.ty - y) * this.speed;
        this.vx *= 1 - this.friction;
        this.vy *= 1 - this.friction;
        if (x >= this.maxX && this.vx > 0) {
            this.vx *= -1;
            x = this.maxX;
            if (this.tx > this.maxX)
                this.tx = x;
        }
        if (y >= this.maxY && this.vy > 0) {
            this.vy *= -1;
            y = this.maxY;
            if (this.ty > this.maxY)
                this.ty = y;
        }
        if (x <= this.minX && this.vx < 0) {
            this.vx *= -1;
            x = this.minX;
            if (this.tx < this.minX)
                this.tx = x;
        }
        if (y <= this.minY && this.vy < 0) {
            this.vy *= -1;
            y = this.minY;
            if (this.ty < this.minY)
                this.ty = y;
        }
        x += this.vx;
        y += this.vy;
        this.entity.sprite.x = x;
        this.entity.sprite.y = y;
        if (this.updateEntity) {
            this.entity.x = x;
            this.entity.y = y;
        }
    }
});
;
/* ../components/FlyOverBG.js */
(function() {
    var canvas,
        gl,
        cubePositionBuffer,
        cubeUvBuffer,
        cubeElementsBuffers,
        cubeTexture,
        shaderProgram,
        cubePositionAttribute,
        cubeUvAttribute,
        projectionUniformLocation,
        viewUniformLocation,
        tick;
    var cubePosition = [-0.5, +0.5, +0.5, +0.5, +0.5, +0.5, +0.5, -0.5, +0.5, -0.5, -0.5, +0.5, +0.5, +0.5, +0.5, +0.5, +0.5, -0.5, +0.5, -0.5, -0.5, +0.5, -0.5, +0.5, +0.5, +0.5, -0.5, -0.5, +0.5, -0.5, -0.5, -0.5, -0.5, +0.5, -0.5, -0.5, -0.5, +0.5, -0.5, -0.5, +0.5, +0.5, -0.5, -0.5, +0.5, -0.5, -0.5, -0.5, -0.5, +0.5, -0.5, +0.5, +0.5, -0.5, +0.5, +0.5, +0.5, -0.5, +0.5, +0.5, -0.5, -0.5, -0.5, +0.5, -0.5, -0.5, +0.5, -0.5, +0.5, -0.5, -0.5, +0.5];
    var cubeUv = [0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0];
    var cubeElements = [2, 1, 0, 2, 0, 3, 6, 5, 4, 6, 4, 7, 10, 9, 8, 10, 8, 11, 14, 13, 12, 14, 12, 15, 18, 17, 16, 18, 16, 19, 20, 21, 22, 23, 20, 22];
    var frg = ['precision mediump float;', 'varying vec2 vUv;', 'uniform sampler2D tex;', 'void main () {', 'gl_FragColor = texture2D(tex,vUv);', '}'];
    var vtx = ['precision mediump float;', 'attribute vec3 position;', 'attribute vec2 uv;', 'varying vec2 vUv;', 'uniform mat4 projection, view;', 'void main() {', 'vUv = uv;', 'gl_Position = projection * view * vec4(position, 1);', '}'];
    var perspectiveMatrix;
    function perspective(fovy, aspect, near, far) {
        var f = 1.0 / Math.tan(fovy / 2)
        var nf = 1 / (near - far)
        if (perspectiveMatrix)
            perspectiveMatrix.fill(0);
        else
            perspectiveMatrix = new Float32Array(16);
        perspectiveMatrix[0] = f / aspect;
        perspectiveMatrix[5] = f;
        perspectiveMatrix[10] = (far + near) * nf;
        perspectiveMatrix[11] = -1.0;
        perspectiveMatrix[14] = (2 * far * near) * nf;
        return perspectiveMatrix;
    }
    function start(canvas) {
        tick = 0;
        try {
            gl = canvas.getContext('experimental-webgl')
        } catch (e) {}
        if (!gl)
            return;
        gl.clearColor(0.0, 0.0, 0.0, 1.0);
        gl.enable(gl.DEPTH_TEST);
        gl.enable(gl.CULL_FACE);
        initShaders();
        initBuffers();
        initTextures();
    }
    function initBuffers() {
        cubePositionBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, cubePositionBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(cubePosition), gl.STATIC_DRAW);
        cubeUvBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, cubeUvBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(cubeUv), gl.STATIC_DRAW)
        cubeElementsBuffers = gl.createBuffer()
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeElementsBuffers)
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(cubeElements), gl.STATIC_DRAW)
    }
    function initTextures() {
        cubeTexture = gl.createTexture();
        var cubeImage = new Image();
        cubeImage.onload = function() {
            gl.bindTexture(gl.TEXTURE_2D, cubeTexture);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, cubeImage);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        }
        cubeImage.src = 'rocket-imgs/7.png';
    }
    function drawScene() {
        if (tick === undefined)
            start(canvas);
        tick++
        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
        gl.bindBuffer(gl.ARRAY_BUFFER, cubePositionBuffer);
        gl.vertexAttribPointer(cubePositionAttribute, 3, gl.FLOAT, false, 0, 0);
        gl.bindBuffer(gl.ARRAY_BUFFER, cubeUvBuffer);
        gl.vertexAttribPointer(cubeUvAttribute, 2, gl.FLOAT, false, 0, 0);
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeElementsBuffers);
        gl.activeTexture(gl.TEXTURE0);
        gl.bindTexture(gl.TEXTURE_2D, cubeTexture);
        gl.uniform1i(gl.getUniformLocation(shaderProgram, 'tex'), 0);
        var t = 0.01 * tick;
        gl.uniformMatrix4fv(projectionUniformLocation, false, perspective(45, canvas.width / canvas.height, 0.1, 100.0));
        for (var i = 0; i < 20; ++i) {
            gl.uniformMatrix4fv(viewUniformLocation, false, lookAt([5 * Math.cos(t + i * 0.1), 2.5 * Math.sin(t + i * 0.12), 5 * Math.sin(t + i * 0.2)], [Math.sin(i * 0.01), Math.cos(i * 0.12), 3 * Math.cos(i * 12.12121)], [0, 1, 0]));
            gl.drawElements(gl.TRIANGLES, 36, gl.UNSIGNED_SHORT, 0);
        }
    }
    function initShaders() {
        var fragmentShader = getShader(gl, frg.join('\n'), gl.FRAGMENT_SHADER);
        var vertexShader = getShader(gl, vtx.join('\n'), gl.VERTEX_SHADER);
        shaderProgram = gl.createProgram();
        gl.attachShader(shaderProgram, vertexShader);
        gl.attachShader(shaderProgram, fragmentShader);
        gl.linkProgram(shaderProgram);
        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
            alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram))
        }
        gl.useProgram(shaderProgram);
        cubePositionAttribute = gl.getAttribLocation(shaderProgram, 'position');
        gl.enableVertexAttribArray(cubePositionAttribute);
        cubeUvAttribute = gl.getAttribLocation(shaderProgram, 'uv');
        gl.enableVertexAttribArray(cubeUvAttribute);
        projectionUniformLocation = gl.getUniformLocation(shaderProgram, 'projection');
        viewUniformLocation = gl.getUniformLocation(shaderProgram, 'view');
    }
    function getShader(gl, sourceCode, type) {
        var shader;
        shader = gl.createShader(type);
        gl.shaderSource(shader, sourceCode)
        gl.compileShader(shader);
        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
            alert('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));
            return null;
        }
        return shader;
    }
    var lookAtMatrix;
    function lookAt(eye, center, up) {
        var x0,
            x1,
            x2,
            y0,
            y1,
            y2,
            z0,
            z1,
            z2,
            len
        var eyex = eye[0];
        var eyey = eye[1];
        var eyez = eye[2];
        var upx = up[0];
        var upy = up[1];
        var upz = up[2];
        var centerx = center[0];
        var centery = center[1];
        var centerz = center[2];
        z0 = eyex - centerx;
        z1 = eyey - centery;
        z2 = eyez - centerz;
        len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);
        z0 *= len;
        z1 *= len;
        z2 *= len;
        x0 = upy * z2 - upz * z1;
        x1 = upz * z0 - upx * z2;
        x2 = upx * z1 - upy * z0;
        len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);
        if (!len) {
            x0 = 0;
            x1 = 0;
            x2 = 0;
        } else {
            len = 1 / len;
            x0 *= len;
            x1 *= len;
            x2 *= len;
        }
        y0 = z1 * x2 - z2 * x1;
        y1 = z2 * x0 - z0 * x2;
        y2 = z0 * x1 - z1 * x0;
        len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);
        if (!len) {
            y0 = 0;
            y1 = 0;
            y2 = 0;
        } else {
            len = 1 / len;
            y0 *= len;
            y1 *= len;
            y2 *= len;
        }
        if (!lookAtMatrix)
            lookAtMatrix = new Float32Array(16);
        var m = lookAtMatrix;
        m[0] = x0;
        m[1] = y0;
        m[2] = z0;
        m[3] = 0;
        m[4] = x1;
        m[5] = y1;
        m[6] = z1;
        m[7] = 0;
        m[8] = x2;
        m[9] = y2;
        m[10] = z2;
        m[11] = 0;
        m[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
        m[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
        m[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
        m[15] = 1;
        return m;
    }
    CLAZZ("components.FlyOverBG", {
        EXTENDS: "components.Component",
        enabled: false,
        CONSTRUCTOR: function(data) {
            SUPER(data);
            if (!this.enabled || this.entity.visible)
                return;
            canvas = MAR.create("canvas", {
                style: {
                    position: "absolute",
                    zIndex: -1
                }
            }, this.entity.screen.game.canvas.parentElement);
        },
        destroy: function() {
            MAR.remove(canvas);
            canvas = null;
            gl = null;
        },
        oldWidth: -1,
        oldHeight: -1,
        oldLeft: -1,
        oldTop: -1,
        onTick: function(delta) {
            if (!canvas)
                return;
            var gameCanvas = this.entity.screen.game.canvas;
            var width = gameCanvas.clientWidth,
                height = gameCanvas.clientHeight;
            if (width !== this.oldWidth || height != this.oldHeight) {
                canvas.width = this.oldWidth = width;
                canvas.height = this.oldHeight = height;
            }
            var left = gameCanvas.offsetLeft,
                top = gameCanvas.offsetTop;
            if (left != this.oldLeft || top != this.oldTop) {
                canvas.style.top = (this.oldTop = gameCanvas.offsetTop) + "px";
                canvas.style.left = (this.oldLeft = gameCanvas.offsetLeft) + "px";
            }
            drawScene(delta);
        }
    });
})();
;
/* ../components/SheepAI.js */
CLAZZ("components.SheepAI", {
    EXTENDS: "components.Component",
    target: null,
    initialDragPosX: null,
    initialDragPosY: null,
    initialPosX: null,
    initialPosY: null,
    state: null,
    dropHeight: 80,
    selected: true,
    hnd: null,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        this.FlyAI = this.entity.FlyAI;
        this.target = {};
        if (!this.entity.screen.editor) {
            this.selected = false;
            this.entity.state = Math.random() < 0.5 ? "walking" : "idle";
            this.entity.sprite.events.onInputDown.add(this.onInputDown.bind(this));
            this.entity.sprite.events.onInputUp.add(this.onInputUp.bind(this));
        }
        if (this.entity.isCorrect)
            this.entity.screen.correctSheeps++
    },
    onHitTargetPos: function() {
        this.entity.state = "idle";
    },
    walkingBegin: function() {
        this.clearFlyAIData();
        this.FlyAI.enabled = true;
    },
    clearFlyAIData: function() {
        this.FlyAI.speed = 0.1;
        this.FlyAI.vx = 0;
        this.FlyAI.vy = 0;
    },
    walkingEnd: function() {
        this.FlyAI.enabled = false;
    },
    onInputDown: function() {
        this.entity.state = "drag";
    },
    onInputUp: function() {
        this.entity.state = "fly";
        this.target.y = this.entity.screen.game.input.y + this.dropHeight;
    },
    idleBegin: function() {
        this.clearFlyAIData();
        this.FlyAI.enabled = false;
        this.hnd = this.entity.screen.setTimeout(this.keepWalking.bind(this), 1000 + 10000 * Math.random());
    },
    wrongAnswerBegin: function() {
        this.clearFlyAIData();
    },
    onRightSheep: function() {
        this.selected = true;
        this.entity.state = "happy";
        this.FlyAI.enabled = false;
        this.hnd = this.entity.screen.setTimeout(this.keepWalking.bind(this), 1000 + 10000 * Math.random());
    },
    onWrongSheep: function() {
        this.entity.state = "wrongAnswer";
    },
    idleEnd: function() {
        this.entity.screen.clearTimeout(this.hnd);
        this.hnd = null;
    },
    flyEnd: function() {
        var posColor = this.entity.getRGBAColor(Math.floor(this.entity.sprite.x), Math.floor(this.entity.sprite.y));
        if (posColor[1] == 255) {
            if (this.entity.isCorrect)
                this.onRightSheep();
            else
                this.onWrongSheep();
        } else
            this.entity.backToInitialPosition();
    },
    keepWalking: function() {
        if (this.entity.state == "idle")
            this.findNewTarget();
    },
    fly: function() {
        if (Math.abs(this.target.y - this.entity.sprite.position.y) < 15)
            this.entity.state = "idle";
        var BP = this.entity.BallisticPhysics;
        if ((this.entity.sprite.x > this.entity.screen.gameWidth && BP.velX > 0) || (this.entity.sprite.x < 0 && BP.velX < 0)) {
            BP.velX /= -2;
        }
        if (this.entity.sprite.y > this.entity.screen.gameHeight)
            this.entity.backToInitialPosition();
    },
    findNewTarget: function() {
        var range = 150;
        for (var i = 0; i < 100; i++) {
            range *= Math.random() < 0.5 ? -1 : 1;
            var step = Math.random() * range;
            var testX = Math.floor(range + this.entity.sprite.x);
            var testY = Math.floor(range + this.entity.sprite.y);
            var posColor = this.entity.getRGBAColor(testX, testY);
            if ((!this.initialPosX || !this.initialPosY) && posColor[2] == 255) {
                this.initialPosX = testX;
                this.initialPosY = testY;
            }
            if ((this.selected && posColor[1] == 255) || (!this.selected && posColor[2] == 255)) {
                this.FlyAI.tx = testX;
                this.FlyAI.ty = testY;
                this.entity.state = "walking";
                break;
            }
        }
    },
    walking: function() {
        var posColor = this.entity.getRGBAColor(Math.ceil(this.entity.sprite.x), Math.ceil(this.entity.sprite.y));
        if ((this.selected && posColor[1] != 255) || (!this.selected && posColor[2] != 255)) {
            this.entity.state = "idle";
            this.findNewTarget();
        }
    },
    onTick: function() {
        if (!this.entity.screen.editor)
            this.entity.ZSort.z = -this.entity.sprite.y;
    },
    drag: function() {
        var velX = 1.2 * (this.entity.screen.game.input.x - this.initialDragPosX);
        var velY = 1.5 * (this.entity.screen.game.input.y - this.initialDragPosY);
        this.entity.setVelocity(velX, velY);
        this.initialDragPosX = this.entity.sprite.x = this.entity.screen.game.input.x;
        this.initialDragPosY = this.entity.sprite.y = this.entity.screen.game.input.y;
    }
});
;
/* ../components/ParticleEmitter.js */
CLAZZ("components.ParticleEmitter", {
    EXTENDS: "components.Component",
    CONSTRUCTOR: function(data) {
        SUPER(data);
        var emitter = data.entity.screen.game.add.emitter(data.entity.screen.game.world.centerX, 200, 200);
        emitter.width = 800;
        emitter.particleClass = MonsterParticle;
        emitter.makeParticles();
        emitter.minParticleSpeed.set(0, 300);
        emitter.maxParticleSpeed.set(0, 400);
        emitter.setRotation(0, 0);
        emitter.setScale(0.1, 1, 0.1, 1, 12000, Phaser.Easing.Quintic.Out);
        emitter.gravity = -200;
        emitter.start(false, 5000, 100);
    }
});
;
/* ../components/AutoScale.js */
CLAZZ("components.AutoScale", {
    EXTENDS: "components.Component",
    speed: 0.3,
    target: 1,
    minDelta: 0.01,
    enabled: true,
    callback: "doneScaling",
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (this.callback == "doneScaling" && !this.entity.doneScaling)
            this.callback = null;
    },
    onTick: function() {
        if (!this.enabled)
            return;
        this.entity.sprite.scale.x -= (this.entity.sprite.scale.x - this.target) * this.speed;
        this.entity.sprite.scale.y = this.entity.sprite.scale.x;
        if (Math.abs(this.entity.sprite.scale.x - this.target) < this.minDelta)
        {
            this.enabled = false;
            this.entity.sprite.scale.x = this.entity.sprite.scale.y = this.target;
            if (this.callback)
                SOL.exec(this.callback, this.entity);
        }
    },
    setAutoScaleEnabled: function(enabled) {
        this.enabled = enabled || false;
    },
    setAutoScaleTarget: function(target, callback) {
        if (callback !== undefined)
            this.callback = callback;
        this.target = target;
        this.enabled = true;
    }
});
;
/* ../components/Tween.js */
CLAZZ("components.Tween", {
    EXTENDS: "components.Component",
    speed: 0.3,
    target: 1,
    minDelta: 0.01,
    enabled: true,
    property: "alpha",
    callback: "doneTweening",
    useResolve: false,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (this.callback == "doneTweening" && !this.entity.doneTweening)
            this.callback = null;
    },
    onTick: function() {
        if (!this.enabled || !this.entity.sprite)
            return;
        var value;
        if (this.useResolve) {
            var hnd = MAR.resolve(this.property, this.entity, null, true);
            value = hnd.value - this.target;
            if (Math.abs(value) < this.minDelta) {
                hnd.obj[hnd.key] = this.target;
                value = 0;
            }
            else
                hnd.obj[hnd.key] -= value * this.speed;
        } else {
            value = this.entity.sprite[this.property] - this.target;
            if (Math.abs(value) < this.minDelta) {
                this.entity.sprite[this.property] = this.target;
                value = 0;
            }
            else
                this.entity.sprite[this.property] -= (value) * this.speed;
        }
        if (value == 0) {
            this.enabled = false;
            if (this.callback)
                SOL.exec(this.callback, this.entity);
        }
    },
    setTweenEnabled: function(enabled) {
        this.enabled = enabled || false;
    },
    setTweenTarget: function(target, callback) {
        if (callback !== undefined)
            this.callback = callback;
        this.target = target || 0;
        this.enabled = true;
    }
});
;
/* ../components/Sync.js */
CLAZZ("components.Sync", {
    EXTENDS: "components.Component",
    enabled: true,
    read: null,
    write: null,
    properties: null,
    factors: null,
    useResolve: false,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (!this.read)
            this.read = this.entity;
        if (!this.write)
            this.write = [this.entity.sprite];
        if (!this.properties)
            this.properties = {
                x: 0,
                y: 0
            };
        if (!this.factors)
            this.factors = {};
    },
    onPostTick: function() {
        var read = this.read,
            write = this.write,
            props = this.properties;
        if (!this.enabled || !read || !write || !props)
            return;
        if (typeof read == "string") {
            read = MAR.resolve(this.read, this.entity.screen.entities);
            if (!read)
                return;
        }
        var factors = this.factors;
        if (!(write instanceof Array))
            write = [write];
        if (!this.useResolve) {
            for (var i = 0, out; out = write[i]; ++i) {
                if (typeof out == "string") {
                    out = this.entity.screen.entities[out];
                    if (!out)
                        continue;
                }
                for (var k in props)
                    out[k] = read[k] * (factors[k] || 1) + props[k];
            }
        } else {
            for (var i = 0, out; out = write[i]; ++i) {
                if (typeof out == "string") {
                    out = this.entity.screen.entities[out];
                    if (!out)
                        continue;
                }
                for (var k in props)
                    MAR.resolve(k, out, MAR.resolve(k, read) * (factors[k] || 1) + props[k]);
            }
        }
    }
});
;
/* ../components/FollowTo.js */
CLAZZ("components.FollowTo", {
    EXTENDS: "components.Component",
    follow: 0,
    enabled: true,
    offsetX: 0,
    offsetY: 0,
    onTick: function() {
        if (!this.enabled || !this.follow)
            return;
        if (typeof this.follow == "string")
            this.follow = this.entity.screen.entities[this.follow];
        if (!this.follow || !this.follow.sprite)
            return;
        this.entity.sprite.x = this.follow.sprite.x + this.offsetX;
        this.entity.sprite.y = this.follow.sprite.y + this.offsetY;
    }
});
;
/* ../components/Say.js */
CLAZZ("components.Say", {
    EXTENDS: "components.Component",
    dictionary: null,
    speechCache: null,
    voice: null,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (typeof this.dictionary == "string")
            this.dictionary = MAR.resolve(this.dictionary);
        if (!SOL.vars.voices)
            SOL.vars.voices = window.speechSynthesis.getVoices();
    },
    say: function(txt) {
        txt = this.dictionary[txt] || txt || "...";
        var args = Array.prototype.slice.call(arguments);
        (txt.match(/%[0-9]+/g) || []).forEach(function(m) {
            txt = txt.split(m).join(args[m.substr(1)]);
        });
        CALL("CC", txt);
        if (!window.SpeechSynthesisUtterance)
            return false;
        if (!SOL.vars.voices || !SOL.vars.voices.length)
            SOL.vars.voices = window.speechSynthesis.getVoices();
        if (!SOL.vars.voices || !SOL.vars.voices.length)
            return false;
        this.speechCache = this.speechCache || {};
        var msg = this.speechCache['x'] || (this.speechCache['x'] = new SpeechSynthesisUtterance(txt));
        msg.text = txt;
        if (typeof this.voice == "string") {
            for (var a = 0, voice; a < SOL.vars.voices.length; ++a) {
                if (typeof SOL.vars.voices.item == "function")
                    voice = SOL.vars.voices.item(a);
                else
                    voice = SOL.vars.voices[a];
                if (!voice)
                    continue;
                if (voice.lang.indexOf(this.voice) != -1 || voice.name.indexOf(this.voice) != -1) {
                    this.voice = voice;
                    break;
                }
            }
        }
        msg.lang = "pt";
        if (this.voice)
            msg.voice = this.voice;
        window.speechSynthesis.speak(msg);
    }
});
;
/* ../components/ImagePicker.js */
CLAZZ("components.ImagePicker", {
    EXTENDS: "components.Component",
    STATIC: {
        bitmapData: null
    },
    gameWidth: null,
    CONSTRUCTOR: function(data) {
        SUPER(data);
    },
    create: function() {
        var interactiveAreas = [];
        CALL("pollInteractiveArea", interactiveAreas);
        this.gameWidth = this.entity.screen.gameWidth;
        if (components.ImagePicker.bitmapData)
            return;
        height = this.entity.screen.gameHeight;
        var bmd = game.make.bitmapData(this.gameWidth, height);
        for (var i = 0, l = interactiveAreas.length; i < l; ++i) {
            var sprite = interactiveAreas[i].sprite;
            bmd.draw(sprite, sprite.x, sprite.y);
        }
        components.ImagePicker.bitmapData = bmd.getPixels(new Phaser.Rectangle(0, 0, this.gameWidth, height)).data;
    },
    getRGBAColor: function(x, y) {
        var rgb = [];
        for (var i = 0; i < 4; i++) {
            rgb.push(components.ImagePicker.bitmapData[((y * this.gameWidth) + x) * 4 + i])
        }
        return rgb;
    }
});
;
/* ../components/ScreenDrag.js */
CLAZZ("components.ScreenDrag", {
    EXTENDS: "components.Component",
    camera: null,
    pointer: null,
    dragging: false,
    prevX: 0,
    prevY: 0,
    deltaX: 0,
    deltaY: 0,
    friction: 0.96,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        this.camera = this.entity.screen.game.camera;
        this.pointer = this.entity.screen.game.input.mousePointer;
    },
    onMouseDown: function() {
        this.dragging = true;
        this.prevX = this.pointer.clientX;
        this.prevY = this.pointer.clientY;
    },
    onPostTick: function() {
        if (!this.dragging) {
            this.deltaX *= this.friction;
            this.deltaY *= this.friction;
            this.camera.x += this.deltaX;
            this.camera.y += this.deltaY;
            return;
        }
        if (!this.pointer.leftButton.isDown) {
            this.dragging = false;
            return;
        }
        this.deltaX = this.prevX - this.pointer.clientX;
        this.deltaY = this.prevY - this.pointer.clientY;
        this.camera.x += this.deltaX;
        this.camera.y += this.deltaY;
        this.prevX = this.pointer.clientX;
        this.prevY = this.pointer.clientY;
    }
});
;
/* ../components/Spin.js */
CLAZZ("components.Spin", {
    EXTENDS: "components.Component",
    iterator: 0,
    speed: 0.0,
    decay: 0.95,
    property: "y",
    enabled: true,
    scale: 1,
    front: null,
    back: null,
    stopSide: 0,
    minSpeed: 0.03,
    state: "stopped",
    CONSTRUCTOR: function(data) {
        SUPER(data);
        this.onTick();
    },
    setSpinSprites: function(front, back) {
        this.front = front;
        this.back = back;
    },
    setSpinState: function(notFlipped) {
        this.state = "stopped";
        this.speed = 0;
        if (notFlipped)
        {
            this.iterator = 0;
            this.scale = 1;
        }
        else
        {
            this.iterator = 1;
            this.scale = -1;
        }
        this.applySpin();
    },
    applySpin: function() {
        if (!this.front && !this.back) {
            this.entity.sprite.scale[this.property] = this.scale * (this.entity.scale || 1);
        } else {
            if (this.front) {
                if (this.front.visible != (this.scale > 0) && this.scale > 0)
                    this.entity.onShowFront();
                this.front.visible = this.scale > 0;
                this.front.scale[this.property] = this.scale;
            }
            if (this.back) {
                if (this.back.visible != (this.scale <= 0) && this.scale <= 0)
                    this.entity.onShowBack();
                this.back.visible = this.scale <= 0;
                this.back.scale[this.property] = -this.scale;
            }
        }
    },
    onShowFront: function() {},
    onShowBack: function() {},
    onTick: function() {
        if (this.state == "stopped" || !this.enabled)
            return;
        if (this.state == "spin")
        {
            this.speed *= this.decay;
            if (this.speed < this.minSpeed)
                this.state = "stop";
        }
        this.iterator += this.speed;
        this.scale = Math.cos(this.iterator * Math.PI);
        if (this.state == "stop")
        {
            if (this.stopSide == 0)
                this.stopSide = Math.abs(this.scale) < 0.1 || -1;
            if (this.stopSide == 1 && this.scale >= 0.8)
                this.setSpinState(true);
            else if (this.stopSide == -1 && this.scale <= -0.8)
                this.setSpinState(false);
        }
        this.applySpin();
        if (this.state == "stopped" && this.entity.onStopSpin)
            this.entity.onStopSpin();
    },
    startSpin: function(stopSide, speed, property) {
        this.property = property || this.property;
        this.stopSide = stopSide || 0;
        this.speed = speed || 0.5;
        this.state = "spin";
    }
});
;
/* ../components/Bounce.js */
CLAZZ("components.Bounce", {
    EXTENDS: "components.Component",
    iterator: Math.PI / 2,
    speed: 0.3,
    property: "y",
    intensity: 0,
    decay: 0.9,
    minIntensity: 0.5,
    sign: 0,
    useResolve: false,
    reference: 0,
    syncXY: false,
    callback: "doneBouncing",
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (this.callback == "doneBouncing" && !this.entity.doneBouncing)
            this.callback = null;
    },
    onTick: function() {
        if (!this.intensity || !this.entity.sprite)
            return;
        this.intensity *= this.decay;
        this.iterator += this.speed;
        if (this.iterator == undefined || isNaN(this.iterator))
            this.iterator = Math.PI / 2;
        var cos = Math.cos(this.iterator * Math.PI);
        if (this.intensity < this.minIntensity && Math.abs(cos) * this.intensity < this.minIntensity) {
            this.intensity = 0;
            this.iterator = undefined;
            if (this.callback)
                SOL.exec(this.callback, this.entity);
        }
        if (this.sign && Math.sign(cos) != this.sign)
            cos *= -1;
        if (typeof this.entity.sprite[this.property] == "object") {
            this.entity.sprite[this.property].x = (this.entity[this.property] || this.reference) + cos * this.intensity;
            this.entity.sprite[this.property].y = (this.entity[this.property] || this.reference) - cos * this.intensity;
        } else if (this.useResolve) {
            var hnd = MAR.resolve(this.property, this.entity, null, true);
            hnd.obj[hnd.key] = (this.entity[this.property] || this.reference) + cos * this.intensity;
        } else {
            this.entity.sprite[this.property] = (this.entity[this.property] || this.reference) + cos * this.intensity;
        }
    },
    bounce: function(amount, callback) {
        if (callback !== undefined)
            this.callback = callback;
        this.intensity += amount || 0;
    }
});
;
/* ../components/GridToBody.js */
CLAZZ("components.GridToBody", {
    EXTENDS: "components.Component",
    enableCollisionCheck: false,
    buildPhysicsBody: function() {
        var PB = this.entity.PhysicsBody;
        var G = this.entity.Grid;
        var mat = G.getMatrix();
        PB.clearBody();
        for (var i in mat) {
            var mati = mat[i];
            for (var j in mati) {
                var tile = mati[j];
                tile.point = PB.addPoint(tile.x, tile.y, tile.mass, tile.drag);
                tile.point.tile = tile;
            }
        }
    },
    gridCollisionCheck: function(x, y, cb) {
        if (!this.enableCollisionCheck)
            return;
        var tx = Math.round((x - this.entity.Grid.sprite.x) / this.entity.Grid.tileW),
            ty = Math.round((y - this.entity.Grid.sprite.y) / this.entity.Grid.tileH);
        var mat = this.entity.Grid.matrix;
        var matty = mat[ty],
            mattytx;
        if (matty && (mattytx = matty[tx]))
            cb(mattytx, this.entity.Grid.sprite.x, this.entity.Grid.sprite.y);
    }
});
;
/* ../components/AssetSwapper.js */
CLAZZ("components.AssetSwapper", {
    EXTENDS: "components.Component",
    enabled: true,
    assets: [],
    sprites: null,
    current: 0,
    timeToNextSwap: 0,
    delay: 0,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        var sprites = [];
        for (var i = 0; i < this.assets.length; ++i) {
            var s = this.entity.loadSprite(this.assets[i]);
            s.visible = false;
            sprites.push(s);
        }
        this.sprites = sprites;
    },
    onTick: function() {
        if (!this.enabled)
            return;
        this.timeToNextSwap -= this.entity.screen.timeDelta;
        if (this.timeToNextSwap > 0)
            return;
        this.timeToNextSwap = this.delay;
        this.current = (this.current + 1) % this.assets.length;
        var olds = this.entity.sprite;
        var s = this.sprites[this.current];
        this.entity.sprite = s;
        s.visible = olds.visible;
        olds.visible = false;
        s.x = olds.x;
        s.y = olds.y;
        s.smoothed = olds.smoothed;
        s.anchor.copyFrom(olds.anchor);
        s.scale.copyFrom(olds.scale);
        s.alpha = olds.alpha;
    }
});
;
/* ../components/CollisionTriggers.js */
CLAZZ("components.CollisionTriggers", {
    EXTENDS: "components.Component",
    enabled: true,
    events: null,
    states: null,
    checkFrames: null,
    bounds: null,
    boundsFrame: null,
    create: function() {
        if (this.entity.screen.editor) {
            this.enabled = false;
            return;
        }
        var GUID = this.entity.SRCGUID || this.entity.GUID;
        var events = {},
            ids,
            hasEvents = false;
        if (this.entity.onCollision) {
            ids = Object.keys(this.entity.onCollision);
            for (var i = 0, l = ids.length; i < l; i++) {
                var id = ids[i];
                if (id == GUID)
                    continue;
                var action = this.entity.onCollision[id];
                if (!action || !action.length)
                    continue;
                hasEvents = true;
                events[id] = {
                    action: SOL.compile(action, this.entity),
                    onend: null
                };
            }
        }
        if (this.entity.onEndCollision) {
            ids = Object.keys(this.entity.onEndCollision);
            for (var i = 0, l = ids.length; i < l; i++) {
                var id = ids[i];
                if (id == GUID)
                    continue;
                var action = this.entity.onEndCollision[id];
                if (!action || !action.length)
                    continue;
                hasEvents = true;
                if (events[id])
                    events[id].onend = SOL.compile(action, this.entity)
                else
                    events[id] = {
                        action: null,
                        onend: SOL.compile(action, this.entity)
                    };
            }
        }
        if (hasEvents) {
            this.events = events;
            this.states = {};
            this.checkFrames = {};
        }
    },
    onTick: function() {
        if (!this.entity.sprite || !this.events)
            return;
        var sprite = this.entity.sprite,
            frameNumber = this.entity.screen.frameNumber;
        var myKey = this.entity.SRCGUID || this.entity.GUID,
            myId = this.entity.GUID,
            myName = this.entity.SRCGUID ? myId : this.entity[this.entity.$word];
        var events = this.events,
            entities = this.entity.screen.entityList,
            states = this.states,
            checkFrames = this.checkFrames;
        var bounds = this.bounds;
        if (!bounds || this.boundsFrame !== frameNumber) {
            sprite.displayObjectUpdateTransform();
            bounds = this.bounds = sprite.getBounds();
            this.boundsFrame = frameNumber;
        }
        for (var i = 0, l = entities.length; i < l; ++i) {
            var e = entities[i];
            var evt = events[e.SRCGUID || e.GUID];
            if (!evt || checkFrames[e.GUID] == frameNumber)
                continue;
            var oevt = e.CollisionTriggers && e.CollisionTriggers.events && e.CollisionTriggers.events[myKey];
            var colliding;
            if (!this.enabled || !e.sprite || (e.CollisionTriggers && !e.CollisionTriggers.enabled)) {
                colliding = false;
            } else {
                var otherBounds = e.CollisionTriggers && e.CollisionTriggers.boundsFrame === frameNumber && e.CollisionTriggers.bounds;
                if (!otherBounds) {
                    e.sprite.displayObjectUpdateTransform();
                    otherBounds = e.sprite.getBounds();
                    if (e.CollisionTriggers) {
                        e.CollisionTriggers.bounds = otherBounds;
                        e.CollisionTriggers.boundsFrame = frameNumber;
                    }
                }
                colliding = Phaser.Rectangle.intersects(otherBounds, bounds);
            }
            var changed = (colliding && !states[e.GUID]) || (!colliding && states[e.GUID]);
            checkFrames[e.GUID] = frameNumber;
            states[e.GUID] = colliding;
            if (oevt) {
                e.CollisionTriggers.checkFrames[myId] = frameNumber;
                e.CollisionTriggers.states[myId] = colliding;
            }
            if (changed) {
                if (colliding) {
                    if (evt.action)
                        evt.action();
                    if (oevt && oevt.action)
                        oevt.action();
                } else if (!colliding) {
                    if (evt.onend)
                        evt.onend();
                    if (oevt && oevt.onend)
                        oevt.onend();
                }
            }
        }
    }
});
;
/* ../components/AutoRotate.js */
CLAZZ("components.AutoRotate", {
    EXTENDS: "components.Component",
    enabled: true,
    px: undefined,
    py: undefined,
    offset: 90,
    onTick: function() {
        if (!this.enabled || !this.entity.sprite)
            return;
        if (this.px !== undefined) {
            var dx = this.entity.sprite.x - this.px;
            var dy = this.entity.sprite.y - this.py;
            if (dx == 0 && dy == 0)
                return;
            var a = Math.atan2(dy, dx) + this.offset / 180 * Math.PI;
            this.entity.sprite.rotation = a;
        }
        this.px = this.entity.sprite.x;
        this.py = this.entity.sprite.y;
    }
});
;
/* ../components/Chopable.js */
CLAZZ("components.Chopable", {
    EXTENDS: "components.Component",
    background: "",
    text: "",
    sprite: null,
    minX: null,
    tx: 0,
    enabled: false,
    isCutting: false,
    bmd: null,
    bmdSprite: null,
    CONSTRUCTOR: function(screen, data) {
        var size = 64;
        SUPER(screen, data);
        var game = this.entity.screen.game;
        var group = this.sprite = game.add.group(),
            bmd,
            map;
        if (typeof this.entity.background == "string")
            map = [];
        else
            map = this.entity.showMap;
        var text = this.entity.text.trim().toUpperCase().replace(/\|+/g, "").split(""),
            x = 30,
            first = Number.MAX_SAFE_INTEGER,
            last = Number.MIN_SAFE_INTEGER;
        for (var i = 0; i < text.length; ++i) {
            var letter = this.entity.screen.game.add.text(x, 0, text[i], {
                font: SOL.defaultFont,
                fontSize: size,
                fontWeight: "bold"
            }, group);
            if (map[i] !== false) {
                this.text += text[i];
                if (i < first)
                    first = i;
                if (i > last)
                    last = i;
                letter.anchor.setTo(0, 0.5);
                if (letter.inputEnabled = !this.entity.screen.editor)
                    letter.input.pixelPerfectAlpha = 1;
            } else {
                letter.visible = false;
            }
            x += letter.width + 20;
        }
        if (typeof this.entity.background == "string") {
            this.enabled = false;
            this.background = this.entity.loadSprite(this.entity.background, {
                doNotInstrument: true
            });
            this.background.parent.removeChild(this.background);
            bmd = game.make.bitmapData(this.background.width, this.background.height);
            bmd.draw(this.background, 0, 0);
            bmd.update();
        } else {
            this.enabled = true;
            bmd = this.entity.background;
        }
        this.bmd = bmd;
        this.bmdSprite = game.add.image(0, -size, bmd);
        group.add(this.bmdSprite);
        group.setChildIndex(this.bmdSprite, 0);
        if (this.entity.screen.editor)
            this.entity.screen.instrumentForEditor(this.bmdSprite, this.entity.__data, this.entity);
        this.minX = new Uint32Array(bmd.height);
        if (!this.entity.screen.editor) {
            game.input.addMoveCallback(this._onMouseOverBG, this);
            game.input.onUp.add(this._onMouseUp, this);
        }
        last /= text.length;
        first /= text.length;
        group.visible = this.enabled;
        if (group.visible)
            CALL("say", this.text);
        this.bmdSprite.x = x * 0.5 - this.bmdSprite.width * 0.5;
        this.bmdSprite.anchor.setTo(0, 0);
        this.entity.sprite = this.sprite = group;
        group.x = this.entity.x;
        group.y = this.entity.screen.gameHeight * 0.5 - size * 0.5;
        this.tx = this.entity.screen.gameWidth * 0.5 - x * 0.5 + (last + first - 1) * 150;
    },
    verifyCuts: function() {
        if (this.enabled == true && !this.sprite.visible)
            CALL("say", this.text);
    },
    getChoppedParts: function(arr) {
        if (!this.sprite.visible)
            return;
        arr.push(this.text);
        return this.entity.text;
    },
    enable: function() {
        this.sprite.visible = this.enabled = true;
        this.sprite.x = -100;
        CALL("say", this.text);
    },
    destroy: function() {
        this.entity.screen.game.input.deleteMoveCallback(this._onMouseOverBG, this);
        this.entity.screen.game.input.onUp.remove(this._onMouseUp, this);
    },
    onTick: function() {
        this.sprite.x -= (this.sprite.x - this.tx) * 0.1;
    },
    prevX: 0,
    prevY: 0,
    performCut: function() {
        var minX = this.minX,
            i,
            l;
        for (i = 0, l = minX.length; i < l; ++i) {
            if (!minX[i])
                return;
        }
        var bmd = this.bmd,
            data = bmd.pixels,
            iw,
            w = bmd.width,
            left = this.entity.screen.game.make.bitmapData(bmd.width, bmd.height),
            right = this.entity.screen.game.make.bitmapData(bmd.width, bmd.height),
            leftpixels = left.pixels,
            rightpixels = right.pixels,
            leftMap = [],
            rightMap = [];
        for (iw = 0, i = 0, l = minX.length; i < l; ++i, iw += w) {
            var m = minX[i];
            for (j = 0; j < m; ++j)
                leftpixels[iw + j] = data[iw + j];
            for (; j < w; ++j)
                rightpixels[iw + j] = data[iw + j];
        }
        var children = this.sprite.children,
            map = this.entity.showMap || [];
        var hasLeft,
            hasRight;
        for (i = 0; i < children.length - 1; i++) {
            var child = children[i + 1];
            var y = child.y - child.anchor.y * child.height;
            var x = child.x - child.anchor.x * child.width + child.width * 0.5;
            var v = map[i] !== false;
            y = Math.round(y - this.bmdSprite.y - this.bmdSprite.anchor.y * this.bmdSprite.height);
            if (minX[y] + this.bmdSprite.x > x) {
                leftMap[i] = v;
                rightMap[i] = false;
                if (v)
                    hasLeft = true;
            } else {
                leftMap[i] = false;
                rightMap[i] = v;
                if (v)
                    hasRight = true;
            }
        }
        if (!hasLeft || !hasRight)
            return;
        left.context.putImageData(left.imageData, 0, 0);
        right.context.putImageData(right.imageData, 0, 0);
        left.dirty = true;
        right.dirty = true;
        this.entity.screen.addEntity(MAR.mergeTo(this.entity.__data, {
            background: left,
            showMap: leftMap,
            x: this.sprite.x
        }));
        this.entity.screen.addEntity(MAR.mergeTo(this.entity.__data, {
            background: right,
            showMap: rightMap,
            x: this.sprite.x
        }));
        if (typeof this.entity.background == "string") {
            this.sprite.visible = false;
        } else {
            this.entity.destroy();
        }
    },
    resetCurrentWord: function() {
        if (typeof this.entity.background == "string") {
            this.sprite.visible = this.enabled;
        } else {
            this.entity.destroy();
        }
    },
    _onMouseUp: function() {
        if (!this.sprite.visible)
            return;
        if (this.isCutting) {
            this.performCut();
            this.minX.fill(0);
            this.isCutting = false;
        }
    },
    _onMouseOverBG: function(pointer, x, y) {
        if (!this.sprite.visible)
            return;
        var minX = this.minX,
            maxX = this.bmd.width;
        if (pointer.identifier === null) {
            this.prevX = x;
            this.prevY = y;
            return;
        }
        var bgx = this.bmdSprite.x - this.bmdSprite.anchor.x * Math.abs(this.bmdSprite.width) + this.sprite.x;
        var bgy = this.bmdSprite.y - this.bmdSprite.anchor.y * Math.abs(this.bmdSprite.height) + this.sprite.y;
        var localX = Math.round(x - bgx);
        var localY = Math.round(y - bgy);
        var prevY = Math.round(this.prevY - bgy),
            prevX = Math.round(this.prevX - bgx),
            step = -1,
            min = prevY,
            max = localY;
        this.prevX = x;
        this.prevY = y;
        if (prevY < localY) {
            step = 1;
            x = localX;
            localX = prevX;
            prevX = x;
        } else {
            min = localY;
            max = prevY;
        }
        if (prevY < 0)
            prevY = 0;
        if (prevY > minX.length)
            prevY = minX.length;
        if (localY < 0)
            localY = 0;
        if (localY > minX.length)
            localY = minX.length;
        y = prevY;
        do {
            if (y < 0 || y > minX.length)
                continue;
            var w = (y - min) / (max - min);
            x = Math.round(prevX * w + localX * (1 - w));
            if (x < 0 || x > maxX)
                x = 0;
            minX[y] = x;
            if (y == localY)
                break;
            y += step
        } while (true)
        this.isCutting = true;
    },
    _onMouseOverLetter: function(sprite, pointer) {
        if (!this.sprite.visible)
            return;
        if (pointer.button && this.isCutting)
            minX.fill(0);
        this.isCutting = false;
    }
});
;
/* ../components/ZSort.js */
CLAZZ("components.ZSort", {
    EXTENDS: "components.Component",
    enabled: true,
    target: ["sprite"],
    z: null,
    STATIC: {
        sortList: null
    },
    onTick: function() {
        if (!this.enabled)
            return;
        if (!this.target || !this.target.length)
            return;
        var first = this.entity[this.target[0]];
        if (this.z === null)
            this.z = first.parent.getChildIndex(first);
        components.ZSort.sortList = components.ZSort.sortList || [];
        components.ZSort.sortList.push(this);
    },
    onPostTick: function() {
        var sortList = components.ZSort.sortList;
        if (!sortList)
            return;
        var min = NaN,
            target = this.target;
        sortList.sort(function(a, b) {
            return b.z - a.z;
        });
        for (var i = 0, c; c = sortList[i]; ++i) {
            var s = c.entity[c.target[0]];
            if (!s || !s.parent)
                continue;
            var cz = s.parent.getChildIndex(s);
            if (!(cz > min))
                min = cz;
        }
        var offset = 0;
        for (var i = 0, c; c = sortList[i]; ++i) {
            for (var j = 0; j < c.target.length; ++j) {
                var s = c.entity[c.target[j]];
                if (!s || !s.parent)
                    continue;
                s.parent.setChildIndex(s, min + offset);
                offset++;
            }
        }
        components.ZSort.sortList = null;
    }
});
;
/* ../components/Spline.js */
CLAZZ("components.Spline", {
    EXTENDS: "components.Component",
    enabled: true,
    path: null,
    scales: null,
    interpolationFactor: 0,
    distances: null,
    totalDistance: 0,
    iterator: 0,
    loop: false,
    speed: 0.1,
    onComplete: null,
    startScaleX: 1,
    startScaleY: 1,
    create: function() {
        if (!this.entity || !this.entity.sprite || !this.entity.sprite.scale)
            return;
        this.startScaleX = this.entity.sprite.scale.x;
        this.startScaleY = this.entity.sprite.scale.y;
    },
    follow: function(path, scales) {
        if (path || !this.distances) {
            this.interpolate(path || this.path);
            this.iterator = 0;
            this.scales = scales;
        }
        if (!this.path || !this.enabled || !this.speed)
            return;
        path = this.path;
        scales = this.scales;
        var dist = this.distances;
        var iterator = (this.iterator += this.speed / this.totalDistance),
            len = path.length / 3,
            sprite = this.entity.sprite;
        if (this.loop)
            iterator = iterator % 1;
        else if (iterator > 1) {
            iterator = 1;
            sprite.x = path[len * 3 - 3];
            sprite.y = path[len * 3 - 2];
            if (scales) {
                sprite.scale.x = scales[scales.length - 1] * this.startScaleX;
                sprite.scale.y = scales[scales.length - 1] * this.startScaleY;
            }
            this.path = null;
            this.scales = null;
            if (typeof this.onComplete == "function")
                this.onComplete.call(this);
            else if (this.onComplete)
                SOL.exec(this.onComplete, this.entity);
            return;
        } else if (iterator < 0)
            iterator = 0;
        var pos = Math.floor(iterator * this.totalDistance),
            acc = 0,
            nextdist;
        for (var i = 0; i < len; ++i) {
            nextdist = this.distances[i];
            if (acc + nextdist > pos)
                break;
            acc += nextdist;
        }
        var ni = (i + 1) % len;
        var f = (pos - acc) / nextdist;
        sprite.x = path[i * 3] * (1 - f) + path[ni * 3] * f;
        sprite.y = path[i * 3 + 1] * (1 - f) + path[ni * 3 + 1] * f;
        if (scales) {
            var sf = path[i * 3 + 2] * (1 - f) + path[ni * 3 + 2] * f;
            sf *= scales.length - 1;
            var si = Math.floor(sf);
            var nsi = (si + 1) % scales.length;
            sf -= si;
            var scale = (scales[si] || 1) * (1 - sf) + (scales[nsi] || 1) * sf;
            sprite.scale.x = scale * this.startScaleX;
            sprite.scale.y = scale * this.startScaleY;
        }
    },
    interpolate: function(path, points, tension, loop) {
        if (loop === undefined)
            loop = this.loop;
        else
            this.loop = !!loop;
        if (typeof path == "string")
            path = CALL("getPath", {
                name: path
            });
        if (!path)
            return;
        if (path.points)
            path = path.points;
        if (!(path instanceof Array))
            return;
        var np = this.path = makeCurve(path, tension, points, loop, true);
        var distances = this.distances = [],
            total = 0,
            npl = np.length;
        for (var i = 0; i < npl; i += 3) {
            var ni = i + 3;
            if (i == npl - 3) {
                if (loop)
                    ni = 0;
                else
                    ni = i;
            }
            var x = np[i] - np[ni];
            var y = np[i + 1] - np[ni + 1];
            var dist = Math.sqrt(x * x + y * y);
            total += dist;
            distances[distances.length] = dist;
        }
        this.totalDistance = total;
    }
});
;
/* ../components/SideTerrainGen.js */
CLAZZ("components.SideTerrainGen", {
    EXTENDS: "components.Component",
    seed: 0xBADF00D * Math.random(),
    tileW: 32,
    tileH: 32,
    scale: -1,
    smooth: -1,
    vec: null,
    mat: null,
    width: 0,
    height: 0,
    CONSTRUCTOR: function(data) {
        SUPER(data);
        MAR.seed = this.seed;
    },
    setBackgroundColor: function(lum) {
        lum = Math.max(0, Math.min(1, lum));
        var color = 0x5CCBFF;
        color = ((color >> 16) * lum << 16) | (((color >> 8) & 0xFF) * lum << 8) | ((color & 0xFF) * lum);
        this.entity.screen.game.stage.backgroundColor = "#" + color.toString(16);
    },
    getTerrainHeight: function(x) {
        var vec = this.vec;
        var h = vec[x | 0];
        h = this.entity.Grid.sprite.y - Math.round(h * this.tileH * this.scale) * this.tileH;
        return h;
    },
    setWorldSize: function(w, h) {
        this.entity.Grid.sprite.y = h;
        console.log("Height: ", h);
    },
    sprinkle: function(id, min, max, minX, minY, maxX, maxY) {
        var mat = this.mat || {};
        var tmp;
        this.mat = mat;
        var success = 0,
            retries = 0;
        minX /= this.tileW;
        maxX /= this.tileW;
        minY /= -this.tileH;
        maxY /= -this.tileH;
        if (minY > maxY) {
            tmp = minY;
            minY = maxY;
            maxY = tmp;
        }
        if (minX > maxX) {
            tmp = minX;
            minX = maxX;
            maxX = tmp;
        }
        var count = Math.floor((maxX - minX) * (maxY - minY) * 0.01);
        for (var i = 0; i < count && retries < 50 && success < max; ++i) {
            var x = Math.round(Math.random() * (maxX - minX) + minX);
            var y = Math.round(Math.random() * (maxY - minY) + minY);
            if (mat[y] && mat[y][x]) {
                retries++;
                continue;
            }
            if (!mat[y])
                mat[y] = {};
            mat[y][x] = id;
            this.entity.addTile(x, y, id);
            if (success < min)
                retries = 0;
            success++;
            if (success >= max)
                break;
        }
    },
    renderTerrain: function() {
        var vec = this.vec = [];
        if (this.smooth < 1)
            this.smooth = 1.5 + MAR.rand();
        this.__perlin_recurse(0, 32 * 10, 0, 0, 1, this.vec);
        if (this.scale == -1)
            this.scale = 1;
        this.setBackgroundColor(1 - (0 / 10));
        this.entity.clearMatrix();
        var mat = {};
        this.mat = mat;
        var h = 0,
            w = vec.length;
        for (var j = 0; j < w; ++j) {
            var vj = vec[j];
            if (vj == undefined)
                continue;
            vj = Math.round(-vj * this.tileH * this.scale);
            if (vj < h)
                h = vj;
            for (var i = 3; i > vj; --i) {
                var mati = (mat[i] = mat[i] || {});
                mati[j] = 1;
            }
        }
        for (si in mat) {
            var i = si | 0;
            var mati = mat[i];
            for (sj in mati) {
                var j = sj | 0;
                if (mati[j] === undefined)
                    continue;
                var n = 0;
                if (mat[i - 1] && mat[i - 1][j] != undefined)
                    n |= 4;
                if (mati[j + 1] != undefined)
                    n |= 2;
                if (mati[j - 1] != undefined)
                    n |= 1;
                if (n == 0 || n == 4) {
                    if (mat[i + 1] && (mat[i + 1][j] & 4))
                        mat[i + 1][j] ^= 4;
                    n = undefined;
                }
                mati[j] = n;
            }
        }
        for (i in mat) {
            mati = mat[i];
            for (j in mati) {
                var vj = vec[j];
                vj = Math.round(-vj * this.tileH * this.scale);
                var lum = ((i - 3) / (vj - 2));
                lum = (Math.min(1, Math.max(0, lum)) * 2 + 1) / 3;
                var tint = 0xFF * lum | (0xFF * lum << 8) | (0xFF * lum << 16);
                this.entity.addTile(j, i, mati[j], tint);
            }
        }
        this.width = vec.length * this.tileW;
        this.height = -h * this.tileH;
    },
    __perlin_recurse: function(a, b, ay, by, m, v) {
        if ((a | 0) == (b | 0))
            return v[a | 0] = ay;
        if ((a | 0) == (b | 0) - 1) {
            v[a | 0] = ay;
            v[b | 0] = by;
            return;
        }
        var r = -1;
        for (var t = 0; r <= 0 || r > 0.9 && t < 20; ++t)
            r = (ay + by) * 0.5 + MAR.rand() * m;
        m = m / this.smooth;
        this.__perlin_recurse(a, (a + b) * 0.5, ay, r, m, v);
        this.__perlin_recurse((a + b) * 0.5, b, r, by, m, v);
    }
});
;
/* ../components/PhysicsBody.js */
(function() {
    var Point = CLAZZ({
        x: 0,
        y: 0,
        nextX: 0,
        nextY: 0,
        velX: 0,
        velY: 0,
        vel: 0,
        mass: 0,
        drag: 0,
        CONSTRUCTOR: function(x, y, mass, drag) {
            this.x = x;
            this.y = y;
            this.mass = mass;
            this.drag = drag;
        }
    });
    CLAZZ("components.PhysicsMotor", {
        STATIC: {
            instance: null,
        },
        pool: null,
        bodies: null,
        CONSTRUCTOR: function() {
            components.PhysicsMotor.instance = this;
            this.bodies = [];
        },
        setPool: function(pool) {
            if (this.pool == pool)
                return;
            if (this.pool)
                this.pool.remove(this);
            this.pool = pool;
            pool.add(this);
            this.pool.silence("gridCollisionCheck");
        },
        addBody: function(body) {
            this.bodies.push(body);
        },
        removeBody: function(body) {
            var i = this.bodies.indexOf(body);
            if (i == -1)
                return;
            if (i == this.bodies.length - 1)
                this.bodies.pop();
            else
                this.bodies[i] = this.bodies.pop();
        },
        ops: 0,
        onTick: function() {
            var t = SOL.screen.timeDelta / 2000;
            if (!t)
                return;
            var p;
            for (var i = 0; i < this.bodies.length; ++i) {
                var body = this.bodies[i];
                if (!body.enabled)
                    continue;
                body.addForce(0, body.gravity * t);
                var nextX = 0,
                    nextY = 0,
                    pointCount = body.points.length;
                var rotSpeed = 0,
                    rotWeight = 0;
                var massX = body.massX / body.mass,
                    massY = body.massY / body.mass;
                var sprite = body.entity.sprite;
                var cosr = Math.cos(sprite.rotation),
                    sinr = Math.sin(sprite.rotation);
                for (p = 0; p < pointCount; ++p) {
                    var point = body.points[p];
                    point.nextX = point.x + point.velX * t;
                    point.nextY = point.y + point.velY * t;
                    point.hit = false;
                    var sx = Math.round(body.x + point.nextX);
                    var sy = Math.round(body.y + point.nextY);
                    CALL("gridCollisionCheck", sx, sy, function(tile, ox, oy) {
                        point.hit = true;
                        if (body.entity.onCollision && body.entity.onCollision(tile) == false)
                            return;
                        var dx = (body.x + point.x) - (ox + tile.x);
                        var dy = (body.y + point.y) - (oy + tile.y);
                        var vx = undefined,
                            vy = undefined;
                        var signX = Math.sign(point.velX);
                        var signY = Math.sign(point.velY);
                        var bounce = 0.5;
                        if (dx > dy) {
                            if (dx > 0 && dy < 0) {
                                if (signY > 0)
                                    vy = -point.velY;
                                if (signX < 0)
                                    vx = -point.velX;
                            } else if (dx < -dy) {
                                if (signY > 0)
                                    vy = -point.velY;
                            } else {
                                if (signX < 0)
                                    vx = -point.velX;
                            }
                        } else {
                            if (dx < 0 && dy < 0) {
                                if (signY < 0)
                                    vy = -point.velY;
                                if (signX > 0)
                                    vx = -point.velX;
                            } else if (dx < -dy) {
                                if (signX > 0)
                                    vx = -point.velX;
                            } else {
                                if (signY < 0)
                                    vy = -point.velY;
                            }
                        }
                        rotSpeed += Math.sin(Math.atan2(point.y - massY, point.x - massX)) * (point.velX * t * 1.7);
                        rotWeight += 1;
                        if (vx !== undefined)
                            vx = -point.velX + vx * bounce;
                        else
                            vx = -point.velX + point.velX * bounce;
                        if (vy !== undefined)
                            vy = -point.velY + vy * bounce;
                        else
                            vy = -point.velY + point.velY * bounce;
                        body.addForce(vx / 1000, vy / 1000);
                    });
                }
                for (p = 0; p < body.points.length; ++p) {
                    point = body.points[p];
                    nextX += point.velX * t;
                    nextY += point.velY * t;
                }
                nextX /= pointCount;
                nextY /= pointCount;
                if (rotWeight != 0)
                    body.rotSpeed = rotSpeed / rotWeight;
                var rotDelta = body.rotSpeed * t;
                sprite.rotation += rotDelta;
                body.rotSpeed *= 0.98;
                body.x += nextX;
                body.y += nextY;
                cosr = Math.cos(rotDelta);
                sinr = Math.sin(rotDelta);
                var ax = body.massX / body.mass;
                var ay = body.massY / body.mass;
                var anchorX = cosr * ax - sinr * ay;
                var anchorY = sinr * ax + cosr * ay;
                sprite.x = body.x + ax - anchorX;
                sprite.y = body.y + ay - anchorY;
                if (this.ops >= 10)
                    debugger;
            }
        }
    });
    CLAZZ("components.PhysicsBody", {
        EXTENDS: "components.Component",
        enabled: true,
        gravity: 9.8,
        points: null,
        rotSpeed: 0,
        mass: 0,
        massX: 0,
        massY: 0,
        x: 0,
        y: 0,
        nextX: 0,
        nextY: 0,
        minX: 0,
        minY: 0,
        maxX: 0,
        maxY: 0,
        CONSTRUCTOR: function(data) {
            SUPER(data);
            this.clearBody();
            if (!components.PhysicsMotor.instance)
                new components.PhysicsMotor();
            components.PhysicsMotor.instance.setPool(this.entity.screen.__pool);
            components.PhysicsMotor.instance.addBody(this);
        },
        addForce: function(x, y) {
            var points = this.points;
            for (var i = 0, point; point = points[i]; ++i) {
                point.velX = (point.velX + x * 1000) || 0;
                point.velY = (point.velY + y * 1000) || 0;
            }
        },
        clearBody: function() {
            this.points = [];
        },
        addPoint: function(x, y, mass, drag) {
            if (mass == undefined)
                mass = 1;
            if (drag == undefined)
                drag = 1;
            var point = new Point(x, y, mass, drag);
            this.points.push(point);
            this.mass += mass || 0;
            this.massX += x * mass || 0;
            this.massY += y * mass || 0;
            if (this.minX > x)
                this.minX = x;
            if (this.maxX < x)
                this.maxX = x;
            if (this.minY > y)
                this.minY = y;
            if (this.maxY < y)
                this.maxY = y;
            return point;
        },
        setTranslation: function(ax, ay, x, y) {
            this.x = x;
            this.y = y;
        },
        setRotation: function(ax, ay, angle) {
            var sprite = this.entity.sprite;
            sprite.rotation = angle;
            var cosr = Math.cos(angle);
            var sinr = Math.sin(angle);
            var anchorX = cosr * ax - sinr * ay;
            var anchorY = sinr * ax + cosr * ay;
            sprite.x = this.x - anchorX;
            sprite.y = this.y - anchorY;
            this.x = sprite.x;
            this.y = sprite.y;
        },
        enablePhysics: function() {
            if (this.enabled)
                return;
            this.enabled = true;
        }
    });
})();
;
/* ../components/AutoPos.js */
CLAZZ("components.AutoPos", {
    EXTENDS: "components.Component",
    speed: 0.3,
    entityTarget: null,
    targetX: 0,
    targetY: 0,
    minDelta: 0.01,
    enabled: true,
    updateEntity: true,
    accelerate: false,
    velX: 0,
    velY: 0,
    callback: "doneMoving",
    CONSTRUCTOR: function(data) {
        SUPER(data);
        if (this.callback == "doneMoving" && !this.entity.doneMoving)
            this.callback = null;
    },
    onTick: function() {
        if (!this.enabled || !this.entity.sprite)
            return;
        var tx = this.targetX;
        var ty = this.targetY;
        if (this.entityTarget && this.entityTarget.sprite) {
            tx += this.entityTarget.sprite.x;
            ty += this.entityTarget.sprite.y;
        }
        if (this.accelerate) {
            var dx = tx - this.entity.sprite.x;
            var dy = ty - this.entity.sprite.y;
            var l = Math.sqrt(dx * dx + dy * dy);
            dx = dx / l * this.speed;
            dy = dy / l * this.speed;
            this.velX += dx;
            this.velY += dy;
            if (this.velX * this.velX + this.velY * this.velY > l * l) {
                this.accelerate = false;
                this.velX = 0;
                this.velY = 0;
                this.entity.sprite.x -= (this.entity.sprite.x - tx) * this.speed;
                this.entity.sprite.y -= (this.entity.sprite.y - ty) * this.speed;
            } else {
                this.entity.sprite.x += this.velX;
                this.entity.sprite.y += this.velY;
            }
        } else {
            this.entity.sprite.x -= (this.entity.sprite.x - tx) * this.speed;
            this.entity.sprite.y -= (this.entity.sprite.y - ty) * this.speed;
        }
        if (this.updateEntity) {
            this.entity.x = this.entity.sprite.x;
            this.entity.y = this.entity.sprite.y;
        }
        if (Math.abs(this.entity.sprite.x - this.targetX) < this.minDelta && Math.abs(this.entity.sprite.y - this.targetY) < this.minDelta)
        {
            this.enabled = false;
            this.entity.sprite.x = this.targetX;
            this.entity.sprite.y = this.targetY;
            if (this.callback)
                SOL.exec(this.callback, this.entity);
        }
    },
    setAutoPosUpdateEntity: function(enabled) {
        this.updateEntity = enabled;
    },
    setAutoPosEnabled: function(enabled) {
        this.enabled = enabled || false;
    },
    setAutoPosTarget: function(targetX, targetY, callback) {
        if (callback !== undefined && this.callback != callback)
            this.callback = callback;
        this.targetY = targetY;
        this.targetX = targetX;
        this.enabled = true;
    },
    snapToAutoPosTarget: function() {
        this.entity.sprite.x = this.targetX;
        this.entity.sprite.y = this.targetY;
    }
});
;
/* ../components/TileCollision.js */
(function() {
    var world = null,
        tilesX = 0,
        tilesY = 0,
        tileWidth = 0,
        tileHeight = 0;
    function initWorld(tx, ty, tw, th) {
        components.TileCollision.world = world = [];
        tilesX = tx;
        tilesY = ty;
        tileWidth = tw;
        tileHeight = th;
        for (var y = 0; y < ty; ++y) {
            var a = [];
            world.push(a);
            for (var x = 0; x < tx; ++x)
                a.push({});
        }
    }
    CLAZZ("components.TileCollision", {
        EXTENDS: "components.Component",
        prevX: undefined,
        prevY: undefined,
        tx: undefined,
        ty: undefined,
        tw: undefined,
        th: undefined,
        bounds: undefined,
        STATIC: {
            world: world,
            initWorld: initWorld,
            destroy: function() {
                world = null;
            }
        },
        create: function() {
            this.bounds = this.entity.sprite.getBounds();
            this.tx = undefined;
            this.checkCollision();
        },
        checkCollision: function() {
            var x,
                y,
                w,
                h;
            var bounds = this.bounds;
            w = this.bounds.width = Math.abs(this.entity.sprite.width);
            h = this.bounds.height = Math.abs(this.entity.sprite.height);
            this.bounds.x = this.entity.sprite.x - w * this.entity.sprite.anchor.x;
            this.bounds.y = this.entity.sprite.y - h * this.entity.sprite.anchor.y;
            var tx = Math.floor((bounds.x + w * 0.5) / tileWidth);
            var ty = Math.floor((bounds.y + h * 0.5) / tileHeight);
            if (tx == this.tx && ty == this.ty)
                return;
            var maxy,
                maxx;
            if (this.tx != undefined) {
                maxy = Math.min(this.ty + this.th, tilesY - 1);
                maxx = Math.min(this.tx + this.tw, tilesX - 1);
                for (y = Math.max(0, this.ty); y <= maxy; ++y)
                    for (x = Math.max(0, this.tx); x <= maxx; ++x)
                        delete world[y][x][this.__uid];
            }
            this.tx = tx;
            this.ty = ty;
            this.tw = Math.ceil((bounds.x - tx + bounds.width) / tileWidth);
            this.th = Math.ceil((bounds.y - ty + bounds.height) / tileHeight);
            maxy = Math.min(this.ty + this.th, tilesY - 1);
            maxx = Math.min(this.tx + this.tw, tilesX - 1);
            for (y = Math.max(0, ty); y <= maxy; ++y)
                for (x = Math.max(0, tx); x <= maxx; ++x)
                    world[y][x][this.__uid] = this;
        }
    });
})();
;
/* ../components/RocketPad.js */
CLAZZ("components.RocketPad", {
    EXTENDS: "components.Component",
    base: null,
    stand: null,
    tileW: 32,
    tileH: 32,
    minX: 0,
    maxX: 32,
    minY: 0,
    maxY: 0,
    state: "",
    create: function() {
        this.stand = this.entity.loadSprite("baseStand");
        this.stand.anchor.setTo(0.5, 0);
        this.base = this.entity.loadSprite("base");
        this.base.anchor.setTo(0.5);
        this.base.inputEnabled = true;
        this.base.events.onInputDown.add(this.startDrag.bind(this));
        this.base.events.onInputUp.add(this.endDrag.bind(this));
    },
    startLaunch: function() {
        this.state = "launch";
    },
    dragging: null,
    dragX: 0,
    dragY: 0,
    dragAngle: 0,
    startDrag: function(target, pointer) {
        if (this.state != "launch")
            return;
        this.dragging = pointer;
        this.dragX = pointer.worldX - this.base.x;
        this.dragY = pointer.worldY - this.base.y;
        this.dragAngle = this.base.rotation;
    },
    onTick: function() {
        if (!this.dragging)
            return;
        var pointer = this.dragging;
        var angle = Math.angle(this.dragX, this.dragY, pointer.worldX - this.base.x, pointer.worldY - this.base.y) || 0;
        if (angle == 0 || this.base.rotation == this.dragAngle + angle)
            return;
        this.base.rotation = this.dragAngle + angle;
        CALL("onChangePlatformAngle", this.base.rotation);
        this.dragX = pointer.worldX - this.base.x;
        this.dragY = pointer.worldY - this.base.y;
        this.dragAngle = this.base.rotation;
    },
    endDrag: function() {
        this.dragging = null;
    },
    setWorldSize: function(w, h) {
        this.minX = ((w * 0.1) / this.tileW) | 0;
        this.maxX = (w / this.tileW - this.minX) | 0;
        this.minY = 0;
        this.maxY = (h * 0.99) | 0;
    },
    endFeedback: function() {
        this.resetPlatform();
    },
    resetPlatform: function(x) {
        var y,
            tries = 20;
        do {
            if (x == undefined)
                x = (Math.random() * (this.maxX - this.minX) + this.minX) | 0;
            y = CALL("getTerrainHeight", x);
            if (tries-- && y > this.maxY)
                x = y = undefined;
        } while (y == undefined);
        this.stand.x = this.base.x = x * this.tileW;
        this.stand.y = this.base.y = y - 128;
        this.base.rotation = 0;
        CALL("resetRocket", this.base.x, this.base.y);
    }
});
;
/* ../components/SpriteMap.js */
(function() {
    var maps = {};
    var screen = null;
    function createAlphaSprite(sprite, scale, color) {
        var w = Math.abs(sprite.width);
        var h = Math.abs(sprite.height);
        var alphaBMD = game.make.bitmapData(Math.ceil(w * scale), Math.ceil(h * scale));
        alphaBMD.draw(sprite, w * sprite.anchor.x * scale, h * sprite.anchor.y * scale, w * scale, h * scale, null, null, 0, undefined, undefined, 0.9, 0.9);
        alphaBMD.update();
        alphaBMD.processPixel(function(p) {
            return (p & 0xFF000000) | (color & 0xFFFFFF);
        });
        var alphaSprite = game.make.sprite(0, 0, alphaBMD);
        return {
            sprite: alphaSprite,
            bmd: alphaBMD
        };
    }
    ;
    var Map = CLAZZ({
        bmd: null,
        sprite: null,
        name: "",
        sprites: null,
        dirty: true,
        bounds: null,
        autoBounds: true,
        enabled: true,
        HND: 0,
        scale: NaN,
        xor: true,
        outline: false,
        CONSTRUCTOR: function(name) {
            maps[name] = this;
            this.name = name;
            this.sprites = {};
            this.sprite = game.add.sprite(0, 0, null);
            SOL.screen.__pool.add(this);
        },
        _getBounds: function() {
            var b;
            if (typeof this.bounds == "string") {
                var otherMap = maps[this.bounds];
                if (!otherMap) {
                    this.dirty = true;
                    return;
                }
                b = otherMap.bounds;
                this.sprite.scale.setTo(0.3);
            } else if (this.autoBounds || !this.bounds) {
                if (!this.bounds)
                    this.bounds = {
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0
                    };
                b = {
                    x: null,
                    y: null,
                    width: 0,
                    height: 0
                };
                for (var k in this.sprites) {
                    var comp = this.sprites[k];
                    if (!comp || !comp.alphaSprite || !comp.enabled)
                        continue;
                    var scale = this.scale || comp.scale;
                    var sb = comp.entity.sprite.getBounds();
                    var x = sb.x * scale;
                    var y = sb.y * scale;
                    var w = sb.width * scale + 5;
                    var h = sb.height * scale + 5;
                    if (b.x == null || b.x > x)
                        b.x = x;
                    if (b.y == null || b.y > y)
                        b.y = y;
                    if (b.width < x + w)
                        b.width = x + w;
                    if (b.height < y + h)
                        b.height = y + h;
                }
                b.width -= b.x || 0;
                b.height -= b.y || 0;
                b.x = Math.floor(b.x || 0);
                b.y = Math.floor(b.y || 0);
                b.width = Math.ceil(b.width || 0);
                b.height = Math.ceil(b.height || 0);
                MAR.mergeTo(this.bounds, b);
            } else
                b = this.bounds;
            return b;
        },
        _drawAlphaSprites: function(b) {
            for (var k in this.sprites) {
                var comp = this.sprites[k];
                if (!comp || !comp.alphaSprite || !comp.enabled)
                    continue;
                var alphaSprite = comp.alphaSprite;
                if (this.scale) {
                    var obj;
                    obj = createAlphaSprite(comp.entity.sprite, this.scale, comp.color);
                    obj.sprite.x = alphaSprite.x;
                    obj.sprite.y = alphaSprite.y;
                    obj.sprite.anchor.copyFrom(alphaSprite.anchor);
                    obj.sprite.rotation = alphaSprite.rotation;
                    alphaSprite = obj.sprite;
                }
                this.bmd.draw(alphaSprite, alphaSprite.x - b.x, alphaSprite.y - b.y);
                if (this.outline) {
                    obj = createAlphaSprite(comp.entity.sprite, 0.8, 0xFFFFFF);
                    obj.sprite.x = alphaSprite.x;
                    obj.sprite.y = alphaSprite.y;
                    obj.sprite.anchor.copyFrom(alphaSprite.anchor);
                    obj.sprite.rotation = alphaSprite.rotation;
                    obj.sprite.scale.x = alphaSprite.scale.x * 0.8;
                    obj.sprite.scale.y = alphaSprite.scale.y * 0.8;
                    var borderSprite = obj.sprite;
                    this.bmd.draw(borderSprite, borderSprite.x - b.x, borderSprite.y - b.y);
                }
            }
        },
        _configureAlphaSprites: function() {
            for (var k in this.sprites) {
                var comp = this.sprites[k];
                if (!comp || !comp.alphaSprite || !comp.enabled)
                    continue;
                var scale = this.scale || comp.scale;
                var alphaSprite = comp.alphaSprite;
                alphaSprite.x = Math.round(scale * comp.entity.sprite.x);
                alphaSprite.y = Math.round(scale * comp.entity.sprite.y);
                alphaSprite.scale.copyFrom(comp.entity.sprite.scale);
                alphaSprite.anchor.copyFrom(comp.entity.sprite.anchor);
                alphaSprite.rotation = comp.entity.sprite.rotation;
            }
        },
        addToSpriteMap: function(c) {
            if (!(c instanceof components.SpriteMap))
                return;
            this.sprites[c.__uid] = c;
        },
        removeFromSpriteMap: function(c) {
            delete this.sprites[c.__uid];
        },
        destroy: function() {
            if (this.bmd && this.bmd.destroy)
                this.bmd.destroy();
            if (this.sprite)
                this.sprite.destroy();
            this.sprite = null;
            this.bmd = null;
            delete maps[this.name];
        },
        onPostTick: function() {
            if (!this.dirty || !this.enabled)
                return;
            this.dirty = false;
            if (this.HND)
                SOL.screen.clearTimeout(this.HND);
            this.HND = SOL.screen.setTimeout(this.redraw, 250, this);
        },
        redraw: function() {
            if (!this.sprite)
                return;
            this._configureAlphaSprites();
            var mapBounds = this._getBounds();
            if (this.bmd)
                this.bmd.destroy();
            this.bmd = game.make.bitmapData(mapBounds.width || 1, mapBounds.height || 1);
            this.bmd.smoothed = false;
            this.sprite.setTexture(this.bmd.texture);
            this.bmd.fill(0, 0, 0, 0);
            if (this.xor)
                this.bmd.blendXor();
            this._drawAlphaSprites(mapBounds);
            this.bmd.update();
            this.bmd.context.putImageData(this.bmd.imageData, 0, 0);
            this.bmd.dirty = true;
            CALL("onUpdateMap" + this.name);
        }
    });
    CLAZZ("components.SpriteMap", {
        EXTENDS: "components.Component",
        enabled: true,
        mapName: "",
        alphaBMD: null,
        alphaSprite: null,
        data: null,
        scale: 1,
        color: 0xFF7F7F7F,
        bounds: null,
        autoBounds: null,
        x: 0,
        y: 0,
        rotation: 0,
        STATIC: {
            getMap: function(name) {
                return maps[name];
            },
            createMap: function(name) {
                return new Map(name);
            }
        },
        CONSTRUCTOR: function(data) {
            SUPER(data);
            if (SOL.screen != screen) {
                for (var k in maps)
                    maps[k].destroy();
                maps = {};
                screen = SOL.screen;
            }
        },
        _createAndConfigureMap: function() {
            var map = new Map(this.mapName);
            if (this.bounds)
                map.bounds = this.bounds;
            if (this.autoBounds !== null)
                map.autoBounds = !!this.autoBounds;
        },
        _destroyPreviousAlphaSprites: function() {
            if (this.alphaSprite)
                this.alphaSprite.destroy();
            if (this.alphaBMD)
                this.alphaBMD.destroy();
        },
        create: function() {
            if (this.entity.sprite)
                this.createAlphaSprite();
        },
        createAlphaSprite: function() {
            if (!maps || !maps[this.mapName])
                this._createAndConfigureMap();
            this._destroyPreviousAlphaSprites();
            var obj = createAlphaSprite(this.entity.sprite, this.scale, this.color);
            this.alphaSprite = obj.sprite;
            this.alphaBMD = obj.bmd;
            this.data = this.alphaBMD.context.getImageData(0, 0, this.alphaBMD.width, this.alphaBMD.height).data
            maps[this.mapName].addToSpriteMap(this);
        },
        onSpriteDirty: function() {
            if (!maps || !maps[this.mapName])
                return;
            var sprite = this.entity.sprite;
            this.rotation = sprite.rotation;
            this.x = sprite.x;
            this.y = sprite.y;
            this.entity.screen.updateTimeout("*onUpdateMap()", 300, undefined, "SpriteMapUpdate");
        },
        onPostTick: function() {
            if (!this.entity.sprite || !this.alphaSprite)
                return;
            if (this.entity.sprite.x != this.x || this.entity.sprite.y != this.y || this.entity.sprite.rotation != this.rotation)
                this.onSpriteDirty();
        },
        destroy: function() {
            if (maps && maps[this.mapName])
                maps[this.mapName].removeFromSpriteMap(this);
        }
    });
})();
;
/* ../components/Move.js */
CLAZZ("components.Move", {
    EXTENDS: "components.Component",
    speedX: 0,
    speedY: 0,
    enabled: true,
    updateEntity: true,
    onTick: function() {
        if (!this.enabled || !this.entity.sprite)
            return;
        this.entity.sprite.x += this.speedX;
        this.entity.sprite.y += this.speedY;
        if (this.updateEntity) {
            this.entity.x = this.entity.sprite.x;
            this.entity.y = this.entity.sprite.y;
        }
    }
});
;

;

</script><style>head, body { width: 100%; height: 100%; padding: 0; margin: 0; overflow: hidden; }</style></head><body onload="initSOL()"></body></html>